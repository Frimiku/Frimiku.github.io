<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2024/07/29/Java%E4%B9%8B%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/"/>
      <url>/2024/07/29/Java%E4%B9%8B%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/07/29/Hive%E4%B9%8B%E6%89%A9%E5%B1%95%E5%87%BD%E6%95%B0(UDF)/"/>
      <url>/2024/07/29/Hive%E4%B9%8B%E6%89%A9%E5%B1%95%E5%87%BD%E6%95%B0(UDF)/</url>
      
        <content type="html"><![CDATA[<h1 id="Hive之扩展函数-UDF"><a href="#Hive之扩展函数-UDF" class="headerlink" title="Hive之扩展函数(UDF)"></a>Hive之扩展函数(UDF)</h1><h2 id="1、概念讲解"><a href="#1、概念讲解" class="headerlink" title="1、概念讲解"></a>1、概念讲解</h2><p>当所提供的函数无法解决遇到的问题时，我们通常会进行自定义函数，即：扩展函数。Hive的扩展函数可分为三种：<strong>UDF</strong>,<strong>UDTF</strong>,<strong>UDAF</strong>。</p><blockquote><p>UDF：一进一出</p><p>UDTF：一进多出</p><p>UDAF：多进一出</p></blockquote><h2 id="2、UDF的基本实现"><a href="#2、UDF的基本实现" class="headerlink" title="2、UDF的基本实现"></a>2、UDF的基本实现</h2><h3 id="业务功能介绍"><a href="#业务功能介绍" class="headerlink" title="业务功能介绍"></a>业务功能介绍</h3><p>此处创建的UDF业务功能介绍：给定三个参数，参数一和参数二为日期，参数三为不同维度（年，季度，月，周，日）。根据不同维度计算两日期之间相差的值。</p><h3 id="一：依赖"><a href="#一：依赖" class="headerlink" title="一：依赖"></a>一：依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hive<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hive-exec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="二：接口的定义"><a href="#二：接口的定义" class="headerlink" title="二：接口的定义"></a>二：接口的定义</h3><h4 id="UDF基本接口定义"><a href="#UDF基本接口定义" class="headerlink" title="UDF基本接口定义"></a><strong>UDF基本接口定义</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.exec.UDFArgumentException;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">//校验:若无法匹配，则抛异常</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UDFCom</span> &#123;</span><br><span class="line">    <span class="comment">//校验传参的数量与元素</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">validateArgs</span><span class="params">(Object[] args,<span class="type">int</span> size)</span> <span class="keyword">throws</span> UDFArgumentException &#123;</span><br><span class="line">        <span class="comment">//校验 数量 是否为空</span></span><br><span class="line">        <span class="keyword">if</span> (size&gt;<span class="number">0</span> &amp;&amp; Objects.isNull(args) || args.length&lt;size)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UDFArgumentException</span>(size+<span class="string">&quot;args must be provided&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//size 之内的元素进行验证</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span> ;i &lt; size ; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (Objects.isNull(args[i]))&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UDFArgumentException</span>(<span class="string">&quot;type of args[&quot;</span>+i+<span class="string">&quot;] null&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//校验所有类型为基本类型</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">validateAllPrimitiveArgs</span><span class="params">(Object[] args,<span class="type">int</span> size)</span> <span class="keyword">throws</span> UDFArgumentException&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="comment">// ObjectInspector: 解析并获取内部数据结构信息的工具</span></span><br><span class="line">            <span class="comment">// getCategory():提取类型</span></span><br><span class="line">            <span class="comment">// PRIMITIVE:基本类型</span></span><br><span class="line">            <span class="keyword">if</span> (((ObjectInspector)args[i]).getCategory() != ObjectInspector.Category.PRIMITIVE)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UDFArgumentException</span>(<span class="string">&quot;only support primitive type&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="日期接口定义（业务需求）"><a href="#日期接口定义（业务需求）" class="headerlink" title="日期接口定义（业务需求）"></a><strong>日期接口定义（业务需求）</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.metadata.HiveException;</span><br><span class="line"></span><br><span class="line"><span class="comment">//校验:若无法匹配，则抛异常</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DateCom</span> &#123;</span><br><span class="line">    <span class="comment">//日期的格式验证</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">validateDateFormat</span><span class="params">(String...dateStrArr)</span> <span class="keyword">throws</span> HiveException &#123;</span><br><span class="line">        <span class="keyword">for</span> (String s : dateStrArr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!s.matches(<span class="string">&quot;\\d&#123;4&#125;-(0?[1-9]|1[0-2])-(0?[1-9]|[1-2][0-9]|3[0-1])&quot;</span>))&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">HiveException</span>(<span class="string">&quot;date format illegal : &quot;</span> + s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三：方法的实现"><a href="#三：方法的实现" class="headerlink" title="三：方法的实现"></a>三：方法的实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ybg.hive.ql.func.udf;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.exec.UDFArgumentException;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.metadata.HiveException;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.udf.generic.GenericUDF;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.serde2.objectinspector.primitive.PrimitiveObjectInspectorFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UDFDataDiffByUnit</span> <span class="keyword">extends</span> <span class="title class_">GenericUDF</span> <span class="keyword">implements</span> <span class="title class_">UDFCom</span>, DateCom &#123;</span><br><span class="line">    <span class="comment">//管理参数的【类型】 =&gt; 验证</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ObjectInspector <span class="title function_">initialize</span><span class="params">(ObjectInspector[] arguments)</span> <span class="keyword">throws</span> UDFArgumentException &#123;</span><br><span class="line">        <span class="comment">//验证</span></span><br><span class="line">        validateArgs(arguments,<span class="number">2</span>);<span class="comment">// 验证参数数量及元素</span></span><br><span class="line">        validateAllPrimitiveArgs(arguments,<span class="number">2</span>);<span class="comment">// 验证类型是否为基本类型</span></span><br><span class="line">        <span class="keyword">return</span> PrimitiveObjectInspectorFactory.javaStringObjectInspector;<span class="comment">// 传进来参数为字符串</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//管理参数的【值】 =&gt; 验证 + 业务</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">evaluate</span><span class="params">(DeferredObject[] arguments)</span> <span class="keyword">throws</span> HiveException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 验证</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        validateArgs(arguments,<span class="number">2</span>);<span class="comment">//验证数量</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 业务功能</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">strDateSmall</span> <span class="operator">=</span> arguments[<span class="number">0</span>].get().toString();<span class="comment">//获取【参数一】的日期</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">strDateBig</span> <span class="operator">=</span> arguments[<span class="number">1</span>].get().toString();<span class="comment">//获取【参数二】的日期</span></span><br><span class="line">        <span class="comment">//日期格式的验证</span></span><br><span class="line">        validateDateFormat(strDateSmall,strDateBig);</span><br><span class="line">        <span class="comment">//比较日期大小：规定 前面日期 &lt; 后面日期</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">dateSmall</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">dateBig</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dateSmall.setTime(sdf.parse(strDateSmall));</span><br><span class="line">            dateBig.setTime(sdf.parse(strDateBig));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">HiveException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (dateSmall.after(dateBig))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">HiveException</span>(<span class="string">&quot;dateSmall by arg1 &gt; dateBig by arg2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//根据不同情况进行计算</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">unit</span> <span class="operator">=</span> arguments[<span class="number">2</span>].get().toString().toLowerCase();</span><br><span class="line">        <span class="type">int</span> <span class="variable">intUnit</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">switch</span> (unit)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;y&quot;</span>:<span class="comment">// 2019-10-15  2020-8-15</span></span><br><span class="line">                intUnit = Calendar.YEAR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;q&quot;</span>: <span class="keyword">case</span> <span class="string">&quot;m&quot;</span>:</span><br><span class="line">                intUnit = Calendar.MONTH;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;w&quot;</span>: <span class="keyword">case</span> <span class="string">&quot;d&quot;</span>:</span><br><span class="line">                intUnit = Calendar.DATE;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">HiveException</span>(<span class="string">&quot;not support unit by arg3 : &quot;</span> + unit);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">diff</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            diff++;</span><br><span class="line">            dateSmall.add(intUnit,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (dateSmall.after(dateBig)) &#123;</span><br><span class="line">                <span class="comment">//结束的标志</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (unit)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;q&quot;</span>:</span><br><span class="line">                diff/=<span class="number">3</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;w&quot;</span>:</span><br><span class="line">                diff/=<span class="number">7</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> diff;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDisplayString</span><span class="params">(String[] children)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.isNull(children) || children.length==<span class="number">0</span> || <span class="literal">null</span> == children[<span class="number">0</span>] ? <span class="literal">null</span> : children[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四：打jar包上传至HDFS"><a href="#四：打jar包上传至HDFS" class="headerlink" title="四：打jar包上传至HDFS"></a>四：打jar包上传至HDFS</h3><p><strong>第一步</strong>：打执行jar包，选择选择 package 选项。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Hive%E4%B9%8BUDF1.png"></p><p><strong>第二步</strong>：找到jar包的物理磁盘位置（右键点击jar包 &#x3D;&gt; Open in &#x3D;&gt; Explorer）<br><strong>第三步</strong>：将jar包上传至HDFS</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Hive%E4%B9%8BUDF2.png"></p><h3 id="五：创建-hive-udf-映射至hdfs-jar包并指定主类"><a href="#五：创建-hive-udf-映射至hdfs-jar包并指定主类" class="headerlink" title="五：创建 hive udf 映射至hdfs jar包并指定主类"></a>五：创建 hive udf 映射至hdfs jar包并指定主类</h3><p><strong>基本语法</strong>：</p><p>全包路径：右键 &#x3D;&gt; copy path &#x3D;&gt; copy reference</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> fl_day <span class="keyword">as</span> <span class="string">&#x27;继承了GenericUDF的全包路径&#x27;</span></span><br><span class="line"><span class="keyword">using</span> jar <span class="string">&#x27;hdfs上的jar包的路径&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>实际运用</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建连接</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> uud <span class="keyword">as</span> <span class="string">&#x27;com.ybg.hive.ql.func.udf.UDFDataDiffByUnit&#x27;</span></span><br><span class="line"><span class="keyword">using</span> jar <span class="string">&#x27;hdfs://single:9000/hive/udf/hiveudf-2.3.jar&#x27;</span>;</span><br><span class="line"><span class="comment">-- 测试</span></span><br><span class="line"><span class="keyword">select</span> uud(<span class="string">&#x27;2018-8-15&#x27;</span>,<span class="string">&#x27;2020-8-15&#x27;</span>,&quot;q&quot;) <span class="keyword">as</span> quarterDiff</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Hive%E4%B9%8BUDF3.png"></p><h3 id="六：后期更新函数"><a href="#六：后期更新函数" class="headerlink" title="六：后期更新函数"></a>六：后期更新函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一步：先删函数</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">function</span> if <span class="keyword">exists</span> 函数名;</span><br><span class="line">第二步：关闭连接</span><br><span class="line">File <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">Close</span> Project</span><br><span class="line">第三步：重新注入</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> uud <span class="keyword">as</span> <span class="string">&#x27;com.ybg.hive.ql.func.udf.UDFDataDiffByUnit&#x27;</span></span><br><span class="line"><span class="keyword">using</span> jar <span class="string">&#x27;hdfs://single:9000/hive/udf/hiveudf-1.0-SNAPSHOT.jar&#x27;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hive表【汇总】</title>
      <link href="/2024/07/29/Hive%E8%A1%A8%E3%80%90%E6%B1%87%E6%80%BB%E3%80%91/"/>
      <url>/2024/07/29/Hive%E8%A1%A8%E3%80%90%E6%B1%87%E6%80%BB%E3%80%91/</url>
      
        <content type="html"><![CDATA[<h1 id="提前必备"><a href="#提前必备" class="headerlink" title="提前必备"></a>提前必备</h1><h3 id="1、内部表和外部表的区别"><a href="#1、内部表和外部表的区别" class="headerlink" title="1、内部表和外部表的区别"></a>1、内部表和外部表的区别</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%86%85%E9%83%A8%E8%A1%A8%E5%92%8C%E5%A4%96%E9%83%A8%E8%A1%A8%E7%9A%84%E5%8C%BA%E5%88%AB.png"></p><p><strong>概念讲解</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">外部表：</span><br><span class="line">1、存放他人给予自己的数据</span><br><span class="line">2、当我们删除表操作时，会将表的元数据删除，保留数据文件</span><br><span class="line">内部表：</span><br><span class="line">1、存放已有的数据</span><br><span class="line">2、当我们删除表操作时，会将表的元数据以及数据文件都删除掉</span><br></pre></td></tr></table></figure><h3 id="2、公共查询语句"><a href="#2、公共查询语句" class="headerlink" title="2、公共查询语句"></a>2、公共查询语句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with：一次查询内可无数次调用</span><br><span class="line">temporary table：一次会话内可无数次调用【临时】</span><br><span class="line">view与table：何时都可无数次调用【永久】</span><br></pre></td></tr></table></figure><h1 id="一：内部表"><a href="#一：内部表" class="headerlink" title="一：内部表"></a>一：内部表</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ul><li><p>内部表是由 Hive 管理数据和元数据的一种表类型，通常包含表的名称、列定义、存储格式等信息。</p></li><li><p>【默认创建的表】就是【内部表】</p></li></ul><h2 id="基本形式"><a href="#基本形式" class="headerlink" title="基本形式"></a>基本形式</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> inner_table_employee(</span><br><span class="line">name string,</span><br><span class="line">places <span class="keyword">array</span><span class="operator">&lt;</span>string<span class="operator">&gt;</span>,</span><br><span class="line">info struct<span class="operator">&lt;</span>gender:string,age:<span class="type">int</span><span class="operator">&gt;</span>,</span><br><span class="line">scores map<span class="operator">&lt;</span>string,<span class="type">int</span><span class="operator">&gt;</span>,</span><br><span class="line">dept_pos map<span class="operator">&lt;</span>string,string<span class="operator">&gt;</span></span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;|&#x27;</span></span><br><span class="line">collection items terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">map keys terminated <span class="keyword">by</span> <span class="string">&#x27;:&#x27;</span></span><br><span class="line">lines terminated <span class="keyword">by</span> <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">stored <span class="keyword">as</span> textfile;</span><br></pre></td></tr></table></figure><h1 id="二：外部表"><a href="#二：外部表" class="headerlink" title="二：外部表"></a>二：外部表</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><ul><li><p>创建表时，带有【external】关键字的表即为【外部表】。</p></li><li><p>外部表允许在 Hive 中定义一个表结构，并对外部存储系统中的数据进行查询和分析，而不会对数据本身进行移动或修改。</p></li></ul><h2 id="基本形式-1"><a href="#基本形式-1" class="headerlink" title="基本形式"></a>基本形式</h2><h3 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;name&quot;:&quot;henry&quot;,&quot;age&quot;:22,&quot;gender&quot;:&quot;male&quot;,&quot;phone&quot;:&quot;18014499655&quot;&#125;</span><br><span class="line">&#123;&quot;name&quot;:&quot;pola&quot;,&quot;age&quot;:18,&quot;gender&quot;:&quot;female&quot;,&quot;phone&quot;:&quot;18014499656&quot;&#125;</span><br></pre></td></tr></table></figure><h3 id="外部表创建"><a href="#外部表创建" class="headerlink" title="外部表创建"></a>外部表创建</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> hive_ext_json_family(</span><br><span class="line">name string,</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender string,</span><br><span class="line">phone string</span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format serde <span class="string">&#x27;org.apache.hive.hcatalog.data.JsonSerDe&#x27;</span></span><br><span class="line">stored <span class="keyword">as</span> textfile</span><br><span class="line">location <span class="string">&#x27;/hive_data/hive_cha01/json&#x27;</span>;</span><br></pre></td></tr></table></figure><h1 id="三：分区表"><a href="#三：分区表" class="headerlink" title="三：分区表"></a>三：分区表</h1><h2 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h2><p>将一份大的文件拆分成多份，每一份存储在hdfs上表空间内的一个专门文件夹内</p><p>文件夹的命名包含了字段名和字段值，如：year&#x3D;2012 形式。</p><p>注意：year可以作为字段来使用，但本质上year不是原始表字段，是分区字段。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hive%E5%88%86%E5%8C%BA.png"></p><h2 id="2、优势"><a href="#2、优势" class="headerlink" title="2、优势"></a>2、优势</h2><p>hive进行查询时就是文件流读文件，即使读取一条数据也需要加载整个文件。因此分区表将文件切割成更小的粒度，当需要针对局部数据进行检索、聚合等处理时只需要加载对应的粒度即可，从而提高了处理的效率。</p><h2 id="3、建立分区要素"><a href="#3、建立分区要素" class="headerlink" title="3、建立分区要素"></a>3、建立分区要素</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、字段频繁出现于：</span><br><span class="line">一：where... , on...</span><br><span class="line">二：group by... , distribute by ... , cluster by...</span><br><span class="line">此时，就要考虑将此字段来建立分区</span><br><span class="line">2、数据的容量(大)，需要考虑建立分区</span><br></pre></td></tr></table></figure><h2 id="4、基本语法形式"><a href="#4、基本语法形式" class="headerlink" title="4、基本语法形式"></a>4、基本语法形式</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">external</span>] <span class="keyword">table</span> TABLE_NAME(FIELD_NAME TYPE,...)</span><br><span class="line">partitioned <span class="keyword">by</span>(PAR_FIELD_NAME TYPE,...)✔</span><br><span class="line"><span class="type">row</span> format delimited <span class="operator">|</span> serde <span class="string">&#x27;SERDE_CLASS&#x27;</span></span><br><span class="line">....</span><br></pre></td></tr></table></figure><h2 id="5、实际操作"><a href="#5、实际操作" class="headerlink" title="5、实际操作"></a>5、实际操作</h2><h3 id="一：分区的建立"><a href="#一：分区的建立" class="headerlink" title="一：分区的建立"></a>一：分区的建立</h3><h4 id="创建一级分区"><a href="#创建一级分区" class="headerlink" title="创建一级分区"></a>创建一级分区</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> test1w_partitioned_by_year;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> test1w_partitioned_by_year(</span><br><span class="line">user_id <span class="type">int</span>,</span><br><span class="line">user_gender string,</span><br><span class="line">order_time <span class="type">timestamp</span>,</span><br><span class="line">order_amount <span class="type">decimal</span>(<span class="number">6</span>,<span class="number">2</span>)</span><br><span class="line">)</span><br><span class="line">partitioned <span class="keyword">by</span> (<span class="keyword">year</span> <span class="type">int</span>)✔</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;;&#x27;</span></span><br><span class="line">stored <span class="keyword">as</span> textfile;</span><br></pre></td></tr></table></figure><h4 id="创建多级分区【以二级分区为例】"><a href="#创建多级分区【以二级分区为例】" class="headerlink" title="创建多级分区【以二级分区为例】"></a>创建多级分区【以二级分区为例】</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> test1w_partitioned_by_year_month;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> test1w_partitioned_by_year_month(</span><br><span class="line">    user_id <span class="type">int</span>,</span><br><span class="line">    user_gender string,</span><br><span class="line">    order_time <span class="type">timestamp</span>,</span><br><span class="line">    order_amount <span class="type">decimal</span>(<span class="number">6</span>,<span class="number">2</span>)</span><br><span class="line">)</span><br><span class="line">partitioned <span class="keyword">by</span>(<span class="keyword">year</span> <span class="type">int</span>,<span class="keyword">month</span> <span class="type">int</span>)✔</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;;&#x27;</span></span><br><span class="line">stored <span class="keyword">as</span> textfile;</span><br></pre></td></tr></table></figure><h3 id="二：数据的操作"><a href="#二：数据的操作" class="headerlink" title="二：数据的操作"></a>二：数据的操作</h3><h4 id="静态分区"><a href="#静态分区" class="headerlink" title="静态分区"></a>静态分区</h4><p><strong>主要用处</strong>：客户按分区级别改|插入数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>筛选原文件：</span><br><span class="line">一级分区：</span><br><span class="line">        cat test1w.log <span class="operator">|</span> awk <span class="string">&#x27;/2012-/&#123;print $0&#125;&#x27;</span><span class="operator">&gt;</span>test2012.log</span><br><span class="line">        cat test1w.log <span class="operator">|</span> awk <span class="string">&#x27;/2013-/&#123;print $0&#125;&#x27;</span><span class="operator">&gt;</span>test2013.log</span><br><span class="line">多级分区【以二级分区为例】：</span><br><span class="line">cat test1w.log <span class="operator">|</span> awk <span class="string">&#x27;/2012-7/&#123;print $0&#125;&#x27;</span><span class="operator">&gt;</span>test20127.log</span><br><span class="line">cat test1w.log <span class="operator">|</span> awk <span class="string">&#x27;/2012-8/&#123;print $0&#125;&#x27;</span><span class="operator">&gt;</span>test20128.log</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>装到两分区内：</span><br><span class="line">一级分区：</span><br><span class="line">test2012.log:</span><br><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/root/file/test2012.log&#x27;</span> </span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> hive_internal_par_regex_test1w <span class="keyword">partition</span>(<span class="keyword">year</span><span class="operator">=</span><span class="number">2012</span>);</span><br><span class="line"></span><br><span class="line">test2013.log:</span><br><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/root/file/test2013.log&#x27;</span> </span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> hive_internal_par_regex_test1w <span class="keyword">partition</span>(<span class="keyword">year</span><span class="operator">=</span><span class="number">2013</span>);</span><br><span class="line"></span><br><span class="line">多级分区【以二级分区为例】：</span><br><span class="line">test20127.log:</span><br><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/root/file/test20127.log&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> zhou.test1w_partitioned_by_year_month <span class="keyword">partition</span>(<span class="keyword">year</span><span class="operator">=</span><span class="number">2012</span>,<span class="keyword">month</span><span class="operator">=</span><span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">test20128.log:</span><br><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/root/file/test20128.log&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> zhou.test1w_partitioned_by_year_month <span class="keyword">partition</span>(<span class="keyword">year</span><span class="operator">=</span><span class="number">2012</span>,<span class="keyword">month</span><span class="operator">=</span><span class="number">8</span>);</span><br></pre></td></tr></table></figure><h4 id="动态分区"><a href="#动态分区" class="headerlink" title="动态分区"></a>动态分区</h4><p><strong>主要用处</strong>：项目初期导入数据</p><p><strong>准备工作[动态配置]</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set hive.exec.dynamic.partition=true;-- 1、会话</span><br><span class="line">set hive.exec.dynamic.partition.mode=nonstrict;</span><br><span class="line">hive-site.xml-- 2、个性化配置</span><br><span class="line">hive-default.xml-- 3、为所有配置项提供默认配置</span><br></pre></td></tr></table></figure><p><strong>具体代码</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">一级分区：</span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> test1w_partitioned_by_year <span class="keyword">partition</span> (`<span class="keyword">year</span>`)</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,<span class="keyword">year</span>(order_time) <span class="keyword">from</span> test1w;</span><br><span class="line"></span><br><span class="line">多级分区【以二级分区为例】：</span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> zhou.test1w_partitioned_by_year_month <span class="keyword">partition</span> (`<span class="keyword">year</span>`,`<span class="keyword">month</span>`)</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> ,<span class="keyword">year</span>(order_time),<span class="keyword">month</span>(order_time) <span class="keyword">from</span> test1w <span class="keyword">where</span> <span class="keyword">year</span>(order_time)<span class="operator">&lt;=</span><span class="number">2012</span>;</span><br></pre></td></tr></table></figure><h3 id="三：分区的其他操作【查删改】"><a href="#三：分区的其他操作【查删改】" class="headerlink" title="三：分区的其他操作【查删改】"></a>三：分区的其他操作【查删改】</h3><h4 id="–-查看分区信息"><a href="#–-查看分区信息" class="headerlink" title="– 查看分区信息"></a>– 查看分区信息</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> partitions 表名;</span><br></pre></td></tr></table></figure><h4 id="–-手动添加分区"><a href="#–-手动添加分区" class="headerlink" title="– 手动添加分区"></a>– 手动添加分区</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一级分区：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> zhou.test1w_partitioned_by_year <span class="keyword">add</span> <span class="keyword">partition</span> (<span class="keyword">year</span><span class="operator">=</span><span class="number">2014</span>);</span><br><span class="line">多级分区【以二级分区为例】：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> zhou.test1w_partitioned_by_year_month <span class="keyword">add</span> <span class="keyword">partition</span> (<span class="keyword">year</span><span class="operator">=</span><span class="number">2012</span>,<span class="keyword">month</span><span class="operator">=</span><span class="number">7</span>);</span><br></pre></td></tr></table></figure><h4 id="–-手动删除分区"><a href="#–-手动删除分区" class="headerlink" title="– 手动删除分区"></a>– 手动删除分区</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一级分区：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> zhou.test1w_partitioned_by_year <span class="keyword">drop</span> <span class="keyword">partition</span> (<span class="keyword">year</span><span class="operator">=</span><span class="number">2014</span>);</span><br><span class="line">多级分区【以二级分区为例】：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> zhou.test1w_partitioned_by_year_month <span class="keyword">drop</span> <span class="keyword">partition</span> (<span class="keyword">year</span><span class="operator">=</span><span class="number">2012</span>,<span class="keyword">month</span><span class="operator">=</span><span class="number">7</span>);</span><br></pre></td></tr></table></figure><h1 id="四：分桶表"><a href="#四：分桶表" class="headerlink" title="四：分桶表"></a>四：分桶表</h1><h2 id="1、概念-1"><a href="#1、概念-1" class="headerlink" title="1、概念"></a>1、概念</h2><p>分桶表时将一个表或分区内的数据，拆分成更小的文件片段，使抽样更加高效。</p><h2 id="2、必知点"><a href="#2、必知点" class="headerlink" title="2、必知点"></a>2、必知点</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、分桶字段必须是表中已存在的原始字段</span><br><span class="line">2、默认采用：原始字段值的hashcode%分桶数列 =&gt; 决定当前行数据会被拆分到几号桶</span><br><span class="line">3、优势：数据采样</span><br><span class="line">4、采样率：10% -&gt; 桶数定义为10</span><br><span class="line">5、一般是在 【分区】 的基础上进行 【分桶】,更好地优化查询性能。</span><br></pre></td></tr></table></figure><h2 id="3、实际应用场景"><a href="#3、实际应用场景" class="headerlink" title="3、实际应用场景"></a>3、实际应用场景</h2><h3 id="1-抽样【数据采样】"><a href="#1-抽样【数据采样】" class="headerlink" title="1.抽样【数据采样】"></a>1.抽样【数据采样】</h3><p>在开发中，数据量大的情况下，我们为了针对开发做测试，就可以采用分桶来进行数据采样，采样得到的结果是一个具有代表性的查询结果，可以达到快速开发的目的。</p><h3 id="2-拉链表【便于修改】"><a href="#2-拉链表【便于修改】" class="headerlink" title="2.拉链表【便于修改】"></a>2.拉链表【便于修改】</h3><p>修改某行数据时，无需将整个文件都读取出来，只需将小份文件导出进行修改即可。</p><h2 id="4、实际操作"><a href="#4、实际操作" class="headerlink" title="4、实际操作"></a>4、实际操作</h2><h3 id="一：创建分桶表"><a href="#一：创建分桶表" class="headerlink" title="一：创建分桶表"></a>一：创建分桶表</h3><p>在根据year分区的基础上，对每个year内部进行了分桶，分为4份数据，便于抽样|修改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> test1w_partitioned_SeparateBarrel;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> test1w_partitioned_SeparateBarrel(</span><br><span class="line">    user_id <span class="type">int</span>,</span><br><span class="line">    user_gender string,</span><br><span class="line">    order_time <span class="type">timestamp</span>,</span><br><span class="line">    order_amount <span class="type">decimal</span>(<span class="number">6</span>,<span class="number">2</span>)</span><br><span class="line">)</span><br><span class="line">partitioned <span class="keyword">by</span>(<span class="keyword">year</span> <span class="type">int</span>)</span><br><span class="line">clustered <span class="keyword">by</span>(order_time) <span class="keyword">into</span> <span class="number">4</span> buckets✔<span class="operator">=</span><span class="operator">&gt;</span> 此时采样率：<span class="number">25</span><span class="operator">%</span></span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;;&#x27;</span></span><br><span class="line">stored <span class="keyword">as</span> textfile;</span><br></pre></td></tr></table></figure><h3 id="二：数据的操作-1"><a href="#二：数据的操作-1" class="headerlink" title="二：数据的操作"></a>二：数据的操作</h3><h4 id="准备工作-动态配置"><a href="#准备工作-动态配置" class="headerlink" title="准备工作[动态配置]"></a>准备工作[动态配置]</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set hive.exec.dynamic.partition=true;-- 1、会话</span><br><span class="line">set hive.exec.dynamic.partition.mode=nonstrict;</span><br><span class="line">hive-site.xml-- 2、个性化配置</span><br><span class="line">hive-default.xml-- 3、为所有配置项提供默认配置</span><br></pre></td></tr></table></figure><h4 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">table</span> zhou.test1w_partitioned_SeparateBarrel <span class="keyword">partition</span> (<span class="keyword">year</span>)</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,<span class="keyword">year</span>(order_time) <span class="keyword">from</span> test1w;</span><br></pre></td></tr></table></figure><h3 id="三：实际应用【数据采集】"><a href="#三：实际应用【数据采集】" class="headerlink" title="三：实际应用【数据采集】"></a>三：实际应用【数据采集】</h3><h4 id="–随机抽样【基于整行数据】"><a href="#–随机抽样【基于整行数据】" class="headerlink" title="–随机抽样【基于整行数据】"></a>–随机抽样【基于整行数据】</h4><p><strong>基本解释</strong>：</p><ul><li>取每个桶中 四分之三的数据【很少用】</li><li>进行随机抽样，不考虑数据的顺序或时间等因素，可以使用类似 <code>bucket 3 out of 4 on rand()</code>形式，这样每次抽样的结果可能会有所不同，适合需要随机性的分析或实验。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test1w_partitioned_SeparateBarrel</span><br><span class="line"><span class="keyword">tablesample</span>(bucket <span class="number">3</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">4</span> <span class="keyword">on</span> rand())s;</span><br></pre></td></tr></table></figure><h4 id="–分桶字段抽样【基于指定列】✔"><a href="#–分桶字段抽样【基于指定列】✔" class="headerlink" title="–分桶字段抽样【基于指定列】✔"></a>–分桶字段抽样【基于指定列】✔</h4><p><strong>基本解释</strong>：</p><ul><li><p>取每个桶中 四分之一的数据[桶]【随机】 &#x3D;&gt; 推荐使用，使用分桶列更高效</p></li><li><p>从【有序的数据】中抽样，例如按照时间排序的订单数据，可以使用类似于 <code>bucket 3 out of 4 on order_time</code>形式，这样可以保证抽样数据具有一定的顺序性和连续性。</p></li></ul><p><strong>最终结果分析</strong>：最后获取的数据是在每个分区【文件夹】内随机抽取指定数量【如：四分之一]的数据[桶]】&#x3D;&gt; 抽到的数据[桶]是具有<strong>随机性</strong>的。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> order_count <span class="keyword">from</span> test1w_partitioned_SeparateBarrel</span><br><span class="line"><span class="keyword">tablesample</span> ( bucket <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">4</span> <span class="keyword">on</span> order_time)s</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">year</span>;</span><br></pre></td></tr></table></figure><h1 id="五：临时表-temporary"><a href="#五：临时表-temporary" class="headerlink" title="五：临时表(temporary)"></a>五：临时表(temporary)</h1><h2 id="1、概念-2"><a href="#1、概念-2" class="headerlink" title="1、概念"></a>1、概念</h2><ul><li>一次链接（会话session）内临时创建的表格，会话结束后自动删除</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">默认hdfs路径：/tmp/hive/root 内根据时间寻找临时表</span><br><span class="line">idea中：show tables; 才可看到临时表。</span><br></pre></td></tr></table></figure><h2 id="2、实际操作"><a href="#2、实际操作" class="headerlink" title="2、实际操作"></a>2、实际操作</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> temporary <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> test1w_gender <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> user_gender,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> gender_cnt <span class="keyword">from</span> zhou.test1w <span class="keyword">group</span> <span class="keyword">by</span> user_gender;</span><br></pre></td></tr></table></figure><h1 id="六：视图-view"><a href="#六：视图-view" class="headerlink" title="六：视图(view)"></a>六：视图(view)</h1><h2 id="1、概念-3"><a href="#1、概念-3" class="headerlink" title="1、概念"></a>1、概念</h2><ul><li>本质：一条较为复杂的共用的查询语句</li></ul><h2 id="2、实际操作-1"><a href="#2、实际操作-1" class="headerlink" title="2、实际操作"></a>2、实际操作</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> if <span class="keyword">not</span> <span class="keyword">exists</span> hive_view_test1w_Girl <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test1w <span class="keyword">where</span> user_gender <span class="operator">=</span> &quot;女&quot;;</span><br></pre></td></tr></table></figure><h1 id="七：拉链表-zip-tables"><a href="#七：拉链表-zip-tables" class="headerlink" title="七：拉链表(zip tables)"></a>七：拉链表(zip tables)</h1><h2 id="1、发展流程"><a href="#1、发展流程" class="headerlink" title="1、发展流程"></a>1、发展流程</h2><h3 id="hive发展"><a href="#hive发展" class="headerlink" title="hive发展"></a>hive发展</h3><ul><li>hive 0.14就已经有这一逻辑模型,名为slowly changing dimension。</li><li>hive 2.6.0 支持merge语法，运用了 事务管理</li></ul><h3 id="拉链表由来"><a href="#拉链表由来" class="headerlink" title="拉链表由来"></a>拉链表由来</h3><p>原来采用分区表，用户分区存储历史增量数据，缺点是重复数据太多<br>目前运用拉链表来解决这一问题</p><h2 id="2、含义"><a href="#2、含义" class="headerlink" title="2、含义"></a>2、含义</h2><p>用于解决持续增长且存在一定时间范围内重复的数据，即：合并有一定重复性【较小时间范围内】的数据。</p><h2 id="3、优点"><a href="#3、优点" class="headerlink" title="3、优点"></a>3、优点</h2><ul><li>节约空间（一份订单只有一条数据）</li></ul><h2 id="4、应用场景"><a href="#4、应用场景" class="headerlink" title="4、应用场景"></a>4、应用场景</h2><p>【数据规模庞大】，新数据【在有限区间(时间…)内】存在多种状态变化</p><h2 id="5、准备工作-动态配置"><a href="#5、准备工作-动态配置" class="headerlink" title="5、准备工作[动态配置]"></a>5、准备工作[动态配置]</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">set hive.support.concurrency=true;</span><br><span class="line">set hive.enforce.bucketing=true;</span><br><span class="line">set hive.exec.dynamic.partition.mode=nonstrict;</span><br><span class="line">set hive.txn.manager=org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;</span><br><span class="line">set hive.compactor.initiator.on=true; -- 表合并开启</span><br><span class="line">set hive.compactor.worker.threads=1; -- 表合并线程必须为一</span><br><span class="line">set hive.auto.convert.join=false; -- 关闭 mapjoin</span><br><span class="line">set hive.merge.cardinality.check=false; -- 关闭检查数据列的基数(列值的差异性)</span><br><span class="line">set mapreduce.job.reduces=4;</span><br></pre></td></tr></table></figure><h2 id="6、具体代码"><a href="#6、具体代码" class="headerlink" title="6、具体代码"></a>6、具体代码</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> zhou.hive_zipper_order;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> zhou.hive_zipper_order(</span><br><span class="line">order_id <span class="type">bigint</span>,</span><br><span class="line">user_id <span class="type">bigint</span>,</span><br><span class="line">order_modify_dt <span class="type">timestamp</span>,</span><br><span class="line">order_money <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">current_status <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format delimited </span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line"><span class="comment">--导入f F的数据至普通表hive_zipper_order中</span></span><br><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/root/file/log/order_record.log&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> zhou.hive_zipper_order;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建拉链表hive_zipper_pc_order✔</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> zhou.hive_zipper_pc_order;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> zhou.hive_zipper_pc_order(</span><br><span class="line">order_id <span class="type">bigint</span>,</span><br><span class="line">user_id <span class="type">bigint</span>,</span><br><span class="line">order_create_dt <span class="type">timestamp</span>,</span><br><span class="line">order_modify_dt <span class="type">timestamp</span>,</span><br><span class="line">order_money <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">current_status <span class="type">int</span></span><br><span class="line">)</span><br><span class="line">partitioned <span class="keyword">by</span>(<span class="keyword">year</span> <span class="type">int</span>,<span class="keyword">month</span> <span class="type">int</span>,<span class="keyword">day</span> <span class="type">int</span>)</span><br><span class="line">clustered <span class="keyword">by</span>(order_create_dt) <span class="keyword">into</span> <span class="number">4</span> buckets</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">stored <span class="keyword">as</span> orc</span><br><span class="line">tblproperties(&quot;transactional&quot;<span class="operator">=</span>&quot;true&quot;);</span><br><span class="line"></span><br><span class="line"><span class="comment">--操作历史全量数据用动态分区✔</span></span><br><span class="line"><span class="keyword">set</span> hive.support.concurrency<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line"><span class="keyword">set</span> hive.enforce.bucketing<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition.mode<span class="operator">=</span>nonstrict;</span><br><span class="line"><span class="keyword">set</span> hive.txn.manager<span class="operator">=</span>org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;</span><br><span class="line"><span class="keyword">set</span> hive.compactor.initiator.on<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line"><span class="keyword">set</span> hive.compactor.worker.threads<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">set</span> hive.auto.convert.join<span class="operator">=</span><span class="literal">false</span>;</span><br><span class="line"><span class="keyword">set</span> hive.merge.cardinality.check<span class="operator">=</span><span class="literal">false</span>;</span><br><span class="line"><span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--开启动态分区，一次性挂载至拉链表hive_zipper_pc_order中✔</span></span><br><span class="line"><span class="keyword">with</span> zip_src <span class="keyword">as</span> (</span><br><span class="line"><span class="keyword">select</span> order_id,user_id,order_money,</span><br><span class="line"><span class="built_in">min</span>(order_modify_dt) <span class="keyword">as</span> order_create_dt,</span><br><span class="line"><span class="built_in">max</span>(order_modify_dt) <span class="keyword">as</span> order_modify_dt,</span><br><span class="line"><span class="built_in">max</span>(current_status) <span class="keyword">as</span> current_status</span><br><span class="line"><span class="keyword">from</span> zhou.hive_zipper_order</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> order_id,user_id,order_money</span><br><span class="line">)</span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> zhou.hive_zipper_pc_order <span class="keyword">partition</span>(<span class="keyword">year</span>,<span class="keyword">month</span>,<span class="keyword">day</span>)</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">order_id,</span><br><span class="line">user_id,</span><br><span class="line">order_create_dt,</span><br><span class="line">order_modify_dt,</span><br><span class="line">order_money,</span><br><span class="line">current_status,</span><br><span class="line"><span class="keyword">year</span>(order_create_dt) <span class="keyword">as</span> <span class="keyword">year</span>,</span><br><span class="line"><span class="keyword">month</span>(order_create_dt) <span class="keyword">as</span> <span class="keyword">month</span>,</span><br><span class="line"><span class="keyword">day</span>(order_create_dt) <span class="keyword">as</span> <span class="keyword">day</span></span><br><span class="line"><span class="keyword">from</span> zip_src;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 拉链表查询✔</span></span><br><span class="line"><span class="keyword">set</span> hive.txn.manager<span class="operator">=</span>org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;</span><br><span class="line"><span class="keyword">set</span> hive.support.concurrency<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> zhou.hive_zipper_pc_order</span><br><span class="line"><span class="keyword">where</span> to_date(order_modify_dt)<span class="operator">=</span><span class="string">&#x27;2021-02-04&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> order_modify_dt <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--之后每天，增量添加【在原表处新增】</span></span><br><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/root/file/log/order_record_2021_02_05.log&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> zhou.hive_zipper_order;</span><br><span class="line"></span><br><span class="line"><span class="comment">--拉链处理增量数据(新增新数据，修改旧数据)✔</span></span><br><span class="line"><span class="keyword">merge</span> <span class="keyword">into</span> zhou.hive_zipper_pc_order <span class="keyword">as</span> O</span><br><span class="line"><span class="keyword">using</span> (</span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">order_id,</span><br><span class="line">user_id,</span><br><span class="line">order_create_dt,</span><br><span class="line">order_modify_dt,</span><br><span class="line">order_money,</span><br><span class="line">current_status,</span><br><span class="line"><span class="keyword">year</span>(order_create_dt) <span class="keyword">as</span> <span class="keyword">year</span>,</span><br><span class="line"><span class="keyword">month</span>(order_create_dt) <span class="keyword">as</span> <span class="keyword">month</span>,</span><br><span class="line"><span class="keyword">day</span>(order_create_dt) <span class="keyword">as</span> <span class="keyword">day</span></span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line"><span class="keyword">select</span> order_id,user_id,order_money,</span><br><span class="line"><span class="built_in">min</span>(order_modify_dt) <span class="keyword">as</span> order_create_dt,</span><br><span class="line"><span class="built_in">max</span>(order_modify_dt) <span class="keyword">as</span> order_modify_dt,</span><br><span class="line"><span class="built_in">max</span>(current_status) <span class="keyword">as</span> current_status</span><br><span class="line"><span class="keyword">from</span> zhou.hive_zipper_order</span><br><span class="line"><span class="comment">--where to_date(order_modify_dt)=&#x27;2021-02-05&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> order_id,user_id,order_money</span><br><span class="line">)T</span><br><span class="line">) <span class="keyword">as</span> H</span><br><span class="line"><span class="keyword">on</span> O.order_id<span class="operator">=</span>H.order_id</span><br><span class="line"><span class="keyword">when</span> matched <span class="keyword">then</span> </span><br><span class="line"><span class="keyword">update</span> <span class="keyword">set</span> order_modify_dt<span class="operator">=</span>H.order_modify_dt,current_status<span class="operator">=</span>H.current_status</span><br><span class="line"><span class="keyword">when</span> <span class="keyword">not</span> matched <span class="keyword">then</span> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">values</span>(H.order_id,H.user_id,H.order_create_dt,H.order_modify_dt,H.order_money,H.current_status,H.year,H.month,H.day);</span><br><span class="line"></span><br><span class="line"><span class="comment">--验证拉链结果✔</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> zhou.hive_zipper_pc_order</span><br><span class="line"><span class="keyword">where</span> to_date(order_modify_dt)<span class="operator">&gt;</span>to_date(order_create_dt);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>music</title>
      <link href="/2024/07/28/music/"/>
      <url>/2024/07/28/music/</url>
      
        <content type="html"><![CDATA[    <div id="aplayer-VaKqLNES" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="7598312909" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#3F51B5"    ></div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Mysql一键安装【虚拟机】</title>
      <link href="/2024/07/17/Mysql%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E3%80%90%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%91/"/>
      <url>/2024/07/17/Mysql%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E3%80%90%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%91/</url>
      
        <content type="html"><![CDATA[<h2 id="Mysql脚本"><a href="#Mysql脚本" class="headerlink" title="Mysql脚本"></a>Mysql脚本</h2><p>mysql_install.sh</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;INFO : BEGIN INSTALLING MYSQL8 ...&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查MySQL服务版本，若已经存在mysql8，直接退出</span></span><br><span class="line">me=`ps -ef|grep mysqld|wc -l`</span><br><span class="line">if [ $me -eq 2 ];then</span><br><span class="line">        me=`systemctl status mysqld|grep Docs|awk -F: &#x27;&#123;print $NF&#125;&#x27;`</span><br><span class="line">        if [ $? -eq 0 -a &quot;$me&quot; == &quot;mysqld(8)&quot; ];then</span><br><span class="line">                echo &quot;INFO : MYSQL8 FOUND&quot;</span><br><span class="line">                exit 0</span><br><span class="line">        fi</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">若存在旧版本的MySQL,且服务处于启动状态</span></span><br><span class="line">        systemctl status mysqld|grep &quot;active (running)&quot;</span><br><span class="line">        if [ $? -eq 0 ];then</span><br><span class="line">                systemctl stop mysqld</span><br><span class="line">                echo &quot;INFO : OLD MYSQL SERVICE FOUND AND STOPPED&quot;</span><br><span class="line">        fi</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">若存在旧版本的残留则直接卸载</span></span><br><span class="line">names=`rpm -qa|grep mysql`</span><br><span class="line">for name in $names;do</span><br><span class="line">        yum -y remove $name 1&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        echo &quot;INFO : OLD MYSQL RESOURCE [ $name ] FOUND AND REMOVED &quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">rpm 安装MySQL8</span></span><br><span class="line">src=$1</span><br><span class="line">if [[ ! -e $src || ! -f $src ]];then</span><br><span class="line">        echo &quot;ERROR : PLEASE PROVIDE MYSQL8 RPM FILE&quot;</span><br><span class="line">        exit 1</span><br><span class="line">fi</span><br><span class="line">if [[ ! &quot;$src&quot; =~ mysql8.*\.rpm$ ]];then</span><br><span class="line">        echo &quot;ERROR : NOT RPM PACKAGE OR NOT FOR MYSQL8&quot;</span><br><span class="line">        exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">rpm -ivh $src 1&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">if [ $? -eq 0 ];then</span><br><span class="line">        echo &quot;INFO : SUCCESS TO RPM INSTALL MYSQL8&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;ERROR : FAIL TO RPM INSTALL MYSQL8&quot;</span><br><span class="line">        exit 2</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">yum 安装MySQL8服务</span></span><br><span class="line">yum -y install mysql-server --nogpgcheck</span><br><span class="line">if [ $? -eq 0 ];then</span><br><span class="line">        echo &quot;INFO : SUCCESS TO YUM INSTALL MYSQL8 SERVICE&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;ERROR : FAIL TO YUM INSTALL MYSQL8 SERVICE&quot;</span><br><span class="line">        exit 3</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查服务是否已经启动，若未启动则启动</span></span><br><span class="line">me=`systemctl status mysqld|grep &quot;active (running)&quot;`</span><br><span class="line">if [ $? -ne 0 ];then</span><br><span class="line">        systemctl start mysqld</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;INFO : MYSQL8 SERVICE STARTED&quot;</span><br><span class="line">echo &quot;INFO : FINISH INSTALLING MYSQL8&quot;</span><br><span class="line"></span><br><span class="line">unset src</span><br><span class="line">unset names</span><br><span class="line">unset me</span><br></pre></td></tr></table></figure><p>初次创建文件时，可能会没有执行权限，执行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+x mysql_install.sh</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/mysql%E5%AE%89%E8%A3%85%E3%80%90%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%91.png"></p><h2 id="启动脚本"><a href="#启动脚本" class="headerlink" title="启动脚本"></a>启动脚本</h2><p><strong>注意</strong>：传入的参数是绝对路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash mysql_install.sh /opt/download/mysql80-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><p>效果如下图，表示安装mysql成功。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BAmysql%E5%AE%89%E8%A3%851.png"></p><h2 id="查看Mysql当前状态"><a href="#查看Mysql当前状态" class="headerlink" title="查看Mysql当前状态"></a>查看Mysql当前状态</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BAmysql%E5%AE%89%E8%A3%852.png"></p><h2 id="查看初始化密码"><a href="#查看初始化密码" class="headerlink" title="查看初始化密码"></a>查看初始化密码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head -10 /var/log/mysqld.log</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BAmysql%E5%AE%89%E8%A3%853.png"></p><h2 id="使用初始化密码进入Mysql"><a href="#使用初始化密码进入Mysql" class="headerlink" title="使用初始化密码进入Mysql"></a>使用初始化密码进入Mysql</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><h2 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h2><p>注意：新密码需要包含大写字母，小写字母，数字，特殊符号。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;新密码&#x27;;</span><br></pre></td></tr></table></figure><h2 id="结束！"><a href="#结束！" class="headerlink" title="结束！"></a>结束！</h2>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql深入讲解</title>
      <link href="/2024/07/17/Mysql%E6%B7%B1%E5%85%A5%E8%AE%B2%E8%A7%A3%EF%BC%88%E7%B4%A2%E5%BC%95%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E9%94%81%E6%9C%BA%E5%88%B6%EF%BC%89/"/>
      <url>/2024/07/17/Mysql%E6%B7%B1%E5%85%A5%E8%AE%B2%E8%A7%A3%EF%BC%88%E7%B4%A2%E5%BC%95%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E9%94%81%E6%9C%BA%E5%88%B6%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="一、MySQL索引"><a href="#一、MySQL索引" class="headerlink" title="一、MySQL索引"></a>一、MySQL索引</h1><h2 id="1、何为索引？"><a href="#1、何为索引？" class="headerlink" title="1、何为索引？"></a>1、何为索引？</h2><p>MySQL中的索引是一种数据结构，用于加快对数据库表中数据的查询速度【查询速度提升】。它类似于书本目录，使得用户可以根据特定字段快速定位到所需的数据行，而无需扫描整个表。</p><h2 id="2、索引分类"><a href="#2、索引分类" class="headerlink" title="2、索引分类"></a>2、索引分类</h2><h3 id="Hash索引"><a href="#Hash索引" class="headerlink" title="Hash索引"></a>Hash索引</h3><p>Hash索引的<strong>数据结构</strong>为<strong>Hash表</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hash%E7%B4%A2%E5%BC%95.png"></p><p><strong>Hash索引讲解</strong>：</p><p>1、将所要查找的索引字段值放入公式f(x)中，从而会生成对应的HashCode值，所算出来的HashCode值会<strong>快速定位</strong>对应相应表中的行数据，从而达到快速查找。</p><p>2、若出现几个行数据所对应的hashCode相同【hash碰撞】，则会在这些对应相同的hashCode的行数据中进行顺序查找操作，直到找到为止。</p><h3 id="B-Tree索引"><a href="#B-Tree索引" class="headerlink" title="B+Tree索引"></a>B+Tree索引</h3><p>B+Tree索引的<strong>数据结构</strong>为<strong>B+树【多叉树结构】</strong>，<strong>MySQL索引的本质就是B+Tree的数据结构</strong>。</p><p>节点存储的是【区间】，叶子节点存储的是【数据记录的地址】；叶子节点处形成链表，便于锁定区间【头，尾】，易获取值。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/b+tree%E7%B4%A2%E5%BC%95.png"></p><p><strong>详细分析</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Mysql查询语句：</span><br><span class="line">select * from tableTest where id = 2;</span><br><span class="line">底层原理分析：</span><br><span class="line">由于是根据id来建索引的，因此会根据id来进行查找。其中内部节点会根据节点存储的键值来决定进入哪个子节点，一直进行查找，最终找到所在id的叶子节点。叶子节点处所存储的是数据记录的地址，通过地址来找到与之相对应的行数据。</span><br></pre></td></tr></table></figure><h2 id="3、索引的优点"><a href="#3、索引的优点" class="headerlink" title="3、索引的优点"></a>3、索引的优点</h2><ul><li>借助数据结构，实现快速检索</li></ul><h2 id="4、索引的缺点"><a href="#4、索引的缺点" class="headerlink" title="4、索引的缺点"></a>4、索引的缺点</h2><ul><li>占用表空间，挤压数据的存储。</li><li>维持平衡的开销大</li></ul><h2 id="5、索引失效的场景"><a href="#5、索引失效的场景" class="headerlink" title="5、索引失效的场景"></a>5、索引失效的场景</h2><ul><li><p>数据量少的表不要使用索引</p></li><li><p>where之后未加索引字段【注意：许多查询语句都需要用这字段【where后面出现的频次高】，适合建立索引】</p></li><li><p>重复数据多且更新频繁的字段不建议设置索引。</p></li><li><p>where name like ‘%男’【左边有%，就无法建立，右边有无无影响】</p></li></ul><h2 id="6、常用索引实际应用"><a href="#6、常用索引实际应用" class="headerlink" title="6、常用索引实际应用"></a>6、常用索引实际应用</h2><p>索引在功能上可分类为<strong>单列索引【普通索引，唯一索引，主键索引】</strong>，<strong>组合索引</strong>，<strong>全文索引</strong>，<strong>空间索引</strong>。</p><h3 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- show index from 表名</span><br><span class="line">show index from student;</span><br></pre></td></tr></table></figure><h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- drop index 索引名 on 表名</span><br><span class="line">drop index index_name on student;</span><br></pre></td></tr></table></figure><h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><h4 id="一：单列索引操作"><a href="#一：单列索引操作" class="headerlink" title="一：单列索引操作"></a>一：单列索引操作</h4><p><strong>单列索引介绍</strong>：一个索引只包含单个列，而一个表中可含有多个单列索引。</p><h5 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引"></a><strong>普通索引</strong></h5><p><strong>要求</strong>：<strong>无任何限制</strong>，任意的列都能作为普通索引。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 创建索引</span><br><span class="line">-- create index 索引名称 on 表(字段名)</span><br><span class="line">create index name_index on student(name);</span><br><span class="line"></span><br><span class="line">-- 修改表结构(添加索引)</span><br><span class="line">-- alter table 表 add index 索引名(字段名)</span><br><span class="line">alter table student add index index_age(age);</span><br></pre></td></tr></table></figure><h5 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a><strong>唯一索引</strong></h5><p><strong>要求</strong>：列中的<strong>值必须是唯一的</strong>，不可重复，但允许为空</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 创建索引</span><br><span class="line">-- create unique index 索引名 on 表(字段名)</span><br><span class="line">create unique index index_card_id on student(card_id);</span><br><span class="line"></span><br><span class="line">-- 修改表结构(添加索引)</span><br><span class="line">-- alter table 表 add unique 索引名(字段名)</span><br><span class="line">alter table student add unique index_phone_num(phone_num);</span><br></pre></td></tr></table></figure><h5 id="主键索引"><a href="#主键索引" class="headerlink" title="主键索引"></a><strong>主键索引</strong></h5><p><strong>说明</strong>：mysql会<strong>自动</strong>在主键列上建立一个索引【唯一且非null】</p><h4 id="二：组合索引操作"><a href="#二：组合索引操作" class="headerlink" title="二：组合索引操作"></a>二：组合索引操作</h4><p><strong>要求</strong>：多个字段进行组合，列值组合必须唯一【查询时，遵循最左原则，即：查询条件中包含（phone_num字段）或（phone_num字段和name字段），索引才会生效】</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 组合索引（普通索引组合）</span><br><span class="line">-- create index index 索引名 on 表(列1,列2,..)</span><br><span class="line">create index index_phone_name on student(phone_num,name);</span><br><span class="line"></span><br><span class="line">-- 组合索引（唯一索引组合）</span><br><span class="line">-- create unique index 索引名 on 表(列1,列2,..)</span><br><span class="line">create unique index index_phone_name on student(phone_num,name);</span><br></pre></td></tr></table></figure><h1 id="二、MySQL事务"><a href="#二、MySQL事务" class="headerlink" title="二、MySQL事务"></a>二、MySQL事务</h1><h2 id="1、何为事务？"><a href="#1、何为事务？" class="headerlink" title="1、何为事务？"></a>1、何为事务？</h2><p>事务是数据库管理系统执行过程中的一个逻辑单位，它由<strong>一个或多个SQL语句组成</strong>，这些语句作为一个<strong>整体一起向系统提交</strong>，<strong>要么全部执行，要么全部不执行</strong>。</p><h2 id="2、事务的特性"><a href="#2、事务的特性" class="headerlink" title="2、事务的特性"></a>2、事务的特性</h2><ul><li><p><strong>原子性</strong>：事务是一个不可再分的整体，要么全部执行，要么全部不执行。</p></li><li><p><strong>一致性</strong>：事务必须使数据库从一个一致性状态变换到另一个一致性状态。例如：对于转账而言，两者转账前钱的总和与转账后钱的总和要一样，否则会出错。</p></li><li><p><strong>隔离性</strong>：保证在数据库系统中并发执行的事务不会相互干扰，每个事务看起来就像在独立运行，避免了数据错乱和不一致的问题。</p><blockquote><p>事务的<strong>隔离级别</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB.png"></p></blockquote></li><li><p><strong>持久性</strong>：事务一旦提交(commit)，就会进行落盘操作，无法再改变。</p></li></ul><h2 id="3、事务的实际操作"><a href="#3、事务的实际操作" class="headerlink" title="3、事务的实际操作"></a>3、事务的实际操作</h2><p>事务有<strong>三大操作</strong>：**开启事务(begin)<strong>，</strong>回滚事务(rollback)<strong>，</strong>提交事务(commit)**。</p><p>此处，以<strong>账户转账的案例</strong>来讲解事务的运用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 创建account账户信息表</span><br><span class="line">create table if not exists account(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(255),</span><br><span class="line">money double</span><br><span class="line">);</span><br><span class="line">-- 插入数据</span><br><span class="line">insert into account values</span><br><span class="line">(1,&#x27;猪猪侠&#x27;,1000),</span><br><span class="line">(2,&#x27;小菲菲&#x27;,1000);</span><br><span class="line"></span><br><span class="line"># 事务案例：账户转账</span><br><span class="line">-- 设置 MySQL 的事务为手动提交（关闭自动提交）</span><br><span class="line">-- 查看状态</span><br><span class="line">select @@autocommit; // 1为自动提交，0为手动提交</span><br><span class="line">-- 关闭自动提交</span><br><span class="line">set autocommit = 0;</span><br><span class="line"></span><br><span class="line">-- 模拟账户转账</span><br><span class="line">-- 【开启事务】</span><br><span class="line">begin;</span><br><span class="line">-- 开始转账操作</span><br><span class="line">update account set money = money - 520 where `name` = &#x27;猪猪侠&#x27;;</span><br><span class="line">update account set money = money + 520 where `name` = &#x27;小菲菲&#x27;;</span><br><span class="line">-- 查看转账结果</span><br><span class="line">select * from account;</span><br><span class="line">-- 若易过程中遇到错误，则【回滚事务】至原来状态，此时数据存储在【内存】，还未落盘（二选一）</span><br><span class="line">rollback;</span><br><span class="line">-- 若没有问题，则【提交事务】，【落盘】，不可再进行回滚操作（二选一）</span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line">-- 开启自动提交</span><br><span class="line">set autocommit = 1;</span><br></pre></td></tr></table></figure><h1 id="三、MySQL锁机制"><a href="#三、MySQL锁机制" class="headerlink" title="三、MySQL锁机制"></a>三、MySQL锁机制</h1><h2 id="1、何为锁？"><a href="#1、何为锁？" class="headerlink" title="1、何为锁？"></a>1、何为锁？</h2><p>锁是<strong>协调多个事务同时并发访问相同资源的机制(避免争抢)<strong>，确保数据的完整性和一致性，避免多个事务同时对同一数据造成冲突和错误。当</strong>多客户端来访问共享资源</strong>时，可通过锁机制来保证<strong>共享资源可以得到合理访问</strong>。</p><h2 id="2、锁的分类"><a href="#2、锁的分类" class="headerlink" title="2、锁的分类"></a>2、锁的分类</h2><p>从<strong>数据操作的粒度</strong>来划分：<strong>表锁</strong>，<strong>行锁</strong>。</p><blockquote><p>表锁解释：操作是会锁定整个表</p><p><strong>行锁解释</strong>：操作时会锁定当前操作行</p></blockquote><p><strong>从数据操作的角度</strong>来划分：<strong>读锁（共享锁）</strong>，<strong>写锁（排他锁）</strong>。</p><blockquote><p><strong>读锁（共享锁）</strong>：简称S，对于同一份数据，读操作可以同时进行且互不干扰。</p><p><strong>写锁（排他锁）</strong>：简称X，当前操作还未完成前，他会阻断其他写锁和读锁操作。</p></blockquote><h3 id="表锁操作："><a href="#表锁操作：" class="headerlink" title="表锁操作："></a>表锁操作：</h3><h4 id="一：读锁（共享锁）"><a href="#一：读锁（共享锁）" class="headerlink" title="一：读锁（共享锁）"></a>一：读锁（共享锁）</h4><p>对【表R】添加<strong>读锁</strong>时，<strong>只能操作被上读锁的那张【表R】</strong>进行select查找操作，<strong>无法对其他表进行select查找操作</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 添加读锁</span><br><span class="line">-- 语法：lock table 表名 read;</span><br><span class="line">lock table tb_lock read;</span><br><span class="line"></span><br><span class="line">-- 释放锁</span><br><span class="line">unlock tables;</span><br></pre></td></tr></table></figure><h4 id="二：写锁（排他锁）"><a href="#二：写锁（排他锁）" class="headerlink" title="二：写锁（排他锁）"></a>二：写锁（排他锁）</h4><p>当【用户A】对【表R】<strong>添加写锁</strong>时，<strong>【用户A】可以对表R进行查找或修改操作</strong>，<strong>其他用户无法对【表R】进行读取或修改等操作，以及对【表R】添加任意锁操作</strong>，<strong>直到【用户A】释放锁</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 添加写锁</span><br><span class="line">-- 语法：lock table 表名 write;</span><br><span class="line">lock table tb_lock write;</span><br><span class="line"></span><br><span class="line">-- 释放锁</span><br><span class="line">unlock tables;</span><br></pre></td></tr></table></figure><h3 id="行锁操作："><a href="#行锁操作：" class="headerlink" title="行锁操作："></a>行锁操作：</h3><p><strong>注意</strong>：增删改时会自动添加</p><h4 id="一：读锁（共享锁）-1"><a href="#一：读锁（共享锁）-1" class="headerlink" title="一：读锁（共享锁）"></a>一：读锁（共享锁）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名 where 条件 lock in share mode</span><br></pre></td></tr></table></figure><h4 id="二：写锁（排他锁）-1"><a href="#二：写锁（排他锁）-1" class="headerlink" title="二：写锁（排他锁）"></a>二：写锁（排他锁）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名 where 条件 for update</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive的基本操作（查询）</title>
      <link href="/2024/07/15/Hive%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%EF%BC%88%E6%9F%A5%E8%AF%A2%EF%BC%89/"/>
      <url>/2024/07/15/Hive%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%EF%BC%88%E6%9F%A5%E8%AF%A2%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="1、基础查询"><a href="#1、基础查询" class="headerlink" title="1、基础查询"></a>1、基础查询</h1><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表<span class="operator">|</span>表达式<span class="operator">|</span>子查询</span><br><span class="line"><span class="keyword">from</span> 表(子查询<span class="operator">|</span>视图<span class="operator">|</span>临时表<span class="operator">|</span>普通表)</span><br><span class="line"><span class="keyword">where</span> [<span class="keyword">not</span>] 条件A <span class="keyword">and</span><span class="operator">|</span><span class="keyword">or</span> 条件B<span class="comment">--先：面向原始行进行筛选</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 字段A[,字段B,...]<span class="operator">=</span><span class="operator">&gt;</span> 分组【去重处理】</span><br><span class="line"><span class="keyword">having</span> 聚合条件(非原始字段条件)<span class="comment">--再：针对聚合后的字段进行二次筛选</span></span><br><span class="line"><span class="keyword">order</span><span class="operator">|</span>sort<span class="operator">|</span>cluster <span class="keyword">by</span> 字段A[,字段B,...]<span class="comment">--后：全局排序(非limit的最后一句)走mapreduce</span></span><br><span class="line">limit N(前N条记录) <span class="operator">|</span> M(行号偏移量),N(记录数)</span><br></pre></td></tr></table></figure><h3 id="1-where子句的条件格式"><a href="#1-where子句的条件格式" class="headerlink" title="1.where子句的条件格式"></a>1.where子句的条件格式</h3><h4 id="一：关系运算符"><a href="#一：关系运算符" class="headerlink" title="一：关系运算符"></a>一：关系运算符</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">关系运算符：&gt; , &gt;= , &lt; , &lt;= , =【等值判断】 , &lt;&gt;【不等于】</span><br></pre></td></tr></table></figure><ul><li><strong>延伸</strong>：between (&gt;&#x3D;)SMALL_VALUE and (&lt;&#x3D;)BIG_VALUE; 【面向于 数值或日期】</li></ul><h4 id="二：逻辑运算符"><a href="#二：逻辑运算符" class="headerlink" title="二：逻辑运算符"></a>二：逻辑运算符</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">逻辑运算符：not【非】 , and【与】 , or【或】</span><br></pre></td></tr></table></figure><ul><li><strong>延伸</strong>：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--if函数：</span></span><br><span class="line">if(BOOLEN_EXPR,VALUE_IF_TRUE,VALUE_IF_FALSE_OR_NULL)</span><br><span class="line">案例：</span><br><span class="line">        <span class="keyword">select</span> user_id,`if`(order_amount <span class="operator">&lt;</span> <span class="number">1000</span>,<span class="string">&#x27;low&#x27;</span>,<span class="string">&#x27;high&#x27;</span>) <span class="keyword">as</span> consumption</span><br><span class="line">        <span class="keyword">from</span> test1w</span><br><span class="line">        <span class="keyword">where</span> user_gender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line">        limit <span class="number">100</span>;</span><br><span class="line">结果展示：</span><br><span class="line">user_idconsumption</span><br><span class="line"><span class="number">652</span>,high</span><br><span class="line">        <span class="number">376</span>,high</span><br><span class="line">        <span class="number">537</span>,high</span><br><span class="line">        <span class="number">280</span>,high</span><br><span class="line">        <span class="number">23</span>,high</span><br><span class="line">  </span><br><span class="line"><span class="comment">--空值判断：</span></span><br><span class="line"><span class="number">1.</span>nvl(VALUE_A,VALUE_B)<span class="operator">=</span><span class="operator">&gt;</span>VALUE_A为空值(<span class="keyword">null</span>),则返回VALUE_B。否则返回VALUE_A</span><br><span class="line"><span class="number">2.</span>isnull(VAL)<span class="operator">=</span><span class="operator">&gt;</span>如果 VAL 为 <span class="keyword">null</span>,则返回 <span class="number">1</span> 。否则返回 <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--case when函数：</span></span><br><span class="line"><span class="keyword">case</span> EXPR <span class="keyword">when</span> V1 <span class="keyword">then</span> VAL1 <span class="keyword">when</span> V2 <span class="keyword">then</span> VAL2 ... <span class="keyword">else</span> VALN <span class="keyword">end</span> <span class="operator">&lt;=&gt;</span> switch ... <span class="keyword">case</span></span><br><span class="line"><span class="keyword">case</span> <span class="keyword">when</span> 条件<span class="number">1</span> <span class="keyword">then</span> VAL1 <span class="keyword">when</span> 条件<span class="number">2</span> <span class="keyword">then</span> VAL2 ... <span class="keyword">else</span> VALN <span class="keyword">end</span> <span class="operator">&lt;=&gt;</span> if ... <span class="keyword">else</span> if ...</span><br><span class="line">案例：</span><br><span class="line"><span class="keyword">select</span> user_id,</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">when</span> order_amount<span class="operator">&lt;</span><span class="number">1000</span> <span class="keyword">then</span> <span class="string">&#x27;低消费人群&#x27;</span> </span><br><span class="line"><span class="keyword">when</span> order_amount<span class="operator">&lt;</span><span class="number">5000</span> <span class="keyword">then</span> <span class="string">&#x27;中等消费人群&#x27;</span> </span><br><span class="line"><span class="keyword">else</span> <span class="string">&#x27;高消费人群&#x27;</span> <span class="keyword">end</span> <span class="keyword">as</span> level</span><br><span class="line">        <span class="keyword">from</span> test1w</span><br><span class="line">        <span class="keyword">where</span> user_gender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line">        limit <span class="number">100</span>;</span><br><span class="line">结果展示：</span><br><span class="line">user_idlevel</span><br><span class="line"><span class="number">652</span>,高消费人群</span><br><span class="line">        <span class="number">376</span>,高消费人群</span><br><span class="line">        <span class="number">537</span>,低消费人群</span><br><span class="line">        <span class="number">280</span>,中等消费人群</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="三：通配符"><a href="#三：通配符" class="headerlink" title="三：通配符"></a>三：通配符</h4><p><strong>模糊查询</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line"><span class="keyword">like</span> <span class="string">&#x27;% | _&#x27;</span>【模糊匹配】</span><br><span class="line"></span><br><span class="line">讲解：</span><br><span class="line"><span class="operator">%</span> <span class="operator">=</span><span class="operator">&gt;</span> 任意个任意符号</span><br><span class="line">_ <span class="operator">=</span><span class="operator">&gt;</span> 一个任意符号</span><br><span class="line"></span><br><span class="line">案例：</span><br><span class="line"><span class="keyword">select</span> &quot;张无极&quot; <span class="keyword">like</span> <span class="string">&#x27;张%&#x27;</span>;<span class="operator">=</span><span class="operator">&gt;</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">select</span> &quot;张无极&quot; <span class="keyword">like</span> <span class="string">&#x27;张_&#x27;</span>;<span class="operator">=</span><span class="operator">&gt;</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><strong>正则匹配</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">rlike <span class="string">&#x27;正则表达式&#x27;</span></span><br><span class="line">如：<span class="string">&#x27;^//d+$&#x27;</span></span><br><span class="line"></span><br><span class="line">案例：</span><br><span class="line"><span class="keyword">select</span> &quot;like&quot; rlike <span class="string">&#x27;^[a-zA-Z]&#123;2,4&#125;$&#x27;</span>;  <span class="operator">=</span><span class="operator">&gt;</span><span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="2-排序"><a href="#2-排序" class="headerlink" title="2.排序"></a>2.排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">order</span> <span class="keyword">by</span> 表达式[field<span class="operator">|</span>func<span class="operator">|</span>case...when...]    <span class="comment">---【全局排序】：性能差</span></span><br><span class="line">优化：在<span class="keyword">order</span> <span class="keyword">by</span> B 之前，可以先对数据进行 distribute <span class="keyword">by</span> A 与 sort <span class="keyword">by</span> B</span><br><span class="line"><span class="operator">=</span><span class="operator">&gt;</span> 先部分排序，后全局排序</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、sort <span class="keyword">by</span> FIELD_N   <span class="comment">--在【每一个reducer端】排序</span></span><br><span class="line">解释：</span><br><span class="line">当reducer 的数量为<span class="number">1</span>时，等同于 <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">FIELD_N 必须是<span class="keyword">select</span>字段列表中的一员</span><br><span class="line">一般和 distribute <span class="keyword">by</span> 配合使用</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、cluster <span class="keyword">by</span> <span class="comment">--cluster by 字段A = distribute by 字段A + sort by 字段A</span></span><br></pre></td></tr></table></figure><h3 id="3-分组"><a href="#3-分组" class="headerlink" title="3.分组"></a>3.分组</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">group</span> <span class="keyword">by</span> 表达式(field<span class="operator">|</span>func<span class="operator">|</span>case...when) <span class="comment">--为了聚合而分组，否则类似去重(代替distinct)</span></span><br><span class="line">目的：按照某些条件对数据进行分组并进行聚合操作，使用 <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">多分组：</span><br><span class="line"><span class="number">1.</span><span class="keyword">group</span> <span class="keyword">by</span> A,B,C </span><br><span class="line">  <span class="keyword">grouping</span> sets(B,(A,C),(B,C))✔  <span class="comment">--指定多个【分组】为：B,(A,C),(B,C)</span></span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">cube</span>(A,B,C) <span class="comment">--排列组合后的所有分组：A,B,C,(A,B),(A,C),(B,C),(A,B,C)</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">rollup</span>(A,B,C)<span class="comment">--最左原则的所有分组：A,(A,B),(A,B,C)</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、distribute <span class="keyword">by</span> 表达式(field<span class="operator">|</span>func<span class="operator">|</span>case...when)</span><br><span class="line">目的：为了将数据分区，仅仅将数据分发到多个节点上并行处理，使用 distribute <span class="keyword">by</span></span><br><span class="line">解释：</span><br><span class="line"><span class="number">1.</span>不改变原始行数</span><br><span class="line"><span class="number">2.</span>类似于 hadoop job 中的 Partitioner。 【默认是采用hash算法】</span><br><span class="line"><span class="number">3.</span>指定按哪个字段的hashcode分区，配合【预先设置reducer数量】</span><br><span class="line">注意：</span><br><span class="line">distribute <span class="keyword">by</span>【决定进哪个reducer】与sort <span class="keyword">by</span>【在reducer中排序】一般搭配使用的</span><br><span class="line">distribute <span class="keyword">by</span>通常使用在SORT <span class="keyword">BY</span>语句之前</span><br></pre></td></tr></table></figure><p><strong>小型案例</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> product_total <span class="keyword">as</span> ( </span><br><span class="line">    <span class="keyword">select</span> order_item_product_id product_id,<span class="built_in">sum</span>(order_item_subtotal) total</span><br><span class="line">    <span class="keyword">from</span> cb_order_items</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> order_item_product_id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span> product_id,total</span><br><span class="line"><span class="keyword">from</span> product_total</span><br><span class="line">distribute <span class="keyword">by</span> product_id</span><br><span class="line">sort <span class="keyword">by</span> total <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><h4 id="多分组案例"><a href="#多分组案例" class="headerlink" title="多分组案例"></a>多分组案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">grouping</span> sets 案例：✔</span><br><span class="line"><span class="keyword">create</span> temporary <span class="keyword">table</span> tmp_cb_order_ymbsc_sets <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>,<span class="keyword">month</span>,dept_id,cate_id,prod_id</span><br><span class="line">grouping__id,</span><br><span class="line"><span class="built_in">sum</span>(quantity) <span class="keyword">as</span> quantity,</span><br><span class="line">round(<span class="built_in">sum</span>(amount)) <span class="keyword">as</span> amount</span><br><span class="line"><span class="keyword">from</span> tmp_cb_order_ymbsc</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">year</span>,<span class="keyword">month</span>,dept_id,cate_id,prod_id</span><br><span class="line"><span class="keyword">grouping</span> sets(prod_id,(dept_id,cate_id),(<span class="keyword">year</span>,<span class="keyword">month</span>),(<span class="keyword">year</span>,<span class="keyword">month</span>,prod_id))</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> grouping__id;</span><br><span class="line"><span class="comment">-------------------------------------</span></span><br><span class="line">寻找哪几组【去重】：</span><br><span class="line"><span class="keyword">select</span> grouping__id</span><br><span class="line"><span class="keyword">from</span> tmp_cb_order_ymbsc_sets</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> grouping__id;</span><br><span class="line"><span class="comment">-------------------------------------</span></span><br><span class="line"><span class="comment">-- grouping__id:</span></span><br><span class="line"><span class="number">6</span> :<span class="keyword">year</span>,<span class="keyword">month</span>,prod_id</span><br><span class="line"><span class="number">7</span> :<span class="keyword">year</span>,<span class="keyword">month</span></span><br><span class="line"><span class="number">25</span> : dept_id,cate_id </span><br><span class="line"><span class="number">30</span> : prod_id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span><span class="keyword">cube</span> 案例：【不常用】</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="keyword">year</span>(order_date) <span class="keyword">as</span> <span class="keyword">year</span>,</span><br><span class="line"><span class="keyword">month</span>(order_date) <span class="keyword">as</span> <span class="keyword">month</span>,</span><br><span class="line"><span class="keyword">day</span>(order_date) <span class="keyword">as</span> <span class="keyword">day</span>,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> count,</span><br><span class="line">grouping__id</span><br><span class="line"><span class="keyword">from</span> cb_orders</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">cube</span> (<span class="keyword">year</span>(order_date),<span class="keyword">month</span>(order_date),<span class="keyword">day</span>(order_date))</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> grouping__id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span><span class="keyword">rollup</span> 案例：【不常用】</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="keyword">year</span>(order_date) <span class="keyword">as</span> <span class="keyword">year</span>,</span><br><span class="line"><span class="keyword">month</span>(order_date) <span class="keyword">as</span> <span class="keyword">month</span>,</span><br><span class="line"><span class="keyword">day</span>(order_date) <span class="keyword">as</span> <span class="keyword">day</span>,</span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> count,</span><br><span class="line">grouping__id</span><br><span class="line"><span class="keyword">from</span> cb_orders</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">rollup</span> (<span class="keyword">year</span>(order_date),<span class="keyword">month</span>(order_date),<span class="keyword">day</span>(order_date))</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> grouping__id;</span><br></pre></td></tr></table></figure><h1 id="2、子查询"><a href="#2、子查询" class="headerlink" title="2、子查询"></a>2、子查询</h1><h2 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 可以出现子查询(查某个字段值,与主查询存在逻辑主外键关系)</span><br><span class="line"><span class="keyword">from</span> 可以出现子查询(数据表的子集 <span class="keyword">select</span> F1,...,FN <span class="keyword">from</span> T <span class="keyword">where</span> ... <span class="keyword">group</span> <span class="keyword">by</span> ...)</span><br><span class="line"><span class="keyword">where</span> 可以出现子查询(FIELD <span class="keyword">in</span><span class="operator">|</span><span class="operator">=</span><span class="operator">|</span><span class="operator">&gt;=</span> (<span class="keyword">select</span> ONLY_ONE_FIELD_IN ...))</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> FIELD<span class="operator">|</span>substr(FIELD,<span class="number">0</span>,<span class="number">4</span>),...</span><br><span class="line"><span class="keyword">having</span> 可以出现子查询(FIELD <span class="keyword">in</span><span class="operator">|</span><span class="operator">=</span><span class="operator">|</span><span class="operator">&gt;=</span> (<span class="keyword">select</span> ONLY_ONE_FIELD_IN ...))</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> FIELD<span class="operator">|</span>substr(FIELD,<span class="number">0</span>,<span class="number">4</span>),...</span><br></pre></td></tr></table></figure><h3 id="常用语法【from子查询】"><a href="#常用语法【from子查询】" class="headerlink" title="常用语法【from子查询】"></a>常用语法【from子查询】</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表<span class="operator">|</span>表达式<span class="operator">|</span>子查询</span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> 字段列表<span class="operator">|</span>表达式<span class="operator">|</span>子查询 <span class="comment">---先进行内部的查询</span></span><br><span class="line">    <span class="keyword">from</span> <span class="keyword">TABLE</span></span><br><span class="line">    <span class="keyword">where</span> [<span class="keyword">not</span>] 条件A <span class="keyword">and</span><span class="operator">|</span><span class="keyword">or</span> 条件B</span><br><span class="line">    ...</span><br><span class="line">)<span class="comment">---后进行外部的查询</span></span><br><span class="line"><span class="keyword">where</span> [<span class="keyword">not</span>] 条件A <span class="keyword">and</span><span class="operator">|</span><span class="keyword">or</span> 条件B<span class="comment">--后=&gt;先：面向原始行进行筛选</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 字段A[,字段B,...]</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 字段A[,字段B,...]<span class="comment">--后=&gt;再：针对聚合后的字段进行二次筛选</span></span><br><span class="line">limit N(前N条记录) <span class="operator">|</span> M(行号偏移量),N(记录数)<span class="comment">--后=&gt;后：全局排序(非limit的最后一句)</span></span><br></pre></td></tr></table></figure><h1 id="3、CTE"><a href="#3、CTE" class="headerlink" title="3、CTE"></a>3、CTE</h1><h2 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a>基本语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> </span><br><span class="line">SUB_ALIA <span class="keyword">as</span>(...),</span><br><span class="line">SUB_ALTER <span class="keyword">as</span>(select...from SUB_ALIA...)</span><br><span class="line">select...</span><br></pre></td></tr></table></figure><h2 id="小型案例"><a href="#小型案例" class="headerlink" title="小型案例"></a>小型案例</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span></span><br><span class="line">    total_amount <span class="keyword">as</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">sum</span>(order_amount) total</span><br><span class="line">        <span class="keyword">from</span> hive_internal_par_regex_test1w</span><br><span class="line">        <span class="keyword">where</span> <span class="keyword">year</span><span class="operator">&gt;=</span><span class="number">2016</span></span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> user_gender, user_id</span><br><span class="line">        <span class="keyword">having</span> total<span class="operator">&gt;=</span><span class="number">20000</span></span><br><span class="line">    ),</span><br><span class="line">    level_amount <span class="keyword">as</span>(</span><br><span class="line">        <span class="keyword">select</span> round(total<span class="operator">/</span><span class="number">10000</span>) <span class="keyword">as</span> level</span><br><span class="line">        <span class="keyword">from</span> total_amount</span><br><span class="line">    )</span><br><span class="line"><span class="keyword">select</span> level,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> level_count</span><br><span class="line"><span class="keyword">from</span> level_amount</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> level;</span><br><span class="line"></span><br><span class="line">结果展示：</span><br><span class="line">level level_count</span><br><span class="line"><span class="number">2</span>,<span class="number">162</span></span><br><span class="line">    <span class="number">3</span>,<span class="number">125</span></span><br><span class="line">    <span class="number">4</span>,<span class="number">26</span></span><br><span class="line">    <span class="number">5</span>,<span class="number">5</span></span><br></pre></td></tr></table></figure><h1 id="4、联合查询"><a href="#4、联合查询" class="headerlink" title="4、联合查询"></a>4、联合查询</h1><h2 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Class表：</span><br><span class="line">+-------+---------+</span><br><span class="line">|classId|className|</span><br><span class="line">+-------+---------+</span><br><span class="line">|      1|  yb12211|</span><br><span class="line">|      2|  yb12309|</span><br><span class="line">|      3|  yb12401|</span><br><span class="line">+-------+---------+</span><br><span class="line"></span><br><span class="line">Student表：</span><br><span class="line">+-----+-------+</span><br><span class="line">| name|classId|</span><br><span class="line">+-----+-------+</span><br><span class="line">|henry|      1|</span><br><span class="line">|ariel|      2|</span><br><span class="line">| jack|      1|</span><br><span class="line">| rose|      4|</span><br><span class="line">|jerry|      2|</span><br><span class="line">| mary|      1|</span><br><span class="line">+-----+-------+</span><br></pre></td></tr></table></figure><h2 id="三种主要形式"><a href="#三种主要形式" class="headerlink" title="三种主要形式"></a>三种主要形式</h2><h4 id="一：内连接【inner-join】"><a href="#一：内连接【inner-join】" class="headerlink" title="一：内连接【inner join】"></a>一：内连接【inner join】</h4><p>两集合<strong>取交集</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.内容,....,B.内容,...                              <span class="operator">=</span><span class="operator">&gt;</span>字段别名：提高筛选的性能</span><br><span class="line"><span class="keyword">from</span> TABLE_A <span class="keyword">as</span> A</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> TABLE_B <span class="keyword">as</span> B</span><br><span class="line"><span class="keyword">on</span> A.主键<span class="operator">=</span>B.外键 (<span class="keyword">and</span> A.fa <span class="operator">=</span> VALUE...)  多表√ 两表√        <span class="operator">=</span><span class="operator">&gt;</span>表进行合并时进行【连接条件】</span><br><span class="line"><span class="keyword">where</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;                     两表√             <span class="operator">=</span><span class="operator">&gt;</span>合并后进行【条件筛选】</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ...</span><br><span class="line"><span class="keyword">having</span> ...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> ...</span><br><span class="line">limit ...</span><br></pre></td></tr></table></figure><p><strong>小型案例</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Student S</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Class C</span><br><span class="line"><span class="keyword">on</span> S.classId <span class="operator">=</span> C.classId</span><br><span class="line"></span><br><span class="line">结果展示：</span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span> name<span class="operator">|</span>classId<span class="operator">|</span>classId<span class="operator">|</span>className<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span>henry<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>ariel<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> jack<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>jerry<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> mary<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br></pre></td></tr></table></figure><h4 id="二：外连接"><a href="#二：外连接" class="headerlink" title="二：外连接"></a>二：外连接</h4><h5 id="左外连接【left-join】"><a href="#左外连接【left-join】" class="headerlink" title="左外连接【left join】"></a><strong>左外连接【left join】</strong></h5><p>两个集合<strong>取左全集，右交集</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.内容,....,B.内容,...                                   <span class="operator">=</span><span class="operator">&gt;</span>字段别名：提高筛选的性能</span><br><span class="line"><span class="keyword">from</span> TABLE_A <span class="keyword">as</span> A                 【A为主表】</span><br><span class="line"><span class="keyword">left</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> TABLE_B <span class="keyword">as</span> B    【B为从表】</span><br><span class="line"><span class="keyword">on</span> A.主键<span class="operator">|</span>外键<span class="operator">=</span>B.外键<span class="operator">|</span>主键 (<span class="keyword">and</span> A.fa <span class="operator">=</span> VALUE...)    多表√ 两表√     <span class="operator">=</span><span class="operator">&gt;</span>表进行合并时进行【连接条件】</span><br><span class="line"><span class="keyword">where</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;                                 两表√        <span class="operator">=</span><span class="operator">&gt;</span>合并后进行【条件筛选】</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ...</span><br><span class="line"><span class="keyword">having</span> ...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> ...</span><br><span class="line">limit ...</span><br></pre></td></tr></table></figure><p><strong>小型案例</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Student S</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> Class C</span><br><span class="line"><span class="keyword">on</span> S.classId <span class="operator">=</span> C.classId</span><br><span class="line"></span><br><span class="line">结果展示：</span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span> name<span class="operator">|</span>classId<span class="operator">|</span>classId<span class="operator">|</span>className<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span>henry<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>ariel<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> jack<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> rose<span class="operator">|</span>      <span class="number">4</span><span class="operator">|</span>   <span class="keyword">null</span><span class="operator">|</span>     <span class="keyword">null</span><span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>jerry<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> mary<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br></pre></td></tr></table></figure><h5 id="右外连接【right-join】"><a href="#右外连接【right-join】" class="headerlink" title="右外连接【right join】"></a><strong>右外连接【right join】</strong></h5><p>两集合<strong>取右全集，左交集</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.内容,....,B.内容,...                              <span class="operator">=</span><span class="operator">&gt;</span>字段别名：提高筛选的性能</span><br><span class="line"><span class="keyword">from</span> TABLE_A <span class="keyword">as</span> A                 【A为主表】</span><br><span class="line"><span class="keyword">right</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> TABLE_B <span class="keyword">as</span> B    【B为从表】</span><br><span class="line"><span class="keyword">on</span> A.主键<span class="operator">|</span>外键<span class="operator">=</span>B.外键<span class="operator">|</span>主键 (<span class="keyword">and</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;)    多表√ 两表√      <span class="operator">=</span><span class="operator">&gt;</span>表进行合并时进行【连接条件】</span><br><span class="line"><span class="keyword">where</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;                               两表√         <span class="operator">=</span><span class="operator">&gt;</span>合并后进行【条件筛选】</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ...</span><br><span class="line"><span class="keyword">having</span> ...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> ...</span><br><span class="line">limit ...</span><br></pre></td></tr></table></figure><p><strong>小型案例</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Student S</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> Class C</span><br><span class="line"><span class="keyword">on</span> S.classId <span class="operator">=</span> C.classId</span><br><span class="line"></span><br><span class="line">结果展示：</span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span> name<span class="operator">|</span>classId<span class="operator">|</span>classId<span class="operator">|</span>className<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span> mary<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> jack<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>henry<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>jerry<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>ariel<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> <span class="keyword">null</span><span class="operator">|</span>   <span class="keyword">null</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br></pre></td></tr></table></figure><h5 id="全外连接【full-join】"><a href="#全外连接【full-join】" class="headerlink" title="全外连接【full join】"></a><strong>全外连接【full join】</strong></h5><p>两集合<strong>取左右全集</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.内容,....,B.内容,...                               <span class="operator">=</span><span class="operator">&gt;</span>字段别名：提高筛选的性能</span><br><span class="line"><span class="keyword">from</span> TABLE_A <span class="keyword">as</span> A                 【A为主表】</span><br><span class="line"><span class="keyword">full</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> TABLE_B <span class="keyword">as</span> B    【B为从表】</span><br><span class="line"><span class="keyword">on</span> A.主键<span class="operator">|</span>外键<span class="operator">=</span>B.外键<span class="operator">|</span>主键 (<span class="keyword">and</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;)    多表√ 两表√       <span class="operator">=</span><span class="operator">&gt;</span>表进行合并时进行【连接条件】</span><br><span class="line"><span class="keyword">where</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;                               两表√          <span class="operator">=</span><span class="operator">&gt;</span>合并后进行【条件筛选】</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ...</span><br><span class="line"><span class="keyword">having</span> ...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> ...</span><br><span class="line">limit ...</span><br></pre></td></tr></table></figure><p><strong>小型案例</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Student S</span><br><span class="line"><span class="keyword">full</span> <span class="keyword">join</span> Class C</span><br><span class="line"><span class="keyword">on</span> S.classId <span class="operator">=</span> C.classId</span><br><span class="line"></span><br><span class="line">结果展示：</span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span> name<span class="operator">|</span>classId<span class="operator">|</span>classId<span class="operator">|</span>className<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span>henry<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> jack<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> mary<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> <span class="keyword">null</span><span class="operator">|</span>   <span class="keyword">null</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> rose<span class="operator">|</span>      <span class="number">4</span><span class="operator">|</span>   <span class="keyword">null</span><span class="operator">|</span>     <span class="keyword">null</span><span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>ariel<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>jerry<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br></pre></td></tr></table></figure><h4 id="三：交叉连接【cross-join】"><a href="#三：交叉连接【cross-join】" class="headerlink" title="三：交叉连接【cross join】"></a>三：交叉连接【cross join】</h4><p>两集合取<strong>笛卡尔积</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.内容,....,B.内容,...                               <span class="operator">=</span><span class="operator">&gt;</span>字段别名：提高筛选的性能</span><br><span class="line"><span class="keyword">from</span> TABLE_A <span class="keyword">as</span> A                 【A为主表】</span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> TABLE_B <span class="keyword">as</span> B    【B为从表】</span><br><span class="line"><span class="keyword">on</span> A.主键<span class="operator">|</span>外键<span class="operator">=</span>B.外键<span class="operator">|</span>主键 (<span class="keyword">and</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;)    多表√ 两表√       <span class="operator">=</span><span class="operator">&gt;</span>表进行合并时进行【连接条件】</span><br><span class="line"><span class="keyword">where</span> A.fa <span class="operator">=</span> <span class="keyword">VALUE</span>;                               两表√          <span class="operator">=</span><span class="operator">&gt;</span>合并后进行【条件筛选】</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ...</span><br><span class="line"><span class="keyword">having</span> ...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> ...</span><br><span class="line">limit ...</span><br></pre></td></tr></table></figure><p><strong>小型案例</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Student S</span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> Class C</span><br><span class="line"><span class="keyword">on</span> S.classId <span class="operator">=</span> C.classId</span><br><span class="line"></span><br><span class="line">结果展示：</span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span> name<span class="operator">|</span>classId<span class="operator">|</span>classId<span class="operator">|</span>className<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br><span class="line">    <span class="operator">|</span>henry<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>henry<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>henry<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>ariel<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>ariel<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>ariel<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> jack<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> jack<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> jack<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> rose<span class="operator">|</span>      <span class="number">4</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> rose<span class="operator">|</span>      <span class="number">4</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> rose<span class="operator">|</span>      <span class="number">4</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>jerry<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>jerry<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span>jerry<span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> mary<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>  yb12211<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> mary<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">2</span><span class="operator">|</span>  yb12309<span class="operator">|</span></span><br><span class="line">    <span class="operator">|</span> mary<span class="operator">|</span>      <span class="number">1</span><span class="operator">|</span>      <span class="number">3</span><span class="operator">|</span>  yb12401<span class="operator">|</span></span><br><span class="line">    <span class="operator">+</span><span class="comment">-----+-------+-------+---------+</span></span><br></pre></td></tr></table></figure><h1 id="5、联合查询"><a href="#5、联合查询" class="headerlink" title="5、联合查询"></a>5、联合查询</h1><h3 id="何为联合查询？"><a href="#何为联合查询？" class="headerlink" title="何为联合查询？"></a>何为联合查询？</h3><ul><li><p>纵向拼接表，高变大</p></li><li><p>查询字段的【数量】与【类型】必须相同，字段名是以【第一张表为准】。</p></li></ul><h3 id="union与union-all的区分"><a href="#union与union-all的区分" class="headerlink" title="union与union all的区分"></a>union与union all的区分</h3><ul><li><p>union：合并后删除重复项（去重）</p></li><li><p>union all：合并后保留重复项 ✔</p></li></ul><h3 id="小型案例-1"><a href="#小型案例-1" class="headerlink" title="小型案例"></a>小型案例</h3><p><strong>数据准备</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hive%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE.png"></p><p><strong>语句</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select age,job from bank_client_info_3</span><br><span class="line">union all</span><br><span class="line">select age,job from bank_client_info_3;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hive%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive理论讲解</title>
      <link href="/2024/07/09/Hive%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3/"/>
      <url>/2024/07/09/Hive%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="Hive介绍"><a href="#Hive介绍" class="headerlink" title="Hive介绍"></a>Hive介绍</h1><h2 id="1、Hive本质"><a href="#1、Hive本质" class="headerlink" title="1、Hive本质"></a>1、Hive本质</h2><p>Hive本质是【<strong>数仓设计方案</strong>】，hive本身并不存储数据【数据包含：元数据 + (表)数据】。</p><h2 id="2、hql和sql对比"><a href="#2、hql和sql对比" class="headerlink" title="2、hql和sql对比"></a>2、hql和sql对比</h2><ol><li><strong>sql</strong> &#x3D; <strong>结构化查询语言</strong>【structured query language】</li><li><strong>hql</strong> &#x3D; hive&#x2F;hadoop<strong>类sql查询语言</strong>【hive&#x2F;hadoop query language like sql】</li></ol><p><strong>说明</strong>：对于hql而言，表面是sql。实际上，<strong>数据存储</strong>于<strong>HDFS</strong>，<strong>执行引擎</strong>是<strong>Spark，MapReduce，Pig，Tez等</strong>。</p><h2 id="3、数据存储"><a href="#3、数据存储" class="headerlink" title="3、数据存储"></a>3、数据存储</h2><ul><li><strong>元数据</strong>存储于<strong>RDB[关系型数据库]<strong>中。其默认存储于DERBY中，但一般在</strong>生产环境</strong>下存储于<strong>mysql</strong>中。</li><li><strong>(表)数据</strong>存储于<strong>HDFS</strong>中。</li></ul><h3 id="补充：元数据的讲解"><a href="#补充：元数据的讲解" class="headerlink" title="补充：元数据的讲解"></a>补充：元数据的讲解</h3><p>元数据（Metadata）是指描述数据的数据，它提供关于数据集、资源、文件、系统或者业务流程的额外信息，其中就包含库名，表名，字段，数据类型等。</p><p>在Hive中，<strong>元数据</strong>则是由<strong>HiveMetaStore</strong>来<strong>统一管理</strong>，进行存储、管理、保护和查询等操作。</p><h2 id="4、计算引擎"><a href="#4、计算引擎" class="headerlink" title="4、计算引擎"></a>4、计算引擎</h2><p><strong>一</strong>：<strong>MapReduce</strong></p><ul><li><p>Map：清洗，列变形，列裁剪</p></li><li><p>Map+Reduce：聚合</p></li></ul><p><strong>二</strong>：<strong>Spark</strong> ✔</p><ul><li><p>1、Job中间输出结果可以保存在内存，不再需要读写HDFS</p></li><li><p>2、速度快，比MapReduce平均快10倍以上</p></li></ul><h2 id="5、Hive层次结构【元数据映射】"><a href="#5、Hive层次结构【元数据映射】" class="headerlink" title="5、Hive层次结构【元数据映射】"></a>5、Hive层次结构【元数据映射】</h2><table><thead><tr><th align="center">逻辑结构</th><th align="center">物理结构</th></tr></thead><tbody><tr><td align="center">库</td><td align="center">文件夹(与库同名.db)</td></tr><tr><td align="center">表</td><td align="center">文件夹(与表同名)</td></tr><tr><td align="center">分区</td><td align="center">文件夹 (格式：分区字段名&#x3D;分区字段值)</td></tr><tr><td align="center">数据</td><td align="center">文件</td></tr><tr><td align="center">分桶</td><td align="center">小文件（目的：抽样和数据修改）</td></tr></tbody></table><h2 id="6、Hive执行过程"><a href="#6、Hive执行过程" class="headerlink" title="6、Hive执行过程"></a>6、Hive执行过程</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hive%E6%9E%B6%E6%9E%84%E5%9B%BE.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.UI客户端发出请求 executeQuery[执行查询语句]</span><br><span class="line">2.Driver[驱动] 通过 Compiler 进行编译</span><br><span class="line">3.Compiler 需要向 MetaStore 请求元数据。</span><br><span class="line">编译过程：</span><br><span class="line">Compiler[驱动] 得到 元数据 后</span><br><span class="line">先 生成 逻辑执行计划 </span><br><span class="line">再 通过优化形成 物理执行计划</span><br><span class="line">4.将 物理执行计划 通过 Driver[驱动] 交给 ExecutionEngine[执行引擎]</span><br><span class="line">5.ExecutionEngine[执行引擎] 将 物理执行计划 交给 hadoop的MapReduce进行job任务。</span><br><span class="line">6.最终结果落盘到datanode上。</span><br><span class="line">7.UI客户端 向 Driver[驱动] 发起请求 fetchResults</span><br><span class="line">8.Driver 通过 ExecutionEngine[执行引擎] 从 datanode 上将数据拉过来，交给 UI客户端。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive的基本操作（创建与修改）</title>
      <link href="/2024/07/08/Hive%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%EF%BC%88%E5%88%9B%E5%BB%BA%E4%B8%8E%E4%BF%AE%E6%94%B9%EF%BC%89/"/>
      <url>/2024/07/08/Hive%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%EF%BC%88%E5%88%9B%E5%BB%BA%E4%B8%8E%E4%BF%AE%E6%94%B9%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="必备知识"><a href="#必备知识" class="headerlink" title="必备知识"></a>必备知识</h1><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><table><thead><tr><th align="center">类型</th><th align="center">写法</th></tr></thead><tbody><tr><td align="center">字符</td><td align="center">char, varchar, string✔</td></tr><tr><td align="center">整数</td><td align="center">tinyint, smallint, int✔, bigint✔</td></tr><tr><td align="center">小数</td><td align="center">float, double, numeric(m,n), decimal(m,n)✔</td></tr><tr><td align="center">布尔值</td><td align="center">boolean✔</td></tr><tr><td align="center">时间</td><td align="center">date✔, timestamp✔</td></tr></tbody></table><h3 id="复杂类型-集合类型"><a href="#复杂类型-集合类型" class="headerlink" title="复杂类型(集合类型)"></a>复杂类型(集合类型)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、数组：array&lt;T&gt;</span><br><span class="line">面向用户提供的原始数据做结构化映射</span><br><span class="line">样例： [] / |156,1778,42,138|=&gt; 描述同一个维度数据</span><br><span class="line"></span><br><span class="line">2、键值对：map&lt;K,V&gt;</span><br><span class="line">样例： |LogicJava:88,mysql:89|</span><br><span class="line"></span><br><span class="line">3、结构体：struct&lt;name1:value1,name2:value2,....&gt;</span><br><span class="line">样例： 类json格式【以&#123;&#125;开头结尾，且结构稳定】 =&gt; 结构化数据</span><br></pre></td></tr></table></figure><h1 id="【创建】表操作"><a href="#【创建】表操作" class="headerlink" title="【创建】表操作"></a>【创建】表操作</h1><h2 id="一：hive建表【基本语法】"><a href="#一：hive建表【基本语法】" class="headerlink" title="一：hive建表【基本语法】"></a>一：hive建表【基本语法】</h2><h3 id="语法组成"><a href="#语法组成" class="headerlink" title="语法组成"></a>语法组成</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">组成一：建表 = 基本格式 + 行格式 + 额外处理</span><br><span class="line">组成二：上传数据</span><br></pre></td></tr></table></figure><h4 id="基本格式"><a href="#基本格式" class="headerlink" title="*基本格式"></a>*基本格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> TABLE_NAME(</span><br><span class="line">    FIELD_NAME DATA_TYPE,</span><br><span class="line">    FIELD_NAME DATA_TYPE,</span><br><span class="line">    ....</span><br><span class="line">)[comment <span class="string">&#x27;描述备注&#x27;</span>]</span><br></pre></td></tr></table></figure><h4 id="行格式"><a href="#行格式" class="headerlink" title="*行格式"></a>*行格式</h4><h5 id="形式一：row-format-delimited"><a href="#形式一：row-format-delimited" class="headerlink" title="形式一：row format delimited"></a><strong>形式一：row format delimited</strong></h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、应用场景：面向文本，非结构化与半结构化数据</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、模拟数据：</span><br><span class="line"><span class="number">123</span>,张三,<span class="number">16853210211116</span>,<span class="literal">true</span>,<span class="number">26238.5</span>,阅读;跑步;唱歌,java:<span class="number">98</span>;mysql:<span class="number">54</span>,province:南京;city:江宁</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、案例演示：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> TABLE_NAME(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name string,</span><br><span class="line"><span class="type">time</span> <span class="type">bigint</span>,</span><br><span class="line">isPartyMember <span class="type">boolean</span>,</span><br><span class="line">hobby <span class="keyword">array</span><span class="operator">&lt;</span>string<span class="operator">&gt;</span>,</span><br><span class="line">scores map<span class="operator">&lt;</span>string,<span class="type">int</span><span class="operator">&gt;</span>,</span><br><span class="line">address struct<span class="operator">&lt;</span>province:string,city:string<span class="operator">&gt;</span></span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">collection items terminated <span class="keyword">by</span> <span class="string">&#x27;;&#x27;</span></span><br><span class="line">map keys terminated <span class="keyword">by</span> <span class="string">&#x27;:&#x27;</span></span><br><span class="line">lines terminated <span class="keyword">by</span> <span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、讲解：</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span>列分隔符【字段: id,name...】</span><br><span class="line">collection items terminated <span class="keyword">by</span> <span class="string">&#x27;;&#x27;</span>集合项内部间的分隔符</span><br><span class="line">map keys terminated <span class="keyword">by</span> <span class="string">&#x27;:&#x27;</span>键值对[map]分隔符</span><br><span class="line">lines terminated <span class="keyword">by</span> <span class="string">&#x27;\n&#x27;</span>行分隔符【默认，一般可以省略】</span><br></pre></td></tr></table></figure><h5 id="形式二：row-format-serde-‘CLASS-PATH’"><a href="#形式二：row-format-serde-‘CLASS-PATH’" class="headerlink" title="形式二：row format serde ‘CLASS_PATH’"></a><strong>形式二：row format serde ‘CLASS_PATH’</strong></h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、应用场景：面向结构化数据，即：结构清晰的数据</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、CLASS_PATH有以下几种选择：</span><br><span class="line">选择一：CSV【简单类型】</span><br><span class="line">数据呈现：</span><br><span class="line">&quot;1&quot;,&quot;2&quot;,&quot;Football&quot;</span><br><span class="line">&quot;2&quot;,&quot;2&quot;,&quot;Soccer&quot;</span><br><span class="line">&quot;3&quot;,&quot;2&quot;,&quot;Baseball &amp; Softball&quot;</span><br><span class="line">        代码：</span><br><span class="line">        <span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> TABLE_NAME(</span><br><span class="line">                id string,</span><br><span class="line">                page string,</span><br><span class="line">                word string</span><br><span class="line">            )</span><br><span class="line">         <span class="type">row</span> format serde <span class="string">&#x27;org.apache.hadoop.hive.serde2.OpenCSVSerde&#x27;</span></span><br><span class="line">         <span class="keyword">with</span> serdeproperties(</span><br><span class="line">                <span class="string">&#x27;separatorChar&#x27;</span><span class="operator">=</span><span class="string">&#x27;,&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;quoteChar&#x27;</span><span class="operator">=</span><span class="string">&#x27;&quot;&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;escapeChar&#x27;</span><span class="operator">=</span><span class="string">&#x27;\\&#x27;</span></span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">选择二：regex【正则】</span><br><span class="line">数据呈现：</span><br><span class="line"><span class="number">123</span>,张三,<span class="number">16853210211116</span>,<span class="literal">true</span>,<span class="number">26238.5</span>,阅读;跑步;唱歌,java:<span class="number">98</span>;mysql:<span class="number">54</span>,province:南京;city:江宁</span><br><span class="line">代码：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> TABLE_NAME(</span><br><span class="line">                id <span class="type">int</span>,</span><br><span class="line">                name string,</span><br><span class="line">                <span class="type">time</span> <span class="type">bigint</span>,</span><br><span class="line">                isPartyMember <span class="type">boolean</span>,</span><br><span class="line">                hobby <span class="keyword">array</span><span class="operator">&lt;</span>string<span class="operator">&gt;</span>,</span><br><span class="line">                scores map<span class="operator">&lt;</span>string,<span class="type">int</span><span class="operator">&gt;</span>,</span><br><span class="line">                address struct<span class="operator">&lt;</span>province:string,city:string<span class="operator">&gt;</span></span><br><span class="line">            )</span><br><span class="line">            <span class="type">row</span> format serde <span class="string">&#x27;org.apache.hadoop.hive.serde2.RegexSerDe&#x27;</span></span><br><span class="line"><span class="keyword">with</span> serdeproperties(</span><br><span class="line">            <span class="string">&#x27;input.regex&#x27;</span><span class="operator">=</span><span class="string">&#x27;^(//d+),(.*?),(//d+),(true|false),(\\d+\\.?\\d+?)$&#x27;</span></span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">选择三：JsonSerDe</span><br><span class="line">数据呈现：</span><br><span class="line">&#123;&quot;name&quot;:&quot;henry&quot;,&quot;age&quot;:<span class="number">22</span>,&quot;gender&quot;:&quot;male&quot;,&quot;phone&quot;:&quot;18014499655&quot;&#125;</span><br><span class="line">代码：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> json(</span><br><span class="line">                name string,</span><br><span class="line">                age <span class="type">int</span>,</span><br><span class="line">                gender string,</span><br><span class="line">                phone string</span><br><span class="line">            )</span><br><span class="line">            <span class="type">row</span> format serde <span class="string">&#x27;org.apache.hive.hcatalog.data.JsonSerDe&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="额外处理"><a href="#额外处理" class="headerlink" title="*额外处理"></a>*额外处理</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、store【存储】</span><br><span class="line">基本语法：stored <span class="keyword">as</span> <span class="string">&#x27;存储格式&#x27;</span></span><br><span class="line">存储格式：textfile✔,orc,parquet,sequencefile,...</span><br><span class="line">案例：</span><br><span class="line">stored <span class="keyword">as</span> textfile</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、tblproperties【表属性】(通用)：</span><br><span class="line">案例【实际情况具体分析】：</span><br><span class="line">tblproperties(</span><br><span class="line"><span class="string">&#x27;skip.header.line.count&#x27;</span><span class="operator">=</span><span class="string">&#x27;1&#x27;</span>【跳过表头，即：第一行】</span><br><span class="line">...</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="上传数据入表"><a href="#上传数据入表" class="headerlink" title="*上传数据入表"></a>*上传数据入表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">方法一【不建议用】：</span><br><span class="line">hdfs dfs <span class="operator">-</span>put employee.txt <span class="operator">/</span>hive312<span class="operator">/</span>warehouse<span class="operator">/</span>yb12211.db<span class="operator">/</span>inner_table_employee</span><br><span class="line"></span><br><span class="line">方法二【有校验过程】：✔</span><br><span class="line">需知：</span><br><span class="line">    <span class="keyword">local</span> ：表示数据在虚拟机本地</span><br><span class="line">        缺少<span class="keyword">local</span> ：表示数据在hdfs上</span><br><span class="line">overload ：覆盖</span><br><span class="line">缺少overload ：追加</span><br><span class="line">第一种【本地虚拟机】：</span><br><span class="line">load data <span class="keyword">local</span> inpath <span class="string">&#x27;/root/file/employee.txt&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> yb12211.inner_table_employee;</span><br><span class="line">第二种【hdfs】：</span><br><span class="line">load data inpath <span class="string">&#x27;/hive_data/hive_cha01/employee/employee.txt&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> yb12211.inner_table_employee;</span><br><span class="line"></span><br><span class="line">方法三【只用于【外部表】】：✔</span><br><span class="line">基本格式：location <span class="string">&#x27;hdfs中存放文件的【目录】的路径&#x27;</span>外部挂载</span><br></pre></td></tr></table></figure><h3 id="针对性实践操作"><a href="#针对性实践操作" class="headerlink" title="针对性实践操作"></a>针对性实践操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">案例一：</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1|henry|1.81|1995-03-18|江苏,南京,玄武,北京东路68号|logicjava:88,javaoop:76,mysql:80,ssm:82|beauty,money,joke</span></span><br><span class="line"><span class="comment">2|arill|1.59|1996-7-30|安徽,芜湖,南山,西湖东路68号|logicjava:79,javaoop:58,mysql:65,ssm:85|beauty,power,sleeping</span></span><br><span class="line"><span class="comment">3|mary|1.72|1995-09-02|山东,青岛,长虹,天山东路68</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> students;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> students(</span><br><span class="line">number <span class="type">int</span>,</span><br><span class="line">name string,</span><br><span class="line">height <span class="type">decimal</span>(<span class="number">3</span>,<span class="number">2</span>),</span><br><span class="line">birthday <span class="type">date</span>,</span><br><span class="line">house struct<span class="operator">&lt;</span>province:string,city:string,district:string,street:string<span class="operator">&gt;</span>,</span><br><span class="line">scores map<span class="operator">&lt;</span>string,<span class="type">int</span><span class="operator">&gt;</span>,</span><br><span class="line">hobby <span class="keyword">array</span><span class="operator">&lt;</span>string<span class="operator">&gt;</span></span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> &quot;|&quot;</span><br><span class="line">collection items terminated <span class="keyword">by</span> &quot;,&quot;</span><br><span class="line">map keys terminated <span class="keyword">by</span> &quot;:&quot;</span><br><span class="line">stored <span class="keyword">as</span> textfile;</span><br><span class="line"></span><br><span class="line">load data inpath <span class="string">&#x27;/zhou/students.txt&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> zhou.students;</span><br><span class="line"></span><br><span class="line">案例二：</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">user_id,auction_id,cat_id,cat1,property,buy_mount,day</span></span><br><span class="line"><span class="comment">786295544,41098319944,50014866,50022520,21458:86755362;13023209:3593274;10984217:21985;122217965:3227750;21477:28695579;22061:30912;122217803:3230095,2,123434123</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> sam_mum_baby_trade;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> sam_mum_baby_trade(</span><br><span class="line">user_id <span class="type">bigint</span>,</span><br><span class="line">auction_id <span class="type">bigint</span>,</span><br><span class="line">cat_id <span class="type">bigint</span>,</span><br><span class="line">cat1 <span class="type">bigint</span>,</span><br><span class="line">property map<span class="operator">&lt;</span><span class="type">bigint</span>,<span class="type">bigint</span><span class="operator">&gt;</span>,</span><br><span class="line">buy_mount <span class="type">int</span>,</span><br><span class="line"><span class="keyword">day</span> <span class="type">bigint</span></span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> &quot;,&quot;</span><br><span class="line">collection items terminated <span class="keyword">by</span> &quot;;&quot;</span><br><span class="line">map keys terminated <span class="keyword">by</span> &quot;:&quot;</span><br><span class="line">stored <span class="keyword">as</span> textfile</span><br><span class="line">tblproperties (</span><br><span class="line"><span class="string">&#x27;skip.header.line.count&#x27;</span><span class="operator">=</span><span class="string">&#x27;1&#x27;</span></span><br><span class="line">);</span><br><span class="line">load data inpath <span class="string">&#x27;/zhou/sam_mum_baby_trade.csv&#x27;</span></span><br><span class="line"><span class="keyword">into</span> <span class="keyword">table</span> zhou.sam_mum_baby_trade;</span><br><span class="line"></span><br><span class="line">案例三:</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&quot;1&quot;,&quot;2&quot;,&quot;Football&quot;</span></span><br><span class="line"><span class="comment">&quot;2&quot;,&quot;2&quot;,&quot;Soccer&quot;</span></span><br><span class="line"><span class="comment">&quot;3&quot;,&quot;2&quot;,&quot;Baseball &amp; Softball&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> categories;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> categories(</span><br><span class="line">id string,</span><br><span class="line">page string,</span><br><span class="line">word string</span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format serde <span class="string">&#x27;org.apache.hadoop.hive.serde2.OpenCSVSerde&#x27;</span></span><br><span class="line"><span class="keyword">with</span> serdeproperties(</span><br><span class="line"><span class="string">&#x27;separatorChar&#x27;</span><span class="operator">=</span><span class="string">&#x27;,&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;quoteChar&#x27;</span><span class="operator">=</span><span class="string">&#x27;&quot;&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;escapeChar&#x27;</span><span class="operator">=</span><span class="string">&#x27;\\&#x27;</span></span><br><span class="line">)</span><br><span class="line">stored <span class="keyword">as</span> textfile;</span><br><span class="line">load data inpath <span class="string">&#x27;/zhou/categories.csv&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> zhou.categories;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> categories;</span><br><span class="line"></span><br><span class="line">案例四：</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;&quot;name&quot;:&quot;henry&quot;,&quot;age&quot;:22,&quot;gender&quot;:&quot;male&quot;,&quot;phone&quot;:&quot;18014499655&quot;&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>Json</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> json;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> json(</span><br><span class="line">name string,</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender string,</span><br><span class="line">phone string</span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format serde <span class="string">&#x27;org.apache.hive.hcatalog.data.JsonSerDe&#x27;</span></span><br><span class="line">stored <span class="keyword">as</span> textfile;</span><br><span class="line">load data inpath <span class="string">&#x27;/zhou/json.log&#x27;</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> zhou.json;</span><br><span class="line"></span><br><span class="line">案例五：</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">125;男;2015-9-7 1:52:22;1521.84</span></span><br><span class="line"><span class="comment">883;男;2014-9-18 5:24:42;6391.45</span></span><br><span class="line"><span class="comment">652;女;2014-5-4 5:56:45;9603.79</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> test1w(</span><br><span class="line">user_id <span class="type">int</span>,</span><br><span class="line">user_gender string,</span><br><span class="line">order_time <span class="type">timestamp</span>,</span><br><span class="line">order_amount <span class="type">decimal</span>(<span class="number">6</span>,<span class="number">2</span>)</span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format serde <span class="string">&#x27;org.apache.hadoop.hive.serde2.RegexSerDe&#x27;</span></span><br><span class="line"><span class="keyword">with</span> serdeproperties(</span><br><span class="line"><span class="string">&#x27;input.regex&#x27;</span><span class="operator">=</span><span class="string">&#x27;(\\d+);(.*?);(\\d&#123;4&#125;-\\d&#123;1,2&#125;-\\d&#123;1,2&#125; \\d&#123;1,2&#125;:\\d&#123;1,2&#125;:\\d&#123;1,2&#125;);(\\d+\.?\\d+?)&#x27;</span></span><br><span class="line">)</span><br><span class="line">stored <span class="keyword">as</span> textfile</span><br><span class="line">location <span class="string">&#x27;/zhou/test1w&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test1w;</span><br></pre></td></tr></table></figure><h2 id="二：hive建表【高阶语法】"><a href="#二：hive建表【高阶语法】" class="headerlink" title="二：hive建表【高阶语法】"></a>二：hive建表【高阶语法】</h2><h3 id="1：CTAS"><a href="#1：CTAS" class="headerlink" title="1：CTAS"></a>1：CTAS</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【本质】：在原有表的基础上查询并创建新表</span><br><span class="line">基本语法：</span><br><span class="line">create table if not exists NEW_TABLE_NAME as select ... from OLD_TABLE_NAME ...</span><br><span class="line">案例：</span><br><span class="line">原有的表：hive_ext_regex_test1w</span><br><span class="line">语句：</span><br><span class="line">    create table if not exists hive_ext_test_before2015 as</span><br><span class="line">    select * from hive_ext_regex_test1w</span><br><span class="line">    where year(order_time)&lt;=2015;</span><br></pre></td></tr></table></figure><h3 id="2：CTE"><a href="#2：CTE" class="headerlink" title="2：CTE"></a>2：CTE</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">【本质】：对表进行层层筛选，最终形成新表</span><br><span class="line">基本语法：</span><br><span class="line"><span class="keyword">as</span> with....select...</span><br><span class="line">案例：</span><br><span class="line">场景：<span class="number">2015</span>年之前的所有数据 以及 <span class="number">2015</span>年之后男性<span class="number">5</span>个以上订单数或<span class="number">5</span>w以上订单总额的订单数据。</span><br><span class="line">原有的表：hive_ext_regex_test1w</span><br><span class="line">语句：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> hive_test_before2015_and_male_over5or5w <span class="keyword">as</span></span><br><span class="line"><span class="keyword">with</span></span><br><span class="line">before2015 <span class="keyword">as</span> (</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> hive_ext_regex_test1w</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(order_time)<span class="operator">&lt;=</span><span class="number">2015</span></span><br><span class="line">),</span><br><span class="line">agg_male_over5or5w <span class="keyword">as</span> (</span><br><span class="line"><span class="keyword">select</span> user_id</span><br><span class="line"><span class="keyword">from</span> hive_ext_regex_test1w</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(order_time)<span class="operator">&gt;</span><span class="number">2015</span> <span class="keyword">and</span> user_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> user_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;=</span><span class="number">5</span> <span class="keyword">or</span> <span class="built_in">sum</span>(order_amount)<span class="operator">&gt;=</span><span class="number">50000</span></span><br><span class="line">),</span><br><span class="line">male_over5or5w <span class="keyword">as</span> (</span><br><span class="line"><span class="keyword">select</span> A.<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span>  hive_ext_regex_test1w A</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> agg_male_over5or5w B</span><br><span class="line"><span class="keyword">on</span> <span class="keyword">year</span>(A.order_time)<span class="operator">&gt;</span><span class="number">2015</span> <span class="keyword">and</span> A.user_id<span class="operator">=</span>B.user_id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> before2015</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span>【注意：<span class="keyword">union</span> <span class="keyword">all</span> <span class="operator">=</span><span class="operator">&gt;</span> 将表并在一起且不去重】</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> male_over5or5w;</span><br></pre></td></tr></table></figure><h3 id="3：CTL"><a href="#3：CTL" class="headerlink" title="3：CTL"></a>3：CTL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【本质】：复制原表的表结构</span><br><span class="line">基本语法：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> NEW_TABLE_NAME <span class="keyword">like</span> OLD_TABLE_NAME;</span><br><span class="line">案例：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> hive_test1w_like <span class="keyword">like</span> hive_ext_regex_test1w;</span><br></pre></td></tr></table></figure><h1 id="【修改】表操作"><a href="#【修改】表操作" class="headerlink" title="【修改】表操作"></a>【修改】表操作</h1><h3 id="提前需知"><a href="#提前需知" class="headerlink" title="提前需知"></a>提前需知</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1、查看表字段基本信息：</span><br><span class="line">desc 表名;</span><br><span class="line"></span><br><span class="line">2、查看表字段详细信息：</span><br><span class="line">desc formatted 表名;=&gt; 由此可查看表中可修改的属性</span><br><span class="line"></span><br><span class="line">3、查看建表流程：</span><br><span class="line">show create 表名;</span><br></pre></td></tr></table></figure><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">alter table TABLE_NAME</span><br><span class="line">rename to NEW_NAME;</span><br><span class="line">set tblproperties(&#x27;key&#x27;=&#x27;value&#x27;)-- 修改表属性：包括各种分隔符,SerDe,...</span><br><span class="line">ser fileformat FORMAT;-- 修改文件格式</span><br><span class="line">change old_name new_name TYPE;-- 修改字段名</span><br><span class="line">column(field_name TYPE)-- 添加列</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建20之购物商店搭建</title>
      <link href="/2024/07/04/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA20%E4%B9%8B%E8%B4%AD%E7%89%A9%E5%95%86%E5%BA%97%E6%90%AD%E5%BB%BA/"/>
      <url>/2024/07/04/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA20%E4%B9%8B%E8%B4%AD%E7%89%A9%E5%95%86%E5%BA%97%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="1、商店商品管理"><a href="#1、商店商品管理" class="headerlink" title="1、商店商品管理"></a>1、商店商品管理</h3><p><strong>效果图</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%80%9A%E7%94%A8%E5%A2%9E%E5%88%A0%E6%94%B9%E9%A1%B5%E9%9D%A2.png"></p><p><strong>ShopGoods.vue文件</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询商品名称&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 新增+批量删除 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> <span class="attr">sortable</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;price&quot;</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品描述&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;unit&quot;</span> <span class="attr">label</span>=<span class="string">&quot;单位&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;store&quot;</span> <span class="attr">label</span>=<span class="string">&quot;库存&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;商品图片&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">v-if</span>=<span class="string">&quot;scope.row.img&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">:src</span>=<span class="string">&quot;scope.row.img&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px;&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.img]&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;上架时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">      <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.price&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品描述&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.description&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;单位&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.unit&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;库存&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.store&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 上传物品照片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;物品图片&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传商品照片<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          request.<span class="title function_">get</span>(<span class="string">&#x27;/shopGoods/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">               &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 上传商品图片</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">img</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/shopGoods/update&#x27;</span> : <span class="string">&#x27;/shopGoods/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopGoods/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">              request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopGoods/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2、购物车管理"><a href="#2、购物车管理" class="headerlink" title="2、购物车管理"></a>2、购物车管理</h3><p><strong>效果图</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%AE%A1%E7%90%86.png"></p><p><strong>Cart.vue文件</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询名称&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> <span class="attr">sortable</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;goodsId&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品ID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">label</span>=<span class="string">&quot;用户ID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品数量&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;添加时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品数量&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.num&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/cart/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/cart/update&#x27;</span> : <span class="string">&#x27;/cart/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/cart/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/cart/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3、订单管理"><a href="#3、订单管理" class="headerlink" title="3、订单管理"></a>3、订单管理</h3><p><strong>效果图</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%861.png"></p><p>点击“查看物品”按钮后，效果：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%862.png"></p><p><strong>主要代码</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询标题&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;no&quot;</span> <span class="attr">label</span>=<span class="string">&quot;编号&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;totalPrice&quot;</span> <span class="attr">label</span>=<span class="string">&quot;总金额&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;下单时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;payTime&quot;</span> <span class="attr">label</span>=<span class="string">&quot;付款时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span> <span class="attr">label</span>=<span class="string">&quot;用户账号&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;nickname&quot;</span> <span class="attr">label</span>=<span class="string">&quot;用户昵称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;查看商品&quot;</span>  <span class="attr">width</span>=<span class="string">&quot;180&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;viewGoods(scope.row.id)&quot;</span>&gt;</span>查看商品<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 8、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;订单信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;编号&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.no&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;总金额&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.totalPrice&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.state&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;下单时间&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-date-picker</span> <span class="attr">v-model</span>=<span class="string">&quot;form.time&quot;</span> <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span> <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;选择日期时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;付款时间&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-date-picker</span> <span class="attr">v-model</span>=<span class="string">&quot;form.payTime&quot;</span> <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span> <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;选择日期时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 查看商品 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;商品信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;goodsList&quot;</span> <span class="attr">border</span> <span class="attr">stripe</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> <span class="attr">sortable</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;price&quot;</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品描述&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;unit&quot;</span> <span class="attr">label</span>=<span class="string">&quot;单位&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;store&quot;</span> <span class="attr">label</span>=<span class="string">&quot;库存&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;图片&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">el-image</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;scope.row.img&quot;</span> <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.img]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;上架时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;购买数量&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;News&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                title : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入标题&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">goodsList</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dialogFormVisible1</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/shopOrders/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 查看商品</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">viewGoods</span>(<span class="params">orderId</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&quot;/shopOrders/getGoodsById/&quot;</span> + orderId).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">goodsList</span> = res.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">dialogFormVisible1</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/shopOrders/update&#x27;</span> : <span class="string">&#x27;/shopOrders/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopOrders/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopOrders/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="页面设计"><a href="#页面设计" class="headerlink" title="页面设计"></a>页面设计</h2><h3 id="基本思路设计图"><a href="#基本思路设计图" class="headerlink" title="基本思路设计图"></a>基本思路设计图</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%B4%AD%E7%89%A9%E5%95%86%E5%9F%8E%E4%B8%BB%E4%BD%93%E6%80%9D%E8%B7%AF.png"></p><h3 id="登录Login-vue的动态设置"><a href="#登录Login-vue的动态设置" class="headerlink" title="登录Login.vue的动态设置"></a>登录Login.vue的动态设置</h3><p>当检测角色为用户时，登录后会跳转到【购物页面】，如下图</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%95%86%E5%BA%97%E9%A6%96%E9%A1%B5%E9%83%A8%E5%88%86.png"></p><p>当检测角色为管理员时，登录后会跳转到【后台页面】，如下图</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%B7%B3%E8%BD%AC%E8%87%B3%E5%90%8E%E5%8F%B0%E9%A1%B5%E9%9D%A2.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">login</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//验证正确性</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;loginRef&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (valid) &#123;</span><br><span class="line"><span class="comment">// 验证通过</span></span><br><span class="line">request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span><br><span class="line"><span class="comment">//200表示成功，页面跳转【动态设置主要代码块】</span></span><br><span class="line"><span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">role</span> === <span class="string">&#x27;管理员&#x27;</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/front/home&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">                </span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line"><span class="comment">//存储用户数据</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;hony-user&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span>)) </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>login.vue完整代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 100vh; display:flex;align-items:center;justify-content:center;background-color: #0f9876&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display:flex; background-color: white; width: 50%;border-radius: 5px;overflow: hidden&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 照片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/login.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 登入表单 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; display:flex; align-items:center;justify-content:center;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;loginRef&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px; font-weight: bold; text-align:center; margin-bottom:20px&quot;</span>&gt;</span>欢迎登录后台管理系统<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 输入框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">show-password</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 验证码 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;code&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入验证码&quot;</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-circle-check&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.code&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">data</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; height:36px&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">valid-code</span> @<span class="attr">update:value</span>=<span class="string">&quot;getCode&quot;</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 确认按钮 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>登 录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 提示信息 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;&quot;</span>&gt;</span>还没有账号？请 <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9876; cursor:pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/register&#x27;)&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;text-align:right&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9869; cursor:pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleForgetPass&quot;</span>&gt;</span>忘记密码<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 忘记密码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;忘记密码&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;forgetPassDialogVis&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;forgetUserForm&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.username&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.phone&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;forgetPassDialogVis = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reSetPassword&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ValidCode</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/ValidCode/ValidCode.vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ValidCode</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 验证码校验</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">validateCode</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请确认输入码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value.<span class="title function_">toLowerCase</span>() !== <span class="variable language_">this</span>.<span class="property">code</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;验证码错误&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// 验证码组件传递过来的code</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 表单里用户输入的code 验证码</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入账号&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">code</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">validator</span>: validateCode , <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 忘记密码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">forgetPassDialogVis</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">forgetUserForm</span>: &#123;&#125;  <span class="comment">// 忘记密码的表单数据</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getCode</span>(<span class="params">code</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(code)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">code</span>=code.<span class="title function_">toLowerCase</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">login</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//验证正确性</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;loginRef&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过</span></span></span><br><span class="line"><span class="language-javascript">                    request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//200表示成功，页面跳转(动态页面)</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">role</span> === <span class="string">&#x27;管理员&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/front/home&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;hony-user&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span>)) <span class="comment">//存储用户数据</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 忘记密码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleForgetPass</span>(<span class="params"></span>)&#123; <span class="comment">//初始化表单数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">forgetUserForm</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">forgetPassDialogVis</span> = <span class="literal">true</span> <span class="comment">// 跳出弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reSetPassword</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//将数据传送至后台，由后台进行密码初始化</span></span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">put</span>(<span class="string">&#x27;/password&#x27;</span>,<span class="variable language_">this</span>.<span class="property">forgetUserForm</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;重置成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">forgetPassDialogVis</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="路由器：index-js中的配置"><a href="#路由器：index-js中的配置" class="headerlink" title="路由器：index.js中的配置"></a>路由器：index.js中的配置</h3><p>创建一个购物页面，主要用于向用户展示。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 购物页面</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/front&#x27;</span>,</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;Front&#x27;</span>,</span><br><span class="line"><span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;商店&#x27;</span> &#125;, </span><br><span class="line"><span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Front.vue&#x27;</span>),</span><br><span class="line"><span class="attr">children</span>: [</span><br><span class="line"><span class="comment">// 首页展示商品页面</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;FrontHome&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Home.vue&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 商品详情页面</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;Detail&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Detail.vue&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;cart&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;Cart&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Cart.vue&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;shopOrders&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;ShopOrders&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/ShopOrders.vue&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>完整代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; component &#125; <span class="keyword">from</span> <span class="string">&#x27;vue/types/umd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决导航栏或者底部导航tobBar中vue-router频繁点击报错问题</span></span><br><span class="line"><span class="keyword">const</span> originalPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>;</span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> <span class="title function_">push</span>(<span class="params">location: any</span>): <span class="title class_">Promise</span>&lt;any&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    originalPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject);</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> err;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Manager&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Manager.vue&#x27;</span>),</span><br><span class="line">    <span class="comment">// 重定向主页</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="comment">// 子路由</span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;home&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;系统首页&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Home.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;user&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;用户信息&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/User.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;403&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Auth&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;无权限&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Auth.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;password&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Password&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;修改密码&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Password.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;person&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;个人信息&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Person.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;News&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;新闻信息&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/News.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;newsDetail&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;NewsDetail&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;新闻详情页&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/NewsDetail.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;notice&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Notice&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;系统公告&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Notice.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;charts&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Charts&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;数据统计&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Charts.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;orders&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Orders&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;订单管理&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Orders.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;goods&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Goods&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;物品报修&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Goods.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;logs&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Logs&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;系统日志&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Logs.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;shopGoods&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;ShopGoods&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;小型商城&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/ShopGoods.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;cart&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Cart&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;购物车管理&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Cart.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;shopOrders&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;ShopOrders&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;订单管理&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/ShopOrders.vue&#x27;</span>) &#125;,</span><br><span class="line">      <span class="comment">// &#123; path: &#x27;chats&#x27;,name: &#x27;Chats&#x27;,meta:&#123; name: &#x27;聊天室&#x27; &#125;,component: () =&gt; import(&#x27;../views/manager/Chats.vue&#x27;) &#125;,</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;登录&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;注册&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Register.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/test.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 其他未搭建的页面统一跳转至404</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;404&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;无法访问&#x27;</span> &#125;, </span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/404.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 购物页面</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/front&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Front&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;商店&#x27;</span> &#125;, </span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Front.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      <span class="comment">// 首页展示商品页面</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;FrontHome&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Home.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 商品详情页面</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Detail&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Detail.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;cart&#x27;</span>,</span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;Cart&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/Cart.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;shopOrders&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ShopOrders&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/front/ShopOrders.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">base</span>: process.<span class="property">env</span>.<span class="property">BASE_URL</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// to : 到达的路由信息(去哪里)</span></span><br><span class="line">  <span class="comment">// from : 开源的路由信息(从哪来)</span></span><br><span class="line">  <span class="comment">// next : 帮助我们跳转路由的函数(放行)</span></span><br><span class="line">  <span class="keyword">let</span> adminPaths = [<span class="string">&#x27;/user&#x27;</span>] <span class="comment">//管理员可访问的路径</span></span><br><span class="line">  <span class="comment">// 前端获取用户信息</span></span><br><span class="line">  <span class="keyword">let</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span>(user.<span class="property">role</span> !== <span class="string">&#x27;管理员&#x27;</span> &amp;&amp; adminPaths.<span class="title function_">includes</span>(to.<span class="property">path</span>))&#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="string">&#x27;/403&#x27;</span>) <span class="comment">// 普通用户无权访问，跳转至 403 页面</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h3 id="头部区域：Front-vue"><a href="#头部区域：Front-vue" class="headerlink" title="头部区域：Front.vue"></a>头部区域：Front.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--头部区域--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; height: 60px; line-height: 60px; border-bottom: 1px solid #eee&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 300px; display: flex; padding-left: 30px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 60px&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1&quot;</span>&gt;</span>欢迎来到xx系统<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 头部导航栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">:default-active</span>=<span class="string">&quot;&#x27;1&#x27;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-menu-demo&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;horizontal&quot;</span> <span class="attr">router</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/front/home&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/front/cart&quot;</span>&gt;</span>我的购物车<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/front/orders&quot;</span>&gt;</span>我的订单<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 用户信息区域 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;!user.username&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: right; padding-right: 30px&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 不存在用户：显示注册和登录按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/login&#x27;)&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/register&#x27;)&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 存在用户：显示下拉菜单 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-dropdown</span> <span class="attr">style</span>=<span class="string">&quot;width: 150px; cursor: pointer; text-align: right&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: inline-block&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;user.avatarUrl&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">style</span>=<span class="string">&quot;width: 30px; border-radius: 50%; position: relative; top: 10px; right: 5px&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-arrow-down&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 5px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-dropdown-menu</span> <span class="attr">slot</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; text-align: center&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 14px; padding: 5px 0&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/front/password&quot;</span>&gt;</span>修改密码<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 14px; padding: 5px 0&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/front/person&quot;</span>&gt;</span>个人信息<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 14px; padding: 5px 0&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration: none&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;logout&quot;</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-dropdown-menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 主体区域 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 1000px; margin: 0 auto&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体代码块 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&quot;Front&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;hony-user&quot;</span>) ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;hony-user&quot;</span>)) : &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;logout&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;退出成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.item</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.item</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#1E90FF</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.item</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: LightPink;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>  </span><br></pre></td></tr></table></figure><h3 id="首页部分：Home-vue"><a href="#首页部分：Home-vue" class="headerlink" title="首页部分：Home.vue"></a>首页部分：Home.vue</h3><p><strong>效果展示</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%95%86%E5%BA%97%E9%A6%96%E9%A1%B5%E9%83%A8%E5%88%86.png"></p><p><strong>主要代码</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 100px&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 轮番图 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-carousel</span> <span class="attr">height</span>=<span class="string">&quot;450px&quot;</span> <span class="attr">:interval</span>=<span class="string">&quot;10000&quot;</span> <span class="attr">arrow</span>=<span class="string">&quot;always&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-carousel-item</span> <span class="attr">v-for</span>=<span class="string">&quot;item in imgs&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-carousel-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-carousel</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 商品样式:运用v-for来生成商品样式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in tableData&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc; padding-bottom: 10px; border-radius: 10px; overflow: hidden&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 商品图片 --&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 点击后会进入详情页面 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.img&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; cursor: pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/front/detail?id=&#x27; + item.id)&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 商品名称 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: #666; padding: 5px; font-size: 18px; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 点击后会进入详情页面 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">b</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/front/detail?id=&#x27; + item.id)&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 商品描述 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: #666; padding: 5px; font-size: 14px; max-height: 3.2em; line-height: 1.6; overflow: hidden; text-overflow: ellipsis;&quot;</span>&gt;</span></span><br><span class="line">                    &#123;&#123; item.description &#125;&#125;</span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 商品价格 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: orangered&quot;</span>&gt;</span></span><br><span class="line">                    ￥ <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;padding: 2px; font-size: 20px; color: orangered&quot;</span>&gt;</span></span><br><span class="line">                      &#123;&#123; item.price &#125;&#125;</span><br><span class="line">                       <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 商品样式的分页 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px 0;display: flex; justify-content: center;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">              @<span class="attr">size-change</span>=<span class="string">&quot;handleSizeChange&quot;</span></span></span><br><span class="line"><span class="tag">              @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:page-sizes</span>=<span class="string">&quot;[2, 5, 10, 20]&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">layout</span>=<span class="string">&quot;prev, pager, next,total&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;FrontHome&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">imgs</span>: [</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;https://img30.360buyimg.com/babel/s1580x830_jfs/t1/109361/24/22897/74054/621ede58E099d37e3/f12730c81df6046a.jpg!cc_1580x830.webp&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;https://img13.360buyimg.com/babel/s1580x830_jfs/t1/96398/30/23715/70228/6221e9d0Ec1b9fe65/f66e2ad76314d6cd.jpg!cc_1580x830.webp&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">tableData</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">total</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">pageNum</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">pageSize</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">load</span>()  <span class="comment">// 获取后台的商品数据</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 分页查询</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">load</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      request.<span class="title function_">get</span>(<span class="string">&quot;/shopGoods/selectByPage&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">params</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 分页配置</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleSizeChange</span>(<span class="params">pageSize</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(pageSize)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">pageSize</span> = pageSize</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="详细页面：Detail-vue"><a href="#详细页面：Detail-vue" class="headerlink" title="详细页面：Detail.vue"></a>详细页面：Detail.vue</h3><p><strong>效果展示</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%95%86%E5%BA%97%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2.png"></p><p><strong>主要代码</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 商品图片 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 300px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-image</span> <span class="attr">:src</span>=<span class="string">&quot;goods.img&quot;</span> <span class="attr">:preview-src-list</span>=<span class="string">&quot;[goods.img]&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; padding-left: 50px&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 商品名称 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; goods.name &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 商品描述 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 14px; &quot;</span>&gt;</span>&#123;&#123; goods.description &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 商品价格 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: orangered&quot;</span>&gt;</span>价格 ￥ &#123;&#123; goods.price &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 商品存库 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 14px; &quot;</span>&gt;</span>库存 &#123;&#123; goods.store &#125;&#125; <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span>&gt;</span>&#123;&#123; goods.unit &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 选择件数 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item1&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;form.num&quot;</span> <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">label</span>=<span class="string">&quot;数量&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input-number</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span>&gt;</span>&#123;&#123; goods.unit &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 购买和加入购物车按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40px&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red; color: white&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-wallet&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 直接购买<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red; color: white&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;addCart&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-shopping-cart-2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 加入购物车<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&quot;Detail&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 当前商品ID</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">id</span>, </span></span><br><span class="line"><span class="language-javascript">        <span class="attr">goods</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">form</span>: &#123; <span class="attr">num</span>: <span class="number">1</span> &#125;, <span class="comment">// 表单，默认个数为1</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;hony-user&quot;</span>) ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;hony-user&quot;</span>)) : &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&quot;/shopGoods/selectById/&quot;</span> + <span class="variable language_">this</span>.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">goods</span> = res.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//  加入购物车</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">addCart</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">username</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&quot;请登录后操作&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">goodsId</span> = <span class="variable language_">this</span>.<span class="property">goods</span>.<span class="property">id</span>  <span class="comment">// 商品id</span></span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">post</span>(<span class="string">&quot;/cart/add&quot;</span>, <span class="variable language_">this</span>.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;加入购物车成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.item1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="购物车页面：Cart-vue"><a href="#购物车页面：Cart-vue" class="headerlink" title="购物车页面：Cart.vue"></a>购物车页面：Cart.vue</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%B4%AD%E7%89%A9%E8%BD%A6%E9%A1%B5%E9%9D%A2.png"></p><h4 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px;margin-top:20px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入名称&quot;</span> <span class="attr">clearable</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">class</span>=<span class="string">&quot;ml-5&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 搜索<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:20px&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;el-table-column prop=&quot;id&quot; label=&quot;序号&quot; width=&quot;80&quot; sortable&gt;&lt;/el-table-column&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;goodsImg&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品图片&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-image</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;scope.row.goodsImg&quot;</span> <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.goodsImg]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;goodsName&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: orangered&quot;</span>&gt;</span>￥ &#123;&#123; scope.row.price &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品数量&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;scope.row.num&quot;</span> <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">label</span>=<span class="string">&quot;数量&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changeNum(scope.row)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input-number</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;添加时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;删除操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">&quot;reference&quot;</span>  <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除 <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-remove-outline&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 3px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 结算 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0; text-align: right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px 0&quot;</span>&gt;</span>当前已选商品总价：<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: orangered&quot;</span>&gt;</span>￥ &#123;&#123; totalPrice &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;color: white; background-color: orangered&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;settleAccount&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-coin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 结 算<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品数量&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.num&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 勾选</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">multipleSelection</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 总价计算</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">totalPrice</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/cart/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSizeChange</span>(<span class="params">pageSize</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(pageSize)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">pageSize</span> = pageSize</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 勾选部分进行计算总价</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">multipleSelection</span> = val</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 进行计算操作</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (val &amp;&amp; val.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                val.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">totalPrice</span> += item.<span class="property">num</span> * item.<span class="property">price</span></span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="variable language_">this</span>.<span class="property">totalPrice</span>.<span class="title function_">toFixed</span>(<span class="number">2</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 实时更新数量及价格</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeNum</span>(<span class="params">row</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">post</span>(<span class="string">&quot;/cart/num/&quot;</span> + row.<span class="property">id</span> + <span class="string">&quot;/&quot;</span> + row.<span class="property">num</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// this.load()</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 计算总价格</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">multipleSelection</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    item.<span class="property">num</span> = row.<span class="property">num</span>  <span class="comment">// 更新选中的数组的数量</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">totalPrice</span> += item.<span class="property">price</span> * row.<span class="property">num</span> <span class="comment">//数字发生变化，需要取到最新的值，进行计算</span></span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="variable language_">this</span>.<span class="property">totalPrice</span>.<span class="title function_">toFixed</span>(<span class="number">2</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 结算</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">settleAccount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">multipleSelection</span> || !<span class="variable language_">this</span>.<span class="property">multipleSelection</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;请选择需要结算的商品&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> data = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">multipleSelection</span>[<span class="number">0</span>].<span class="property">goodsName</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">totalPrice</span>: <span class="variable language_">this</span>.<span class="property">totalPrice</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">carts</span>: <span class="variable language_">this</span>.<span class="property">multipleSelection</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">post</span>(<span class="string">&#x27;/shopOrders/add&#x27;</span>, data).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;结算成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/cart/update&#x27;</span> : <span class="string">&#x27;/cart/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/cart/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="具体讲解"><a href="#具体讲解" class="headerlink" title="具体讲解"></a>具体讲解</h4><h5 id="1、前端数量的更改，后台实时更新"><a href="#1、前端数量的更改，后台实时更新" class="headerlink" title="1、前端数量的更改，后台实时更新"></a>1、前端数量的更改，后台实时更新</h5><p><strong>主要代码</strong>：</p><p>template中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品数量&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;scope.row.num&quot;</span> <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">label</span>=<span class="string">&quot;数量&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changeNum(scope.row)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input-number</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure><p>script中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        <span class="comment">// 总价计算</span></span><br><span class="line">        <span class="attr">totalPrice</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实时更新数量及价格</span></span><br><span class="line"><span class="title function_">changeNum</span>(<span class="params">row</span>) &#123;</span><br><span class="line">request.<span class="title function_">post</span>(<span class="string">&quot;/cart/num/&quot;</span> + row.<span class="property">id</span> + <span class="string">&quot;/&quot;</span> + row.<span class="property">num</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="number">0</span></span><br><span class="line"><span class="comment">// 计算总价格</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">multipleSelection</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">item.<span class="property">num</span> = row.<span class="property">num</span>  <span class="comment">// 更新选中的数组的数量</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">totalPrice</span> += item.<span class="property">price</span> * row.<span class="property">num</span>  <span class="comment">// 数字发生变化，需要取到最新的值，进行计算</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="variable language_">this</span>.<span class="property">totalPrice</span>.<span class="title function_">toFixed</span>(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h5 id="2、勾选时，页面中的总价会有相应的变化"><a href="#2、勾选时，页面中的总价会有相应的变化" class="headerlink" title="2、勾选时，页面中的总价会有相应的变化"></a>2、勾选时，页面中的总价会有相应的变化</h5><p><strong>主要代码</strong>：</p><p>template中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">stripe</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">border</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">&quot;margin-top:20px&quot;</span> </span></span><br><span class="line"><span class="tag">          @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>  // <span class="attr">勾选框</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;goodsImg&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品图片&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">:src</span>=<span class="string">&quot;scope.row.goodsImg&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.goodsImg]&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;goodsName&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: orangered&quot;</span>&gt;</span>￥ &#123;&#123; scope.row.price &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品数量&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input-number</span> </span></span><br><span class="line"><span class="tag">                             <span class="attr">v-model</span>=<span class="string">&quot;scope.row.num&quot;</span> </span></span><br><span class="line"><span class="tag">                             <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> </span></span><br><span class="line"><span class="tag">                             <span class="attr">:max</span>=<span class="string">&quot;100&quot;</span> </span></span><br><span class="line"><span class="tag">                             <span class="attr">label</span>=<span class="string">&quot;数量&quot;</span> </span></span><br><span class="line"><span class="tag">                             @<span class="attr">change</span>=<span class="string">&quot;changeNum(scope.row)&quot;</span>  // <span class="attr">前端数量的更改</span>，<span class="attr">后台实时更新</span></span></span><br><span class="line"><span class="tag">            &gt;</span><span class="tag">&lt;/<span class="name">el-input-number</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;添加时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;删除操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">                       <span class="attr">slot</span>=<span class="string">&quot;reference&quot;</span>  </span></span><br><span class="line"><span class="tag">                       <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span>  </span></span><br><span class="line"><span class="tag">                       <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> </span></span><br><span class="line"><span class="tag">                       <span class="attr">plain</span> </span></span><br><span class="line"><span class="tag">                       @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span></span><br><span class="line">                删除 </span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-remove-outline&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 结算 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0; text-align: right&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px 0&quot;</span>&gt;</span></span><br><span class="line">当前已选商品总价：</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: orangered&quot;</span>&gt;</span>￥ &#123;&#123; totalPrice &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;color: white; background-color: orangered&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span>  &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-coin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 结 算</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>script中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 勾选部分进行计算总价</span></span><br><span class="line"><span class="title function_">handleSelectionChange</span>(<span class="params">val</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="number">0</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">multipleSelection</span> = val</span><br><span class="line"><span class="comment">// 进行计算操作</span></span><br><span class="line"><span class="keyword">if</span> (val &amp;&amp; val.<span class="property">length</span>) &#123;</span><br><span class="line">val.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">totalPrice</span> += item.<span class="property">num</span> * item.<span class="property">price</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">totalPrice</span> = <span class="variable language_">this</span>.<span class="property">totalPrice</span>.<span class="title function_">toFixed</span>(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="订单页面：ShopOrders-vue"><a href="#订单页面：ShopOrders-vue" class="headerlink" title="订单页面：ShopOrders.vue"></a>订单页面：ShopOrders.vue</h3><h4 id="主要代码-1"><a href="#主要代码-1" class="headerlink" title="主要代码"></a>主要代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">clearable</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询标题&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;el-button type=&quot;primary&quot; plain @click=&quot;handleAdd&quot;&gt;新增&lt;/el-button&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">border</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;no&quot;</span> <span class="attr">label</span>=<span class="string">&quot;编号&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;totalPrice&quot;</span> <span class="attr">label</span>=<span class="string">&quot;总金额&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;下单时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;payTime&quot;</span> <span class="attr">label</span>=<span class="string">&quot;付款时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;el-table-column prop=&quot;username&quot; label=&quot;用户账号&quot;&gt;&lt;/el-table-column&gt; --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;el-table-column prop=&quot;nickname&quot; label=&quot;用户昵称&quot;&gt;&lt;/el-table-column&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;查看商品&quot;</span>  <span class="attr">width</span>=<span class="string">&quot;120&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;viewGoods(scope.row.id)&quot;</span>&gt;</span>查看商品<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 8、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;pay(scope.row)&quot;</span>&gt;</span>付 款<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>取消订单<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;订单信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;编号&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.no&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;总金额&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.totalPrice&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.state&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;下单时间&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-date-picker</span> <span class="attr">v-model</span>=<span class="string">&quot;form.time&quot;</span> <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span> <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;选择日期时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;付款时间&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-date-picker</span> <span class="attr">v-model</span>=<span class="string">&quot;form.payTime&quot;</span> <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span> <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;选择日期时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 查看商品 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;商品信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;goodsList&quot;</span> <span class="attr">border</span> <span class="attr">stripe</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> <span class="attr">sortable</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;price&quot;</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品描述&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;unit&quot;</span> <span class="attr">label</span>=<span class="string">&quot;单位&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;store&quot;</span> <span class="attr">label</span>=<span class="string">&quot;库存&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;图片&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">el-image</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;scope.row.img&quot;</span> <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.img]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;上架时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;num&quot;</span> <span class="attr">label</span>=<span class="string">&quot;购买数量&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;News&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                title : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入标题&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">goodsList</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dialogFormVisible1</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/shopOrders/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 查看商品</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">viewGoods</span>(<span class="params">orderId</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&quot;/shopOrders/getGoodsById/&quot;</span> + orderId).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">goodsList</span> = res.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">dialogFormVisible1</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 付款</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">pay</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/shopOrders/update&#x27;</span> : <span class="string">&#x27;/shopOrders/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopOrders/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopOrders/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="后端设计"><a href="#后端设计" class="headerlink" title="后端设计"></a>后端设计</h1><h2 id="需知知识"><a href="#需知知识" class="headerlink" title="需知知识"></a>需知知识</h2><h3 id="自定义注解-AuthAccess"><a href="#自定义注解-AuthAccess" class="headerlink" title="自定义注解@AuthAccess"></a>自定义注解@AuthAccess</h3><p><strong>本初的用处</strong>：客户端在没有登录的情况下可以看到商品内容，若要修改，则需登录即可。</p><p><strong>@AuthAccess的用途</strong>：用于忽略接口的token限制。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义注解 AuthAccess : 直接掉过token过滤器</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AuthAccess &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>JWT拦截器设置</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> backSystem.exception.ServiceException;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.JWT;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.JWTVerifier;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.algorithms.Algorithm;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.exceptions.JWTDecodeException;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.exceptions.JWTVerificationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.HandlerMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义拦截器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> &#123;</span><br><span class="line">        <span class="comment">//放行OPTIONS请求</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;OPTIONS&quot;</span>.equals(method)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1、拿到token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);  <span class="comment">// 前端header内传过来的参数</span></span><br><span class="line">        <span class="comment">//token 是否为 null、空字符串，或者只包含空白字符</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(token)) &#123;</span><br><span class="line">            token = request.getParameter(<span class="string">&quot;token&quot;</span>); <span class="comment">// url参数： ?token=xxx</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果不是映射到方法直接通过【Controller层的方法上添加@AuthAccess】</span></span><br><span class="line">        <span class="keyword">if</span> (handler <span class="keyword">instanceof</span> HandlerMethod) &#123;</span><br><span class="line">            <span class="type">AuthAccess</span> <span class="variable">annotation</span> <span class="operator">=</span> ((HandlerMethod) handler).getMethodAnnotation(AuthAccess.class);</span><br><span class="line">            <span class="keyword">if</span> (annotation != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2、 执行认证——判断token是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(token)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3、 获取 token 中的 user id</span></span><br><span class="line">        String userId;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//JWT.decode(token) 解码 jwt token</span></span><br><span class="line">            userId = JWT.decode(token).getAudience().get(<span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JWTDecodeException j) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4、 根据token中的userid进行数据库的查询</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(Integer.parseInt(userId));</span><br><span class="line">        <span class="comment">//5、判断user是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//6、 通过【用户密码】加密后生成生成一个验证器</span></span><br><span class="line">        <span class="type">JWTVerifier</span> <span class="variable">jwtVerifier</span> <span class="operator">=</span> JWT.require(Algorithm.HMAC256(user.getPassword())).build();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//7、通过 验证器 验证 token</span></span><br><span class="line">            jwtVerifier.verify(token); <span class="comment">// 验证token</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (JWTVerificationException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="商店商品管理"><a href="#商店商品管理" class="headerlink" title="商店商品管理"></a>商店商品管理</h2><h3 id="1、新建一个表shop-goods"><a href="#1、新建一个表shop-goods" class="headerlink" title="1、新建一个表shop_goods"></a>1、新建一个表shop_goods</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists shop_goods(</span><br><span class="line">    id int auto_increment primary key not null ,</span><br><span class="line">    name varchar(255) comment &#x27;商品名称&#x27;,</span><br><span class="line">    price decimal(10,2) comment &#x27;价格&#x27;,</span><br><span class="line">    description varchar(255) comment &#x27;商品描述&#x27;,</span><br><span class="line">    unit varchar(255) comment &#x27;单位&#x27;,</span><br><span class="line">    store int comment &#x27;库存&#x27;,</span><br><span class="line">    img varchar(255) comment &#x27;图片&#x27;,</span><br><span class="line">    time varchar(255) comment &#x27;上架时间&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="2、Entity类"><a href="#2、Entity类" class="headerlink" title="2、Entity类"></a>2、Entity类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;shop_goods&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopGoods</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> String unit;</span><br><span class="line">    <span class="keyword">private</span> Integer store;</span><br><span class="line">    <span class="keyword">private</span> String img;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、Mapper类"><a href="#3、Mapper类" class="headerlink" title="3、Mapper类"></a>3、Mapper类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.ShopGoods;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ShopGoodsMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;ShopGoods&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、Service类"><a href="#4、Service类" class="headerlink" title="4、Service类"></a>4、Service类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.ShopGoods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.ShopGoodsMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopGoodsService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;ShopGoodsMapper, ShopGoods&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> ShopGoodsMapper shopGoodsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ShopGoodsService</span><span class="params">(ShopGoodsMapper shopGoodsMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.shopGoodsMapper = shopGoodsMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、Controller类"><a href="#5、Controller类" class="headerlink" title="5、Controller类"></a>5、Controller类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Goods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.ShopGoods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.GoodsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.ShopGoodsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.AuthAccess;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/shopGoods&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopGoodsController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ShopGoodsService shopGoodsService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> ShopGoods goods)</span>&#123;</span><br><span class="line">        goods.setTime(DateUtil.now()); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">        shopGoodsService.save(goods);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> ShopGoods goods)</span>&#123;</span><br><span class="line">        shopGoodsService.updateById(goods);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        shopGoodsService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        shopGoodsService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;ShopGoods&gt; news = shopGoodsService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;ShopGoods&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">ShopGoods</span> <span class="variable">goods</span> <span class="operator">=</span> shopGoodsService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success(goods);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@AuthAccess</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;ShopGoods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;ShopGoods&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        Page&lt;ShopGoods&gt; page = shopGoodsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="购物车管理"><a href="#购物车管理" class="headerlink" title="购物车管理"></a>购物车管理</h2><h3 id="1、新建一个表cart"><a href="#1、新建一个表cart" class="headerlink" title="1、新建一个表cart"></a>1、新建一个表cart</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists cart(</span><br><span class="line">    id int primary key auto_increment not null ,</span><br><span class="line">    goods_id int comment &#x27;商品ID&#x27;,</span><br><span class="line">    user_id int comment &#x27;用户ID&#x27;,</span><br><span class="line">    num int comment &#x27;商品数量&#x27;,</span><br><span class="line">    time varchar(255) comment &#x27;添加时间&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="2、Entity类-1"><a href="#2、Entity类-1" class="headerlink" title="2、Entity类"></a>2、Entity类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;cart&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cart</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer goodsId;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> Integer num;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、Mapper类-1"><a href="#3、Mapper类-1" class="headerlink" title="3、Mapper类"></a>3、Mapper类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Cart;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CartMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Cart&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、Service类-1"><a href="#4、Service类-1" class="headerlink" title="4、Service类"></a>4、Service类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Cart;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.CartMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;CartMapper, Cart&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> CartMapper cartMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CartService</span><span class="params">(CartMapper cartMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cartMapper = cartMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、Controller类-1"><a href="#5、Controller类-1" class="headerlink" title="5、Controller类"></a>5、Controller类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> backSystem.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.Cart;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.ShopGoods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.CartService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.ShopGoodsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/cart&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CartService cartService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ShopGoodsService shopGoodsService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Cart cart)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        cart.setUserId(currentUser.getId());</span><br><span class="line">        cart.setTime(DateUtil.now()); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">        cartService.save(cart);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Cart cart)</span>&#123;</span><br><span class="line">        cartService.updateById(cart);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        cartService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        cartService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Cart&gt; news = cartService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Cart&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">Cart</span> <span class="variable">cart</span> <span class="operator">=</span> cartService.getById(id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(cart.getUserId());</span><br><span class="line">        <span class="type">ShopGoods</span> <span class="variable">shopGoods</span> <span class="operator">=</span> shopGoodsService.getById(cart.getGoodsId());</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">            cart.setUser(user.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != shopGoods)&#123;</span><br><span class="line">            cart.setName(shopGoods.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(cart);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;Cart&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Cart&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        Page&lt;Cart&gt; page = cartService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize),queryWrapper);</span><br><span class="line">        List&lt;Cart&gt; records = page.getRecords();</span><br><span class="line">        List&lt;User&gt; list = userService.list();</span><br><span class="line">        <span class="keyword">for</span> (Cart record : records) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> record.getUserId();</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">goodsId</span> <span class="operator">=</span> record.getGoodsId();</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(userId);</span><br><span class="line">            <span class="type">ShopGoods</span> <span class="variable">shopGood</span> <span class="operator">=</span> shopGoodsService.getById(goodsId);</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">                record.setUser(user.getName());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != shopGood)&#123;</span><br><span class="line">                record.setName(shopGood.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="购物车管理主体思路"><a href="#购物车管理主体思路" class="headerlink" title="购物车管理主体思路"></a>购物车管理主体思路</h3><h4 id="一：多表关联查询"><a href="#一：多表关联查询" class="headerlink" title="一：多表关联查询"></a>一：多表关联查询</h4><p><strong>目的</strong>：查询不同表的数据，将数据展示在前端页面上。</p><p><strong>CartController</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页查询</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">    <span class="comment">// 多表联查</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> currentUser.getId();</span><br><span class="line">    <span class="type">String</span> <span class="variable">role</span> <span class="operator">=</span> currentUser.getRole();</span><br><span class="line">    <span class="comment">// name指的是商品名称</span></span><br><span class="line">    <span class="keyword">return</span> Result.success(</span><br><span class="line">    cartMapper.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize),userId,role,name)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>CartMapper</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Page&lt;Cart&gt; <span class="title function_">page</span><span class="params">(Page&lt;Object&gt; objectPage, Integer userId, String role, String name)</span>;</span><br></pre></td></tr></table></figure><p><strong>CartMapper.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;backSystem.business.mapper.CartMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;backSystem.business.entity.Cart&quot;</span>&gt;</span></span><br><span class="line">        select c.*, g.name as goodsName, g.img as goodsImg, g.price, u.name, u.username from cart c</span><br><span class="line">        left join shop_goods g on c.goods_id = g.id</span><br><span class="line">        left join user u on c.user_id = u.id</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and g.name = like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;role == &#x27;用户&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and c.user_id = #&#123;userId&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="二：当重复选择商品时，只在数量上添加"><a href="#二：当重复选择商品时，只在数量上添加" class="headerlink" title="二：当重复选择商品时，只在数量上添加"></a>二：当重复选择商品时，只在数量上添加</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新增操作</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Cart cart)</span>&#123;</span><br><span class="line">    <span class="comment">// 更新购物车中以相同的数量（去重）【主要代码】</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> TokenUtils.getCurrentUser().getId();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">goodsId</span> <span class="operator">=</span> cart.getGoodsId();</span><br><span class="line">    QueryWrapper&lt;Cart&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;user_id&quot;</span>,userId);</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;goods_id&quot;</span>,goodsId);</span><br><span class="line">    <span class="type">Cart</span> <span class="variable">db</span> <span class="operator">=</span> cartService.getOne(queryWrapper);</span><br><span class="line">    <span class="keyword">if</span> (db != <span class="literal">null</span>)&#123;</span><br><span class="line">        db.setNum(db.getNum() + cart.getNum());</span><br><span class="line">        cartService.updateById(db);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">    cart.setUserId(currentUser.getId());</span><br><span class="line">    cart.setTime(DateUtil.now()); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">    cartService.save(cart);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="三：前端更改数量时，后台实时更新"><a href="#三：前端更改数量时，后台实时更新" class="headerlink" title="三：前端更改数量时，后台实时更新"></a>三：前端更改数量时，后台实时更新</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新数量</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/num/&#123;id&#125;/&#123;num&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">updateNum</span><span class="params">(<span class="meta">@PathVariable</span> Integer id, <span class="meta">@PathVariable</span> Integer num)</span> &#123;</span><br><span class="line">    cartMapper.updateNum(num, id);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="订单管理"><a href="#订单管理" class="headerlink" title="订单管理"></a>订单管理</h2><h3 id="1、新建表shop-orders与orders-goods"><a href="#1、新建表shop-orders与orders-goods" class="headerlink" title="1、新建表shop_orders与orders_goods"></a>1、新建表shop_orders与orders_goods</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists shop_orders(</span><br><span class="line">    id int primary key auto_increment not null ,</span><br><span class="line">    name varchar(255) comment &#x27;名称&#x27;,</span><br><span class="line">    no varchar(255) comment &#x27;编号&#x27;,</span><br><span class="line">    total_price decimal(10,2) comment &#x27;总金额&#x27;,</span><br><span class="line">    state varchar(255) comment &#x27;状态&#x27;default &#x27;待付款&#x27;,</span><br><span class="line">    time varchar(255) comment &#x27;下单时间&#x27;,</span><br><span class="line">    pay_time varchar(255) comment &#x27;付款时间&#x27;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 关联表</span><br><span class="line">create table if not exists orders_goods(</span><br><span class="line">    id int(11) NOT NULL AUTO_INCREMENT primary key ,</span><br><span class="line">    order_id int COMMENT &#x27;订单id&#x27;,</span><br><span class="line">    goods_id int COMMENT &#x27;商品id&#x27;,</span><br><span class="line">    num int COMMENT &#x27;商品数量&#x27;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="2、Entity类-2"><a href="#2、Entity类-2" class="headerlink" title="2、Entity类"></a>2、Entity类</h3><h4 id="ShopOrders"><a href="#ShopOrders" class="headerlink" title="ShopOrders"></a><strong>ShopOrders</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;shop_orders&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopOrders</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String no;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal totalPrice;</span><br><span class="line">    <span class="keyword">private</span> String state;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">    <span class="keyword">private</span> String payTime;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Cart&gt; carts;</span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="OrdersGoods"><a href="#OrdersGoods" class="headerlink" title="OrdersGoods"></a><strong>OrdersGoods</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;orders_goods&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrdersGoods</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer orderId;</span><br><span class="line">    <span class="keyword">private</span> Integer GoodsId;</span><br><span class="line">    <span class="keyword">private</span> Integer num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、Mapper类-2"><a href="#3、Mapper类-2" class="headerlink" title="3、Mapper类"></a>3、Mapper类</h3><h4 id="ShopOrdersMapper"><a href="#ShopOrdersMapper" class="headerlink" title="ShopOrdersMapper"></a><strong>ShopOrdersMapper</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.ShopOrders;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ShopOrdersMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;ShopOrders&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Page&lt;ShopOrders&gt; <span class="title function_">page</span><span class="params">(</span></span><br><span class="line"><span class="params">        Page&lt;ShopOrders&gt; page, </span></span><br><span class="line"><span class="params">        <span class="meta">@Param(&quot;name&quot;)</span> String name, </span></span><br><span class="line"><span class="params">        <span class="meta">@Param(&quot;role&quot;)</span> String role, </span></span><br><span class="line"><span class="params">        <span class="meta">@Param(&quot;userId&quot;)</span> Integer userId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="OrdersGoodsMapper"><a href="#OrdersGoodsMapper" class="headerlink" title="OrdersGoodsMapper"></a><strong>OrdersGoodsMapper</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.OrdersGoods;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrdersGoodsMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;OrdersGoods&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、Service类-2"><a href="#4、Service类-2" class="headerlink" title="4、Service类"></a>4、Service类</h3><h4 id="ShopOrdersService"><a href="#ShopOrdersService" class="headerlink" title="ShopOrdersService"></a><strong>ShopOrdersService</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.ShopOrders;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.ShopOrdersMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopOrdersService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;ShopOrdersMapper, ShopOrders&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> ShopOrdersMapper shopOrdersMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ShopOrdersService</span><span class="params">(ShopOrdersMapper shopOrdersMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.shopOrdersMapper = shopOrdersMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="OrdersGoodsService"><a href="#OrdersGoodsService" class="headerlink" title="OrdersGoodsService"></a><strong>OrdersGoodsService</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.OrdersGoods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.OrdersGoodsMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrdersGoodsService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;OrdersGoodsMapper, OrdersGoods&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> OrdersGoodsMapper ordersGoodsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OrdersGoodsService</span><span class="params">(OrdersGoodsMapper ordersGoodsMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ordersGoodsMapper = ordersGoodsMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、Controller类-2"><a href="#5、Controller类-2" class="headerlink" title="5、Controller类"></a>5、Controller类</h3><h4 id="ShopOrdersController"><a href="#ShopOrdersController" class="headerlink" title="ShopOrdersController"></a><strong>ShopOrdersController</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> backSystem.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.*;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.ShopOrdersMapper;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.*;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.LogType;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.SystemLogs;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/shopOrders&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopOrdersController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ShopOrdersService shopOrdersService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrdersGoodsService ordersGoodsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ShopOrdersMapper shopOrdersMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CartService cartService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ShopGoodsService shopGoodsService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> ShopOrders shopOrders)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        shopOrders.setUserId(currentUser.getId());</span><br><span class="line">        shopOrders.setTime(DateUtil.formatDateTime(date)); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">        shopOrders.setNo(DateUtil.format(date,<span class="string">&quot;yyyyMMdd&quot;</span>)+System.currentTimeMillis());</span><br><span class="line">        <span class="comment">// 创建订单</span></span><br><span class="line">        shopOrdersService.save(shopOrders);</span><br><span class="line">        List&lt;Cart&gt; carts = shopOrders.getCarts();</span><br><span class="line">        <span class="keyword">for</span> (Cart cart : carts) &#123;</span><br><span class="line">            <span class="type">OrdersGoods</span> <span class="variable">ordersGoods</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrdersGoods</span>();</span><br><span class="line">            ordersGoods.setGoodsId(cart.getGoodsId());</span><br><span class="line">            ordersGoods.setNum(cart.getNum());</span><br><span class="line">            ordersGoods.setOrderId(shopOrders.getId());</span><br><span class="line">            ordersGoodsService.save(ordersGoods);</span><br><span class="line">            <span class="comment">// 删除购物车数据</span></span><br><span class="line">            cartService.removeById(cart.getId());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> ShopOrders shopOrders)</span>&#123;</span><br><span class="line">        shopOrdersService.updateById(shopOrders);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        shopOrdersService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        shopOrdersService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;ShopOrders&gt; news = shopOrdersService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;ShopOrders&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getGoodsById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">getGoodsById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        QueryWrapper&lt;OrdersGoods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;order_id&quot;</span>, id);</span><br><span class="line">        ArrayList&lt;ShopGoods&gt; goodsList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;OrdersGoods&gt; ordersGoodsList = ordersGoodsService.list(queryWrapper);</span><br><span class="line">        <span class="keyword">for</span> (OrdersGoods ordersGoods : ordersGoodsList) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">goodsId</span> <span class="operator">=</span> ordersGoods.getGoodsId();</span><br><span class="line">            <span class="type">ShopGoods</span> <span class="variable">goods</span> <span class="operator">=</span> shopGoodsService.getById(id);</span><br><span class="line">            goods.setNum(ordersGoods.getNum());</span><br><span class="line">            goodsList.add(goods);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(goodsList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">ShopOrders</span> <span class="variable">shopOrders</span> <span class="operator">=</span> shopOrdersService.getById(id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(shopOrders.getUserId());</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">            shopOrders.setName(user.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(shopOrders);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;ShopOrders&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;ShopOrders&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        <span class="keyword">return</span> Result.success(shopOrdersMapper.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize), name, currentUser.getRole(), currentUser.getId()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="OrdersGoodsController"><a href="#OrdersGoodsController" class="headerlink" title="OrdersGoodsController"></a><strong>OrdersGoodsController</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.OrdersGoods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.OrdersGoodsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/ordersGoods&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrdersGoodsController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrdersGoodsService ordersGoodsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> OrdersGoods ordersGoods)</span>&#123;</span><br><span class="line">        ordersGoodsService.save(ordersGoods);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> OrdersGoods ordersGoods)</span>&#123;</span><br><span class="line">        ordersGoodsService.updateById(ordersGoods);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        ordersGoodsService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        ordersGoodsService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;OrdersGoods&gt; orders = ordersGoodsService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;OrdersGoods&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(orders);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">OrdersGoods</span> <span class="variable">ordersGoods</span> <span class="operator">=</span> ordersGoodsService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success(ordersGoods);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;OrdersGoods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;OrdersGoods&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        Page&lt;OrdersGoods&gt; page = ordersGoodsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="订单管理主体思路"><a href="#订单管理主体思路" class="headerlink" title="订单管理主体思路"></a>订单管理主体思路</h3><h4 id="一：两表关联查询"><a href="#一：两表关联查询" class="headerlink" title="一：两表关联查询"></a>一：两表关联查询</h4><p><strong>ShopOrdersController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页查询</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">    <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">    QueryWrapper&lt;ShopOrders&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;ShopOrders&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">    <span class="comment">// 两表关联page</span></span><br><span class="line">    <span class="keyword">return</span> Result.success(</span><br><span class="line">        shopOrdersMapper.page(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum, pageSize),</span><br><span class="line">            name, </span><br><span class="line">            currentUser.getRole(), </span><br><span class="line">            currentUser.getId()</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ShopOrdersMapper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Page&lt;ShopOrders&gt; <span class="title function_">page</span><span class="params">(Page&lt;ShopOrders&gt; page, <span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;role&quot;)</span> String role, <span class="meta">@Param(&quot;userId&quot;)</span> Integer userId)</span>;</span><br></pre></td></tr></table></figure><p><strong>ShopOrdersMapper.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;backSystem.business.mapper.ShopOrdersMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;backSystem.business.entity.ShopOrders&quot;</span>&gt;</span></span><br><span class="line">        select o.*, u.username as nickname, u.name as username</span><br><span class="line">        from shop_orders o</span><br><span class="line">        left join user u on o.user_id = u.id</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and o.name like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;role == &#x27;ROLE_USER&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and o.user_id = #&#123;userId&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="二：创建订单，并将购物车中对应内容删除"><a href="#二：创建订单，并将购物车中对应内容删除" class="headerlink" title="二：创建订单，并将购物车中对应内容删除"></a>二：创建订单，并将购物车中对应内容删除</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新增操作</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> ShopOrders shopOrders)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">    <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    shopOrders.setUserId(currentUser.getId());</span><br><span class="line">    <span class="comment">// 订单时间的设置</span></span><br><span class="line">    shopOrders.setTime(DateUtil.formatDateTime(date)); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">    <span class="comment">// 订单编号的设置</span></span><br><span class="line">    shopOrders.setNo(DateUtil.format(date,<span class="string">&quot;yyyyMMdd&quot;</span>)+System.currentTimeMillis());</span><br><span class="line">    <span class="comment">// 创建订单</span></span><br><span class="line">    shopOrdersService.save(shopOrders);</span><br><span class="line">    List&lt;Cart&gt; carts = shopOrders.getCarts(); <span class="comment">// 获取购物车所有信息</span></span><br><span class="line">    <span class="keyword">for</span> (Cart cart : carts) &#123;</span><br><span class="line">        <span class="type">OrdersGoods</span> <span class="variable">ordersGoods</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrdersGoods</span>();</span><br><span class="line">        ordersGoods.setGoodsId(cart.getGoodsId());</span><br><span class="line">        ordersGoods.setNum(cart.getNum());</span><br><span class="line">        ordersGoods.setOrderId(shopOrders.getId());</span><br><span class="line">        ordersGoodsService.save(ordersGoods);</span><br><span class="line">        <span class="comment">// 删除购物车数据</span></span><br><span class="line">        cartService.removeById(cart.getId());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="三：查看商品：根据id获取相应的订单信息"><a href="#三：查看商品：根据id获取相应的订单信息" class="headerlink" title="三：查看商品：根据id获取相应的订单信息"></a>三：查看商品：根据id获取相应的订单信息</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/getGoodsById/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getGoodsById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">    QueryWrapper&lt;OrdersGoods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;order_id&quot;</span>, id);</span><br><span class="line">    ArrayList&lt;ShopGoods&gt; goodsList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    List&lt;OrdersGoods&gt; ordersGoodsList = ordersGoodsService.list(queryWrapper);</span><br><span class="line">    <span class="keyword">for</span> (OrdersGoods ordersGoods : ordersGoodsList) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">goodsId</span> <span class="operator">=</span> ordersGoods.getGoodsId();</span><br><span class="line">        <span class="type">ShopGoods</span> <span class="variable">goods</span> <span class="operator">=</span> shopGoodsService.getById(id);</span><br><span class="line">        goods.setNum(ordersGoods.getNum());</span><br><span class="line">        goodsList.add(goods);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(goodsList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建19之聊天室</title>
      <link href="/2024/07/02/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA19%E4%B9%8B%E8%81%8A%E5%A4%A9%E5%AE%A4%E3%80%90%E5%BE%85%E5%AE%9A%E3%80%91/"/>
      <url>/2024/07/02/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA19%E4%B9%8B%E8%81%8A%E5%A4%A9%E5%AE%A4%E3%80%90%E5%BE%85%E5%AE%9A%E3%80%91/</url>
      
        <content type="html"><![CDATA[<h1 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px; margin-bottom: 50px&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; min-height: 300px; color: #333&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding-bottom: 10px; border-bottom: 1px solid #ccc&quot;</span>&gt;</span>在线用户<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px&quot;</span>&gt;</span>（点击聊天气泡开始聊天）<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px 0&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;user in users&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;user.username&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; user.username &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-chat-dot-round&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px; font-size: 16px; cursor: pointer&quot;</span></span></span><br><span class="line"><span class="tag">                 @<span class="attr">click</span>=<span class="string">&quot;chatUser = user.username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px;color: limegreen; margin-left: 5px&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;user.username === chatUser&quot;</span>&gt;</span>chatting...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;16&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 800px; margin: 0 auto; background-color: white;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      border-radius: 5px; box-shadow: 0 0 10px #ccc&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; line-height: 50px;&quot;</span>&gt;</span></span><br><span class="line">              Web聊天室（&#123;&#123; chatUser &#125;&#125;）</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 350px; overflow:auto; border-top: 1px solid #ccc&quot;</span> <span class="attr">v-html</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 200px&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model</span>=<span class="string">&quot;text&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 160px; width: 100%; padding: 20px; border: none; border-top: 1px solid #ccc;</span></span></span><br><span class="line"><span class="string"><span class="tag">               border-bottom: 1px solid #ccc; outline: none&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: right; padding-right: 10px&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;send&quot;</span>&gt;</span>发送<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;@/utils/request&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> socket;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&quot;Im&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">circleUrl</span>: <span class="string">&#x27;https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isCollapse</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">users</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">chatUser</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">text</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">messages</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">init</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">send</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">chatUser</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$message(&#123;<span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>, <span class="attr">message</span>: <span class="string">&quot;请选择聊天对象&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">text</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$message(&#123;<span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>, <span class="attr">message</span>: <span class="string">&quot;请输入内容&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="keyword">typeof</span> (<span class="title class_">WebSocket</span>) == <span class="string">&quot;undefined&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;您的浏览器不支持WebSocket&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;您的浏览器支持WebSocket&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 组装待发送的消息 json</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// &#123;&quot;from&quot;: &quot;zhang&quot;, &quot;to&quot;: &quot;admin&quot;, &quot;text&quot;: &quot;聊天文本&quot;&#125;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> message = &#123;<span class="attr">from</span>: <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">username</span>, <span class="attr">to</span>: <span class="variable language_">this</span>.<span class="property">chatUser</span>, <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">text</span>&#125;</span></span><br><span class="line"><span class="language-javascript">            socket.<span class="title function_">send</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(message));  <span class="comment">// 将组装好的json发送给服务端，由服务端进行转发</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">messages</span>.<span class="title function_">push</span>(&#123;<span class="attr">user</span>: <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">username</span>, <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">text</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 构建消息内容，本人消息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">createContent</span>(<span class="literal">null</span>, <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">username</span>, <span class="variable language_">this</span>.<span class="property">text</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">text</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">createContent</span>(<span class="params">remoteUser, nowUser, text</span>) &#123;  <span class="comment">// 这个方法是用来将 json的聊天消息数据转换成 html的。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> html</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 当前用户消息</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (nowUser) &#123; <span class="comment">// nowUser 表示是否显示当前用户发送的聊天消息，绿色气泡</span></span></span><br><span class="line"><span class="language-javascript">          html = <span class="string">&quot;&lt;div class=\&quot;el-row\&quot; style=\&quot;padding: 5px 0\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;div class=\&quot;el-col el-col-22\&quot; style=\&quot;text-align: right; padding-right: 10px\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;    &lt;div class=\&quot;tip left\&quot;&gt;&quot;</span> + text + <span class="string">&quot;&lt;/div&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;/div&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;div class=\&quot;el-col el-col-2\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;span class=\&quot;el-avatar el-avatar--circle\&quot; style=\&quot;height: 40px; width: 40px; line-height: 40px;\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;    &lt;img src=\&quot;https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\&quot; style=\&quot;object-fit: cover;\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;/span&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;/div&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;&lt;/div&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (remoteUser) &#123; <span class="comment">// remoteUser表示远程用户聊天消息，蓝色的气泡</span></span></span><br><span class="line"><span class="language-javascript">          html = <span class="string">&quot;&lt;div class=\&quot;el-row\&quot; style=\&quot;padding: 5px 0\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;div class=\&quot;el-col el-col-2\&quot; style=\&quot;text-align: right\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;span class=\&quot;el-avatar el-avatar--circle\&quot; style=\&quot;height: 40px; width: 40px; line-height: 40px;\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;    &lt;img src=\&quot;https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\&quot; style=\&quot;object-fit: cover;\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;/span&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;/div&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;div class=\&quot;el-col el-col-22\&quot; style=\&quot;text-align: left; padding-left: 10px\&quot;&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;    &lt;div class=\&quot;tip right\&quot;&gt;&quot;</span> + text + <span class="string">&quot;&lt;/div&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;  &lt;/div&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&quot;&lt;/div&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(html)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">content</span> += html;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">init</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">user</span> = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;hony-user&quot;</span>) ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;hony-user&quot;</span>)) : &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> username = <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">username</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> _this = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="keyword">typeof</span> (<span class="title class_">WebSocket</span>) == <span class="string">&quot;undefined&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;您的浏览器不支持WebSocket&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;您的浏览器支持WebSocket&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">let</span> socketUrl = <span class="string">&quot;http://localhost:8080/imserver/&quot;</span> + username;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (socket != <span class="literal">null</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            socket.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            socket = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 开启一个websocket服务</span></span></span><br><span class="line"><span class="language-javascript">          socket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(socketUrl);</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//打开事件</span></span></span><br><span class="line"><span class="language-javascript">          socket.<span class="property">onopen</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;websocket已打开&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//  浏览器端收消息，获得从服务端发送过来的文本消息</span></span></span><br><span class="line"><span class="language-javascript">          socket.<span class="property">onmessage</span> = <span class="keyword">function</span> (<span class="params">msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;收到数据====&quot;</span> + msg.<span class="property">data</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(msg.<span class="property">data</span>)  <span class="comment">// 对收到的json数据进行解析， 类似这样的： &#123;&quot;users&quot;: [&#123;&quot;username&quot;: &quot;zhang&quot;&#125;,&#123; &quot;username&quot;: &quot;admin&quot;&#125;]&#125;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (data.<span class="property">users</span>) &#123;  <span class="comment">// 获取在线人员信息</span></span></span><br><span class="line"><span class="language-javascript">              _this.<span class="property">users</span> = data.<span class="property">users</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">user</span> =&gt;</span> user.<span class="property">username</span> !== username)  <span class="comment">// 获取当前连接的所有用户信息，并且排除自身，自己不会出现在自己的聊天列表里</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">// 如果服务器端发送过来的json数据 不包含 users 这个key，那么发送过来的就是聊天文本json数据</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//  // &#123;&quot;from&quot;: &quot;zhang&quot;, &quot;text&quot;: &quot;hello&quot;&#125;</span></span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span> (data.<span class="property">from</span> === _this.<span class="property">chatUser</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                _this.<span class="property">messages</span>.<span class="title function_">push</span>(data)</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 构建消息内容</span></span></span><br><span class="line"><span class="language-javascript">                _this.<span class="title function_">createContent</span>(data.<span class="property">from</span>, <span class="literal">null</span>, data.<span class="property">text</span>)</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//关闭事件</span></span></span><br><span class="line"><span class="language-javascript">          socket.<span class="property">onclose</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;websocket已关闭&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//发生了错误事件</span></span></span><br><span class="line"><span class="language-javascript">          socket.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;websocket发生了错误&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.tip</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-family</span>: sans-serif;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>:inline-block <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>:inline;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: deepskyblue;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: forestgreen;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="后端设计"><a href="#后端设计" class="headerlink" title="后端设计"></a>后端设计</h1><h2 id="1、Springboot-添加Pom依赖"><a href="#1、Springboot-添加Pom依赖" class="headerlink" title="1、Springboot 添加Pom依赖"></a>1、Springboot 添加Pom依赖</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 聊天室：websocket --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="2、WebSocketConfig"><a href="#2、WebSocketConfig" class="headerlink" title="2、WebSocketConfig"></a>2、WebSocketConfig</h2><p><strong>讲解</strong>：确保使用 @ServerEndpoint 注解定义的 WebSocket 端点能够被自动注册和管理，使得 WebSocket 在 Spring 应用中能够正常工作。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.server.standard.ServerEndpointExporter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSocketConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注入一个ServerEndpointExporter,</span></span><br><span class="line"><span class="comment">     * 该Bean会自动注册使用<span class="doctag">@ServerEndpoint</span>注解申明的websocket endpoint</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ServerEndpointExporter <span class="title function_">serverEndpointExporter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ServerEndpointExporter</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3、配置websocket服务"><a href="#3、配置websocket服务" class="headerlink" title="3、配置websocket服务"></a>3、配置websocket服务</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.hutool.json.JSONArray;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.json.JSONUtil;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> javax.websocket.*;</span><br><span class="line"><span class="keyword">import</span> javax.websocket.server.PathParam;</span><br><span class="line"><span class="keyword">import</span> javax.websocket.server.ServerEndpoint;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> websocket服务</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ServerEndpoint(value = &quot;/imserver/&#123;username&#125;&quot;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSocketServer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(WebSocketServer.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 记录当前在线连接数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Session&gt; sessionMap = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接建立成功调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpen</span><span class="params">(Session session, <span class="meta">@PathParam(&quot;username&quot;)</span> String username)</span> &#123;</span><br><span class="line">        sessionMap.put(username, session);</span><br><span class="line">        log.info(<span class="string">&quot;有新用户加入，username=&#123;&#125;, 当前在线人数为：&#123;&#125;&quot;</span>, username, sessionMap.size());</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        <span class="type">JSONArray</span> <span class="variable">array</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">        result.set(<span class="string">&quot;users&quot;</span>, array);</span><br><span class="line">        <span class="keyword">for</span> (Object key : sessionMap.keySet()) &#123;</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">            jsonObject.set(<span class="string">&quot;username&quot;</span>, key);</span><br><span class="line">            <span class="comment">//  &#123;&quot;username&quot;, &quot;zhang&quot;, &quot;username&quot;: &quot;admin&quot;&#125;</span></span><br><span class="line">            array.add(jsonObject);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//  &#123;&quot;users&quot;: [&#123;&quot;username&quot;: &quot;zhang&quot;&#125;,&#123; &quot;username&quot;: &quot;admin&quot;&#125;]&#125;</span></span><br><span class="line">        sendAllMessage(JSONUtil.toJsonStr(result));  <span class="comment">// 后台发送消息给所有的客户端</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接关闭调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClose</span><span class="params">(Session session, <span class="meta">@PathParam(&quot;username&quot;)</span> String username)</span> &#123;</span><br><span class="line">        sessionMap.remove(username);</span><br><span class="line">        log.info(<span class="string">&quot;有一连接关闭，移除username=&#123;&#125;的用户session, 当前在线人数为：&#123;&#125;&quot;</span>, username, sessionMap.size());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 收到客户端消息后调用的方法</span></span><br><span class="line"><span class="comment">     * 后台收到客户端发送过来的消息</span></span><br><span class="line"><span class="comment">     * onMessage 是一个消息的中转站</span></span><br><span class="line"><span class="comment">     * 接受 浏览器端 socket.send 发送过来的 json数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message 客户端发送过来的消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String message, Session session, <span class="meta">@PathParam(&quot;username&quot;)</span> String username)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;服务端收到用户username=&#123;&#125;的消息:&#123;&#125;&quot;</span>, username, message);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">obj</span> <span class="operator">=</span> JSONUtil.parseObj(message);</span><br><span class="line">        <span class="type">String</span> <span class="variable">toUsername</span> <span class="operator">=</span> obj.getStr(<span class="string">&quot;to&quot;</span>); <span class="comment">// to表示发送给哪个用户，比如 admin</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> obj.getStr(<span class="string">&quot;text&quot;</span>); <span class="comment">// 发送的消息文本  hello</span></span><br><span class="line">        <span class="comment">// &#123;&quot;to&quot;: &quot;admin&quot;, &quot;text&quot;: &quot;聊天文本&quot;&#125;</span></span><br><span class="line">        <span class="type">Session</span> <span class="variable">toSession</span> <span class="operator">=</span> sessionMap.get(toUsername); <span class="comment">// 根据 to用户名来获取 session，再通过session发送消息文本</span></span><br><span class="line">        <span class="keyword">if</span> (toSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 服务器端 再把消息组装一下，组装后的消息包含发送人和发送的文本内容</span></span><br><span class="line">            <span class="comment">// &#123;&quot;from&quot;: &quot;zhang&quot;, &quot;text&quot;: &quot;hello&quot;&#125;</span></span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">            jsonObject.set(<span class="string">&quot;from&quot;</span>, username);  <span class="comment">// from 是 zhang</span></span><br><span class="line">            jsonObject.set(<span class="string">&quot;text&quot;</span>, text);  <span class="comment">// text 同上面的text</span></span><br><span class="line">            <span class="built_in">this</span>.sendMessage(jsonObject.toString(), toSession);</span><br><span class="line">            log.info(<span class="string">&quot;发送给用户username=&#123;&#125;，消息：&#123;&#125;&quot;</span>, toUsername, jsonObject.toString());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;发送失败，未找到用户username=&#123;&#125;的session&quot;</span>, toUsername);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@OnError</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Session session, Throwable error)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;发生错误&quot;</span>);</span><br><span class="line">        error.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 服务端发送消息给客户端</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message, Session toSession)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;服务端给客户端[&#123;&#125;]发送消息&#123;&#125;&quot;</span>, toSession.getId(), message);</span><br><span class="line">            toSession.getBasicRemote().sendText(message);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;服务端发送消息给客户端失败&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 服务端发送消息给所有客户端</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendAllMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (Session session : sessionMap.values()) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;服务端给客户端[&#123;&#125;]发送消息&#123;&#125;&quot;</span>, session.getId(), message);</span><br><span class="line">                session.getBasicRemote().sendText(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;服务端发送消息给客户端失败&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建18之AOP系统日志</title>
      <link href="/2024/06/30/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA18%E4%B9%8BAOP%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97/"/>
      <url>/2024/06/30/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA18%E4%B9%8BAOP%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<h1 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>效果展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/AOP%E5%89%8D%E7%AB%AF.png"></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询模块&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;operation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0 5px;&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;type&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in [&#x27;新增&#x27;,&#x27;修改&#x27;,&#x27;删除&#x27;]&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:label</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询操作人&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;optUser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 批量删除 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作模块&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;operation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作类型&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;type&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 高亮不同颜色 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.type === &#x27;新增&#x27;&quot;</span>&gt;</span>&#123;&#123; scope.row.type &#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.type === &#x27;修改&#x27;&quot;</span>&gt;</span>&#123;&#123; scope.row.type &#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.type === &#x27;删除&#x27;&quot;</span>&gt;</span>&#123;&#123; scope.row.type &#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.type === &#x27;批量删除&#x27;&quot;</span>&gt;</span>&#123;&#123; scope.row.type &#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.type === &#x27;登录&#x27;&quot;</span>&gt;</span>&#123;&#123; scope.row.type &#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.type === &#x27;注册&#x27;&quot;</span>&gt;</span>&#123;&#123; scope.row.type &#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作人IP&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;ip&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作人&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;News&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">operation</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// AOP系统日志</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">optUser</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">operation</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">type</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">optUuser</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/logs/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">operation</span>: <span class="variable language_">this</span>.<span class="property">operation</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="variable language_">this</span>.<span class="property">type</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">user</span>: <span class="variable language_">this</span>.<span class="property">optUser</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/logs/update&#x27;</span> : <span class="string">&#x27;/logs/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/logs/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/logs/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="后端设计【重点】"><a href="#后端设计【重点】" class="headerlink" title="后端设计【重点】"></a>后端设计【重点】</h1><h2 id="准备工作-1"><a href="#准备工作-1" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="1、新建一个表logs"><a href="#1、新建一个表logs" class="headerlink" title="1、新建一个表logs"></a>1、新建一个表logs</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table logs(</span><br><span class="line">    id int not null auto_increment primary key ,</span><br><span class="line">    operation varchar(255) comment &#x27;操作名称&#x27;,</span><br><span class="line">    type varchar(255) comment &#x27;操作类型&#x27;,</span><br><span class="line">    ip varchar(255) comment &#x27;ip地址&#x27;,</span><br><span class="line">    user varchar(255) comment &#x27;操作人&#x27;,</span><br><span class="line">    time varchar(255) comment &#x27;操作时间&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="2、Entity类"><a href="#2、Entity类" class="headerlink" title="2、Entity类"></a>2、Entity类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Builder;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@TableName(&quot;logs&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Logs</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String operation;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String ip;</span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、Mapper类"><a href="#3、Mapper类" class="headerlink" title="3、Mapper类"></a>3、Mapper类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Logs;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">LogsMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Logs&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、Service类"><a href="#4、Service类" class="headerlink" title="4、Service类"></a>4、Service类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Logs;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.LogsMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogsService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;LogsMapper, Logs&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> LogsMapper logsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LogsService</span><span class="params">(LogsMapper logsMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.logsMapper = logsMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、Controller类"><a href="#5、Controller类" class="headerlink" title="5、Controller类"></a>5、Controller类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Logs;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.LogsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 系统日志相关接口</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/logs&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogsController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LogsService logsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        logsService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        logsService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> String operation)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;Logs&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Logs&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(operation),<span class="string">&quot;operation&quot;</span>,operation);</span><br><span class="line">        Page&lt;Logs&gt; page = logsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AOP系统日志后端设计【重点】"><a href="#AOP系统日志后端设计【重点】" class="headerlink" title="AOP系统日志后端设计【重点】"></a>AOP系统日志后端设计【重点】</h2><h3 id="1、AOP系统日志的依赖"><a href="#1、AOP系统日志的依赖" class="headerlink" title="1、AOP系统日志的依赖"></a>1、AOP系统日志的依赖</h3><h4 id="子工程"><a href="#子工程" class="headerlink" title="子工程"></a>子工程</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- AOP系统日志 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="2、utils中添加一个IpUtils工具类"><a href="#2、utils中添加一个IpUtils工具类" class="headerlink" title="2、utils中添加一个IpUtils工具类"></a>2、utils中添加一个IpUtils工具类</h3><p><strong>用途</strong>：获取IP地址</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpUtils</span> &#123;</span><br><span class="line">    <span class="comment">// 获取IP地址</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getIpAddress</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;x-forwarded-for&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(ip == <span class="literal">null</span> || ip.length() == <span class="number">0</span> || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip))&#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">&quot;Proxy-Client-IP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ip == <span class="literal">null</span> || ip.length() == <span class="number">0</span> || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip))&#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">&quot;X-Forwarded-For&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ip == <span class="literal">null</span> || ip.length() == <span class="number">0</span> || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip))&#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">&quot;WL-Proxy-Client-IP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ip == <span class="literal">null</span> || ip.length() == <span class="number">0</span> || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip))&#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">&quot;X-Real-IP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ip == <span class="literal">null</span> || ip.length() == <span class="number">0</span> || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip))&#123;</span><br><span class="line">            ip = request.getRemoteAddr();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;0:0:0:0:0:0:0:1&quot;</span>.equals(ip) ? <span class="string">&quot;127.0.0.1&quot;</span> : ip;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、枚举类：定义日志的操作类型"><a href="#3、枚举类：定义日志的操作类型" class="headerlink" title="3、枚举类：定义日志的操作类型"></a>3、枚举类：定义日志的操作类型</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 枚举：系统日志的操作类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">LogType</span> &#123;</span><br><span class="line">    <span class="comment">// 日志状态（自定义）：记录对数据有影响操作（增删改）</span></span><br><span class="line">    ADD(<span class="string">&quot;新增&quot;</span>),</span><br><span class="line">    UPDATE(<span class="string">&quot;修改&quot;</span>),</span><br><span class="line">    DELETE(<span class="string">&quot;删除&quot;</span>),</span><br><span class="line">    BATCH_DELETE(<span class="string">&quot;批量删除&quot;</span>),</span><br><span class="line">    LOGIN(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">    REGISTER(<span class="string">&quot;注册&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    LogType(String value) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、自定义注解-SystemLogs"><a href="#4、自定义注解-SystemLogs" class="headerlink" title="4、自定义注解@SystemLogs"></a>4、自定义注解@SystemLogs</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SystemLogs &#123;</span><br><span class="line">    <span class="comment">// 操作模块</span></span><br><span class="line">    String <span class="title function_">operation</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// 操作类型</span></span><br><span class="line">    LogType <span class="title function_">type</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、对数据切面处理【自定义】"><a href="#5、对数据切面处理【自定义】" class="headerlink" title="5、对数据切面处理【自定义】"></a>5、对数据切面处理【自定义】</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Logs;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.LogsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.SystemLogs;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.IpUtils;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.thread.ThreadUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.ArrayUtil;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切面处理</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogsAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> LogsService logsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning(pointcut =&quot; @annotation(systemLogs)&quot;,returning = &quot;jsonResult&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordLog</span><span class="params">(JoinPoint joinPoint, SystemLogs systemLogs, Object jsonResult)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">loginUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        <span class="comment">// 用户未登录情况下，loginUser为null，就要从参数里获取操作人信息</span></span><br><span class="line">        <span class="keyword">if</span> (loginUser == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// 登录，注册</span></span><br><span class="line">            Object[] args = joinPoint.getArgs(); <span class="comment">// 获取到所有参数</span></span><br><span class="line">            <span class="keyword">if</span> (ArrayUtil.isNotEmpty(args))&#123;</span><br><span class="line">                <span class="keyword">if</span> (args[<span class="number">0</span>] <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">                    loginUser = (User) args[<span class="number">0</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (loginUser == <span class="literal">null</span>)&#123;</span><br><span class="line">            log.error(<span class="string">&quot;记录日志信息报错，未获取到当前操作用户信息&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取HttpServletRequest对象</span></span><br><span class="line">        <span class="type">ServletRequestAttributes</span> <span class="variable">servletRequestAttributes</span> <span class="operator">=</span>(ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> servletRequestAttributes.getRequest();</span><br><span class="line">        <span class="comment">// 获取IP信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ipAddress</span> <span class="operator">=</span> IpUtils.getIpAddress(request);</span><br><span class="line">        <span class="comment">// 组装日志的实体对象</span></span><br><span class="line">        <span class="type">Logs</span> <span class="variable">logs</span> <span class="operator">=</span> Logs.builder()</span><br><span class="line">                .user(loginUser.getUsername())</span><br><span class="line">                .operation(systemLogs.operation()) <span class="comment">// 操作模块</span></span><br><span class="line">                .type(systemLogs.type().getValue()) <span class="comment">// 获取到用户操作信息</span></span><br><span class="line">                .ip(ipAddress)</span><br><span class="line">                .time(DateUtil.now())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 操作后，会自动插入数据到数据库</span></span><br><span class="line">        ThreadUtil.execAsync(() -&gt; &#123;</span><br><span class="line">            logsService.save(logs);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6、在Controller中处增添注解"><a href="#6、在Controller中处增添注解" class="headerlink" title="6、在Controller中处增添注解"></a>6、在Controller中处增添注解</h3><p><strong>基本写法</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SystemLogs(operation = &quot;名称&quot;,type = LogType.类型)</span></span><br></pre></td></tr></table></figure><p><strong>效果展示</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/AOP%E5%90%8E%E7%AB%AF.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建17之审核功能</title>
      <link href="/2024/06/29/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA17%E4%B9%8B%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD/"/>
      <url>/2024/06/29/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA17%E4%B9%8B%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h1 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>审核功能页面图效果：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD1.png"></p><p>审核功能的弹窗效果：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD%E5%BC%B9%E7%AA%97.png"></p><p>代码呈现：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询物品&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">stripe</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                      backgroundColor: &#x27;aliceblue&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                                      fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                      &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">                  @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span></span></span><br><span class="line"><span class="tag">         &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;物品名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;物品图片&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.img&quot;</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.img&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.img]&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布人&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;报修状态&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">plain</span> </span></span><br><span class="line"><span class="tag">                               @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span>编辑</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">plain</span> </span></span><br><span class="line"><span class="tag">                               @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span>删除</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;报修信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;物品名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;物品&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 上传物品照片 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;物品图片&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传物品照片<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;News&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                title : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入标题&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/goods/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 上传物品图片</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">img</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/goods/update&#x27;</span> : <span class="string">&#x27;/goods/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/goods/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/news/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="审核功能设计【重点】"><a href="#审核功能设计【重点】" class="headerlink" title="审核功能设计【重点】"></a>审核功能设计【重点】</h2><h3 id="一：主体代码"><a href="#一：主体代码" class="headerlink" title="一：主体代码"></a>一：主体代码</h3><p><strong>Goods.vue中的template</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 批量删除按钮只有管理员可以看到，其余用户无法看到 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;user.role === &#x27;管理员&#x27;&quot;</span>&gt;</span></span><br><span class="line">    批量删除</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;审核&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;user.role === &#x27;管理员&#x27;&quot;</span> <span class="attr">width</span>=<span class="string">&quot;240&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag"><span class="attr">type</span>=<span class="string">&quot;success&quot;</span> </span></span><br><span class="line"><span class="tag">@<span class="attr">click</span>=<span class="string">&quot;changeState(scope.row,&#x27;审核通过&#x27;)&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">:disabled</span>=<span class="string">&quot;scope.row.state !== &#x27;待审核&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">审核通过</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag"><span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> </span></span><br><span class="line"><span class="tag">@<span class="attr">click</span>=<span class="string">&quot;changeState(scope.row,&#x27;审核不通过&#x27;)&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">:disabled</span>=<span class="string">&quot;scope.row.state !== &#x27;待审核&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">审核不通过</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 只有当待审核时，会出现编辑和删除按钮，等到审核完成后，就不会出现 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.state === &#x27;待审核&#x27;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span></span><br><span class="line">                编辑</span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span></span><br><span class="line">                删除</span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Goods.vue中的script中</strong>：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 审核功能</span></span><br><span class="line"><span class="title function_">changeState</span>(<span class="params">row,state</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">state</span> = state</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span><br><span class="line"><span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// 验证通过,向后台发送请求</span></span><br><span class="line"><span class="title function_">request</span>(&#123;</span><br><span class="line"><span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/goods/update&#x27;</span> : <span class="string">&#x27;/goods/add&#x27;</span>,</span><br><span class="line"><span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line"><span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span><br><span class="line"><span class="comment">// 成功保存</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span><br><span class="line"><span class="comment">// 更新数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// 关闭弹窗</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">// 失败</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">save</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// 表单验证+发送请求</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(valid)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="二：完整代码"><a href="#二：完整代码" class="headerlink" title="二：完整代码"></a>二：完整代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询物品&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;user.role === &#x27;管理员&#x27;&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;物品名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;物品图片&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.img&quot;</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.img&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.img]&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布人&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;报修状态&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;审核&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;user.role === &#x27;管理员&#x27;&quot;</span> <span class="attr">width</span>=<span class="string">&quot;240&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeState(scope.row,&#x27;审核通过&#x27;)&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;scope.row.state !== &#x27;待审核&#x27;&quot;</span>&gt;</span>审核通过<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeState(scope.row,&#x27;审核不通过&#x27;)&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;scope.row.state !== &#x27;待审核&#x27;&quot;</span>&gt;</span>审核不通过<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.state === &#x27;待审核&#x27;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;报修信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;物品名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;物品&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 上传物品照片 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;物品图片&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传物品照片<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;News&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                title : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入标题&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/goods/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 上传物品图片</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">img</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 审核功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeState</span>(<span class="params">row,state</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">state</span> = state</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/goods/update&#x27;</span> : <span class="string">&#x27;/goods/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/goods/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/news/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="三：效果展示"><a href="#三：效果展示" class="headerlink" title="三：效果展示"></a>三：效果展示</h3><p><strong>管理员页面</strong>：管理员进行审核操作</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD%E7%AE%A1%E7%90%86%E5%91%9811.png"></p><p><strong>三玖用户页面</strong>：可以看到对应的审核结果。</p><p>当处于”待审核“状态时，可以进行编辑和删除操作，等到管理员审核完成后，就无法再进行编辑和删除操作。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%B8%89%E7%8E%96%E7%94%A8%E6%88%B71.png"></p><h1 id="后端设计"><a href="#后端设计" class="headerlink" title="后端设计"></a>后端设计</h1><h2 id="准备工作-1"><a href="#准备工作-1" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="1、新建一个物品表goods"><a href="#1、新建一个物品表goods" class="headerlink" title="1、新建一个物品表goods"></a>1、新建一个物品表goods</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists goods(</span><br><span class="line">    id int not null auto_increment primary key ,</span><br><span class="line">    name varchar(255) comment &#x27;物品名称&#x27;,</span><br><span class="line">    user_id int comment &#x27;所属人ID&#x27;,</span><br><span class="line">    img varchar(255) comment &#x27;物品照片&#x27;,</span><br><span class="line">    time varchar(255) comment &#x27;报修时间&#x27;,</span><br><span class="line">    state varchar(255) comment &#x27;报修状态&#x27; default &#x27;待审核&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="2、Entity类"><a href="#2、Entity类" class="headerlink" title="2、Entity类"></a>2、Entity类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;goods&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Goods</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String img;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">    <span class="keyword">private</span> String state;</span><br><span class="line">    <span class="comment">// 这个字段不在数据库中，用于做业务处理用的,用于显示作者id对应的名称</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、Mapper类"><a href="#3、Mapper类" class="headerlink" title="3、Mapper类"></a>3、Mapper类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Goods;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">GoodsMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Goods&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、Service类"><a href="#4、Service类" class="headerlink" title="4、Service类"></a>4、Service类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Goods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.GoodsMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GoodsService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;GoodsMapper, Goods&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> GoodsMapper goodsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GoodsService</span><span class="params">(GoodsMapper goodsMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.goodsMapper = goodsMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、Controller类"><a href="#5、Controller类" class="headerlink" title="5、Controller类"></a>5、Controller类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> backSystem.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.Goods;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.GoodsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/goods&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GoodsController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> GoodsService goodsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Goods goods)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        goods.setUserId(currentUser.getId());</span><br><span class="line">        goods.setTime(DateUtil.now()); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">        goodsService.save(goods);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Goods goods)</span>&#123;</span><br><span class="line">        goodsService.updateById(goods);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        goodsService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        goodsService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Goods&gt; news = goodsService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Goods&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">Goods</span> <span class="variable">goods</span> <span class="operator">=</span> goodsService.getById(id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(goods.getUserId());</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">            goods.setUser(user.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(goods);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;Goods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Goods&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        Page&lt;Goods&gt; page = goodsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        List&lt;Goods&gt; records = page.getRecords();</span><br><span class="line">        List&lt;User&gt; list = userService.list();</span><br><span class="line">        <span class="keyword">for</span> (Goods record : records) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> record.getUserId();</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(userId);</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">                record.setUser(user.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="审核功能设计【重点】-1"><a href="#审核功能设计【重点】-1" class="headerlink" title="审核功能设计【重点】"></a>审核功能设计【重点】</h2><h3 id="用户数据隔离机制"><a href="#用户数据隔离机制" class="headerlink" title="用户数据隔离机制"></a>用户数据隔离机制</h3><p><strong>用户数据隔离机制</strong>指的是对于用户而言，只能看到自己的报修信息，而不会看到其他用户的报修信息。管理员可以看到所有用户的报修信息。</p><p>在分页查询中，添加以下代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser(); <span class="comment">// 当前用户</span></span><br><span class="line"><span class="comment">// 审核机制：若当前role为用户，则用户数据隔离</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;用户&quot;</span>.equals(currentUser.getRole()))&#123;</span><br><span class="line"><span class="comment">// 可以只看到自己的报修信息，而不会看到其他人的报修信息</span></span><br><span class="line">queryWrapper.like(<span class="string">&quot;user_id&quot;</span>,currentUser.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>完整的分页查询代码</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页查询</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam(defaultValue = &quot;&quot;)</span> String name)</span>&#123;</span><br><span class="line">    <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">    QueryWrapper&lt;Goods&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Goods&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser(); <span class="comment">// 当前用户</span></span><br><span class="line">    <span class="comment">// 审核：若当前role为用户，则用户数据隔离</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;用户&quot;</span>.equals(currentUser.getRole()))&#123;</span><br><span class="line">        <span class="comment">// 可以只看到自己的报修信息，而不会看到其他人的报修信息</span></span><br><span class="line">        queryWrapper.like(<span class="string">&quot;user_id&quot;</span>,currentUser.getId());</span><br><span class="line">    &#125;</span><br><span class="line">    Page&lt;Goods&gt; page = goodsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">    List&lt;Goods&gt; records = page.getRecords();</span><br><span class="line">    List&lt;User&gt; list = userService.list();</span><br><span class="line">    <span class="keyword">for</span> (Goods record : records) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> record.getUserId();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(userId);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">            record.setUser(user.getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>最终呈现效果</strong>：</p><p>管理员（可以看到所有用户的报修申请情况）：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD%E7%AE%A1%E7%90%86%E5%91%98.png"></p><p>三玖用户（进行了报修申请）：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD%E7%94%A8%E6%88%B72.png"></p><p>胡桃用户（未进行任何报修）：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AE%A1%E6%A0%B8%E5%8A%9F%E8%83%BD%E7%94%A8%E6%88%B71.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建16之Echarts数据报表（柱状图，饼图，折线图等）</title>
      <link href="/2024/06/28/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA16%E4%B9%8BEcharts%E6%95%B0%E6%8D%AE%E6%8A%A5%E8%A1%A8%EF%BC%88%E6%9F%B1%E7%8A%B6%E5%9B%BE%EF%BC%8C%E9%A5%BC%E5%9B%BE%EF%BC%8C%E6%8A%98%E7%BA%BF%E5%9B%BE%EF%BC%89/"/>
      <url>/2024/06/28/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA16%E4%B9%8BEcharts%E6%95%B0%E6%8D%AE%E6%8A%A5%E8%A1%A8%EF%BC%88%E6%9F%B1%E7%8A%B6%E5%9B%BE%EF%BC%8C%E9%A5%BC%E5%9B%BE%EF%BC%8C%E6%8A%98%E7%BA%BF%E5%9B%BE%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h1><h2 id="Orders-vue页面设计【表格】"><a href="#Orders-vue页面设计【表格】" class="headerlink" title="Orders.vue页面设计【表格】"></a>Orders.vue页面设计【表格】</h2><p>基本效果展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Orders%E9%A1%B5%E9%9D%A211.png"></p><p>弹窗页面展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Orders%E9%A1%B5%E9%9D%A22.png"></p><p>Orders.vue代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询名称&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">stripe</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">                  @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span></span></span><br><span class="line"><span class="tag">         &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;序列&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;编号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;no&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;订单名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;订单金额&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;money&quot;</span> <span class="attr">show-overflow-tooltip</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;创建时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;date&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;40%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;订单名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;订单金额&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;money&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.money&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;金额&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;分类&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;category&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.category&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-option</span> </span></span><br><span class="line"><span class="tag">                                 <span class="attr">v-for</span>=<span class="string">&quot;item in [&#x27;水果&#x27;,&#x27;蔬菜&#x27;,&#x27;零食&#x27;,&#x27;饮料&#x27;,&#x27;奶制品&#x27;,&#x27;糕点&#x27;]&quot;</span> </span></span><br><span class="line"><span class="tag">                                 <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span> </span></span><br><span class="line"><span class="tag">                                 <span class="attr">:value</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Orders&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                name : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入名称&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;],</span></span><br><span class="line"><span class="language-javascript">                money : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入金额&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;],</span></span><br><span class="line"><span class="language-javascript">                category : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入分类&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;],</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/orders/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/orders/update&#x27;</span> : <span class="string">&#x27;/orders/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/orders/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/orders/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="数据报表前段设计【调用中间量】"><a href="#数据报表前段设计【调用中间量】" class="headerlink" title="数据报表前段设计【调用中间量】"></a>数据报表前段设计【调用中间量】</h2><h3 id="安装Echarts插件"><a href="#安装Echarts插件" class="headerlink" title="安装Echarts插件"></a>安装Echarts插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Echarts插件：npm i echarts -S</span><br></pre></td></tr></table></figure><h3 id="Charts-vue页面设计"><a href="#Charts-vue页面设计" class="headerlink" title="Charts.vue页面设计"></a>Charts.vue页面设计</h3><h4 id="1、折线图"><a href="#1、折线图" class="headerlink" title="1、折线图"></a>1、折线图</h4><h5 id="官网折线图"><a href="#官网折线图" class="headerlink" title="官网折线图"></a><strong>官网折线图</strong></h5><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%8A%98%E7%BA%BF%E5%9B%BE1.png"></p><h5 id="静态页面渲染"><a href="#静态页面渲染" class="headerlink" title="静态页面渲染"></a><strong>静态页面渲染</strong></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 折线图 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;line&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 折线图</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> option1 = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">text</span>: <span class="string">&#x27;订单金额统计表&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span><span class="comment">// 标题居中</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span> <span class="comment">// 鼠标放置对应数据的节点处，会显示该点的数据</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// orient: &#x27;vertical&#x27;, // 纵轴显示</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">left</span>: <span class="string">&#x27;left&#x27;</span> <span class="comment">// 靠左显示</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 横坐标</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: [<span class="string">&#x27;Mon&#x27;</span>, <span class="string">&#x27;Tue&#x27;</span>, <span class="string">&#x27;Wed&#x27;</span>, <span class="string">&#x27;Thu&#x27;</span>, <span class="string">&#x27;Fri&#x27;</span>, <span class="string">&#x27;Sat&#x27;</span>, <span class="string">&#x27;Sun&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 纵坐标</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 折线1</span></span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;金额&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: [<span class="number">150</span>, <span class="number">230</span>, <span class="number">224</span>, <span class="number">218</span>, <span class="number">135</span>, <span class="number">147</span>, <span class="number">260</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">smooth</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 折线2</span></span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;库存&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: [<span class="number">170</span>, <span class="number">400</span>, <span class="number">224</span>, <span class="number">28</span>, <span class="number">435</span>, <span class="number">190</span>, <span class="number">280</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">smooth</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    ]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 等待页面元素全部加载完成后再初始化</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1、折线图</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// getElementById通过template中的id获取对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> lineDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;line&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> lineChart = echarts.<span class="title function_">init</span>(lineDom);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 加载出折线图</span></span></span><br><span class="line"><span class="language-javascript">        lineChart.<span class="title function_">setOption</span>(option1)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%8A%98%E7%BA%BF%E5%9B%BE2.png"></p><h4 id="2、柱状图"><a href="#2、柱状图" class="headerlink" title="2、柱状图"></a>2、柱状图</h4><h5 id="官网柱状图"><a href="#官网柱状图" class="headerlink" title="官网柱状图"></a><strong>官网柱状图</strong></h5><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9F%B1%E7%8A%B6%E5%9B%BE1.png"></p><h5 id="静态页面渲染-1"><a href="#静态页面渲染-1" class="headerlink" title="静态页面渲染"></a><strong>静态页面渲染</strong></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 柱状图 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;bar&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 柱状图</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> option2 = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">text</span>: <span class="string">&#x27;水果销量统计表&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span> <span class="comment">// 标题居中</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span> <span class="comment">// 鼠标放置对应数据的节点处，会显示该点的数据</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// orient: &#x27;vertical&#x27;, // 纵轴显示</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">left</span>: <span class="string">&#x27;left&#x27;</span> <span class="comment">// 靠左显示</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 横坐标</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: [<span class="string">&#x27;水果&#x27;</span>, <span class="string">&#x27;香蕉&#x27;</span>, <span class="string">&#x27;苹果&#x27;</span>, <span class="string">&#x27;橘子&#x27;</span>, <span class="string">&#x27;西瓜&#x27;</span>, <span class="string">&#x27;火龙果&#x27;</span>, <span class="string">&#x27;芒果&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 纵坐标</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 折线图</span></span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;金额&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: [<span class="number">120</span>, <span class="number">200</span>, <span class="number">150</span>, <span class="number">80</span>, <span class="number">70</span>, <span class="number">110</span>, <span class="number">130</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,<span class="comment">// 折线图类型</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">showBackground</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">backgroundStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&#x27;rgba(180, 180, 180, 0.2)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 柱状图</span></span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: [<span class="number">100</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">60</span>, <span class="number">118</span>, <span class="number">120</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,<span class="comment">// 柱状图类型</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">showBackground</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">backgroundStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&#x27;rgba(180, 180, 180, 0.2)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    ]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 等待页面元素全部加载完成后再初始化</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2、柱状图+折线图</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// getElementById通过template中的id获取对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> barDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;bar&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> barChart = echarts.<span class="title function_">init</span>(barDom);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 加载出柱状图</span></span></span><br><span class="line"><span class="language-javascript">        barChart.<span class="title function_">setOption</span>(option2)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9F%B1%E7%8A%B6%E5%9B%BE2.png"></p><h4 id="3、饼图"><a href="#3、饼图" class="headerlink" title="3、饼图"></a>3、饼图</h4><h5 id="官网饼图"><a href="#官网饼图" class="headerlink" title="官网饼图"></a><strong>官网饼图</strong></h5><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%A5%BC%E5%9B%BE1.png"></p><h5 id="静态页面渲染-2"><a href="#静态页面渲染-2" class="headerlink" title="静态页面渲染"></a><strong>静态页面渲染</strong></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 饼图 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;pie&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 饼图</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> option3 = &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 大标题</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">text</span>: <span class="string">&#x27;生活饮食&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 小标题</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">subtext</span>: <span class="string">&#x27;比例图&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 标题居中</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span> <span class="comment">// 鼠标放置对应数据的节点处，会显示该点的数据</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">orient</span>: <span class="string">&#x27;vertical&#x27;</span>, <span class="comment">// 纵轴显示</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">left</span>: <span class="string">&#x27;left&#x27;</span> <span class="comment">// 靠左显示</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;调查得出&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>, <span class="comment">// 饼图类型</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">center</span>: [<span class="string">&#x27;50%&#x27;</span>,<span class="string">&#x27;60%&#x27;</span>], <span class="comment">// 控制饼图显示位置</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">radius</span>: <span class="string">&#x27;60%&#x27;</span>, <span class="comment">// 控制饼图大小</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">value</span>: <span class="number">1048</span>, <span class="attr">name</span>: <span class="string">&#x27;水果&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">value</span>: <span class="number">735</span>, <span class="attr">name</span>: <span class="string">&#x27;甜品&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">value</span>: <span class="number">580</span>, <span class="attr">name</span>: <span class="string">&#x27;主食&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">value</span>: <span class="number">484</span>, <span class="attr">name</span>: <span class="string">&#x27;快餐&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">value</span>: <span class="number">300</span>, <span class="attr">name</span>: <span class="string">&#x27;海鲜&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">itemStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">shadowBlur</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">shadowOffsetX</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">shadowColor</span>: <span class="string">&#x27;rgba(0, 0, 0, 0.5)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  ]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 等待页面元素全部加载完成后再初始化</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 3、饼图</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// getElementById通过template中的id获取对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> pieDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pie&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> pieChart = echarts.<span class="title function_">init</span>(pieDom);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 加载出饼图</span></span></span><br><span class="line"><span class="language-javascript">        pieChart.<span class="title function_">setOption</span>(option3)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%A5%BC%E5%9B%BE2.png"></p><h2 id="4、动态页面渲染-后端数据呈现至Echarts数据报表上-【重点】"><a href="#4、动态页面渲染-后端数据呈现至Echarts数据报表上-【重点】" class="headerlink" title="4、动态页面渲染(后端数据呈现至Echarts数据报表上)【重点】"></a>4、动态页面渲染(后端数据呈现至Echarts数据报表上)【重点】</h2><h4 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%8A%98%E7%BA%BF%E5%9B%BE11.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 折线图 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;line&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 折线图</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> option1 = &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">title</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">text</span>: <span class="string">&#x27;订单金额统计表&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span><span class="comment">// 标题居中</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span> <span class="comment">// 鼠标放置对应数据的节点处，会显示该点的数据</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// orient: &#x27;vertical&#x27;, // 纵轴显示</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">left</span>: <span class="string">&#x27;left&#x27;</span> <span class="comment">// 靠左显示</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 横坐标</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [] <span class="comment">// 【后端数据传入】</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 纵坐标</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 折线1</span></span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">name</span>: <span class="string">&#x27;金额&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">data</span>: [], <span class="comment">// 【后端代码传入】</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">smooth</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  ]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 等待页面元素全部加载完成后再初始化</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 1、折线图</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// getElementById通过template中的id获取对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> lineDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;line&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> lineChart = echarts.<span class="title function_">init</span>(lineDom);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 想后端请求数据，并渲染</span></span></span><br><span class="line"><span class="language-javascript">      request.<span class="title function_">get</span>(<span class="string">&#x27;/lineCharts&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        option1.<span class="property">xAxis</span>.<span class="property">data</span> = res.<span class="property">data</span>?.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">date</span>) || []</span></span><br><span class="line"><span class="language-javascript">        option1.<span class="property">series</span>[<span class="number">0</span>].<span class="property">data</span> = res.<span class="property">data</span>?.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">value</span>) || []</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 加载出折线图</span></span></span><br><span class="line"><span class="language-javascript">        lineChart.<span class="title function_">setOption</span>(option1)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9F%B1%E7%8A%B6%E5%9B%BE22.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 柱状图 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;bar&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 柱状图</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> option2 = &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">title</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">text</span>: <span class="string">&#x27;水果销量统计表&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span> <span class="comment">// 标题居中</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span> <span class="comment">// 鼠标放置对应数据的节点处，会显示该点的数据</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// orient: &#x27;vertical&#x27;, // 纵轴显示</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">left</span>: <span class="string">&#x27;left&#x27;</span> <span class="comment">// 靠左显示</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 横坐标</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [] <span class="comment">// 【后端数据传入】</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 纵坐标</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">data</span>: [], <span class="comment">// 【后端数据传入】</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,<span class="comment">// 柱状图类型</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">showBackground</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">backgroundStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">color</span>: <span class="string">&#x27;rgba(180, 180, 180, 0.2)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  ]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 等待页面元素全部加载完成后再初始化</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 2、柱状图+折线图</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// getElementById通过template中的id获取对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> barDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;bar&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> barChart = echarts.<span class="title function_">init</span>(barDom);</span></span><br><span class="line"><span class="language-javascript">      request.<span class="title function_">get</span>(<span class="string">&#x27;/barCharts&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        option2.<span class="property">xAxis</span>.<span class="property">data</span> = res.<span class="property">data</span>?.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">category</span>) || []</span></span><br><span class="line"><span class="language-javascript">        option2.<span class="property">series</span>[<span class="number">0</span>].<span class="property">data</span> = res.<span class="property">data</span>?.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">value</span>) || []</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 加载出柱状图</span></span></span><br><span class="line"><span class="language-javascript">        barChart.<span class="title function_">setOption</span>(option2)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%A5%BC%E5%9B%BE33.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 饼图 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;pie&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 饼图</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> option3 = &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 大标题</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">text</span>: <span class="string">&#x27;生活饮食&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 小标题</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">subtext</span>: <span class="string">&#x27;比例图&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 标题居中</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span> <span class="comment">// 鼠标放置对应数据的节点处，会显示该点的数据</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">orient</span>: <span class="string">&#x27;vertical&#x27;</span>, <span class="comment">// 纵轴显示</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">left</span>: <span class="string">&#x27;left&#x27;</span> <span class="comment">// 靠左显示</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 显示百分比</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">label</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">formatter</span>(<span class="params">param</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> param.<span class="property">name</span> + <span class="string">&#x27; (&#x27;</span> + param.<span class="property">percent</span> + <span class="string">&#x27;%)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">  &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;调查得出&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>, <span class="comment">// 饼图类型</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">center</span>: [<span class="string">&#x27;50%&#x27;</span>,<span class="string">&#x27;60%&#x27;</span>], <span class="comment">// 控制饼图显示位置</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">radius</span>: <span class="string">&#x27;60%&#x27;</span>, <span class="comment">// 控制饼图大小</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: [], <span class="comment">// 【后端数据传入】</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">itemStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">shadowBlur</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">shadowOffsetX</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">shadowColor</span>: <span class="string">&#x27;rgba(0, 0, 0, 0.5)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 等待页面元素全部加载完成后再初始化</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 3、饼图</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// getElementById通过template中的id获取对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> pieDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pie&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> pieChart = echarts.<span class="title function_">init</span>(pieDom);</span></span><br><span class="line"><span class="language-javascript">      request.<span class="title function_">get</span>(<span class="string">&#x27;/pieCharts&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        option3.<span class="property">series</span>[<span class="number">0</span>].<span class="property">data</span> = res?.<span class="property">data</span> || []</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 加载出饼图</span></span></span><br><span class="line"><span class="language-javascript">        pieChart.<span class="title function_">setOption</span>(option3)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="后端设计"><a href="#后端设计" class="headerlink" title="后端设计"></a>后端设计</h1><h2 id="1、创建一个新表orders"><a href="#1、创建一个新表orders" class="headerlink" title="1、创建一个新表orders"></a>1、创建一个新表orders</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table orders(</span><br><span class="line">    id int not null auto_increment primary key ,</span><br><span class="line">    no varchar(255) comment &#x27;订单编号&#x27;,</span><br><span class="line">    name varchar(255) comment &#x27;订单名称&#x27;,</span><br><span class="line">    money decimal(10,2) comment &#x27;订单金额&#x27;,</span><br><span class="line">    user_id int comment &#x27;用户ID&#x27;,</span><br><span class="line">    category varchar(255) comment &#x27;订单分类&#x27;,</span><br><span class="line">    date varchar(255) comment &#x27;订单日期&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="2、Entity类"><a href="#2、Entity类" class="headerlink" title="2、Entity类"></a>2、Entity类</h2><p><strong>Orders</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;orders&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String no;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal money;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String category;</span><br><span class="line">    <span class="keyword">private</span> String date;</span><br><span class="line">    <span class="comment">// 这个字段不在数据库中，用于做业务处理用的,用于显示作者id对应的名称</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3、Mapper类"><a href="#3、Mapper类" class="headerlink" title="3、Mapper类"></a>3、Mapper类</h2><p><strong>OrdersMapper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Orders;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrdersMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Orders&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4、Service类"><a href="#4、Service类" class="headerlink" title="4、Service类"></a>4、Service类</h2><p><strong>OrdersService</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Orders;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.OrdersMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrdersService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;OrdersMapper, Orders&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> OrdersMapper ordersMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OrdersService</span><span class="params">(OrdersMapper ordersMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ordersMapper = ordersMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5、Controller类"><a href="#5、Controller类" class="headerlink" title="5、Controller类"></a>5、Controller类</h2><p><strong>OrdersController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Orders;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.OrdersService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.IdUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/orders&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrdersController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrdersService ordersService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Orders orders)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        orders.setUserId(currentUser.getId());</span><br><span class="line">        orders.setDate(DateUtil.today()); <span class="comment">//2024-06-25</span></span><br><span class="line">        orders.setNo(IdUtil.fastSimpleUUID()); <span class="comment">//订单编号</span></span><br><span class="line">        ordersService.save(orders);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Orders orders)</span>&#123;</span><br><span class="line">        ordersService.updateById(orders);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        ordersService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        ordersService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Orders&gt; orders = ordersService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Orders&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(orders);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> ordersService.getById(id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(orders.getUserId());</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">            orders.setName(user.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(orders);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> String name)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;Orders&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Orders&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        Page&lt;Orders&gt; page = ordersService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        List&lt;Orders&gt; records = page.getRecords();</span><br><span class="line">        <span class="keyword">for</span> (Orders record : records) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">authorId</span> <span class="operator">=</span> record.getUserId();</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(authorId);</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">                record.setUser(user.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6、数据报表的后端设计【中间量】"><a href="#6、数据报表的后端设计【中间量】" class="headerlink" title="6、数据报表的后端设计【中间量】"></a>6、数据报表的后端设计【中间量】</h2><p>通过这个接口charts()，可以将orders表中数据与前端Charts.vue进行关联</p><h4 id="折线图-1"><a href="#折线图-1" class="headerlink" title="折线图"></a>折线图</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取统计图数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 动态数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/lineCharts&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">lineCharts</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Orders&gt; list = ordersService.list(); <span class="comment">//获取所有的数据</span></span><br><span class="line">    <span class="comment">// 包装折线图数据</span></span><br><span class="line">    List&lt;Dict&gt; lineList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">//保存结果数据，返回给前端</span></span><br><span class="line">    Set&lt;String&gt; dates = list.stream().map(Orders::getDate).collect(Collectors.toSet());</span><br><span class="line">    <span class="comment">// 横轴：对日期进行排序操作，获取到dateList</span></span><br><span class="line">    List&lt;String&gt; dateList = CollUtil.newArrayList(dates);</span><br><span class="line">    dateList.sort(Comparator.naturalOrder());</span><br><span class="line">    <span class="keyword">for</span> (String date : dateList) &#123;</span><br><span class="line">        <span class="comment">//纵轴:统计当前日期的所有金额总数和</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">sum</span> <span class="operator">=</span> list</span><br><span class="line">                .stream()</span><br><span class="line">                .filter(orders -&gt; orders.getDate().equals(date))</span><br><span class="line">                .map(Orders::getMoney)</span><br><span class="line">                .reduce(BigDecimal::add)</span><br><span class="line">                .orElse(BigDecimal.ZERO);</span><br><span class="line">        <span class="type">Dict</span> <span class="variable">dict</span> <span class="operator">=</span> Dict.create();</span><br><span class="line">        <span class="type">Dict</span> <span class="variable">line</span> <span class="operator">=</span> dict.set(<span class="string">&quot;date&quot;</span>, date).set(<span class="string">&quot;value&quot;</span>, sum);</span><br><span class="line">        lineList.add(line);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(lineList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="柱状图-1"><a href="#柱状图-1" class="headerlink" title="柱状图"></a>柱状图</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取统计图数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 动态数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/barCharts&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">barCharts</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Orders&gt; list = ordersService.list(); <span class="comment">//获取所有的数据</span></span><br><span class="line">    <span class="comment">// 包装柱状图数据+饼图数据</span></span><br><span class="line">    List&lt;Dict&gt; barList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">//保存结果数据，返回给前端</span></span><br><span class="line">    Set&lt;String&gt; categories = list.stream().map(Orders::getCategory).collect(Collectors.toSet());</span><br><span class="line">    <span class="keyword">for</span> (String cate : categories) &#123;</span><br><span class="line">        <span class="comment">// 纵轴:统计当前分类的所有金额总数和</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">sum</span> <span class="operator">=</span> list</span><br><span class="line">                .stream()</span><br><span class="line">                .filter(orders -&gt; orders.getCategory().equals(cate))</span><br><span class="line">                .map(Orders::getMoney)</span><br><span class="line">                .reduce(BigDecimal::add)</span><br><span class="line">                .orElse(BigDecimal.ZERO);</span><br><span class="line">        <span class="type">Dict</span> <span class="variable">dict</span> <span class="operator">=</span> Dict.create();</span><br><span class="line">        <span class="type">Dict</span> <span class="variable">bar</span> <span class="operator">=</span> dict.set(<span class="string">&quot;category&quot;</span>, cate).set(<span class="string">&quot;value&quot;</span>, sum);</span><br><span class="line">        barList.add(bar);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(barList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="饼图-1"><a href="#饼图-1" class="headerlink" title="饼图"></a>饼图</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取统计图数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 动态数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/pieCharts&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">pieCharts</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Orders&gt; list = ordersService.list(); <span class="comment">//获取所有的数据</span></span><br><span class="line">    <span class="comment">// 包装柱状图数据+饼图数据</span></span><br><span class="line">    List&lt;Dict&gt; pieList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">//保存结果数据，返回给前端</span></span><br><span class="line">    Set&lt;String&gt; names = list.stream().map(Orders::getCategory).collect(Collectors.toSet());</span><br><span class="line">    <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">        <span class="comment">// 纵轴:统计当前分类的所有金额总数和</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">sum</span> <span class="operator">=</span> list</span><br><span class="line">                .stream()</span><br><span class="line">                .filter(orders -&gt; orders.getCategory().equals(name))</span><br><span class="line">                .map(Orders::getMoney)</span><br><span class="line">                .reduce(BigDecimal::add)</span><br><span class="line">                .orElse(BigDecimal.ZERO);</span><br><span class="line">        <span class="type">Dict</span> <span class="variable">dict</span> <span class="operator">=</span> Dict.create();</span><br><span class="line">        <span class="type">Dict</span> <span class="variable">bar</span> <span class="operator">=</span> dict.set(<span class="string">&quot;name&quot;</span>, name).set(<span class="string">&quot;value&quot;</span>, sum);</span><br><span class="line">        pieList.add(bar);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(pieList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建15之系统公告</title>
      <link href="/2024/06/27/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA15%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%85%AC%E5%91%8A/"/>
      <url>/2024/06/27/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA15%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%85%AC%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>index.js中子路由，添加以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;notice&#x27;</span>,</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;Notice&#x27;</span>,</span><br><span class="line"><span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;系统公告&#x27;</span> &#125;,</span><br><span class="line"><span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Notice.vue&#x27;</span>) </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>Manager.vue中，在二级菜单中添加以下内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/notice&quot;</span>&gt;</span>系统公告<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%B3%BB%E7%BB%9F%E5%85%AC%E5%91%8A%E4%BA%8C%E7%BA%A7%E8%8F%9C%E5%8D%95.png"></p><p>系统公告页面：Notice.vue</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Notice%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%88%E6%9E%9C1.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Notice%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%88%E6%9E%9C2.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询标题&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">stripe</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                                      fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">                  @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span></span></span><br><span class="line"><span class="tag">         &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;内容&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span> <span class="attr">show-overflow-tooltip</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布人&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;是否公开&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 绑定当前行open属性【注意点】 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-switch</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">v-model</span>=<span class="string">&quot;scope.row.open&quot;</span> </span></span><br><span class="line"><span class="tag">                               @<span class="attr">change</span>=<span class="string">&quot;changeOpen(scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-switch</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">plain</span> </span></span><br><span class="line"><span class="tag">                               @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> </span></span><br><span class="line"><span class="tag">                               <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;公告信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;40%&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.title&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;内容&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.content&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;内容&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Notice&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                title : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入标题&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;],</span></span><br><span class="line"><span class="language-javascript">                content : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入内容&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;],</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">title</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/notice/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: <span class="variable language_">this</span>.<span class="property">title</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 更新接口状态（是否要公开）【注意点】</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeOpen</span>(<span class="params">form</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(form)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>() <span class="comment">// 直接发送请求，无需表单验证</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）【注意点】</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/notice/update&#x27;</span> : <span class="string">&#x27;/notice/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/notice/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/notice/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* show-overflow-tooltip */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.el-tooltip__popper</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">max-width</span>: <span class="number">200px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="系统公告栏设计【调用中间量】"><a href="#系统公告栏设计【调用中间量】" class="headerlink" title="系统公告栏设计【调用中间量】"></a>系统公告栏设计【调用中间量】</h2><h3 id="主要思路"><a href="#主要思路" class="headerlink" title="主要思路"></a>主要思路</h3><p>在Home.vue中，调用loadNotice方法，来接受后端传过来的数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">loadNotice</span>(<span class="params"></span>)&#123;</span><br><span class="line">request.<span class="title function_">get</span>(<span class="string">&#x27;/notice/selectUserData&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line"><span class="comment">// notices来接受后端传过来数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">notices</span> = res.<span class="property">data</span> </span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>并在每次页面更新时，进行数据更新</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// 时刻更新数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">loadNotice</span>()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>从而实现了由系统公告页面，将其公开状态的信息在首页的展示，若其是未公开状态的信息，则首页不展示其信息。</p><h3 id="具体呈现"><a href="#具体呈现" class="headerlink" title="具体呈现"></a>具体呈现</h3><p>系统公告页面展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%85%AC%E5%91%8A%E6%A0%8F%E5%B1%95%E7%A4%BA2.png"></p><p>首页展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%85%AC%E5%91%8A%E6%A0%8F%E5%B1%95%E7%A4%BA1.png"></p><p>首页代码的实现：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;box-shadow: 0 0 10px rgba(0,0,0,.1); padding: 10px 20px; border-radius: 5px; margin-bottom: 10px&quot;</span>&gt;</span></span><br><span class="line">            欢迎&#123;&#123;user.name&#125;&#125;，祝开心每一天！</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 小卡片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>小卡片<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                卡片介绍</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>主题色<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 系统公告：时间线 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; margin: 15px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 50%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 15px; font-size: 20px; font-weight:bold&quot;</span>&gt;</span>系统公告<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 具体内容 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-timeline</span> <span class="attr">style</span>=<span class="string">&quot;padding: 0;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-timeline-item</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">v-for</span>=<span class="string">&quot;item in notices&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">:timestamp</span>=<span class="string">&quot;item.time&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-timeline-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-timeline</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 系统公告：折叠面板 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; margin: 15px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 50%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 15px; font-size: 20px; font-weight:bold&quot;</span>&gt;</span>系统公告<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 具体内容 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-collapse</span> <span class="attr">v-model</span>=<span class="string">&quot;activeName&quot;</span> <span class="attr">accordion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-collapse-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in notices&quot;</span> <span class="attr">:name</span>=<span class="string">&quot;index + &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-collapse-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-collapse</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 公告栏</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">notices</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">activeName</span>: <span class="string">&#x27;0&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 时刻更新数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">loadNotice</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">loadNotice</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">get</span>(<span class="string">&#x27;/notice/selectUserData&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// notices来接受后端传过来数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">notices</span> = res.<span class="property">data</span> </span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="后端设计"><a href="#后端设计" class="headerlink" title="后端设计"></a>后端设计</h1><h2 id="设计表notice"><a href="#设计表notice" class="headerlink" title="设计表notice"></a>设计表notice</h2><p><strong>默认内容是公开的</strong> ：default true</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table <span class="keyword">if</span> not exists <span class="title function_">notice</span><span class="params">(</span></span><br><span class="line"><span class="params">    id <span class="type">int</span> not <span class="literal">null</span> primary key auto_increment,</span></span><br><span class="line"><span class="params">    title varchar(<span class="number">255</span>)</span> comment <span class="string">&#x27;标题&#x27;</span>,</span><br><span class="line">    content <span class="title function_">varchar</span><span class="params">(<span class="number">255</span>)</span> comment <span class="string">&#x27;内容&#x27;</span>,</span><br><span class="line">    user_id <span class="type">int</span> comment <span class="string">&#x27;发布人的ID&#x27;</span>,</span><br><span class="line">    time <span class="title function_">varchar</span><span class="params">(<span class="number">255</span>)</span> comment <span class="string">&#x27;发布时间&#x27;</span>,</span><br><span class="line">    open <span class="title function_">tinyint</span><span class="params">(<span class="number">1</span>)</span> comment <span class="string">&#x27;是否公开&#x27;</span> <span class="keyword">default</span> <span class="literal">true</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="Entity类"><a href="#Entity类" class="headerlink" title="Entity类"></a>Entity类</h2><p><strong>Notice</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;notice&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Notice</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">    <span class="keyword">private</span> Boolean open;</span><br><span class="line">    <span class="comment">// 这个字段不在数据库中，用于做业务处理用的,用于显示作者id对应的名称</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Mapper类"><a href="#Mapper类" class="headerlink" title="Mapper类"></a>Mapper类</h2><p><strong>NoticeMapper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Notice;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NoticeMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Notice&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Service类"><a href="#Service类" class="headerlink" title="Service类"></a>Service类</h2><p><strong>NoticeService</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Notice;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.NoticeMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoticeService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;NoticeMapper, Notice&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> NoticeMapper noticeMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NoticeService</span><span class="params">(NoticeMapper noticeMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.noticeMapper = noticeMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Controller类"><a href="#Controller类" class="headerlink" title="Controller类"></a>Controller类</h2><p><strong>NoticeController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.Notice;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.NoticeService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/notice&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoticeController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> NoticeService noticeService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Notice notice)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        notice.setUserId(currentUser.getId());</span><br><span class="line">        notice.setTime(DateUtil.now()); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">        noticeService.save(notice);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Notice notice)</span>&#123;</span><br><span class="line">        noticeService.updateById(notice);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        noticeService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        noticeService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Notice&gt; notices = noticeService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Notice&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(notices);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">Notice</span> <span class="variable">notice</span> <span class="operator">=</span> noticeService.getById(id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(notice.getUserId());</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">            notice.setUser(user.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(notice);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> String title)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;Notice&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Notice&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(title),<span class="string">&quot;title&quot;</span>,title);</span><br><span class="line">        Page&lt;Notice&gt; page = noticeService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        List&lt;Notice&gt; records = page.getRecords();</span><br><span class="line">        List&lt;User&gt; list = userService.list();</span><br><span class="line">        <span class="keyword">for</span> (Notice record : records) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">authorId</span> <span class="operator">=</span> record.getUserId();</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(authorId);</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">                record.setUser(user.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="系统公告栏后端设计【中间量】"><a href="#系统公告栏后端设计【中间量】" class="headerlink" title="系统公告栏后端设计【中间量】"></a>系统公告栏后端设计【中间量】</h2><p>在Controller中添加一个方法selectUserData，用于查看到一些公开的信息端口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询用户公告</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectUserData&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectUserData</span><span class="params">()</span>&#123;</span><br><span class="line">    QueryWrapper&lt;Notice&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Notice&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;open&quot;</span>,<span class="number">1</span>); <span class="comment">// 用户只能看到公开的数据</span></span><br><span class="line">    List&lt;Notice&gt; notices = noticeService.list(queryWrapper);</span><br><span class="line">    <span class="keyword">return</span> Result.success(notices);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建14之集成富文本编辑器</title>
      <link href="/2024/06/24/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA14%E4%B9%8B%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/"/>
      <url>/2024/06/24/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA14%E4%B9%8B%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h1><h2 id="基本页面展示"><a href="#基本页面展示" class="headerlink" title="基本页面展示"></a>基本页面展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E5%9F%BA%E6%9C%AC%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA.png"></p><p><strong>代码呈现</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询标题&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 新增+批量删除 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 3、标题列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 4、简介列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;简介&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 6、发布人列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布人&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 7、发布时间列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 8、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;新闻信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.title&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;简介&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.description&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;简介&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;内容&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.content&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;内容&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            title : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入标题&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">title</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">get</span>(<span class="string">&#x27;/news/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="variable language_">this</span>.<span class="property">title</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">     <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/news/update&#x27;</span> : <span class="string">&#x27;/news/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">delete</span>(<span class="string">&#x27;/news/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">delete</span>(<span class="string">&#x27;/news/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="富文本编辑器操作【重点】"><a href="#富文本编辑器操作【重点】" class="headerlink" title="富文本编辑器操作【重点】***"></a>富文本编辑器操作【重点】***</h2><h3 id="1、安装富文本插件Wangeditor"><a href="#1、安装富文本插件Wangeditor" class="headerlink" title="1、安装富文本插件Wangeditor"></a>1、安装富文本插件Wangeditor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i wangeditor --save</span><br></pre></td></tr></table></figure><h3 id="2、富文件的使用"><a href="#2、富文件的使用" class="headerlink" title="2、富文件的使用"></a>2、富文件的使用</h3><h4 id="富文本编辑器"><a href="#富文本编辑器" class="headerlink" title="富文本编辑器"></a>富文本编辑器</h4><p>在<strong>template</strong>中，所需要编辑器的地方，添加以下内容信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;editor&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A81.png"></p><p>其次在<strong>script</strong>中需要添加以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import E from &#x27;wangeditor&#x27;</span><br><span class="line"></span><br><span class="line">data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">Editor: null</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A83.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在所需富文本编辑器的方法中【初步创建】：</span><br><span class="line">this.$nextTick(()=&gt;&#123;</span><br><span class="line">    this.editor = new E(&#x27;#editor&#x27;)</span><br><span class="line">    this.editor.create() //创建</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A86.png"></p><h4 id="代码高亮插件"><a href="#代码高亮插件" class="headerlink" title="代码高亮插件"></a>代码高亮插件</h4><p><strong>一</strong>：<strong>插件</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install highlight.js -S</span><br></pre></td></tr></table></figure><p><strong>二</strong>：<strong>在main.js中引入css</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;highlight.js/styles/monokai-sublime.css&#x27;</span><br></pre></td></tr></table></figure><p><strong>三</strong>：<strong>在script中，引入以下内容</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import hljs from &#x27;highlight.js&#x27;</span><br><span class="line"></span><br><span class="line">在对应的需要富文本编辑器的方法中添加：</span><br><span class="line">this.editor.highlight = hljs</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A855.png"></p><h4 id="销毁编辑器"><a href="#销毁编辑器" class="headerlink" title="销毁编辑器"></a>销毁编辑器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">在template中，需要编辑器的地方，添加以下内容：</span><br><span class="line">@close=<span class="string">&quot;closeDialog&quot;</span></span><br><span class="line"></span><br><span class="line">在script中，需添加对应的方法：</span><br><span class="line"><span class="comment">// 关闭后，需要销毁富文本框中内容</span></span><br><span class="line"><span class="title function_">closeDialog</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// 销毁编辑器</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">destroy</span>()</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span> = <span class="literal">null</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><strong>template中的弹窗部分，需添加关闭时调用的方法</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A84.png"></p><p><strong>script中，书写关闭时对应的方法</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%99%A8%E4%BD%BF%E7%94%A82.png"></p><h4 id="设置和获取内容"><a href="#设置和获取内容" class="headerlink" title="设置和获取内容"></a>设置和获取内容</h4><p><strong>获取内容</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">editor.<span class="property">txt</span>.<span class="title function_">html</span>()</span><br><span class="line"></span><br><span class="line">具体实现：【获取信息后，传入后端保存】</span><br><span class="line"><span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span><br><span class="line">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(valid)&#123;</span><br><span class="line">                    <span class="comment">// 获取富文本编辑框的内容【修改处】</span></span><br><span class="line">                    <span class="keyword">let</span> content = <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">txt</span>.<span class="title function_">html</span>()</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">content</span> = content</span><br><span class="line">                    <span class="comment">// 验证通过,向后台发送请求</span></span><br><span class="line">                    <span class="title function_">request</span>(&#123;</span><br><span class="line">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/news/update&#x27;</span> : <span class="string">&#x27;/news/add&#x27;</span>,</span><br><span class="line">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span><br><span class="line">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span><br><span class="line">                            <span class="comment">// 成功保存</span></span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span><br><span class="line">                            <span class="comment">// 更新数据</span></span><br><span class="line">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span><br><span class="line">                            <span class="comment">// 关闭弹窗</span></span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            <span class="comment">// 失败</span></span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure><p><strong>设置内容</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">editor.<span class="property">txt</span>.<span class="title function_">html</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">具体实现：将已有的代码在进行编译时展示出来</span><br><span class="line"><span class="comment">// 编辑功能</span></span><br><span class="line">    <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span><br><span class="line">        <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span> = <span class="keyword">new</span> <span class="title function_">E</span>(<span class="string">&#x27;#editor&#x27;</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">highlight</span> = hljs</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">create</span>() <span class="comment">//创建</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">txt</span>.<span class="title function_">html</span>(row.<span class="property">content</span>) <span class="comment">// 设置富文本内容【修改处】</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="封装富文本编辑器代码（图片-视频）【重点】"><a href="#封装富文本编辑器代码（图片-视频）【重点】" class="headerlink" title="封装富文本编辑器代码（图片+视频）【重点】***"></a>封装富文本编辑器代码（图片+视频）【重点】***</h4><p><strong>封装代码呈现</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setRichText</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// 富文本框</span></span><br><span class="line"><span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span> = <span class="keyword">new</span> <span class="title function_">E</span>(<span class="string">&#x27;#editor&#x27;</span>)</span><br><span class="line"><span class="comment">// 代码高亮</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">highlight</span> = hljs</span><br><span class="line"><span class="comment">// 上传图片</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadImgServer</span> = <span class="string">&#x27;http://localhost:8080/file/editor/upload&#x27;</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadFileName</span> = <span class="string">&#x27;file&#x27;</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadImgHeaders</span> = &#123;</span><br><span class="line">token : <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadImgParams</span> = &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;img&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 上传视频</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoServer</span> = <span class="string">&#x27;http://localhost:8080/file/editor/upload&#x27;</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoName</span> = <span class="string">&#x27;file&#x27;</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoHeaders</span> = &#123;</span><br><span class="line">token : <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoParams</span> = &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;video&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">create</span>() <span class="comment">//创建</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><strong>封装代码的应用</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">【注意】在data中添加一个content全局变量：</span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line">主要代码：</span><br><span class="line"><span class="comment">// 编辑功能</span></span><br><span class="line"><span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setRichText</span>()</span><br><span class="line"><span class="comment">// 延迟加载</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">txt</span>.<span class="title function_">html</span>(row.<span class="property">content</span>) <span class="comment">// 设置富文本内容，将已有的内容在编辑时展示出来</span></span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增功能</span></span><br><span class="line"><span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setRichText</span>()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="最终效果呈现"><a href="#最终效果呈现" class="headerlink" title="最终效果呈现"></a>最终效果呈现</h4><p><strong>【添加】新闻内容效果</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%99%A8%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C1.png"></p><p><strong>【编辑】新闻内容效果</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AF%8C%E6%96%87%E6%9C%AC%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C2.png"></p><h3 id="3、添加”显示内容”按钮"><a href="#3、添加”显示内容”按钮" class="headerlink" title="3、添加”显示内容”按钮"></a>3、添加”显示内容”按钮</h3><p><strong>添加显示内容的列</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;内容&quot; prop=&quot;content&quot;&gt;</span><br><span class="line">&lt;template v-slot=&quot;scope&quot;&gt;</span><br><span class="line">&lt;el-button @click=&quot;showContent(scope.row.content)&quot;&gt;显示内容&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9%E5%88%97.png"></p><p><strong>添加一个显示内容的弹窗</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 显示内容弹窗 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;内容&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">&quot;w-e-text&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible1 = false&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>在【script】中进行添加以下内容</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">    // 富文本编辑器</span><br><span class="line">        Editor: null,</span><br><span class="line">        content: &#x27;&#x27;,</span><br><span class="line">        formVisible1: false</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">涉及到的方法：</span><br><span class="line">// 展示内容</span><br><span class="line">        showContent(content)&#123;</span><br><span class="line">            this.content = content</span><br><span class="line">            this.formVisible1 = true</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure><p><strong>最终效果展示</strong></p><p>此处，新增一个“内容”列</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9%E6%95%88%E6%9E%9C1.png"></p><p>点击“显示内容”按钮后，会出现以下效果</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9%E6%95%88%E6%9E%9C2.png"></p><h3 id="4、添加“详情页显示”按钮"><a href="#4、添加“详情页显示”按钮" class="headerlink" title="4、添加“详情页显示”按钮"></a>4、添加“详情页显示”按钮</h3><p><strong>添加详情页的列</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 单独一页，显示详情内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;详情页&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">@<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;newsDetail?id=&#x27;+scope.row.id)&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">详情页显示</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>新添NewsDetail.vue页面</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 显示新闻信息内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新闻标题 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0 20px 0; font-size: 30px;font-weight:bold;&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; news.title &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新闻的作者，时间 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0; font-size: 13px; color: #666&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; news.author &#125;&#125; </span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 20px;&quot;</span>&gt;</span>&#123;&#123; news.time &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 显示内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;box-shadow: 0 0 10px rgba(0,0,0,.12); padding: 10px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;news.content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;newsDetail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">news</span>: &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> id = <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(!id)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="comment">//不做任何事，不展示</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">get</span>(<span class="string">&#x27;/news/selectById/&#x27;</span>+id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">news</span> = res.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>最终效果展示</strong></p><p>此处，新增一个“详情页”列</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%AF%A6%E6%83%85%E9%A1%B5%E6%95%88%E6%9E%9C1.png"></p><p>点击“详情页显示”按钮后，会出现以下效果</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%AF%A6%E6%83%85%E9%A1%B5%E6%95%88%E6%9E%9C2.png"></p><h3 id="5、前端完整代码"><a href="#5、前端完整代码" class="headerlink" title="5、前端完整代码"></a>5、前端完整代码</h3><p>News.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询标题&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 3、标题列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 4、简介列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;简介&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 5、内容列 --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;el-table-column label=&quot;内容&quot; prop=&quot;content&quot; show-overflow-tooltip&gt;&lt;/el-table-column&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;内容&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;showContent(scope.row.content)&quot;</span>&gt;</span>显示内容<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 单独一页显示内容 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;详情页&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;newsDetail?id=&#x27;+scope.row.id)&quot;</span>&gt;</span>详情页显示<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 6、发布人列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布人&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 7、发布时间列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发布时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 8、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;新闻信息&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span> @<span class="attr">close</span>=<span class="string">&quot;closeDialog&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.title&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;简介&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.description&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;简介&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 富文本框 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;内容&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;editor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 显示内容弹窗 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;内容&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">&quot;w-e-text&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible1 = false&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 富文本框</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> E <span class="keyword">from</span> <span class="string">&#x27;wangeditor&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> hljs <span class="keyword">from</span> <span class="string">&#x27;highlight.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;News&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                title : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入标题&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 富文本框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">editor</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible1</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">title</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/news/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: <span class="variable language_">this</span>.<span class="property">title</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setRichText</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 富文本框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span> = <span class="keyword">new</span> <span class="title function_">E</span>(<span class="string">&#x27;#editor&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">highlight</span> = hljs</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 上传图片</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadImgServer</span> = <span class="string">&#x27;http://localhost:8080/file/editor/upload&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadFileName</span> = <span class="string">&#x27;file&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadImgHeaders</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                    token : <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadImgParams</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;img&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 上传视频</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoServer</span> = <span class="string">&#x27;http://localhost:8080/file/editor/upload&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoName</span> = <span class="string">&#x27;file&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoHeaders</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                    token : <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">config</span>.<span class="property">uploadVideoParams</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;video&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">create</span>() <span class="comment">//创建</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">setRichText</span>()</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 延迟加载</span></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">txt</span>.<span class="title function_">html</span>(row.<span class="property">content</span>) <span class="comment">// 设置富文本内容</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">setRichText</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 销毁富文本框中内容</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">closeDialog</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 销毁编辑器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">destroy</span>()</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">editor</span> = <span class="literal">null</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 展示内容</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">showContent</span>(<span class="params">content</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">content</span> = content</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible1</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 获取富文本编辑框的内容</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> content = <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="property">txt</span>.<span class="title function_">html</span>()</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">content</span> = content</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/news/update&#x27;</span> : <span class="string">&#x27;/news/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/news/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/news/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>NewsDetail.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 显示新闻信息内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新闻标题 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0 20px 0; font-size: 30px;font-weight:bold;&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; news.title &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新闻的作者，时间 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0; font-size: 13px; color: #666&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; news.author &#125;&#125; </span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 20px;&quot;</span>&gt;</span>&#123;&#123; news.time &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 显示内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;box-shadow: 0 0 10px rgba(0,0,0,.12); padding: 10px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;news.content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;newsDetail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">news</span>: &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> id = <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(!id)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="comment">//不做任何事，不展示</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">get</span>(<span class="string">&#x27;/news/selectById/&#x27;</span>+id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">news</span> = res.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="后端设计"><a href="#后端设计" class="headerlink" title="后端设计"></a>后端设计</h1><h2 id="mysql数据库新建表"><a href="#mysql数据库新建表" class="headerlink" title="mysql数据库新建表"></a>mysql数据库新建表</h2><p><strong>news</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists news(</span><br><span class="line">    id int primary key auto_increment,</span><br><span class="line">    title varchar(255) comment &#x27;标题&#x27;,</span><br><span class="line">    description varchar(255) comment &#x27;简介&#x27;,</span><br><span class="line">    content text comment &#x27;内容&#x27;,</span><br><span class="line">    author_id int comment &#x27;发布人id&#x27;,</span><br><span class="line">    time varchar(255) comment &#x27;发布时间&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="Entity层"><a href="#Entity层" class="headerlink" title="Entity层"></a>Entity层</h2><p><strong>News</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;news&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">News</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> Integer authorId;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">    <span class="comment">// 这个字段不在数据库中，用于做业务处理用的,用于显示作者id对应的名称</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Mapper层"><a href="#Mapper层" class="headerlink" title="Mapper层"></a>Mapper层</h2><p><strong>NewsMapper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.News;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NewsMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;News&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h2><p><strong>NewsService</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.News;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.NewsMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;NewsMapper, News&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> NewsMapper newsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NewsService</span><span class="params">(NewsMapper newsMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.newsMapper = newsMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h2><h3 id="NewsController"><a href="#NewsController" class="headerlink" title="NewsController"></a>NewsController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.News;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.NewsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/news&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> NewsService newsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> News news)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前登录的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> TokenUtils.getCurrentUser();</span><br><span class="line">        news.setAuthorId(currentUser.getId());</span><br><span class="line">        news.setTime(DateUtil.now()); <span class="comment">//2024-06-25 21:24:12</span></span><br><span class="line">        newsService.save(news);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> News news)</span>&#123;</span><br><span class="line">        newsService.updateById(news);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        newsService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        newsService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;News&gt; news = newsService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;News&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">News</span> <span class="variable">news</span> <span class="operator">=</span> newsService.getById(id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(news.getAuthorId());</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">            news.setAuthor(user.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> String title)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;News&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;News&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(title),<span class="string">&quot;title&quot;</span>,title);</span><br><span class="line">        Page&lt;News&gt; page = newsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        List&lt;News&gt; records = page.getRecords();</span><br><span class="line">        List&lt;User&gt; list = userService.list();</span><br><span class="line">        <span class="keyword">for</span> (News record : records) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">authorId</span> <span class="operator">=</span> record.getAuthorId();</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(authorId);</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != user)&#123;</span><br><span class="line">                record.setAuthor(user.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="FileController【解决富文本图片-视频】"><a href="#FileController【解决富文本图片-视频】" class="headerlink" title="FileController【解决富文本图片+视频】***"></a>FileController【解决富文本图片+视频】***</h3><p>新添加方法，主要解决富文本中图片和视频的处理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 富文本框上传文件接口</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/editor/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Dict <span class="title function_">editorUpload</span><span class="params">(<span class="meta">@RequestParam</span> MultipartFile file,<span class="meta">@RequestParam</span> String type)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">    <span class="type">String</span> <span class="variable">mainName</span> <span class="operator">=</span> FileUtil.mainName(originalFilename);<span class="comment">//不包含后缀的文件名称 =&gt; student</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> FileUtil.extName(originalFilename);<span class="comment">//获取文件后缀名 =&gt; .png</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!FileUtil.exist(ROOT_PATH))&#123;</span><br><span class="line">        FileUtil.mkdir(ROOT_PATH);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (FileUtil.exist(ROOT_PATH + File.separator + originalFilename))&#123;</span><br><span class="line">        originalFilename = System.currentTimeMillis() + <span class="string">&quot;_&quot;</span> + mainName + extName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//D:\Engineering\warehouse\SystemFrameworkUI\BackSystem\BackManagement\files\12315312_student.png</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(ROOT_PATH + File.separator + originalFilename);</span><br><span class="line">    file.transferTo(saveFile); <span class="comment">// 存储文件到本地磁盘</span></span><br><span class="line">    <span class="comment">//返回文件的链接</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8080/file/download/&quot;</span> + originalFilename;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;img&quot;</span>.equals(type))&#123;</span><br><span class="line">        <span class="comment">// 图片</span></span><br><span class="line">        <span class="keyword">return</span>  Dict.create().set(<span class="string">&quot;errno&quot;</span>,<span class="number">0</span>).set(<span class="string">&quot;data&quot;</span>, CollUtil.newArrayList(Dict.create().set(<span class="string">&quot;url&quot;</span>,url)));</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;video&quot;</span>.equals(type)) &#123;</span><br><span class="line">        <span class="comment">// 视频</span></span><br><span class="line">        <span class="keyword">return</span> Dict.create().set(<span class="string">&quot;errno&quot;</span>,<span class="number">0</span>).set(<span class="string">&quot;data&quot;</span>,Dict.create().set(<span class="string">&quot;url&quot;</span>,url));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 都不是，则返回一个没有数据的信息</span></span><br><span class="line">    <span class="keyword">return</span> Dict.create().set(<span class="string">&quot;errno&quot;</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>FileController完整代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.common.AuthAccess;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.collection.CollUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.io.FileUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.lang.Dict;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/file&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileController</span> &#123;</span><br><span class="line">    <span class="comment">//文件根目录</span></span><br><span class="line">    <span class="comment">// D:\Engineering\warehouse\SystemFrameworkUI\BackSystem\BackManagement\files</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROOT_PATH</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;files&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//上传文件</span></span><br><span class="line">   <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();<span class="comment">//文件的原始名称.实际存储到磁盘的文件名称</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//1.获取文件名和后缀【文件名：student.png】</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">mainName</span> <span class="operator">=</span> FileUtil.mainName(originalFilename);<span class="comment">//不包含后缀的文件名称 =&gt; student</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename().toString();</span><br><span class="line">       <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));<span class="comment">//获取文件后缀名 =&gt; .png</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//2.传过来的file转换为路径</span></span><br><span class="line">       <span class="keyword">if</span> (!FileUtil.exist(ROOT_PATH))&#123;<span class="comment">//文件存储的父级目录</span></span><br><span class="line">           <span class="comment">//文件存储的父级不存在，就要创建</span></span><br><span class="line">           FileUtil.mkdir(ROOT_PATH);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//判断当前上传的文件是否已经存在了，若存在则要重命名一个文件名称</span></span><br><span class="line">       <span class="comment">//File.separator:分隔符(//)</span></span><br><span class="line">       <span class="keyword">if</span> (FileUtil.exist(ROOT_PATH + File.separator + originalFilename))&#123;</span><br><span class="line">           originalFilename = System.currentTimeMillis() + <span class="string">&quot;_&quot;</span> + mainName + extName;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//D:\Engineering\warehouse\SystemFrameworkUI\BackSystem\BackManagement\files\12315312_student.png</span></span><br><span class="line">       <span class="type">File</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(ROOT_PATH + File.separator + originalFilename);</span><br><span class="line">       file.transferTo(saveFile); <span class="comment">// 存储文件到本地磁盘</span></span><br><span class="line">       <span class="comment">//返回文件的链接</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8080/file/download/&quot;</span> + originalFilename;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//3.返回文件的链接，这个链接就是文件下载地址，这个文件下载地址就是从后台提供出来的</span></span><br><span class="line">       <span class="keyword">return</span> Result.success(url);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//下载文件</span></span><br><span class="line">    <span class="meta">@AuthAccess</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/download/&#123;fileName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="comment">// 附件下载</span></span><br><span class="line">       <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename=&quot;+ URLEncoder.encode(fileName,&quot;UTF-8&quot;));</span></span><br><span class="line">       <span class="comment">// 预览</span></span><br><span class="line">        response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;inline;filename=&quot;</span>+ URLEncoder.encode(fileName,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">       <span class="comment">//字节流数组获取</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> ROOT_PATH + File.separator + fileName;</span><br><span class="line">        <span class="keyword">if</span> (!FileUtil.exist(filePath))&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">byte</span>[] bytes = FileUtil.readBytes(filePath);</span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();<span class="comment">//io流</span></span><br><span class="line">        outputStream.write(bytes); <span class="comment">//是一个字节数组，也就是文件的字节流数组</span></span><br><span class="line">        outputStream.flush();<span class="comment">//刷新</span></span><br><span class="line">        outputStream.close();<span class="comment">//关闭文件流</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 富文本框上传文件接口</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/editor/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dict <span class="title function_">editorUpload</span><span class="params">(<span class="meta">@RequestParam</span> MultipartFile file,<span class="meta">@RequestParam</span> String type)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">mainName</span> <span class="operator">=</span> FileUtil.mainName(originalFilename);<span class="comment">//不包含后缀的文件名称 =&gt; student</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> FileUtil.extName(originalFilename);<span class="comment">//获取文件后缀名 =&gt; .png</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!FileUtil.exist(ROOT_PATH))&#123;</span><br><span class="line">            FileUtil.mkdir(ROOT_PATH);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (FileUtil.exist(ROOT_PATH + File.separator + originalFilename))&#123;</span><br><span class="line">            originalFilename = System.currentTimeMillis() + <span class="string">&quot;_&quot;</span> + mainName + extName;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//D:\Engineering\warehouse\SystemFrameworkUI\BackSystem\BackManagement\files\12315312_student.png</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(ROOT_PATH + File.separator + originalFilename);</span><br><span class="line">        file.transferTo(saveFile); <span class="comment">// 存储文件到本地磁盘</span></span><br><span class="line">        <span class="comment">//返回文件的链接</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8080/file/download/&quot;</span> + originalFilename;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;img&quot;</span>.equals(type))&#123;</span><br><span class="line">            <span class="comment">// 图片</span></span><br><span class="line">            <span class="keyword">return</span>  Dict.create().set(<span class="string">&quot;errno&quot;</span>,<span class="number">0</span>).set(<span class="string">&quot;data&quot;</span>, CollUtil.newArrayList(Dict.create().set(<span class="string">&quot;url&quot;</span>,url)));</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;video&quot;</span>.equals(type)) &#123;</span><br><span class="line">            <span class="comment">// 视频</span></span><br><span class="line">            <span class="keyword">return</span> Dict.create().set(<span class="string">&quot;errno&quot;</span>,<span class="number">0</span>).set(<span class="string">&quot;data&quot;</span>,Dict.create().set(<span class="string">&quot;url&quot;</span>,url));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 都不是，则返回一个没有数据的信息</span></span><br><span class="line">        <span class="keyword">return</span> Dict.create().set(<span class="string">&quot;errno&quot;</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建13之Excel数据导入导出</title>
      <link href="/2024/06/19/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA13%E4%B9%8BExcel%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/"/>
      <url>/2024/06/19/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA13%E4%B9%8BExcel%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="Excel依赖"><a href="#Excel依赖" class="headerlink" title="Excel依赖"></a>Excel依赖</h1><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;poi.version&gt;5.2.3&lt;/poi.version&gt;</span><br></pre></td></tr></table></figure><h3 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h3><p><strong>父工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- poi : java excel --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;poi.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;poi.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>子工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- poi : java excel --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi&lt;/artifactId&gt;</span><br><span class="line">    &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;</span><br><span class="line">    &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="给导出的Excel表头设置中文"><a href="#给导出的Excel表头设置中文" class="headerlink" title="给导出的Excel表头设置中文"></a>给导出的Excel表头设置中文</h1><p><strong>答</strong>：<strong>在实体类Entity的属性上面添加【@Alias】注解，基本格式为：@Alias(“中文”)</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Excel%E8%AE%BE%E7%BD%AE%E8%A1%A8%E5%A4%B4%E4%B8%BA%E4%B8%AD%E6%96%87.png"></p><h1 id="数据导出"><a href="#数据导出" class="headerlink" title="数据导出"></a>数据导出</h1><h3 id="1、后端整体代码"><a href="#1、后端整体代码" class="headerlink" title="1、后端整体代码"></a>1、后端整体代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数据导出至excel</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportData</span><span class="params">(<span class="meta">@RequestParam(required = false)</span> String username,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(required = false)</span> String name,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(required = false)</span> String ids,</span></span><br><span class="line"><span class="params">                       HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">ExcelWriter</span> <span class="variable">writer</span> <span class="operator">=</span> ExcelUtil.getWriter(<span class="literal">true</span>);</span><br><span class="line">    List&lt;User&gt; list;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;(); <span class="comment">// 导出结果按照升序排</span></span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isNotBlank(ids))&#123;</span><br><span class="line">        <span class="comment">// 第一种：根据选中的id导出【选择框】</span></span><br><span class="line">        <span class="comment">// [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;] =&gt; [1,2,3]</span></span><br><span class="line">        List&lt;Integer&gt; idsArr1 = Arrays.stream(ids.split(<span class="string">&quot;,&quot;</span>)).map(Integer::valueOf).collect(Collectors.toList());</span><br><span class="line">        queryWrapper.in(<span class="string">&quot;id&quot;</span>,idsArr1);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// 第二种：全部导出（queryWrapper中元素为空） 或 条件导出（queryWrapper中元素不为空）</span></span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(username),<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">    &#125;</span><br><span class="line">    list = userService.list(queryWrapper);</span><br><span class="line"></span><br><span class="line">    writer.write(list,<span class="literal">true</span>); <span class="comment">// 将数据全部放置输出对象writer中</span></span><br><span class="line">    <span class="comment">// 设置浏览器响应的格式</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">// 设置导出的文件的名称</span></span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(<span class="string">&quot;用户信息表&quot;</span>,<span class="string">&quot;UTF-8&quot;</span>) + <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream(); <span class="comment">//生成输出流对象，目的就是导出至excel</span></span><br><span class="line">    writer.flush(outputStream,<span class="literal">true</span>); <span class="comment">// 将writer中数据全部刷新至数据流中，一并传至excel中,并关闭</span></span><br><span class="line">    writer.close();</span><br><span class="line">    <span class="comment">// 保险起见，再次对【数据流】进行刷新并关闭</span></span><br><span class="line">    outputStream.flush();</span><br><span class="line">    outputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2、前端代码"><a href="#2、前端代码" class="headerlink" title="2、前端代码"></a>2、前端代码</h3><p>前端主要代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;exportData&quot;</span>&gt;</span>批量导出<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 批量导出</span><br><span class="line">exportData()&#123;</span><br><span class="line">// 没有选择行的时候，全部导出数据 或 根据我的搜索条件导出数据</span><br><span class="line">if(!this.ids.length)&#123;</span><br><span class="line">// 全部导出 + 查询条件导出</span><br><span class="line">window.open(&#x27;http://localhost:8080/user/export?token=&#x27;+this.user.token </span><br><span class="line">+ &quot;&amp;username=&quot; + this.username + &quot;&amp;name=&quot; + this.name)</span><br><span class="line">&#125;else&#123;</span><br><span class="line">// 将数组转换为字符串</span><br><span class="line">let idStr = this.ids.join(&#x27;,&#x27;)</span><br><span class="line">window.open(&#x27;http://localhost:8080/user/export?token=&#x27;+ this.user.token </span><br><span class="line">+&#x27;&amp;ids=&#x27;+idStr)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>前端完整代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询用户名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询姓名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;exportData&quot;</span>&gt;</span>批量导出<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 电话 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 邮箱 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 角色 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;form.role&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 上传头像 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传头像<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                username : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入账号&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">username</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 把user头像属性装换为上传图片的连接</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">avatar</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123; <span class="attr">role</span>: <span class="string">&#x27;用户&#x27;</span> &#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/user/update&#x27;</span> : <span class="string">&#x27;/user/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量导出</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">exportData</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 没有选择行的时候，全部导出数据 或 根据我的搜索条件导出数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 全部导出 + 查询条件导出</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;http://localhost:8080/user/export?token=&#x27;</span>+<span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span> </span></span><br><span class="line"><span class="language-javascript">                + <span class="string">&quot;&amp;username=&quot;</span> + <span class="variable language_">this</span>.<span class="property">username</span> + <span class="string">&quot;&amp;name=&quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 将数组转换为字符串</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> idStr = <span class="variable language_">this</span>.<span class="property">ids</span>.<span class="title function_">join</span>(<span class="string">&#x27;,&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;http://localhost:8080/user/export?token=&#x27;</span>+ <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span> +<span class="string">&#x27;&amp;ids=&#x27;</span>+idStr)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3、整体效果展示"><a href="#3、整体效果展示" class="headerlink" title="3、整体效果展示"></a>3、整体效果展示</h3><h4 id="3-1：导出全部数据"><a href="#3-1：导出全部数据" class="headerlink" title="3.1：导出全部数据"></a>3.1：导出全部数据</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%85%A8%E9%83%A8%E5%AF%BC%E5%87%BA1.png"></p><p>结果：<br><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%85%A8%E9%83%A8%E5%AF%BC%E5%87%BA2.png"></p><h4 id="3-2：条件导出数据"><a href="#3-2：条件导出数据" class="headerlink" title="3.2：条件导出数据"></a>3.2：条件导出数据</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9D%A1%E4%BB%B6%E5%AF%BC%E5%87%BA%20(1).png"></p><p>结果：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9D%A1%E4%BB%B6%E5%AF%BC%E5%87%BA%20(2).png"></p><h4 id="3-3：选择导出数据"><a href="#3-3：选择导出数据" class="headerlink" title="3.3：选择导出数据"></a>3.3：选择导出数据</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%80%89%E6%8B%A9%E5%AF%BC%E5%87%BA%20(1).png"></p><p>结果：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%80%89%E6%8B%A9%E5%AF%BC%E5%87%BA%20(2).png"></p><h1 id="数据导入"><a href="#数据导入" class="headerlink" title="数据导入"></a>数据导入</h1><h3 id="1、后端代码"><a href="#1、后端代码" class="headerlink" title="1、后端代码"></a>1、后端代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// excel批量导入</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/import&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">importData</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 1、获取流：file.getInputStream()</span></span><br><span class="line">    <span class="comment">// 2、将流写入到reader中</span></span><br><span class="line">    <span class="type">ExcelReader</span> <span class="variable">reader</span> <span class="operator">=</span> ExcelUtil.getReader(file.getInputStream());</span><br><span class="line">    <span class="comment">// 3、通过readAll方法将数据读出</span></span><br><span class="line">    List&lt;User&gt; userList = reader.readAll(User.class);</span><br><span class="line">    <span class="comment">// 4、写入数据到数据库</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        userService.saveBatch(userList);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;批量导入失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2、前端代码-1"><a href="#2、前端代码-1" class="headerlink" title="2、前端代码"></a>2、前端代码</h3><p>主要代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span> </span></span><br><span class="line"><span class="tag"><span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/user/import&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">style</span>=<span class="string">&quot;display: inline-block; margin-left:10px&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">:on-success</span>=<span class="string">&quot;handleImport&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>批量导入<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 批量导入</span><br><span class="line">handleImport(res,file,fileList)&#123;</span><br><span class="line">if(res.code === 200)&#123;</span><br><span class="line">this.$message.success(&quot;操作成功&quot;)</span><br><span class="line">this.load(1)</span><br><span class="line">&#125;else&#123;</span><br><span class="line">this.$message.error(res.msg)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>整体代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询用户名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询姓名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除+批量导出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;exportData&quot;</span>&gt;</span>批量导出<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-upload</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/user/import&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">style</span>=<span class="string">&quot;display: inline-block; margin-left:10px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:on-success</span>=<span class="string">&quot;handleImport&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>批量导入<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 电话 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 邮箱 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 角色 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;form.role&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 上传头像 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传头像<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                username : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入账号&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">username</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 把user头像属性装换为上传图片的连接</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">avatar</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123; <span class="attr">role</span>: <span class="string">&#x27;用户&#x27;</span> &#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/user/update&#x27;</span> : <span class="string">&#x27;/user/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量导出</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">exportData</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 没有选择行的时候，全部导出数据 或 根据我的搜索条件导出数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 全部导出 + 查询条件导出</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;http://localhost:8080/user/export?token=&#x27;</span>+<span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span> </span></span><br><span class="line"><span class="language-javascript">                + <span class="string">&quot;&amp;username=&quot;</span> + <span class="variable language_">this</span>.<span class="property">username</span> + <span class="string">&quot;&amp;name=&quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 将数组转换为字符串</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> idStr = <span class="variable language_">this</span>.<span class="property">ids</span>.<span class="title function_">join</span>(<span class="string">&#x27;,&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;http://localhost:8080/user/export?token=&#x27;</span>+ <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">token</span> +<span class="string">&#x27;&amp;ids=&#x27;</span>+idStr)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量导入</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleImport</span>(<span class="params">res,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;操作成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3、效果展示"><a href="#3、效果展示" class="headerlink" title="3、效果展示"></a>3、效果展示</h3><p>准备的数据</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE2.png"></p><p>导入成功后的结果展示</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE1.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建11之个人信息修改+密码修改+重置密码</title>
      <link href="/2024/06/11/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA12%E4%B9%8B%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9+%E5%AF%86%E7%A0%81%E4%BF%AE%E6%94%B9+%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81/"/>
      <url>/2024/06/11/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA12%E4%B9%8B%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9+%E5%AF%86%E7%A0%81%E4%BF%AE%E6%94%B9+%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="1、个人信息搭建"><a href="#1、个人信息搭建" class="headerlink" title="1、个人信息搭建"></a>1、个人信息搭建</h1><h2 id="前端设计"><a href="#前端设计" class="headerlink" title="前端设计"></a>前端设计</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E5%9B%BE.png"></p><h4 id="主区域：Manager-vue"><a href="#主区域：Manager-vue" class="headerlink" title="主区域：Manager.vue"></a>主区域：Manager.vue</h4><p>以下展示修改处代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-header</span>&gt;</span></span><br><span class="line">// 头像部分</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;user.avatar || &#x27;https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png&#x27;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;头像&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px; width: 40px; margin:0 5px;  border-radius:50%&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 点击后，跳转至个人信息页面</span><br><span class="line"><span class="tag">&lt;<span class="name">el-dropdown-item</span> @<span class="attr">click.native</span>=<span class="string">&quot;$router.push(&#x27;/person&#x27;)&quot;</span>&gt;</span>个人信息<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体区域 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 获取子组件传过来的数据，更新当前页面的数据【@update:user 与子路由命名一致】 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> @<span class="attr">update:user</span>=<span class="string">&quot;updateUser&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">// 获取子组件传过来的数据，更新当前页面的数据</span><br><span class="line">updateUser(user)&#123;</span><br><span class="line">this.user = JSON.parse(JSON.stringify(user)) //让父级的对象与子集的对象无关联</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="子路由：Person-vue"><a href="#子路由：Person-vue" class="headerlink" title="子路由：Person.vue"></a>子路由：Person.vue</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 50%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 上传头像 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 15px; text-align: center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">&quot;user.avatar&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;user.avatar&quot;</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-plus avatar-uploader-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">disabled</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;user.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 电话 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;user.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 邮箱 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;user.email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 保存按钮 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; margin-bottom: 20px&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;update&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">update</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 1.保存当前的用户信息到数据库</span></span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">put</span>(<span class="string">&#x27;/user/update&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//成功更新</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 2.更新浏览器缓存里的用户</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;hony-user&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">user</span>))</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 3.触发父级的数据更新,父级通过updateUser接受</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:user&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>) <span class="comment">//this.$emit(&#x27;事件名称&#x27;,数据对象)</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 把user头像属性装换为上传图片的连接</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">avatar</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.el-form-item__label</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"><span class="comment">/* 头像 */</span></span></span><br><span class="line"><span class="language-css">  ::v-deep .el-upload&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  ::v-deep .avatar-uploader .el-upload &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#d9d9d9</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.avatar-uploader</span> <span class="selector-class">.el-upload</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-color</span>: <span class="number">#409EFF</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.avatar-uploader-icon</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#8c939d</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">178px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">178px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">178px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.avatar</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">178px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">178px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="后端设计"><a href="#后端设计" class="headerlink" title="后端设计"></a>后端设计</h2><p>主要代码块：<strong>UserController</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改用户</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">    <span class="comment">// updateById ：修改用户信息</span></span><br><span class="line">    userService.updateById(user);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2、密码修改搭建"><a href="#2、密码修改搭建" class="headerlink" title="2、密码修改搭建"></a>2、密码修改搭建</h1><h2 id="前端设计-1"><a href="#前端设计-1" class="headerlink" title="前端设计"></a>前端设计</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AF%86%E7%A0%81%E4%BF%AE%E6%94%B9%E5%B1%95%E7%A4%BA%E5%9B%BE.png"></p><h3 id="Password-vue"><a href="#Password-vue" class="headerlink" title="Password.vue"></a>Password.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 50%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 原始密码 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;原始密码&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">show-password</span> <span class="attr">v-model</span>=<span class="string">&quot;user.password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;原始密码&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 新密码 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;新密码&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;newPassword&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">show-password</span> <span class="attr">v-model</span>=<span class="string">&quot;user.newPassword&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;新密码&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 确认密码 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;确认密码&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;confirmPassword&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">show-password</span> <span class="attr">v-model</span>=<span class="string">&quot;user.confirmPassword&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;确认密码&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 确认按钮 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; margin-bottom: 20px&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;update&quot;</span>&gt;</span>确认修改<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 密码验证</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">validatePassword</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请确认密码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value !== <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">newPassword</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;两次输入密码不一致&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入原始密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">newPassword</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入新密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">confirmPassword</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">validator</span>: validatePassword,<span class="attr">required</span>:<span class="literal">true</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">update</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">password</span> = <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">newPassword</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 1.保存当前的用户信息到数据库</span></span></span><br><span class="line"><span class="language-javascript">                    request.<span class="title function_">put</span>(<span class="string">&#x27;/user/update&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//成功更新</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//跳转至登录页面</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="后端设计-1"><a href="#后端设计-1" class="headerlink" title="后端设计"></a>后端设计</h2><p>主要代码块：<strong>UserController</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改用户</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">    <span class="comment">// updateById ：修改用户信息</span></span><br><span class="line">    userService.updateById(user);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3、重置密码搭建-忘记密码"><a href="#3、重置密码搭建-忘记密码" class="headerlink" title="3、重置密码搭建(忘记密码)"></a>3、重置密码搭建(忘记密码)</h1><h2 id="前端设计-2"><a href="#前端设计-2" class="headerlink" title="前端设计"></a>前端设计</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81.png"></p><h3 id="Login-vue"><a href="#Login-vue" class="headerlink" title="Login.vue"></a>Login.vue</h3><h4 id="主要代码块"><a href="#主要代码块" class="headerlink" title="主要代码块"></a>主要代码块</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;text-align:right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9869; cursor:pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleForgetPass&quot;</span>&gt;</span></span><br><span class="line">        忘记密码</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 忘记密码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;忘记密码&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;forgetPassDialogVis&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;forgetUserForm&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.username&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.phone&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;forgetPassDialogVis = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reSetPassword&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">forgetPassDialogVis: false, // 开始时，弹框是关闭状态</span><br><span class="line">forgetUserForm: &#123;&#125;  // 忘记密码的表单数据</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">//初始化表单数据</span><br><span class="line">handleForgetPass()&#123; </span><br><span class="line">this.forgetUserForm = &#123;&#125;</span><br><span class="line">this.forgetPassDialogVis = true // 点击后，跳出弹窗</span><br><span class="line">&#125;,</span><br><span class="line">reSetPassword()&#123;</span><br><span class="line">//将数据传送至后台，由后台进行密码初始化</span><br><span class="line">request.put(&#x27;/password&#x27;,this.forgetUserForm).then(res=&gt;&#123;</span><br><span class="line">if(res.code === &#x27;200&#x27;)&#123;</span><br><span class="line">this.$message.success(&#x27;重置成功&#x27;)</span><br><span class="line">this.forgetPassDialogVis = false</span><br><span class="line">&#125;else&#123;</span><br><span class="line">this.$message.error(res.msg)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 100vh; display:flex;align-items:center;justify-content:center;background-color: #0f9876&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display:flex; background-color: white; width: 50%;border-radius: 5px;overflow: hidden&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 照片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/login.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 登入表单 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; display:flex; align-items:center;justify-content:center;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;loginRef&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px; font-weight: bold; text-align:center; margin-bottom:20px&quot;</span>&gt;</span>欢迎登录后台管理系统<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 输入框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">show-password</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 验证码 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;code&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入验证码&quot;</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-circle-check&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.code&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">data</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; height:36px&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">valid-code</span> @<span class="attr">update:value</span>=<span class="string">&quot;getCode&quot;</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 确认按钮 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>登 录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 提示信息 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;&quot;</span>&gt;</span>还没有账号？请 <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9876; cursor:pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/register&#x27;)&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- 【忘记密码】 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;text-align:right&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9869; cursor:pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleForgetPass&quot;</span>&gt;</span>忘记密码<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--【 忘记密码 】--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;忘记密码&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;forgetPassDialogVis&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;forgetUserForm&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.username&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.phone&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;forgetPassDialogVis = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reSetPassword&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ValidCode</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/ValidCode/ValidCode.vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ValidCode</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 验证码校验</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">validateCode</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请确认输入码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value.<span class="title function_">toLowerCase</span>() !== <span class="variable language_">this</span>.<span class="property">code</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;验证码错误&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// 验证码组件传递过来的code</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 表单里用户输入的code 验证码</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入账号&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">code</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">validator</span>: validateCode , <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 【忘记密码区域】</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">forgetPassDialogVis</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">forgetUserForm</span>: &#123;&#125;  <span class="comment">// 忘记密码的表单数据</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getCode</span>(<span class="params">code</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(code)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">code</span>=code.<span class="title function_">toLowerCase</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">login</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//验证正确性</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;loginRef&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过</span></span></span><br><span class="line"><span class="language-javascript">                    request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//200表示成功，页面跳转</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;hony-user&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span>)) <span class="comment">//存储用户数据</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 【忘记密码区域】</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleForgetPass</span>(<span class="params"></span>)&#123; <span class="comment">//初始化表单数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">forgetUserForm</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">forgetPassDialogVis</span> = <span class="literal">true</span> <span class="comment">// 跳出弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reSetPassword</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//将数据传送至后台，由后台进行密码初始化</span></span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">put</span>(<span class="string">&#x27;/password&#x27;</span>,<span class="variable language_">this</span>.<span class="property">forgetUserForm</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;重置成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">forgetPassDialogVis</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="后端设计-2"><a href="#后端设计-2" class="headerlink" title="后端设计"></a>后端设计</h2><h4 id="拦截器配置"><a href="#拦截器配置" class="headerlink" title="拦截器配置"></a>拦截器配置</h4><p>添加“&#x2F;password”，不用token请求</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置拦截器规则</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterceptorConfig</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(jwtInterceptor()) <span class="comment">//配置jwt的拦截器规则</span></span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>) <span class="comment">//拦截所有的请求路径</span></span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/login&quot;</span>,<span class="string">&quot;/register&quot;</span>,<span class="string">&quot;/password&quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.addInterceptors(registry);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JwtInterceptor <span class="title function_">jwtInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JwtInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">selectByUsername</span><span class="params">(String username)</span>&#123;</span><br><span class="line">        <span class="comment">// QueryWrapper : 条件查询器</span></span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        <span class="comment">// 根据用户名查询数据库的用户信息</span></span><br><span class="line">        <span class="keyword">return</span> userMapper.selectOne(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">resetPassword</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> selectByUsername(user.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> == dbUser)&#123;</span><br><span class="line">            <span class="comment">// 抛出一个自定义异常</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!user.getPhone().equals(dbUser.getPhone()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;验证错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        dbUser.setPassword(<span class="string">&quot;123&quot;</span>); <span class="comment">//重置密码</span></span><br><span class="line">        userMapper.updateById(dbUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 忘记密码：重置密码操作</span></span><br><span class="line">    <span class="meta">@AuthAccess</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/password&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">password</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(user.getUsername()) || StrUtil.isBlank(user.getPhone())) &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="string">&quot;数据输入不合法&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        userService.resetPassword(user);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建12之MybatisPlus增删改查（前后端）</title>
      <link href="/2024/06/11/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA6%E4%B9%8BMybatisPlus%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%EF%BC%88%E5%89%8D%E5%90%8E%E7%AB%AF%EF%BC%89/"/>
      <url>/2024/06/11/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA6%E4%B9%8BMybatisPlus%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%EF%BC%88%E5%89%8D%E5%90%8E%E7%AB%AF%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="一：基本准备"><a href="#一：基本准备" class="headerlink" title="一：基本准备"></a>一：基本准备</h1><h2 id="Entity层-类"><a href="#Entity层-类" class="headerlink" title="Entity层(类)"></a>Entity层(类)</h2><p>注意，实体类里面多出来的字段需要加上一个注解：**@TableField(exist &#x3D; false)** </p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/mybatisplus%E4%B8%AD%E7%9A%84entity.png"></p><p><strong>常用注解</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">类：</span><br><span class="line">@Data</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@TableName=&gt; 与数据库【表名】相关</span><br><span class="line">属性：</span><br><span class="line">@TableId =&gt; 与数据库中【数据名】有关</span><br></pre></td></tr></table></figure><p><strong>@TableName和@TableId主要知识讲解</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">类名相关：</span><br><span class="line"><span class="meta">@TableName(&quot;tb_user&quot;)</span>表名与类名不一致✔</span><br><span class="line"></span><br><span class="line">属性相关：</span><br><span class="line">表现形态：</span><br><span class="line"><span class="meta">@TableId()</span>✔</span><br><span class="line"><span class="meta">@TableField()</span>✔</span><br><span class="line">具体讲解：</span><br><span class="line">重点知识：</span><br><span class="line"><span class="meta">@TableId(type = IdType.AUTO)</span>自增列（标识主键）✔</span><br><span class="line"><span class="meta">@TableField(exist = false)</span>数据库中没有的字段，但在项目中需用到（token） ✔</span><br></pre></td></tr></table></figure><h2 id="Mapper层-接口"><a href="#Mapper层-接口" class="headerlink" title="Mapper层(接口)"></a>Mapper层(接口)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">继承接口：</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;实体类&gt;</span><br><span class="line"></span><br><span class="line">具体代码展示：</span><br><span class="line">    <span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line">    <span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="1-简单的sql操作-额外其他操作"><a href="#1-简单的sql操作-额外其他操作" class="headerlink" title="1.简单的sql操作(额外其他操作)"></a>1.简单的sql操作(额外其他操作)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">注解(与sql相关)：</span><br><span class="line">@insert</span><br><span class="line">@select</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>注意点</strong></p><p>BaseMapper中包含了基本的操作，如insert(插入一条数据)，deleteById(根据ID删除)…</p><h3 id="2-复杂的sql操作"><a href="#2-复杂的sql操作" class="headerlink" title="2.复杂的sql操作"></a>2.复杂的sql操作</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/sql%E5%A4%8D%E6%9D%82.png"></p><p>在resources&#x2F;mapping中创建XXXMapper.xml</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/sql%E5%A4%8D%E6%9D%82mapping.png"></p><h2 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h2><h3 id="service实体类"><a href="#service实体类" class="headerlink" title="service实体类"></a>service实体类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">继承类：</span><br><span class="line">类：<span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;Mapper接口, 实体类&gt;</span><br><span class="line"></span><br><span class="line">类注解：</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"></span><br><span class="line">具体代码展示：</span><br><span class="line">    <span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line">    <span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line">    <span class="keyword">import</span> backSystem.exception.ServiceException;</span><br><span class="line">    <span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line">    <span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line">    <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">    <span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Service</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; &#123;</span><br><span class="line">        <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ....</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">注解：</span><br><span class="line">类注解：</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/user&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>：支持跨域，满足axios请求 【必加】</span><br><span class="line"><span class="meta">@Autowired</span> =&gt; 构造器✔，属性...</span><br><span class="line">方法注解：</span><br><span class="line"><span class="meta">@PostMapping</span>：新增（Post）</span><br><span class="line"><span class="meta">@GetMapping</span>：查询（GET）</span><br><span class="line"><span class="meta">@PutMapping</span>：整体更新（Put）</span><br><span class="line"><span class="meta">@PatchMapping</span>：局部更新（Patch）</span><br><span class="line"><span class="meta">@DeleteMapping</span>：删除（Delete）</span><br><span class="line">属性注解：</span><br><span class="line"># URL路径部分，例如/blogs/<span class="number">1</span></span><br><span class="line"><span class="meta">@PathVariable(&quot;ps&quot;)</span></span><br><span class="line"># 在参数部分(参数不存在时，默认值)，例如blogs?blogId=<span class="number">1</span></span><br><span class="line">简单数据：</span><br><span class="line"><span class="meta">@RequestParam(value=&quot;id&quot;[,required=false[,defaultValue=&quot;0&quot;]])</span></span><br><span class="line">复杂数据：</span><br><span class="line"><span class="meta">@RequestBody</span>:前端为【json格式】</span><br><span class="line"><span class="meta">@ModelAttribute</span>：前端为【字符串格式】</span><br><span class="line"><span class="meta">@MultipartFile</span>：带有input=file的单表元素【上传照片，文件...】</span><br><span class="line"></span><br><span class="line">使用对象：</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService; <span class="comment">// 接口对象</span></span><br><span class="line"></span><br><span class="line">具体代码展示：</span><br><span class="line">    <span class="meta">@CrossOrigin</span></span><br><span class="line">    <span class="meta">@RestController</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">            userService.updateById(user);</span><br><span class="line">            <span class="keyword">return</span> Result.success();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">            userService.removeById(id);</span><br><span class="line">            <span class="keyword">return</span> Result.success();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(id);</span><br><span class="line">            <span class="keyword">return</span> Result.success(user);</span><br><span class="line">        &#125;</span><br><span class="line">        ....</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="二：MyBatisPlus具体操作（后端）"><a href="#二：MyBatisPlus具体操作（后端）" class="headerlink" title="二：MyBatisPlus具体操作（后端）"></a>二：MyBatisPlus具体操作（后端）</h1><h2 id="1、插入操作（增）"><a href="#1、插入操作（增）" class="headerlink" title="1、插入操作（增）"></a>1、插入操作（增）</h2><h4 id="userMapper中的save操作"><a href="#userMapper中的save操作" class="headerlink" title="userMapper中的save操作"></a>userMapper中的save操作</h4><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService; <span class="comment">//导入接口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 新添用户</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// save操作：插入数据</span></span><br><span class="line">        userService.save(user);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        <span class="keyword">if</span>(e <span class="keyword">instanceof</span> DuplicateKeyException)&#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="string">&quot;插入数据库错误&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="string">&quot;系统错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2、删除操作（删）"><a href="#2、删除操作（删）" class="headerlink" title="2、删除操作（删）"></a>2、删除操作（删）</h2><h3 id="3-2-1单个删除【removeById】"><a href="#3-2-1单个删除【removeById】" class="headerlink" title="3.2.1单个删除【removeById】"></a>3.2.1单个删除【removeById】</h3><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 单个删除</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">    userService.removeById(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-2批量删除【removeBatchByIds】"><a href="#3-2-2批量删除【removeBatchByIds】" class="headerlink" title="3.2.2批量删除【removeBatchByIds】"></a>3.2.2批量删除【removeBatchByIds】</h3><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 批量删除</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">    userService.removeBatchByIds(ids);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/springboot%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C.png"></p><h2 id="3、修改操作（改）"><a href="#3、修改操作（改）" class="headerlink" title="3、修改操作（改）"></a>3、修改操作（改）</h2><h4 id="userMapper中的updateById操作"><a href="#userMapper中的updateById操作" class="headerlink" title="userMapper中的updateById操作"></a>userMapper中的updateById操作</h4><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改用户</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">    <span class="comment">// updateById ：修改用户信息</span></span><br><span class="line">    userService.updateById(user);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/springboot%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C.png"></p><h2 id="4、查询操作（查）"><a href="#4、查询操作（查）" class="headerlink" title="4、查询操作（查）"></a>4、查询操作（查）</h2><h3 id="4-1：查询所有信息【list】"><a href="#4-1：查询所有信息【list】" class="headerlink" title="4.1：查询所有信息【list】"></a>4.1：查询所有信息【list】</h3><h4 id="顺序展示所有数据"><a href="#顺序展示所有数据" class="headerlink" title="顺序展示所有数据"></a>顺序展示所有数据</h4><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;User&gt; userList = userService.list();</span><br><span class="line">    Collections.sort(userList, Comparator.comparing(User::getId));</span><br><span class="line">    <span class="keyword">return</span> Result.success(userList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="倒序展示所有数据"><a href="#倒序展示所有数据" class="headerlink" title="倒序展示所有数据"></a>倒序展示所有数据</h4><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;User&gt; userList = userService.list();</span><br><span class="line">    Collections.sort(userList, Comparator.comparing(User::getId).reversed());</span><br><span class="line">    <span class="keyword">return</span> Result.success(userList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2：条件查找【selectOne】"><a href="#4-2：条件查找【selectOne】" class="headerlink" title="4.2：条件查找【selectOne】"></a>4.2：条件查找【selectOne】</h3><h4 id="准备知识：QueryWrapper"><a href="#准备知识：QueryWrapper" class="headerlink" title="准备知识：QueryWrapper"></a>准备知识：QueryWrapper</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/QuerryWrapper%E8%A1%A8.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/QuerryWrapper%E7%99%BD%E5%93%A62.png"></p><h4 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第一步：QueryWrapper（条件查询器）</span><br><span class="line">QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">queryWrapper.eq(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line"></span><br><span class="line">第二步：应用</span><br><span class="line">    写法一：</span><br><span class="line"><span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> userMapper.selectOne(queryWrapper)</span><br><span class="line">    写法二：</span><br><span class="line">    <span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> userMapper.getOne(queryWrapper)</span><br></pre></td></tr></table></figure><h4 id="具体操作-封装操作"><a href="#具体操作-封装操作" class="headerlink" title="具体操作(封装操作)"></a>具体操作(封装操作)</h4><p><strong>UserMapper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> backSystem.exception.ServiceException;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1、封装</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">selectByUsername</span><span class="params">(String username)</span>&#123;</span><br><span class="line">        <span class="comment">// QueryWrapper : 条件查询器</span></span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        <span class="comment">// 根据用户名查询数据库的用户信息</span></span><br><span class="line">        <span class="keyword">return</span> userMapper.selectOne(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// 2、应用</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> selectByUsername(user.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> == dbUser)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!user.getPassword().equals(dbUser.getPassword()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成 token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> TokenUtils.createToken(dbUser.getId(), dbUser.getPassword());</span><br><span class="line">        dbUser.setToken(token);</span><br><span class="line">        <span class="keyword">return</span> dbUser;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3：根据id进行查询【getById】"><a href="#4-3：根据id进行查询【getById】" class="headerlink" title="4.3：根据id进行查询【getById】"></a>4.3：根据id进行查询【getById】</h3><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据id查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-：分页查询（查）【page】"><a href="#4-4-：分页查询（查）【page】" class="headerlink" title="4.4.：分页查询（查）【page】"></a>4.4.：分页查询（查）【page】</h3><p><strong>分页插件：MyBatisPlusConfig（MybatisPlus动态配置config）</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.定义MybatisPlus拦截器</span></span><br><span class="line">        <span class="keyword">final</span> MybatisPlusInterceptor interceptor=<span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//添加具体的拦截器 =&gt; 分页查询</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>UserController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分页查询</span></span><br><span class="line"><span class="comment"> * pageSize：每页查询的个数</span></span><br><span class="line"><span class="comment"> * pageNum：当前的页码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam</span> String username,</span></span><br><span class="line"><span class="params">                           <span class="meta">@RequestParam</span> String name)</span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    queryWrapper.like(StrUtil.isNotBlank(username),<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">    queryWrapper.like(StrUtil.isNotBlank(name),<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">    <span class="comment">// select * from user where username like &#x27;%#&#123;username&#125;%&#x27; and name like &#x27;%#&#123;name&#125;%&#x27;</span></span><br><span class="line">    Page&lt;User&gt; page = userService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">    <span class="keyword">return</span> Result.success(page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三：MyBatisPlus具体操作（前端）"><a href="#三：MyBatisPlus具体操作（前端）" class="headerlink" title="三：MyBatisPlus具体操作（前端）"></a>三：MyBatisPlus具体操作（前端）</h1><h2 id="1、查询功能搭建"><a href="#1、查询功能搭建" class="headerlink" title="1、查询功能搭建"></a>1、查询功能搭建</h2><p>基本效果呈现：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD1.png"></p><p>查询用户名为“胡桃”的人，效果如下：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD2.png"></p><p>主要代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">placeholder</span>=<span class="string">&quot;查询用户名&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">placeholder</span>=<span class="string">&quot;查询姓名&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,   <span class="comment">// 查询功能：用户名</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,       <span class="comment">// 查询功能：姓名</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()<span class="comment">// 更新页面</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">username</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 如果传入pageNum，则执行，不传入就不执行</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2、新增功能搭建"><a href="#2、新增功能搭建" class="headerlink" title="2、新增功能搭建"></a>2、新增功能搭建</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD1.png"></p><p>添加后的效果图</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD2.png"></p><p>主要代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 新增 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;新添&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span></span></span><br><span class="line"><span class="tag">         &gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 电话 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 邮箱 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 角色 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;form.role&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 上传头像 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传头像<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            username : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入账号&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span> = &#123; <span class="attr">role</span>: <span class="string">&#x27;用户&#x27;</span> &#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 把user头像属性装换为上传图片的连接</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">avatar</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 弹窗：保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/user/update&#x27;</span> : <span class="string">&#x27;/user/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                      &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                      &#125;</span></span><br><span class="line"><span class="language-javascript">                  &#125;)</span></span><br><span class="line"><span class="language-javascript">                  </span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3、编辑功能搭建"><a href="#3、编辑功能搭建" class="headerlink" title="3、编辑功能搭建"></a>3、编辑功能搭建</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BC%96%E8%BE%91%E5%8A%9F%E8%83%BD.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 弹窗：弹窗+表单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;编辑&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 电话 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 邮箱 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 角色 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;form.role&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 上传头像 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传头像<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">formVisible</span>: <span class="literal">false</span>, <span class="comment">// 初始化时，弹窗处于关闭状态</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            username : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入账号&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 把user头像属性装换为上传图片的连接</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">avatar</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row))</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 弹窗：保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/user/update&#x27;</span> : <span class="string">&#x27;/user/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                      &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                          <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                      &#125;</span></span><br><span class="line"><span class="language-javascript">                  &#125;)</span></span><br><span class="line"><span class="language-javascript">                  </span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4、删除功能搭建"><a href="#4、删除功能搭建" class="headerlink" title="4、删除功能搭建"></a>4、删除功能搭建</h2><h3 id="4-1：单个删除功能"><a href="#4-1：单个删除功能" class="headerlink" title="4.1：单个删除功能"></a>4.1：单个删除功能</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8D%95%E4%B8%AA%E5%88%A0%E9%99%A41.png"></p><p>最终效果如图,成功被删除：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8D%95%E4%B8%AA%E5%88%A0%E9%99%A42.png"></p><p>主要代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-2：批量删除功能"><a href="#4-2：批量删除功能" class="headerlink" title="4.2：批量删除功能"></a>4.2：批量删除功能</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%20(1).png"></p><p>最终的效果图</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%20(2).png"></p><p>主要代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 批量删除按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">              <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5、【增删改查总体功能搭建】"><a href="#5、【增删改查总体功能搭建】" class="headerlink" title="5、【增删改查总体功能搭建】"></a>5、【增删改查总体功能搭建】</h2><p>效果图</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%80%BB%E4%BD%93%E6%95%88%E6%9E%9C%E5%9B%BE.png"></p><p>总体代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询用户名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询姓名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 电话 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 邮箱 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 角色 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;form.role&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 上传头像 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传头像<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                username : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入账号&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">username</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 把user头像属性装换为上传图片的连接</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">avatar</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123; <span class="attr">role</span>: <span class="string">&#x27;用户&#x27;</span> &#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/user/update&#x27;</span> : <span class="string">&#x27;/user/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建9之多角色登录+用户信息搭建</title>
      <link href="/2024/06/10/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA10%E4%B9%8B%E5%A4%9A%E8%A7%92%E8%89%B2%E7%99%BB%E5%BD%95+%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%90%AD%E5%BB%BA/"/>
      <url>/2024/06/10/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA10%E4%B9%8B%E5%A4%9A%E8%A7%92%E8%89%B2%E7%99%BB%E5%BD%95+%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="多角色登录设计"><a href="#多角色登录设计" class="headerlink" title="多角色登录设计"></a>多角色登录设计</h1><h2 id="1、数据表中需含有角色字段role"><a href="#1、数据表中需含有角色字段role" class="headerlink" title="1、数据表中需含有角色字段role"></a>1、数据表中需含有角色字段role</h2><p>一般含有两种角色：<strong>管理员</strong> 和 <strong>用户</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%96%B0%E6%B7%BB%E8%A7%92%E8%89%B2%E5%88%97.png"></p><h2 id="2、在Entity中添加role属性"><a href="#2、在Entity中添加role属性" class="headerlink" title="2、在Entity中添加role属性"></a>2、在Entity中添加role属性</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String role;</span><br></pre></td></tr></table></figure><h2 id="3、前端多角色具体设置"><a href="#3、前端多角色具体设置" class="headerlink" title="3、前端多角色具体设置"></a>3、前端多角色具体设置</h2><h3 id="一：前端的user获取到后端传过来的信息"><a href="#一：前端的user获取到后端传过来的信息" class="headerlink" title="一：前端的user获取到后端传过来的信息"></a>一：前端的user获取到后端传过来的信息</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%9A%E8%A7%92%E8%89%B2%E7%99%BB%E5%BD%952.png"></p><h3 id="二：运用-v-if-来控制管理员-与-用户的不同权限"><a href="#二：运用-v-if-来控制管理员-与-用户的不同权限" class="headerlink" title="二：运用 v-if 来控制管理员 与 用户的不同权限"></a>二：运用 v-if 来控制管理员 与 用户的不同权限</h3><p><strong>Manager.vue页面</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%9A%E8%A7%92%E8%89%B2%E7%99%BB%E5%BD%9522.png"></p><p>最终效果：</p><p><strong>管理员可看到的页面</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%AE%A1%E7%90%86%E5%91%98%E7%9C%8B%E5%88%B0%E7%9A%84%E9%A1%B5%E9%9D%A2.png"></p><p><strong>用户看到的页面</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%94%A8%E6%88%B7%E7%9C%8B%E5%88%B0%E7%9A%84%E9%A1%B5%E9%9D%A2.png"></p><h3 id="三：路由守卫解决用户权限问题"><a href="#三：路由守卫解决用户权限问题" class="headerlink" title="三：路由守卫解决用户权限问题"></a>三：路由守卫解决用户权限问题</h3><p>​虽然用户的页面中无法显示“信息管理”菜单，但若在路径中搜索，依旧可以查看到“信息管理”相关的信息。为了解决这一问题，此处运用路由守卫方式。</p><h4 id="路由守卫代码"><a href="#路由守卫代码" class="headerlink" title="路由守卫代码"></a>路由守卫代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由守卫</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// to : 到达的路由信息(去哪里)</span></span><br><span class="line">  <span class="comment">// from : 开源的路由信息(从哪来)</span></span><br><span class="line">  <span class="comment">// next : 帮助我们跳转路由的函数(放行)</span></span><br><span class="line">  <span class="keyword">let</span> adminPaths = [<span class="string">&#x27;/user&#x27;</span>] <span class="comment">//管理员可访问的路径</span></span><br><span class="line">  <span class="comment">// 前端获取用户信息</span></span><br><span class="line">  <span class="keyword">let</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span>(user.<span class="property">role</span> !== <span class="string">&#x27;管理员&#x27;</span> &amp;&amp; adminPaths.<span class="title function_">includes</span>(to.<span class="property">path</span>))&#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="string">&#x27;/403&#x27;</span>) <span class="comment">// 普通用户无权访问，跳转至 403 页面</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Router的完整代码"><a href="#Router的完整代码" class="headerlink" title="Router的完整代码"></a><strong>Router的完整代码</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; component &#125; <span class="keyword">from</span> <span class="string">&#x27;vue/types/umd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决导航栏或者底部导航tobBar中vue-router频繁点击报错问题</span></span><br><span class="line"><span class="keyword">const</span> originalPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>;</span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> <span class="title function_">push</span>(<span class="params">location: any</span>): <span class="title class_">Promise</span>&lt;any&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    originalPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject);</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> err;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Manager&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Manager.vue&#x27;</span>),</span><br><span class="line">    <span class="comment">// 重定向主页</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="comment">// 子路由</span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">      <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;系统首页&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Home.vue&#x27;</span>) </span><br><span class="line">  &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,</span><br><span class="line">        <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;用户信息&#x27;</span> &#125;,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/User.vue&#x27;</span>) </span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;403&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Auth&#x27;</span>,</span><br><span class="line">        <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;无权限&#x27;</span> &#125;,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Auth.vue&#x27;</span>) </span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Password&#x27;</span>,</span><br><span class="line">        <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;修改密码&#x27;</span> &#125;,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Password.vue&#x27;</span>) </span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;person&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,</span><br><span class="line">        <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;个人信息&#x27;</span> &#125;,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Person.vue&#x27;</span>) </span><br><span class="line">      &#125;,</span><br><span class="line">      ....</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;登录&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;注册&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Register.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/test.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 其他未搭建的页面统一跳转至404</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;404&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;无法访问&#x27;</span> &#125;, </span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/404.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  ....</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">base</span>: process.<span class="property">env</span>.<span class="property">BASE_URL</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// to : 到达的路由信息(去哪里)</span></span><br><span class="line">  <span class="comment">// from : 开源的路由信息(从哪来)</span></span><br><span class="line">  <span class="comment">// next : 帮助我们跳转路由的函数(放行)</span></span><br><span class="line">  <span class="keyword">let</span> adminPaths = [<span class="string">&#x27;/user&#x27;</span>] <span class="comment">//管理员可访问的路径</span></span><br><span class="line">  <span class="comment">// 前端获取用户信息</span></span><br><span class="line">  <span class="keyword">let</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span>(user.<span class="property">role</span> !== <span class="string">&#x27;管理员&#x27;</span> &amp;&amp; adminPaths.<span class="title function_">includes</span>(to.<span class="property">path</span>))&#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="string">&#x27;/403&#x27;</span>) <span class="comment">// 普通用户无权访问，跳转至 403 页面</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h3 id="四：403页面以及404页面设计"><a href="#四：403页面以及404页面设计" class="headerlink" title="四：403页面以及404页面设计"></a>四：403页面以及404页面设计</h3><h4 id="403页面：无权限"><a href="#403页面：无权限" class="headerlink" title="403页面：无权限"></a>403页面：无权限</h4><h4 id="404页面：其他未搭建页面统一跳转至404"><a href="#404页面：其他未搭建页面统一跳转至404" class="headerlink" title="404页面：其他未搭建页面统一跳转至404"></a>404页面：其他未搭建页面统一跳转至404</h4><h3 id="五：不同用户前端页面展示"><a href="#五：不同用户前端页面展示" class="headerlink" title="五：不同用户前端页面展示"></a>五：不同用户前端页面展示</h3><h4 id="管理员"><a href="#管理员" class="headerlink" title="管理员"></a>管理员</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%9A%E8%A7%92%E8%89%B2%E7%99%BB%E5%BD%95%E4%B9%8B%E7%AE%A1%E7%90%86%E5%91%98.png"></p><h4 id="普通用户"><a href="#普通用户" class="headerlink" title="普通用户"></a>普通用户</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%9A%E8%A7%92%E8%89%B2%E7%94%A8%E6%88%B7%E4%B9%8B%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7.png"></p><h3 id="六：修改注册页面-添加角色选项"><a href="#六：修改注册页面-添加角色选项" class="headerlink" title="六：修改注册页面(添加角色选项)"></a>六：修改注册页面(添加角色选项)</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%96%B0%E6%B7%BB%E8%A7%92%E8%89%B2%E9%80%89%E6%8B%A9.png"></p><h4 id="前端代码块"><a href="#前端代码块" class="headerlink" title="前端代码块"></a>前端代码块</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 角色选择 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;user.role&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">return &#123;</span><br><span class="line">user: &#123;</span><br><span class="line">role: &#x27;&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">rules: &#123;</span><br><span class="line">role: [</span><br><span class="line">&#123; required: true, message: &#x27;请选择角色&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">],</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="整体代码"><a href="#整体代码" class="headerlink" title="整体代码"></a>整体代码</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 100vh; display:flex;align-items:center;justify-content:center;background-color: blue&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display:flex; background-color: white; width: 50%;border-radius: 5px;overflow: hidden&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 照片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/login.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 登入表单 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; display:flex; align-items:center;justify-content:center;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;registerRef&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px; font-weight: bold; text-align:center; margin-bottom:20px&quot;</span>&gt;</span>欢迎注册后台管理系统<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 输入框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">show-password</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 密码验证 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;confirmPass&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> <span class="attr">show-password</span> <span class="attr">placeholder</span>=<span class="string">&quot;请再次确认密码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.confirmPass&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 角色选择 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;user.role&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 确认按钮 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span>注 册<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 提示信息 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;&quot;</span>&gt;</span>已经有账号了？请 <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #6e77f2; cursor:pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/login&#x27;)&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 密码验证</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">validatePassword</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请确认密码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value !== <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">password</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;两次输入密码不一致&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">confirmPass</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">role</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入账号&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">confirmPass</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">validator</span>: validatePassword , <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">role</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请选择角色&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">register</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//验证正确性</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;registerRef&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过</span></span></span><br><span class="line"><span class="language-javascript">                    request.<span class="title function_">post</span>(<span class="string">&#x27;/register&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//200表示成功，页面跳转</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="后端代码块Controller"><a href="#后端代码块Controller" class="headerlink" title="后端代码块Controller"></a>后端代码块Controller</h4><p><strong>添加判断是否包含role验证</strong>：StrUtil.isBlank(user.getRole())</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AuthAccess</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">register</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    <span class="comment">//数据校验</span></span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isBlank(user.getUsername()) || StrUtil.isBlank(user.getPassword()) || StrUtil.isBlank(user.getRole())) &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;数据输入不合法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (user.getUsername().length() &lt; <span class="number">1</span> || user.getPassword().length() &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;数据长度太短&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    user = userService.register(user);</span><br><span class="line">    <span class="keyword">return</span> Result.success(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="用户信息搭建"><a href="#用户信息搭建" class="headerlink" title="用户信息搭建"></a>用户信息搭建</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%90%AD%E5%BB%BA.png"></p><p><strong>User.vue</strong> </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> //<span class="attr">有头像则显示</span>,<span class="attr">无则空白</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span>//<span class="attr">后端头像属性在前端显示</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span>  //<span class="attr">大图预览</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 组件实例被创建之后立即调用，用于触发数据加载操作</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建之登录注册页面</title>
      <link href="/2024/05/19/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA8%E4%B9%8B%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/05/19/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA8%E4%B9%8B%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前端布局"><a href="#前端布局" class="headerlink" title="前端布局"></a>前端布局</h2><h3 id="1、登录页面"><a href="#1、登录页面" class="headerlink" title="1、登录页面"></a>1、登录页面</h3><h4 id="ValidCode-vue文件【验证码】"><a href="#ValidCode-vue文件【验证码】" class="headerlink" title="ValidCode.vue文件【验证码】"></a>ValidCode.vue文件【验证码】</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ValidCode disabled-select&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 100%&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;refreshCode&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in codeList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;getStyle(item)&quot;</span>&gt;</span>&#123;&#123;item.code&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;validCode&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">data () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">length</span>: <span class="number">4</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">codeList</span>: []</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript">mounted () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">createdCode</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    refreshCode () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">createdCode</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    createdCode () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> len = <span class="variable language_">this</span>.<span class="property">length</span>,</span></span><br><span class="line"><span class="language-javascript">        codeList = [],</span></span><br><span class="line"><span class="language-javascript">        chars = <span class="string">&#x27;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        charsLen = chars.<span class="property">length</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 生成</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> rgb = [<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">220</span>), <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">240</span>), <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">200</span>)]</span></span><br><span class="line"><span class="language-javascript">        codeList.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">code</span>: chars.<span class="title function_">charAt</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * charsLen)),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="string">`rgb(<span class="subst">$&#123;rgb&#125;</span>)`</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">padding</span>: <span class="string">`<span class="subst">$&#123;[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">10</span>)]&#125;</span>px`</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">transform</span>: <span class="string">`rotate(<span class="subst">$&#123;<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">90</span>) - <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">90</span>)&#125;</span>deg)`</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 指向</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="property">codeList</span> = codeList</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 将当前数据派发出去</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:value&#x27;</span>, codeList.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">code</span>).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    getStyle (data) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="string">`color: <span class="subst">$&#123;data.color&#125;</span>; font-size: <span class="subst">$&#123;data.fontSize&#125;</span>; padding: <span class="subst">$&#123;data.padding&#125;</span>; transform: <span class="subst">$&#123;data.transform&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.ValidCode</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css"><span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css"><span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css"><span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.ValidCode</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Login-vue文件"><a href="#Login-vue文件" class="headerlink" title="Login.vue文件"></a>Login.vue文件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- style的功能：整体背景页面渲染 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">style</span>=<span class="string">&quot;height: 100vh; </span></span></span><br><span class="line"><span class="string"><span class="tag">                display:flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">                align-items:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                justify-content:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                background-color: #0f9876&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- style的功能：内容居中显示 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">style</span>=<span class="string">&quot;display:flex; </span></span></span><br><span class="line"><span class="string"><span class="tag">                    background-color: white; </span></span></span><br><span class="line"><span class="string"><span class="tag">                    width: 50%;</span></span></span><br><span class="line"><span class="string"><span class="tag">                    border-radius: 5px;</span></span></span><br><span class="line"><span class="string"><span class="tag">                    overflow: hidden&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 左侧照片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/login.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- 登入表单 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; </span></span></span><br><span class="line"><span class="string"><span class="tag">                        display:flex; </span></span></span><br><span class="line"><span class="string"><span class="tag">                        align-items:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        justify-content:center;&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form</span> </span></span><br><span class="line"><span class="tag">                         <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span>            // <span class="attr">表单对象user</span> 【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                         <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> </span></span><br><span class="line"><span class="tag">                         <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span>           // <span class="attr">表单规则的验证</span>【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                         <span class="attr">ref</span>=<span class="string">&quot;loginRef&quot;</span>           // <span class="attr">login方法</span>：<span class="attr">验证正确性</span>【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 标题 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                font-weight: bold; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                text-align:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                                margin-bottom:20px&quot;</span>&gt;</span></span><br><span class="line">                        欢迎登录后台管理系统</span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 账号框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span> //prop：指定表单中具体的对象</span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user&quot;</span>      // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                                  <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span>    // <span class="attr">表单具体对象user.username</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 密码框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span> //prop：指定表单中具体的对象</span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span>     // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                                  <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">show-password</span>              // <span class="attr">眼睛</span>，<span class="attr">用于显示密码与否的操作</span></span></span><br><span class="line"><span class="tag">                                  <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">v-model</span>=<span class="string">&quot;user.password&quot;</span>    // <span class="attr">表单具体对象user.password</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 验证码 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;code&quot;</span>&gt;</span> //prop：指定表单中具体的对象</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                                      <span class="attr">placeholder</span>=<span class="string">&quot;请输入验证码&quot;</span> </span></span><br><span class="line"><span class="tag">                                      <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-circle-check&quot;</span> // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                                      <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                                      <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span> </span></span><br><span class="line"><span class="tag">                                      <span class="attr">v-model</span>=<span class="string">&quot;user.code&quot;</span>  // <span class="attr">表单具体对象user.code</span></span></span><br><span class="line"><span class="tag">                            &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">data</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; height:36px&quot;</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!-- 引用验证码的vue文件中配置 --&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">valid-code</span> @<span class="attr">update:value</span>=<span class="string">&quot;getCode&quot;</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 确认按钮 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">                                   <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> </span></span><br><span class="line"><span class="tag">                                   <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> </span></span><br><span class="line"><span class="tag">                                   @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span>登 录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 提示信息 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;&quot;</span>&gt;</span></span><br><span class="line">                            还没有账号？请 </span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9876; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                         cursor:pointer&quot;</span> </span></span><br><span class="line"><span class="tag">                                  @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/register&#x27;)&quot;</span>&gt;</span></span><br><span class="line">                                注 册</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;text-align:right&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9869; cursor:pointer&quot;</span>&gt;</span>忘记密码</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ValidCode</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/ValidCode/ValidCode.vue&#x27;</span>; <span class="comment">// 引用验证码的vue文件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 引用验证码的vue文件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ValidCode</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 验证码校验</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">validateCode</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请确认输入码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value.<span class="title function_">toLowerCase</span>() !== <span class="variable language_">this</span>.<span class="property">code</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;验证码错误&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// 验证码组件传递过来的code</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 表单里用户输入的code 验证码</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入账号&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">code</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">validator</span>: validateCode , <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getCode</span>(<span class="params">code</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(code)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">code</span>=code.<span class="title function_">toLowerCase</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">login</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//验证正确性</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;loginRef&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过</span></span></span><br><span class="line"><span class="language-javascript">                    request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//200表示成功，页面跳转</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//存储用户数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;hony-user&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span>))</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="登录页面展示"><a href="#登录页面展示" class="headerlink" title="登录页面展示"></a>登录页面展示</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E5%9B%BE.png"></p><h3 id="2、注册页面"><a href="#2、注册页面" class="headerlink" title="2、注册页面"></a>2、注册页面</h3><h4 id="Register-vue文件"><a href="#Register-vue文件" class="headerlink" title="Register.vue文件"></a>Register.vue文件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- style的功能：整体背景页面渲染 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">style</span>=<span class="string">&quot;height: 100vh; </span></span></span><br><span class="line"><span class="string"><span class="tag">                display:flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">                align-items:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                justify-content:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                background-color: blue&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- style的功能：内容居中显示 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">style</span>=<span class="string">&quot;display:flex; </span></span></span><br><span class="line"><span class="string"><span class="tag">                    background-color: white; </span></span></span><br><span class="line"><span class="string"><span class="tag">                    width: 50%;</span></span></span><br><span class="line"><span class="string"><span class="tag">                    border-radius: 5px;</span></span></span><br><span class="line"><span class="string"><span class="tag">                    overflow: hidden&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 照片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/register.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- 登入表单 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1; </span></span></span><br><span class="line"><span class="string"><span class="tag">                        display:flex; </span></span></span><br><span class="line"><span class="string"><span class="tag">                        align-items:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        justify-content:center;&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form</span> </span></span><br><span class="line"><span class="tag">                         <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span> // <span class="attr">表单对象user</span> 【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                         <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> </span></span><br><span class="line"><span class="tag">                         <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> // <span class="attr">表单规则的验证</span>【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                         <span class="attr">ref</span>=<span class="string">&quot;registerRef&quot;</span>// <span class="attr">register方法</span>：<span class="attr">验证正确性</span>【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 标题 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                font-weight: bold; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                text-align:center; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                margin-bottom:20px&quot;</span></span></span><br><span class="line"><span class="tag">                         &gt;</span>欢迎注册后台管理系统</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 输入框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span> //prop：指定表单中具体的对象</span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user&quot;</span>  // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                                  <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span>   // <span class="attr">表单具体对象user.username</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 密码框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span> //prop：指定表单中具体的对象</span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span> // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                                  <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">show-password</span> // <span class="attr">眼睛</span>，<span class="attr">用于显示密码与否的操作</span></span></span><br><span class="line"><span class="tag">                                  <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">v-model</span>=<span class="string">&quot;user.password&quot;</span>  // <span class="attr">表单具体对象user.password</span></span></span><br><span class="line"><span class="tag">                         &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 密码验证框 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;confirmPass&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span>  // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                                  <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">show-password</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">placeholder</span>=<span class="string">&quot;请再次确认密码&quot;</span> </span></span><br><span class="line"><span class="tag">                                  <span class="attr">v-model</span>=<span class="string">&quot;user.confirmPass&quot;</span> //<span class="attr">表单具体对象user.confirmPass</span></span></span><br><span class="line"><span class="tag">                         &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 确认按钮 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span></span><br><span class="line">                            注 册</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">&lt;!-- 提示信息 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex:1;&quot;</span>&gt;</span></span><br><span class="line">                            已经有账号了？请 </span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #6e77f2; </span></span></span><br><span class="line"><span class="string"><span class="tag">                                         cursor:pointer&quot;</span> </span></span><br><span class="line"><span class="tag">                                   @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/login&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">                            &gt;</span></span><br><span class="line">                                登录</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 密码再次验证</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">validatePassword</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请确认密码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value !== <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">password</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;两次输入密码不一致&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">confirmPass</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单规则验证</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入账号&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 密码再次验证</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">confirmPass</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">validator</span>: validatePassword , <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">register</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//验证正确性</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;registerRef&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过</span></span></span><br><span class="line"><span class="language-javascript">                    request.<span class="title function_">post</span>(<span class="string">&#x27;/register&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//200表示成功，页面跳转</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="注册页面展示"><a href="#注册页面展示" class="headerlink" title="注册页面展示"></a>注册页面展示</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E5%9B%BE.png"></p><h2 id="后端布局"><a href="#后端布局" class="headerlink" title="后端布局"></a>后端布局</h2><h3 id="exception层"><a href="#exception层" class="headerlink" title="exception层"></a>exception层</h3><h4 id="全局异常处理类"><a href="#全局异常处理类" class="headerlink" title="全局异常处理类"></a>全局异常处理类</h4><h5 id="GlobalException类"><a href="#GlobalException类" class="headerlink" title="GlobalException类"></a><strong>GlobalException类</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalException</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(ServiceException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">serviceException</span><span class="params">(ServiceException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="number">500</span>,e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ServiceException类"><a href="#ServiceException类" class="headerlink" title="ServiceException类"></a><strong>ServiceException类</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServiceException</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> backSystem.exception.ServiceException;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">selectByUsername</span><span class="params">(String username)</span>&#123;</span><br><span class="line">        <span class="comment">// QueryWrapper : 条件查询器</span></span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        <span class="comment">// 根据用户名查询数据库的用户信息</span></span><br><span class="line">        <span class="keyword">return</span> userMapper.selectOne(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//验证用户账户是否合法(登录)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> selectByUsername(user.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> == dbUser)&#123;</span><br><span class="line">            <span class="comment">// 抛出一个自定义异常</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!user.getPassword().equals(dbUser.getPassword()))&#123;</span><br><span class="line">            <span class="comment">// 抛出一个自定义异常</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成 token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> TokenUtils.createToken(dbUser.getId(), dbUser.getPassword());</span><br><span class="line">        dbUser.setToken(token);</span><br><span class="line">        <span class="keyword">return</span> dbUser;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注册</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">register</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// 根据用户名查询数据库的用户信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> selectByUsername(user.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> != dbUser)&#123;</span><br><span class="line">            <span class="comment">// 抛出一个自定义异常</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名已存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        user.setName(user.getUsername());</span><br><span class="line">        userMapper.insert(user);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.UserService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.AuthAccess;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PutMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AuthAccess</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="comment">//数据校验</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(user.getUsername()) || StrUtil.isBlank(user.getPassword())) &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="string">&quot;数据输入不合法&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        user = userService.login(user);</span><br><span class="line">        <span class="keyword">return</span> Result.success(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AuthAccess</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">register</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="comment">//数据校验</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(user.getUsername()) || StrUtil.isBlank(user.getPassword()) || StrUtil.isBlank(user.getRole())) &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="string">&quot;数据输入不合法&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (user.getUsername().length() &lt; <span class="number">1</span> || user.getPassword().length() &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="string">&quot;数据长度太短&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        user = userService.register(user);</span><br><span class="line">        <span class="keyword">return</span> Result.success(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2之前后端交互</title>
      <link href="/2024/05/15/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA5%E4%B9%8B%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92(Vue2)/"/>
      <url>/2024/05/15/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA5%E4%B9%8B%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92(Vue2)/</url>
      
        <content type="html"><![CDATA[<h2 id="一：安装axios"><a href="#一：安装axios" class="headerlink" title="一：安装axios"></a>一：安装axios</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i axios -S</span><br></pre></td></tr></table></figure><h2 id="二：跨域处理"><a href="#二：跨域处理" class="headerlink" title="二：跨域处理"></a><strong>二</strong>：跨域处理</h2><h3 id="2-1-报错提示"><a href="#2-1-报错提示" class="headerlink" title="2.1 报错提示"></a>2.1 报错提示</h3><p>若没有解决跨域问题，则会报以下错误：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%B7%A8%E5%9F%9F%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98.png"></p><h3 id="2-2-解决方案"><a href="#2-2-解决方案" class="headerlink" title="2.2 解决方案"></a>2.2 解决方案</h3><h4 id="方案一：添加-CrossOrigin注解"><a href="#方案一：添加-CrossOrigin注解" class="headerlink" title="方案一：添加@CrossOrigin注解"></a>方案一：添加@CrossOrigin注解</h4><p>Controller类上添加@CrossOrigin注解</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B8%801.png"></p><h4 id="方案二：CorsConfig类-common层-√"><a href="#方案二：CorsConfig类-common层-√" class="headerlink" title="方案二：CorsConfig类(common层) √"></a>方案二：CorsConfig类(common层) √</h4><p>添加跨域解决的类 CorsConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当前跨域请求最大有效时长。这里默认1天</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">MAX_AGE</span> <span class="operator">=</span> <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">corsFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">corsConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>); <span class="comment">// 1 设置访问源地址</span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>); <span class="comment">// 2 设置访问源请求头</span></span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>); <span class="comment">// 3 设置访问源请求方法</span></span><br><span class="line">        corsConfiguration.setMaxAge(MAX_AGE);</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration); <span class="comment">// 4 对接口配置跨域设置</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三：前后端交互实际操作"><a href="#三：前后端交互实际操作" class="headerlink" title="三：前后端交互实际操作"></a>三：前后端交互实际操作</h2><h3 id="3-1-后端传到前端的数据格式"><a href="#3-1-后端传到前端的数据格式" class="headerlink" title="3.1 后端传到前端的数据格式"></a>3.1 后端传到前端的数据格式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="property">data</span>&#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;0&#x27;</span>, <span class="comment">//0表示成功,1表示失败</span></span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;请求成功&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        ...数据...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%90%8E%E7%AB%AF%E4%BC%A0%E5%85%A5%E5%89%8D%E7%AB%AF%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F.png"></p><h3 id="3-2-请求数据的基本方式"><a href="#3-2-请求数据的基本方式" class="headerlink" title="3.2 请求数据的基本方式"></a>3.2 请求数据的基本方式</h3><h4 id="应用于script内部，基本写法"><a href="#应用于script内部，基本写法" class="headerlink" title="应用于script内部，基本写法"></a><strong>应用于script内部，基本写法</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span>&#123;</span><br><span class="line">    <span class="attr">users</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 页面加载完成后触发</span></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 请求数据(后台的url)</span></span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 后端返回的数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">users</span> = res.<span class="property">data</span>.<span class="property">data</span> <span class="comment">// 将数据赋值给users对象</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="实际应用案例——表格"><a href="#实际应用案例——表格" class="headerlink" title="实际应用案例——表格"></a><strong>实际应用案例——表格</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 45%;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>卡片名称<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;float: right; padding: 3px 0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>操作按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;users&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;HomeView&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">users</span>: []</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 页面加载完成后触发</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 请求数据(后台的url)</span></span></span><br><span class="line"><span class="language-javascript">    axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>) <span class="comment">// 后端返回的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">users</span> = res.<span class="property">data</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92%E8%A1%A8%E6%A0%BC%E6%A1%88%E4%BE%8B.png"></p><h3 id="3-3-前端封装的http请求工具request-js-√"><a href="#3-3-前端封装的http请求工具request-js-√" class="headerlink" title="3.3 前端封装的http请求工具request.js √"></a>3.3 前端封装的http请求工具request.js √</h3><p>在<strong>src&#x2F;utils目录</strong>下创建<strong>request.js文件</strong>，路径为<strong>src&#x2F;utils&#x2F;request.js</strong>。</p><p><strong>用处</strong>：请求后端数据的工具。</p><h4 id="request-js工具代码"><a href="#request-js工具代码" class="headerlink" title="request.js工具代码"></a>request.js工具代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个新的axios对象</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,   <span class="comment">// 后端的接口地址  ip:port</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span>  <span class="comment">// 30s内返还数据，否则报错。</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request 请求拦截器</span></span><br><span class="line"><span class="comment">// 可以自请求发送前对请求做一些处理</span></span><br><span class="line"><span class="comment">// 比如统一加token，对请求参数统一加密</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>;</span><br><span class="line">    <span class="comment">// let user = localStorage.getItem(&quot;user&quot;) ? JSON.parse(localStorage.getItem(&quot;user&quot;)) : null</span></span><br><span class="line">    <span class="comment">// config.headers[&#x27;token&#x27;] = &#x27;token&#x27;  // 设置请求头</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;request error: &#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// response 响应拦截器</span></span><br><span class="line"><span class="comment">// 可以在接口响应后统一处理结果</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = response.<span class="property">data</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 兼容服务端返回的字符串数据</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> res === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            res = res ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res) : res</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;response error: &#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure><h4 id="request-js实际使用-script-methods-登录注册"><a href="#request-js实际使用-script-methods-登录注册" class="headerlink" title="request.js实际使用(script&#x2F;methods[登录注册])"></a>request.js实际使用(script&#x2F;methods[登录注册])</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// get表示获取后端路径，res是在request.js中的响应拦截器所定义【res=response.data】。</span></span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">users</span> = res.<span class="property">data</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> Vue2 </tag>
            
            <tag> 后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建之JWT权限验证</title>
      <link href="/2024/04/29/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA9%E4%B9%8BJWT%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81/"/>
      <url>/2024/04/29/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA9%E4%B9%8BJWT%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h1 id="前端布局"><a href="#前端布局" class="headerlink" title="前端布局"></a>前端布局</h1><h3 id="request-js"><a href="#request-js" class="headerlink" title="request.js"></a>request.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个新的axios对象</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,   <span class="comment">// 后端的接口地址  ip:port</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span>  <span class="comment">// 30s内返还数据，否则报错。</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request 请求拦截器</span></span><br><span class="line"><span class="comment">// 可以自请求发送前对请求做一些处理</span></span><br><span class="line"><span class="comment">// 比如统一加token，对请求参数统一加密</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>;</span><br><span class="line">    <span class="comment">// JWT身份验证</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    注意点：</span></span><br><span class="line"><span class="comment">    hony-user与Login.vue中的localStorage.setItem(&#x27;【hony-user】&#x27;,JSON.stringify(res.data)) 要命名一致</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">let</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;hony-user&quot;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>) <span class="comment">//获取user数据</span></span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;token&#x27;</span>] = user.<span class="property">token</span>  <span class="comment">// 设置请求头</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;request error: &#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// response 响应拦截器</span></span><br><span class="line"><span class="comment">// 可以在接口响应后统一处理结果</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = response.<span class="property">data</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 兼容服务端返回的字符串数据</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> res === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            res = res ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res) : res</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// token:若为401，则返回到login页面</span></span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">401</span>)&#123;</span><br><span class="line">            router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;response error: &#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E5%90%8Etoken.png"></p><h3 id="HomeView-vue—删除token操作"><a href="#HomeView-vue—删除token操作" class="headerlink" title="HomeView.vue—删除token操作"></a>HomeView.vue—删除token操作</h3><p><strong>退出操作时，清除token</strong>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dropdown-item @click.<span class="property">native</span>=<span class="string">&quot;loginOut&quot;</span>&gt;退出登录&lt;/el-dropdown-item&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="title function_">handleCollapse</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isCollapse</span> = !<span class="variable language_">this</span>.<span class="property">isCollapse</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">asideWidth</span> = <span class="variable language_">this</span>.<span class="property">isCollapse</span> ? <span class="string">&#x27;64px&#x27;</span> : <span class="string">&#x27;200px&#x27;</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">collapseIcon</span> = <span class="variable language_">this</span>.<span class="property">isCollapse</span> ? <span class="string">&#x27;el-icon-s-unfold&#x27;</span> : <span class="string">&#x27;el-icon-s-fold&#x27;</span>; <span class="comment">// 根据折叠状态切换图标</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">handleFull</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">requestFullscreen</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 新添清除token方法</span></span><br><span class="line">    <span class="title function_">loginOut</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">      注意点：</span></span><br><span class="line"><span class="comment">     hony-user与Login.vue中的localStorage.setItem(&#x27;【hony-user】&#x27;,JSON.stringify(res.data))   要命名一致</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) <span class="comment">//清除当前的token和用户数据</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h1 id="后台配置"><a href="#后台配置" class="headerlink" title="后台配置"></a>后台配置</h1><h2 id="JWT配置"><a href="#JWT配置" class="headerlink" title="JWT配置"></a>JWT配置</h2><h4 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jwt.version&gt;4.4.0&lt;/jwt.version&gt;</span><br></pre></td></tr></table></figure><h4 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h4><p><strong>父工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- JWT --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;jwt.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>子工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- jwt令牌 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="具体配置项"><a href="#具体配置项" class="headerlink" title="具体配置项"></a>具体配置项</h2><h3 id="一：全局异常处理类"><a href="#一：全局异常处理类" class="headerlink" title="一：全局异常处理类"></a>一：全局异常处理类</h3><p><strong>注意</strong>：<strong>401：权限错误</strong> </p><h4 id="ServiceException类"><a href="#ServiceException类" class="headerlink" title="ServiceException类"></a>ServiceException类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServiceException</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">        <span class="built_in">this</span>.code = <span class="number">500</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServiceException</span><span class="params">(Integer code,String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="GlobalException类"><a href="#GlobalException类" class="headerlink" title="GlobalException类"></a>GlobalException类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalException</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(ServiceException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">serviceException</span><span class="params">(ServiceException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(e.getCode(),e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二：自定义拦截器-JwtInterceptor"><a href="#二：自定义拦截器-JwtInterceptor" class="headerlink" title="二：自定义拦截器 JwtInterceptor"></a>二：自定义拦截器 JwtInterceptor</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> backSystem.exception.ServiceException;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.JWT;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.JWTVerifier;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.algorithms.Algorithm;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.exceptions.JWTDecodeException;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.exceptions.JWTVerificationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.HandlerMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义拦截器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> &#123;</span><br><span class="line">        <span class="comment">//放行OPTIONS请求</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;OPTIONS&quot;</span>.equals(method)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1、拿到token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);  <span class="comment">// 前端header内传过来的参数</span></span><br><span class="line">        <span class="comment">//token 是否为 null、空字符串，或者只包含空白字符</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(token)) &#123;</span><br><span class="line">            token = request.getParameter(<span class="string">&quot;token&quot;</span>); <span class="comment">// url参数： ?token=xxx</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果不是映射到方法直接通过【Controller层的方法上添加@AuthAccess】</span></span><br><span class="line">        <span class="keyword">if</span> (handler <span class="keyword">instanceof</span> HandlerMethod) &#123;</span><br><span class="line">            <span class="type">AuthAccess</span> <span class="variable">annotation</span> <span class="operator">=</span> ((HandlerMethod) handler).getMethodAnnotation(AuthAccess.class);</span><br><span class="line">            <span class="keyword">if</span> (annotation != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2、 执行认证——判断token是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(token)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3、 获取 token 中的 user id</span></span><br><span class="line">        String userId;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//JWT.decode(token) 解码 jwt token</span></span><br><span class="line">            userId = JWT.decode(token).getAudience().get(<span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JWTDecodeException j) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4、 根据token中的userid进行数据库的查询</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(Integer.parseInt(userId));</span><br><span class="line">        <span class="comment">//5、判断user是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//6、 通过【用户密码】加密后生成生成一个验证器</span></span><br><span class="line">        <span class="type">JWTVerifier</span> <span class="variable">jwtVerifier</span> <span class="operator">=</span> JWT.require(Algorithm.HMAC256(user.getPassword())).build();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//7、通过 验证器 验证 token</span></span><br><span class="line">            jwtVerifier.verify(token); <span class="comment">// 验证token</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (JWTVerificationException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="number">401</span>, <span class="string">&quot;请登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="三：配置拦截器规则-InterceptorConfig"><a href="#三：配置拦截器规则-InterceptorConfig" class="headerlink" title="三：配置拦截器规则 InterceptorConfig"></a>三：配置拦截器规则 InterceptorConfig</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置拦截器规则</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterceptorConfig</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(jwtInterceptor()) <span class="comment">//配置jwt的拦截器规则</span></span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>) <span class="comment">//拦截所有的请求路径</span></span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/login&quot;</span>,<span class="string">&quot;/register&quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.addInterceptors(registry);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JwtInterceptor <span class="title function_">jwtInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JwtInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四：Token工具类"><a href="#四：Token工具类" class="headerlink" title="四：Token工具类"></a>四：Token工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.JWT;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.algorithms.Algorithm;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> UserMapper staticUserMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">()</span> &#123;</span><br><span class="line">        staticUserMapper = userMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成token</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createToken</span><span class="params">(Integer userId, String sign)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> JWT.create().withAudience(userId.toString()) <span class="comment">// 将 user id 保存到 token 里面,作为载荷</span></span><br><span class="line">                .withExpiresAt(DateUtil.offsetHour(<span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="number">2</span>)) <span class="comment">// 2小时后token过期</span></span><br><span class="line">                .sign(Algorithm.HMAC256(sign)); <span class="comment">// 以 password 作为 token 的密钥</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前登录的用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> user对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User <span class="title function_">getCurrentUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</span><br><span class="line">            <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StrUtil.isNotBlank(token)) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> JWT.decode(token).getAudience().get(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">return</span> staticUserMapper.selectById(Integer.valueOf(userId));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="五：不拦截指定页面，直接跳过过滤器："><a href="#五：不拦截指定页面，直接跳过过滤器：" class="headerlink" title="五：不拦截指定页面，直接跳过过滤器："></a>五：不拦截指定页面，直接跳过过滤器：</h3><h4 id="excludePathPatterns"><a href="#excludePathPatterns" class="headerlink" title="excludePathPatterns"></a>excludePathPatterns</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置拦截器规则</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterceptorConfig</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(jwtInterceptor()) <span class="comment">//配置jwt的拦截器规则</span></span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>) <span class="comment">//拦截所有的请求路径</span></span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/login&quot;</span>,<span class="string">&quot;/register&quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.addInterceptors(registry);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JwtInterceptor <span class="title function_">jwtInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JwtInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="六：应用—生成token操作"><a href="#六：应用—生成token操作" class="headerlink" title="六：应用—生成token操作"></a>六：应用—生成token操作</h3><h4 id="User"><a href="#User" class="headerlink" title="User"></a>User</h4><p><strong>在Entity的User中新添一个token属性</strong></p><p>注意，实体类里面多出来的字段需要加上一个注解：**@TableField(exist &#x3D; false)** </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新添token</span></span><br><span class="line"><span class="meta">@TableField(exist = false)</span></span><br><span class="line"><span class="keyword">private</span> String token;</span><br></pre></td></tr></table></figure><h4 id="UserService"><a href="#UserService" class="headerlink" title="UserService"></a>UserService</h4><p>添加生成token操作。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> backSystem.business.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> backSystem.exception.ServiceException;</span><br><span class="line"><span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">selectByUsername</span><span class="params">(String username)</span>&#123;</span><br><span class="line">        <span class="comment">// QueryWrapper : 条件查询器</span></span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        <span class="comment">// 根据用户名查询数据库的用户信息</span></span><br><span class="line">        <span class="keyword">return</span> userMapper.selectOne(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//验证用户账户是否合法</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> selectByUsername(user.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> == dbUser)&#123;</span><br><span class="line">            <span class="comment">// 抛出一个自定义异常</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!user.getPassword().equals(dbUser.getPassword()))&#123;</span><br><span class="line">            <span class="comment">// 抛出一个自定义异常</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成 token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> TokenUtils.createToken(dbUser.getId(), dbUser.getPassword());</span><br><span class="line">        dbUser.setToken(token);</span><br><span class="line">        <span class="keyword">return</span> dbUser;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建9之上传下载(图片/文件)</title>
      <link href="/2024/04/20/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA11%E4%B9%8B%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD(%E5%9B%BE%E7%89%87%E6%88%96%E6%96%87%E4%BB%B6)/"/>
      <url>/2024/04/20/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA11%E4%B9%8B%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD(%E5%9B%BE%E7%89%87%E6%88%96%E6%96%87%E4%BB%B6)/</url>
      
        <content type="html"><![CDATA[<h1 id="上传下载-图片-word-pdf-…"><a href="#上传下载-图片-word-pdf-…" class="headerlink" title="上传下载(图片&#x2F;word&#x2F;pdf&#x2F;…)"></a>上传下载(图片&#x2F;word&#x2F;pdf&#x2F;…)</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="一：全局异常处理"><a href="#一：全局异常处理" class="headerlink" title="一：全局异常处理"></a>一：全局异常处理</h3><h4 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局异常处理（新添错误code为500）</span></span><br><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">globalException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">    e.printStackTrace(); <span class="comment">//打印错误信息</span></span><br><span class="line">    <span class="keyword">return</span> Result.error(<span class="number">500</span>,<span class="string">&quot;系统错误&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/gloabal%E5%BC%82%E5%B8%B8.png"></p><h4 id="GlobalException全部代码展示"><a href="#GlobalException全部代码展示" class="headerlink" title="GlobalException全部代码展示"></a>GlobalException全部代码展示</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalException</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(ServiceException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">serviceException</span><span class="params">(ServiceException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(e.getCode(),e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//全局异常处理</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">globalException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        e.printStackTrace(); <span class="comment">//打印错误信息</span></span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="number">500</span>,<span class="string">&quot;系统错误&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二：hutool工具"><a href="#二：hutool工具" class="headerlink" title="二：hutool工具"></a>二：hutool工具</h3><h4 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;hutoolall.version&gt;5.8.20&lt;/hutoolall.version&gt;</span><br></pre></td></tr></table></figure><h4 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h4><p><strong>父工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Hutool-all:小而全的Java工具类库 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;hutoolall.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>子工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--hutool-all:小而全的Java工具类库--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="三：yml配置"><a href="#三：yml配置" class="headerlink" title="三：yml配置"></a>三：yml配置</h3><p>控制文件传入的大小</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="string">...</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="attr">max-file-size:</span> <span class="string">20MB</span></span><br><span class="line">      <span class="attr">max-request-size:</span> <span class="string">20MB</span></span><br></pre></td></tr></table></figure><h1 id="后端整体代码展示-FileController"><a href="#后端整体代码展示-FileController" class="headerlink" title="后端整体代码展示 FileController"></a>后端整体代码展示 FileController</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.common.AuthAccess;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.io.FileUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/file&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileController</span> &#123;</span><br><span class="line">    <span class="comment">//文件根目录</span></span><br><span class="line">    <span class="comment">// D:\Engineering\warehouse\SystemFrameworkUI\BackSystem\BackManagement\files</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROOT_PATH</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;files&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//上传文件</span></span><br><span class="line">   <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();<span class="comment">//文件的原始名称.实际存储到磁盘的文件名称</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//1.获取文件名和后缀【文件名：student.png】</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">mainName</span> <span class="operator">=</span> FileUtil.mainName(originalFilename);<span class="comment">//不包含后缀的文件名称 =&gt; student</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename().toString();</span><br><span class="line">       <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));<span class="comment">//获取文件后缀名 =&gt; .png</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//2.传过来的file转换为路径</span></span><br><span class="line">       <span class="keyword">if</span> (!FileUtil.exist(ROOT_PATH))&#123;<span class="comment">//文件存储的父级目录</span></span><br><span class="line">           <span class="comment">//文件存储的父级不存在，就要创建</span></span><br><span class="line">           FileUtil.mkdir(ROOT_PATH);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//判断当前上传的文件是否已经存在了，若存在则要重命名一个文件名称</span></span><br><span class="line">       <span class="comment">//File.separator:分隔符(//)</span></span><br><span class="line">       <span class="keyword">if</span> (FileUtil.exist(ROOT_PATH + File.separator + originalFilename))&#123;</span><br><span class="line">           originalFilename = System.currentTimeMillis() + <span class="string">&quot;_&quot;</span> + mainName + extName;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//D:\Engineering\warehouse\SystemFrameworkUI\BackSystem\BackManagement\files\12315312_student.png</span></span><br><span class="line">       <span class="type">File</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(ROOT_PATH + File.separator + originalFilename);</span><br><span class="line">       file.transferTo(saveFile); <span class="comment">// 存储文件到本地磁盘</span></span><br><span class="line">       <span class="comment">//返回文件的链接</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8080/file/download/&quot;</span> + originalFilename;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//3.返回文件的链接，这个链接就是文件下载地址，这个文件下载地址就是从后台提供出来的</span></span><br><span class="line">       <span class="keyword">return</span> Result.success(url);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//文件下载|预览</span></span><br><span class="line">    <span class="meta">@AuthAccess</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/download/&#123;fileName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="comment">// 1、附件下载</span></span><br><span class="line">       <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename=&quot;+ URLEncoder.encode(fileName,&quot;UTF-8&quot;));</span></span><br><span class="line">       <span class="comment">// 2、预览</span></span><br><span class="line">       <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;,&quot;inline;filename=&quot;+ URLEncoder.encode(fileName,&quot;UTF-8&quot;));</span></span><br><span class="line">       <span class="comment">//字节流数组获取</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> ROOT_PATH + File.separator + fileName;</span><br><span class="line">        <span class="keyword">if</span> (!FileUtil.exist(filePath))&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">byte</span>[] bytes = FileUtil.readBytes(filePath);</span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();<span class="comment">//io流</span></span><br><span class="line">        outputStream.write(bytes); <span class="comment">//是一个字节数组，也就是文件的字节流数组</span></span><br><span class="line">        outputStream.flush();<span class="comment">//刷新</span></span><br><span class="line">        outputStream.close();<span class="comment">//关闭文件流</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="1、上传"><a href="#1、上传" class="headerlink" title="1、上传"></a>1、上传</h1><h2 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h2><h3 id="1、单个文件上传"><a href="#1、单个文件上传" class="headerlink" title="1、单个文件上传"></a>1、单个文件上传</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>文件上传下载<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 单文件上传 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">            <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span> //<span class="attr">后台文件上传的路径ip</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span> //<span class="attr">设置上传的请求头部</span>，<span class="attr">当前登录用户token</span></span></span><br><span class="line"><span class="tag">            //<span class="attr">文件上传成功后才会触发的钩子</span>,<span class="attr">默认三个参数</span>(<span class="attr">response</span>,<span class="attr">file</span>,<span class="attr">fileList</span>)</span></span><br><span class="line"><span class="tag">            <span class="attr">:on-success</span>=<span class="string">&quot;handleFileUpload&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">accept</span>=<span class="string">&quot;png&quot;</span>  // <span class="attr">指定上传的文件类型:png</span>【<span class="attr">可选</span>】</span></span><br><span class="line"><span class="tag">            <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span> // <span class="attr">显示上传图片的预览</span>【<span class="attr">可选</span>】</span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>单文件上传<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">user</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 文件上传下载</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 单文件上传（未自定义）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//response:文件上传成功后服务器返回的响应数据&#123;code:&quot;200&quot;,msg:&quot;请求成功&quot;,data:&quot;http://...&quot;&#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// file:当前上传的文件对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// fileList: 前端所有已上传文件的文件列表</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleFileUpload</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">fileList</span> = fileList</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="添加list-type-”picture”效果"><a href="#添加list-type-”picture”效果" class="headerlink" title="添加list-type&#x3D;”picture”效果"></a>添加list-type&#x3D;”picture”效果</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8D%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.png"></p><h4 id="不加list-type-”picture”效果"><a href="#不加list-type-”picture”效果" class="headerlink" title="不加list-type&#x3D;”picture”效果"></a>不加list-type&#x3D;”picture”效果</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%B8%8D%E5%8A%A0list-type=picture%E6%95%88%E6%9E%9C.png"></p><h4 id="添加-show-file-list-”false”效果"><a href="#添加-show-file-list-”false”效果" class="headerlink" title="添加:show-file-list&#x3D;”false”效果"></a>添加:show-file-list&#x3D;”false”效果</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%B7%BB%E5%8A%A0show-file-list=false%E6%95%88%E6%9E%9C.png"></p><h3 id="2、多个文件上传"><a href="#2、多个文件上传" class="headerlink" title="2、多个文件上传"></a>2、多个文件上传</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 50%; margin-right: 10px&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>文件上传下载<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 多文件上传 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span>    // <span class="attr">后台文件上传的路径ip</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                  //<span class="attr">文件上传成功后才会触发的钩子</span>,<span class="attr">默认三个参数</span>(<span class="attr">response</span>,<span class="attr">file</span>,<span class="attr">fileList</span>)</span></span><br><span class="line"><span class="tag">                  <span class="attr">:on-success</span>=<span class="string">&quot;handleMultipleFileUpload&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">multiple</span>    // <span class="attr">多文件上传</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span>// <span class="attr">上传后在前端显示文件图案</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span>&gt;</span>多文件上传<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> </span></span><br><span class="line"><span class="tag">                           <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> </span></span><br><span class="line"><span class="tag">                           <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0;&quot;</span> </span></span><br><span class="line"><span class="tag">                           @<span class="attr">click</span>=<span class="string">&quot;showUrls&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>显示上传的链接<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 表格对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">users</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 文件上传下载</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">urls</span>: []<span class="comment">// 存储显示的上传链接</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 页面加载完成后触发</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 请求数据(后台的url)</span></span></span><br><span class="line"><span class="language-javascript">    axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>) <span class="comment">// 后端返回的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">users</span> = res.<span class="property">data</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 多文件上传</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleMultipleFileUpload</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">urls</span> = fileList.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">response</span>?.<span class="property">data</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 显示上传的链接</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">showUrls</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">urls</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3、表格内设置上传"><a href="#3、表格内设置上传" class="headerlink" title="3、表格内设置上传"></a>3、表格内设置上传</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%A1%A8%E6%A0%BC%E5%86%85%E4%B8%8A%E4%BC%A0.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 70%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>渲染用户数据<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;float: right; padding: 3px 0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>操作按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;users&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">              <span class="comment">&lt;!-- 文件上传 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;文件上传&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">                说明：</span></span><br><span class="line"><span class="comment">                  :on-success 的方法 =&gt; 参数只可有三个</span></span><br><span class="line"><span class="comment">                  &lt;template v-slot=&quot;scope&quot;&gt;&lt;/template&gt; =&gt; 一个插槽作用域对象</span></span><br><span class="line"><span class="comment">                  scope.row ： 访问访问当前行的数据</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:on-success</span>=<span class="string">&quot;(row,file,fileList) =&gt; handleTableFileUpload(scope.row,file,fileList)&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>单文件上传<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">              <span class="comment">&lt;!-- 上传图片展示 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;图片&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 图片 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span>  // <span class="attr">不显示</span>“<span class="attr">无法加载</span>”<span class="attr">字样</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span>  // <span class="attr">绑定当前行的avatar属性</span>：<span class="attr">显示照片</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50%;height: 60px;&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 页面加载完成后触发</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 请求数据(后台的url)</span></span></span><br><span class="line"><span class="language-javascript">    axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>) <span class="comment">// 后端返回的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">users</span> = res.<span class="property">data</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 表格对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">users</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 文件上传下载</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 表格中的上传下载（自定义）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleTableFileUpload</span>(<span class="params">row,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// file: 当前文件数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// fileList: 前端上传的文件列表</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// row：获取当前行对象</span></span></span><br><span class="line"><span class="language-javascript">        row.<span class="property">avatar</span>=file.<span class="property">response</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 触发更新,将数据存放到数据库中</span></span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">put</span>(<span class="string">&#x27;/user/update&#x27;</span>,row).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;上传成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上传文件</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();<span class="comment">//文件的原始名称.实际存储到磁盘的文件名称</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.获取文件名和后缀【文件名：student.png】</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">mainName</span> <span class="operator">=</span> FileUtil.mainName(originalFilename);<span class="comment">//不包含后缀的文件名称 =&gt; student</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename().toString();</span><br><span class="line">    <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));<span class="comment">//获取文件后缀名 =&gt; .png</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.传过来的file转换为路径</span></span><br><span class="line">    <span class="keyword">if</span> (!FileUtil.exist(ROOT_PATH))&#123;<span class="comment">//文件存储的父级目录</span></span><br><span class="line">        <span class="comment">//文件存储的父级不存在，就要创建</span></span><br><span class="line">        FileUtil.mkdir(ROOT_PATH);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断当前上传的文件是否已经存在了，若存在则要重命名一个文件名称</span></span><br><span class="line">    <span class="comment">//File.separator:分隔符(//)</span></span><br><span class="line">    <span class="keyword">if</span> (FileUtil.exist(ROOT_PATH + File.separator + originalFilename))&#123;</span><br><span class="line">        originalFilename = System.currentTimeMillis() + <span class="string">&quot;_&quot;</span> + mainName + extName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//D:\Engineering\warehouse\SystemFrameworkUI\BackSystem\BackManagement\files\12315312_student.png</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(ROOT_PATH + File.separator + originalFilename);</span><br><span class="line">    file.transferTo(saveFile); <span class="comment">// 存储文件到本地磁盘</span></span><br><span class="line">    <span class="comment">//返回文件的链接</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8080/file/download/&quot;</span> + originalFilename;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.返回文件的链接，这个链接就是文件下载地址，这个文件下载地址就是从后台提供出来的</span></span><br><span class="line">    <span class="keyword">return</span> Result.success(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>postman</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8D%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0postman.png"></p><h1 id="2、预览-网页查看"><a href="#2、预览-网页查看" class="headerlink" title="2、预览(网页查看)"></a>2、预览(网页查看)</h1><h2 id="前端代码（下载，预览前端代码）"><a href="#前端代码（下载，预览前端代码）" class="headerlink" title="前端代码（下载，预览前端代码）"></a>前端代码（下载，预览前端代码）</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 70%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>渲染用户数据<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;float: right; padding: 3px 0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>操作按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;users&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">              <span class="comment">&lt;!-- 文件上传 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;文件上传&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">                说明：</span></span><br><span class="line"><span class="comment">                  :on-success 的方法 =&gt; 参数只可有三个</span></span><br><span class="line"><span class="comment">                  &lt;template v-slot=&quot;scope&quot;&gt;&lt;/template&gt; =&gt; 一个插槽作用域对象</span></span><br><span class="line"><span class="comment">                  scope.row ： 访问访问当前行的数据</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:on-success</span>=<span class="string">&quot;(row,file,fileList) =&gt; handleTableFileUpload(scope.row,file,fileList)&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>单文件上传<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">              <span class="comment">&lt;!-- 上传图片展示 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;图片&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 图片 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span>  </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span>  </span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50%;height: 60px;&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 预览（新添） --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;preview(scope.row.avatar)&quot;</span>&gt;</span></span><br><span class="line">                      预览</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 页面加载完成后触发</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 请求数据(后台的url)</span></span></span><br><span class="line"><span class="language-javascript">    axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>) <span class="comment">// 后端返回的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">users</span> = res.<span class="property">data</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 表格对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">users</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 文件上传下载</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// url属性（新添）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 打开窗口进行预览（新添）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">preview</span>(<span class="params">url</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="title function_">open</span>(url) <span class="comment">// 默认图片预览</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleTableFileUpload</span>(<span class="params">row,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        row.<span class="property">avatar</span>=file.<span class="property">response</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 触发更新,将数据存放到数据库中</span></span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">put</span>(<span class="string">&#x27;/user/update&#x27;</span>,row).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;上传成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>选择“预览”</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%A2%84%E8%A7%88%E6%93%8D%E4%BD%9C.png"></p><p>就可进入新的页面进行预览</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87.png"></p><h2 id="后端代码-1"><a href="#后端代码-1" class="headerlink" title="后端代码"></a>后端代码</h2><p>response.addHeader(“Content-Disposition”,”<strong>inline</strong>;filename&#x3D;”+ URLEncoder.encode(fileName,”UTF-8”));</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文件预览</span></span><br><span class="line"><span class="meta">@AuthAccess</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;fileName&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">   <span class="comment">// 预览</span></span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;inline;filename=&quot;</span>+ URLEncoder.encode(fileName,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">   <span class="comment">//字节流数组获取</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> ROOT_PATH + File.separator + fileName;</span><br><span class="line">    <span class="keyword">if</span> (!FileUtil.exist(filePath))&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">byte</span>[] bytes = FileUtil.readBytes(filePath);</span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();<span class="comment">//io流</span></span><br><span class="line">    outputStream.write(bytes); <span class="comment">//是一个字节数组，也就是文件的字节流数组</span></span><br><span class="line">    outputStream.flush();<span class="comment">//刷新</span></span><br><span class="line">    outputStream.close();<span class="comment">//关闭文件流</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3、下载"><a href="#3、下载" class="headerlink" title="3、下载"></a>3、下载</h1><h2 id="前端代码（下载，预览前端代码）-1"><a href="#前端代码（下载，预览前端代码）-1" class="headerlink" title="前端代码（下载，预览前端代码）"></a>前端代码（下载，预览前端代码）</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 70%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>渲染用户数据<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;float: right; padding: 3px 0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>操作按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;users&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">              <span class="comment">&lt;!-- 文件上传 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;文件上传&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">                说明：</span></span><br><span class="line"><span class="comment">                  :on-success 的方法 =&gt; 参数只可有三个</span></span><br><span class="line"><span class="comment">                  &lt;template v-slot=&quot;scope&quot;&gt;&lt;/template&gt; =&gt; 一个插槽作用域对象</span></span><br><span class="line"><span class="comment">                  scope.row ： 访问访问当前行的数据</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:on-success</span>=<span class="string">&quot;(row,file,fileList) =&gt; handleTableFileUpload(scope.row,file,fileList)&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>单文件上传<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">              <span class="comment">&lt;!-- 上传图片展示 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;图片&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 图片 --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span>  </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span>  </span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50%;height: 60px;&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- 预览（新添） --&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;preview(scope.row.avatar)&quot;</span>&gt;</span></span><br><span class="line">                      下载</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 页面加载完成后触发</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 请求数据(后台的url)</span></span></span><br><span class="line"><span class="language-javascript">    axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/user/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>) <span class="comment">// 后端返回的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">users</span> = res.<span class="property">data</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 表格对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">users</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 文件上传下载</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// url属性（新添）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 打开窗口进行预览（新添）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">preview</span>(<span class="params">url</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="title function_">open</span>(url) <span class="comment">// 默认图片预览</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleTableFileUpload</span>(<span class="params">row,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        row.<span class="property">avatar</span>=file.<span class="property">response</span>.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 触发更新,将数据存放到数据库中</span></span></span><br><span class="line"><span class="language-javascript">        request.<span class="title function_">put</span>(<span class="string">&#x27;/user/update&#x27;</span>,row).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;上传成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%B8%8B%E8%BD%BD.png"></p><h2 id="后端代码-2"><a href="#后端代码-2" class="headerlink" title="后端代码"></a>后端代码</h2><p>response.addHeader(“Content-Disposition”,”<strong>attachment</strong>;filename&#x3D;”+ URLEncoder.encode(fileName,”UTF-8”)); &#x2F;&#x2F; 附件下载</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下载文件</span></span><br><span class="line"><span class="meta">@AuthAccess</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;fileName&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">   <span class="comment">// 附件下载</span></span><br><span class="line">   response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+ URLEncoder.encode(fileName,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">   <span class="comment">//字节流数组获取</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> ROOT_PATH + File.separator + fileName;</span><br><span class="line">    <span class="keyword">if</span> (!FileUtil.exist(filePath))&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">byte</span>[] bytes = FileUtil.readBytes(filePath);</span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();<span class="comment">//io流</span></span><br><span class="line">    <span class="comment">//读取，刷新，关闭</span></span><br><span class="line">    outputStream.write(bytes); <span class="comment">//是一个字节数组，也就是文件的字节流数组</span></span><br><span class="line">    outputStream.flush();<span class="comment">//刷新</span></span><br><span class="line">    outputStream.close();<span class="comment">//关闭文件流</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> Vue </tag>
            
            <tag> Web前端 </tag>
            
            <tag> 项目搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot基本准备</title>
      <link href="/2024/03/27/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA4%E4%B9%8BSpringBoot%E5%9F%BA%E6%9C%AC%E5%87%86%E5%A4%87/"/>
      <url>/2024/03/27/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA4%E4%B9%8BSpringBoot%E5%9F%BA%E6%9C%AC%E5%87%86%E5%A4%87/</url>
      
        <content type="html"><![CDATA[<h1 id="1、springboot基本目录"><a href="#1、springboot基本目录" class="headerlink" title="1、springboot基本目录"></a>1、springboot基本目录</h1><h2 id="基本目录"><a href="#基本目录" class="headerlink" title="基本目录"></a>基本目录</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%9F%BA%E6%9C%AC%E7%9B%AE%E5%BD%95%E5%8C%85.png" alt="包的基本目录"></p><h3 id="讲解"><a href="#讲解" class="headerlink" title="讲解"></a>讲解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">entity包：实体类</span><br><span class="line">mapper包：数据访问(sql语句)</span><br><span class="line">service包：业务层</span><br><span class="line">controller包：接口暴露地方【控制层】</span><br></pre></td></tr></table></figure><h1 id="2、springboot通用套路"><a href="#2、springboot通用套路" class="headerlink" title="2、springboot通用套路"></a>2、springboot通用套路</h1><h2 id="common层"><a href="#common层" class="headerlink" title="common层"></a>common层</h2><h3 id="Result类——统一输出格式"><a href="#Result类——统一输出格式" class="headerlink" title="Result类——统一输出格式"></a>Result类——统一输出格式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Builder;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">//请求返回编码(成功与否)：0表示成功，1表示失败</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="comment">//提示信息</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="comment">//响应数据：向前端返回后端数据(成功时才返回)</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//快速返回操作成功响应数据（带响应数据）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; Result&lt;E&gt; <span class="title function_">success</span><span class="params">(E data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,<span class="string">&quot;请求成功&quot;</span>,data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//快速返回操作成功响应数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">200</span>,<span class="string">&quot;请求成功&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">401</span>,msg,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(Integer code,String msg)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code,msg,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">500</span>,<span class="string">&quot;系统错误&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="exception层"><a href="#exception层" class="headerlink" title="exception层"></a>exception层</h2><h3 id="全局异常处理类"><a href="#全局异常处理类" class="headerlink" title="全局异常处理类"></a>全局异常处理类</h3><h4 id="GlobalException类"><a href="#GlobalException类" class="headerlink" title="GlobalException类"></a>GlobalException类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalException</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(ServiceException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">serviceException</span><span class="params">(ServiceException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="number">500</span>,e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalException</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(ServiceException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">serviceException</span><span class="params">(ServiceException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(e.getCode(),e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//全局异常处理</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">globalException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        e.printStackTrace(); <span class="comment">//打印错误信息</span></span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="number">500</span>,<span class="string">&quot;系统错误&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ServiceException类"><a href="#ServiceException类" class="headerlink" title="ServiceException类"></a>ServiceException类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServiceException</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServiceException</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">        <span class="built_in">this</span>.code = <span class="number">500</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServiceException</span><span class="params">(Integer code,String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Entity层-类"><a href="#Entity层-类" class="headerlink" title="Entity层(类)"></a>Entity层(类)</h2><p>注意，实体类里面多出来的字段需要加上一个注解：**@TableField(exist &#x3D; false)** </p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/mybatisplus%E4%B8%AD%E7%9A%84entity.png"></p><p><strong>常用注解</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">类：</span><br><span class="line">@Data</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@TableName=&gt; 与数据库【表名】相关</span><br><span class="line">属性：</span><br><span class="line">@TableId =&gt; 与数据库中【数据名】有关</span><br></pre></td></tr></table></figure><p><strong>@TableName和@TableId主要知识讲解</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">类名相关：</span><br><span class="line"><span class="meta">@TableName(&quot;tb_user&quot;)</span>表名与类名不一致✔</span><br><span class="line"></span><br><span class="line">属性相关：</span><br><span class="line">表现形态：</span><br><span class="line"><span class="meta">@TableId()</span>✔</span><br><span class="line"><span class="meta">@TableField()</span>✔</span><br><span class="line">具体讲解：</span><br><span class="line">重点知识：</span><br><span class="line"><span class="meta">@TableId(type = IdType.AUTO)</span>自增列（标识主键）✔</span><br><span class="line"><span class="meta">@TableField(exist = false)</span>数据库中没有的字段，但在项目中需用到（token） ✔</span><br></pre></td></tr></table></figure><h2 id="Mapper层-接口"><a href="#Mapper层-接口" class="headerlink" title="Mapper层(接口)"></a>Mapper层(接口)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">继承接口：</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;实体类&gt;</span><br><span class="line"></span><br><span class="line">具体代码展示：</span><br><span class="line">    <span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line">    <span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="1-简单的sql操作-额外其他操作"><a href="#1-简单的sql操作-额外其他操作" class="headerlink" title="1.简单的sql操作(额外其他操作)"></a>1.简单的sql操作(额外其他操作)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">注解(与sql相关)：</span><br><span class="line">@insert</span><br><span class="line">@select</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>注意点</strong></p><p>BaseMapper中包含了基本的操作，如insert(插入一条数据)，deleteById(根据ID删除)…</p><h3 id="2-复杂的sql操作（多表关联）"><a href="#2-复杂的sql操作（多表关联）" class="headerlink" title="2.复杂的sql操作（多表关联）"></a>2.复杂的sql操作（多表关联）</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/sql%E5%A4%8D%E6%9D%82.png"></p><p>在resources&#x2F;mapping中创建XXXMapper.xml</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/sql%E5%A4%8D%E6%9D%82mapping.png"></p><h2 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h2><h3 id="service实体类"><a href="#service实体类" class="headerlink" title="service实体类"></a>service实体类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">继承类：</span><br><span class="line">类：<span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;Mapper接口, 实体类&gt;</span><br><span class="line"></span><br><span class="line">类注解：</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"></span><br><span class="line">具体代码展示：</span><br><span class="line">    <span class="keyword">import</span> backSystem.business.entity.User;</span><br><span class="line">    <span class="keyword">import</span> backSystem.business.mapper.UserMapper;</span><br><span class="line">    <span class="keyword">import</span> backSystem.exception.ServiceException;</span><br><span class="line">    <span class="keyword">import</span> backSystem.utils.TokenUtils;</span><br><span class="line">    <span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line">    <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">    <span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Service</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; &#123;</span><br><span class="line">        <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ....</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">注解：</span><br><span class="line">类注解：</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/user&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>：支持跨域，满足axios请求 【必加】</span><br><span class="line"><span class="meta">@Autowired</span> =&gt; 构造器✔，属性...</span><br><span class="line">方法注解：</span><br><span class="line"><span class="meta">@PostMapping</span>：新增（Post）</span><br><span class="line"><span class="meta">@GetMapping</span>：查询（GET）</span><br><span class="line"><span class="meta">@PutMapping</span>：整体更新（Put）</span><br><span class="line"><span class="meta">@PatchMapping</span>：局部更新（Patch）</span><br><span class="line"><span class="meta">@DeleteMapping</span>：删除（Delete）</span><br><span class="line">属性注解：</span><br><span class="line"># URL路径部分，例如/blogs/<span class="number">1</span></span><br><span class="line"><span class="meta">@PathVariable(&quot;ps&quot;)</span></span><br><span class="line"># 在参数部分(参数不存在时，默认值)，例如blogs?blogId=<span class="number">1</span></span><br><span class="line">简单数据：</span><br><span class="line"><span class="meta">@RequestParam(value=&quot;id&quot;[,required=false[,defaultValue=&quot;0&quot;]])</span></span><br><span class="line">复杂数据：</span><br><span class="line"><span class="meta">@RequestBody</span>:前端为【json格式】</span><br><span class="line"><span class="meta">@ModelAttribute</span>：前端为【字符串格式】</span><br><span class="line"><span class="meta">@MultipartFile</span>：带有input=file的单表元素【上传照片，文件...】</span><br><span class="line"></span><br><span class="line">使用对象：</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService; <span class="comment">// 接口对象</span></span><br><span class="line"></span><br><span class="line">具体代码展示：</span><br><span class="line">    <span class="meta">@CrossOrigin</span></span><br><span class="line">    <span class="meta">@RestController</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">            userService.updateById(user);</span><br><span class="line">            <span class="keyword">return</span> Result.success();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">            userService.removeById(id);</span><br><span class="line">            <span class="keyword">return</span> Result.success();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(id);</span><br><span class="line">            <span class="keyword">return</span> Result.success(user);</span><br><span class="line">        &#125;</span><br><span class="line">        ....</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="启动层"><a href="#启动层" class="headerlink" title="启动层"></a>启动层</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关联其他包中的类</span></span><br><span class="line"><span class="meta">@SpringBootApplication(scanBasePackages = &#123;</span></span><br><span class="line"><span class="meta">        &quot;com.ybg.common.entity&quot;,</span></span><br><span class="line"><span class="meta">        &quot;com.ybg.common.image&quot;,</span></span><br><span class="line"><span class="meta">        &quot;com.ybg.common.excel2&quot;,</span></span><br><span class="line"><span class="meta">        &quot;com.ybg.common.xml&quot;,</span></span><br><span class="line"><span class="meta">        ...</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.ybg.employee.business.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(EmployeeApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%90%AF%E5%8A%A8%E5%B1%82%E4%BB%A3%E7%A0%81.png"></p><h1 id="3、新增一个模块基本模版"><a href="#3、新增一个模块基本模版" class="headerlink" title="3、新增一个模块基本模版"></a>3、新增一个模块基本模版</h1><h2 id="3-1：mysql数据库新建表"><a href="#3-1：mysql数据库新建表" class="headerlink" title="3.1：mysql数据库新建表"></a>3.1：mysql数据库新建表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists news(</span><br><span class="line">    id int primary key auto_increment,</span><br><span class="line">    title varchar(255) comment &#x27;标题&#x27;,</span><br><span class="line">    description varchar(255) comment &#x27;简介&#x27;,</span><br><span class="line">    content text comment &#x27;内容&#x27;,</span><br><span class="line">    author_id int comment &#x27;发布人id&#x27;,</span><br><span class="line">    time varchar(255) comment &#x27;发布时间&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="3-2：创建一个Entity与表对应"><a href="#3-2：创建一个Entity与表对应" class="headerlink" title="3.2：创建一个Entity与表对应"></a>3.2：创建一个Entity与表对应</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;news&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">News</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> Integer authorId;</span><br><span class="line">    <span class="keyword">private</span> String time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-3：创建对应的Mapper"><a href="#3-3：创建对应的Mapper" class="headerlink" title="3.3：创建对应的Mapper"></a>3.3：创建对应的Mapper</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.News;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NewsMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;News&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-4：创建对应的Service"><a href="#3-4：创建对应的Service" class="headerlink" title="3.4：创建对应的Service"></a>3.4：创建对应的Service</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.News;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.mapper.NewsMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsService</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;NewsMapper, News&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> NewsMapper newsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NewsService</span><span class="params">(NewsMapper newsMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.newsMapper = newsMapper;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-5：创建对应的Controller"><a href="#3-5：创建对应的Controller" class="headerlink" title="3.5：创建对应的Controller"></a>3.5：创建对应的Controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> backSystem.business.entity.News;</span><br><span class="line"><span class="keyword">import</span> backSystem.business.service.NewsService;</span><br><span class="line"><span class="keyword">import</span> backSystem.common.Result;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/news&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> NewsService newsService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增操作</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> News news)</span>&#123;</span><br><span class="line">        newsService.save(news);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改操作</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> News news)</span>&#123;</span><br><span class="line">        newsService.updateById(news);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单个删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        newsService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 批量删除操作</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/batch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Integer&gt; ids)</span>&#123; <span class="comment">// [7,6,..]</span></span><br><span class="line">        newsService.removeBatchByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;News&gt; news = newsService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;News&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据ID查询信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="type">News</span> <span class="variable">news</span> <span class="operator">=</span> newsService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success(news);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectByPage</span><span class="params">(<span class="meta">@RequestParam</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                               <span class="meta">@RequestParam</span> String title)</span>&#123;</span><br><span class="line">        <span class="comment">// 默认倒序，让最新的数据在最上方</span></span><br><span class="line">        QueryWrapper&lt;News&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;News&gt;().orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        queryWrapper.like(StrUtil.isNotBlank(title),<span class="string">&quot;title&quot;</span>,title);</span><br><span class="line">        Page&lt;News&gt; page = newsService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(pageNum,pageSize), queryWrapper);</span><br><span class="line">        <span class="keyword">return</span> Result.success(page);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4、Http状态码"><a href="#4、Http状态码" class="headerlink" title="4、Http状态码"></a>4、Http状态码</h1><h3 id="200：成功"><a href="#200：成功" class="headerlink" title="200：成功"></a>200：成功</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/200.png" alt="200"></p><h3 id="400：接口参数错误"><a href="#400：接口参数错误" class="headerlink" title="400：接口参数错误"></a>400：接口参数错误</h3><p>后端需要传json格式，而此处传的是url参数，因此报400错误</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/400.png" alt="400"></p><h3 id="404：接口路径写错了或者参数写错了"><a href="#404：接口路径写错了或者参数写错了" class="headerlink" title="404：接口路径写错了或者参数写错了"></a>404：接口路径写错了或者参数写错了</h3><p>原本路径应为<a href="http://localhost:8080，而此处多添加了"/hello">http://localhost:8080，而此处多添加了&quot;/hello</a>“</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/404.png" alt="404"></p><h3 id="405：接口请求类型不匹配"><a href="#405：接口请求类型不匹配" class="headerlink" title="405：接口请求类型不匹配"></a>405：接口请求类型不匹配</h3><p>应该为POST请求，而此处选择了GET请求，所以报405错误</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/405.png" alt="405"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/405%E9%A1%B5%E9%9D%A2.png" alt="405页面"></p><h3 id="500：后台错误"><a href="#500：后台错误" class="headerlink" title="500：后台错误"></a>500：后台错误</h3><h1 id="5、-Autowired报错Could-not-autowire-No-beans-of-‘XX‘-type-found"><a href="#5、-Autowired报错Could-not-autowire-No-beans-of-‘XX‘-type-found" class="headerlink" title="5、@Autowired报错Could not autowire. No beans of ‘XX‘ type found."></a>5、@Autowired报错Could not autowire. No beans of ‘XX‘ type found.</h1><p>@Autowired的自动检测级别太高，可以使用下边的方法，或者把Error级改为提示或者警告</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Autowered%E6%8A%A5%E9%94%99%E5%A4%84%E7%90%86.png"></p><h1 id="6、工程打jar包的两种情形"><a href="#6、工程打jar包的两种情形" class="headerlink" title="6、工程打jar包的两种情形"></a>6、工程打jar包的两种情形</h1><h2 id="6-1打包插件代码"><a href="#6-1打包插件代码" class="headerlink" title="6.1打包插件代码"></a>6.1打包插件代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;excludes&gt;</span><br><span class="line">                    &lt;exclude&gt;</span><br><span class="line">                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">                    &lt;/exclude&gt;</span><br><span class="line">                &lt;/excludes&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><h2 id="6-2资源jar包"><a href="#6-2资源jar包" class="headerlink" title="6.2资源jar包"></a>6.2资源jar包</h2><p>资源jar包：点击可以先选择“compile”，然后点击“<strong>install</strong>”。</p><p>资源jar包主要存放于maven本地仓库中。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%B5%84%E6%BA%90jar%E5%8C%85.png"></p><h2 id="6-3可执行jar包"><a href="#6-3可执行jar包" class="headerlink" title="6.3可执行jar包"></a>6.3可执行jar包</h2><p>可执行jar包：点击可以先选择“compile”，然后点击“<strong>package</strong>”</p><p>可执行jar包可以在服务器或虚拟机中执行操作。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8F%AF%E6%89%A7%E8%A1%8Cjar%E5%8C%85.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 传统开发 </tag>
            
            <tag> 项目搭建 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建之SpringBoot配置归纳</title>
      <link href="/2024/03/18/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA3%E4%B9%8BSpringBoot%E9%85%8D%E7%BD%AE%E5%BD%92%E7%BA%B3/"/>
      <url>/2024/03/18/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA3%E4%B9%8BSpringBoot%E9%85%8D%E7%BD%AE%E5%BD%92%E7%BA%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="父工程-基本配置"><a href="#父工程-基本配置" class="headerlink" title="父工程(基本配置)"></a>父工程(基本配置)</h1><h2 id="1-spring-boot-starter-parent"><a href="#1-spring-boot-starter-parent" class="headerlink" title="1.spring-boot-starter-parent"></a>1.spring-boot-starter-parent</h2><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">统一管理了 Spring Boot 和相关依赖的版本，</span><br><span class="line">确保它们之间的兼容性，避免版本的冲突</span><br></pre></td></tr></table></figure><h3 id="具体写法"><a href="#具体写法" class="headerlink" title="具体写法"></a>具体写法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;version&gt;2.7.14&lt;/version&gt;</span><br><span class="line">&lt;/parent&gt;</span><br></pre></td></tr></table></figure><h2 id="2-起步依赖"><a href="#2-起步依赖" class="headerlink" title="2.起步依赖"></a>2.起步依赖</h2><h3 id="目的-1"><a href="#目的-1" class="headerlink" title="目的"></a>目的</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">简化项目开发中的依赖管理，便于管理。</span><br><span class="line">构建 Spring Boot 应用程序时，不再需要手动添加大量的依赖项或者繁琐地配置版本号。</span><br></pre></td></tr></table></figure><h3 id="具体讲解"><a href="#具体讲解" class="headerlink" title="具体讲解"></a>具体讲解</h3><p>在spring-boot-starter-parent中的spring-boot-dependencies中，具有大量的其他第三方软件的依赖，已经帮我们规定了版本。从而在我们父工程中直接继承了这些jar包和插件版本。因此，在我们使用时，无需书写依赖的版本号。</p><h3 id="具体写法-1"><a href="#具体写法-1" class="headerlink" title="具体写法"></a>具体写法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;</span><br><span class="line">        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;!--非springboot依赖版本管理--&gt;</span><br><span class="line">        &lt;mysql.version&gt;8.0.31&lt;/mysql.version&gt;</span><br><span class="line">        ...</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">    &lt;!-- mysql8 驱动包 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;$&#123;mysql.version&#125;&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure><h2 id="3-模块管理"><a href="#3-模块管理" class="headerlink" title="3.模块管理"></a>3.模块管理</h2><h3 id="具体写法-2"><a href="#具体写法-2" class="headerlink" title="具体写法"></a>具体写法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;modules&gt;</span><br><span class="line">    &lt;module&gt;employee&lt;/module&gt;</span><br><span class="line">    &lt;module&gt;towercrane&lt;/module&gt;</span><br><span class="line">    &lt;module&gt;tclive&lt;/module&gt;</span><br><span class="line">    &lt;module&gt;analysis&lt;/module&gt;</span><br><span class="line">    &lt;module&gt;user&lt;/module&gt;</span><br><span class="line">    &lt;module&gt;common&lt;/module&gt;</span><br><span class="line">&lt;/modules&gt;</span><br></pre></td></tr></table></figure><h2 id="4-打包的方式"><a href="#4-打包的方式" class="headerlink" title="4.打包的方式"></a>4.打包的方式</h2><h3 id="具体写法-3"><a href="#具体写法-3" class="headerlink" title="具体写法"></a>具体写法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;packaging&gt;pom&lt;/packaging&gt;</span><br></pre></td></tr></table></figure><h1 id="子工程（基本配置）"><a href="#子工程（基本配置）" class="headerlink" title="子工程（基本配置）"></a>子工程（基本配置）</h1><h2 id="知识一：基本操作"><a href="#知识一：基本操作" class="headerlink" title="知识一：基本操作"></a>知识一：基本操作</h2><p><strong>1、</strong>删除父工程中的src</p><p><strong>2、</strong>创建module，依旧选择maven，不勾选任何模版 -&gt; 修改模块的名字</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/module%E6%90%AD%E5%BB%BA.png" alt="module搭建1"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/module%E6%90%AD%E5%BB%BA2.png" alt="module搭建2"></p><p><strong>3、</strong>内部配置</p><p><strong>3.1、打包方式</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;packaging&gt;jar&lt;/packaging&gt;</span><br></pre></td></tr></table></figure><p><strong>3.2、打包插件</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;excludes&gt;</span><br><span class="line">                    &lt;exclude&gt;</span><br><span class="line">                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">                    &lt;/exclude&gt;</span><br><span class="line">                &lt;/excludes&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><p><strong>3.3、删除properties项</strong></p><p><strong>3.4、相关依赖添加</strong></p><pre><code>&lt;dependencies&gt;        &lt;!--开发Web应用程序的Spring Boot依赖项--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;!--注解所需的导包--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;            &lt;optional&gt;true&lt;/optional&gt;        &lt;/dependency&gt;        ...&lt;/dependencies&gt;</code></pre><p><strong>3.4.1说明</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1、spring-boot-starter-web包含了spring-boot-starter，无需再打spring-boot-starter的依赖进来。</span><br><span class="line">2、@Service注解的依赖包为Spring Framework，由父项目spring-boot-starter-parent自动引入。</span><br><span class="line">3、在父工程中将依赖导入，在子工程中只需通过&lt;dependency&gt;导入对应的内容即可。</span><br><span class="line">如：</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>4、</strong>目录完善</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/module%E7%9A%84%E7%9B%AE%E5%BD%95%E5%AE%8C%E5%96%84.png" alt="module目录完善"></p><h2 id="知识二：补充内容：内嵌Web容器-默认Tomcat"><a href="#知识二：补充内容：内嵌Web容器-默认Tomcat" class="headerlink" title="知识二：补充内容：内嵌Web容器(默认Tomcat)"></a>知识二：补充内容：内嵌Web容器(默认Tomcat)</h2><h3 id="具有3个类型的内嵌Web容器"><a href="#具有3个类型的内嵌Web容器" class="headerlink" title="具有3个类型的内嵌Web容器"></a>具有3个类型的内嵌Web容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tomcat(默认)：应用广，负载若干较重的组件</span><br><span class="line">jetty：轻量级，负载性能不及tomcat</span><br><span class="line">undertow：负载性能勉强与tomcat相同</span><br></pre></td></tr></table></figure><h3 id="tomcat讲解"><a href="#tomcat讲解" class="headerlink" title="tomcat讲解"></a>tomcat讲解</h3><p><strong>tomcat默认并行度上限为200</strong>。</p><p>在spring-boot-starter-web依赖中具有spring-boot-starter-tomcat依赖，已经帮我们设置好了，默认使用tomcat服务器</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/tomcat.png"></p><p><strong>解释</strong>：将tomcat执行流程转化为对象，将这个对象交给spring管理，因此相当于在我们springboot中内嵌了一个服务器。</p><h3 id="更换内嵌Web容器"><a href="#更换内嵌Web容器" class="headerlink" title="更换内嵌Web容器"></a>更换内嵌Web容器</h3><h4 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--排除tomcat容器--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">    &lt;exclusions&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;</span><br><span class="line">        &lt;/exclusion&gt;</span><br><span class="line">    &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--undertow容器(轻量级，支持nio，比tomcat较好),即：tomccat的优化版--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="配置（需知点）"><a href="#配置（需知点）" class="headerlink" title="配置（需知点）"></a>配置（需知点）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># undertow容器</span><br><span class="line">undertow:</span><br><span class="line">  accesslog:</span><br><span class="line">    enabled: true</span><br><span class="line">    dir: ../logs</span><br><span class="line">  max-http-post-size: 1024      # 默认为0（意为不受限制）</span><br><span class="line">  threads:</span><br><span class="line">    worker: 10                  # 处理请求（默认 io*8）</span><br><span class="line">    io: 4                       # nio线程数（CPU一核一线）</span><br><span class="line">  buffer-size: 1024             # 池化内存管理</span><br><span class="line">  direct-buffers: true          # nio直接分配堆外内存</span><br></pre></td></tr></table></figure><h1 id="必备配置"><a href="#必备配置" class="headerlink" title="必备配置"></a>必备配置</h1><h2 id="整合lombok"><a href="#整合lombok" class="headerlink" title="整合lombok"></a>整合lombok</h2><h3 id="何为lombok？"><a href="#何为lombok？" class="headerlink" title="何为lombok？"></a>何为lombok？</h3><p> Lombok是一个Java库,能【自动插入编辑器并构建工具】,简化Java开发。主要【常用的注解】有：@Data，@Getter，@Setter，@NoArgsConstructor，@AllArgsConstructor，@ToString，@EqualsAndHashCode，@Slf4j，@Log4j</p><h3 id="具体讲解-1"><a href="#具体讲解-1" class="headerlink" title="具体讲解"></a>具体讲解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、entity层：</span><br><span class="line">@Data注解：在JavaBean中使用，这个注解包含范围最广，它包含getter、setter、toString、equals、hashCode方法，即当使用当前注解时，会自动生成@Data包含的所有方法；</span><br><span class="line">@NoArgsConstructor注解：在JavaBean中使用，使用此注解会生成对应的无参构造方法；</span><br><span class="line">@AllArgsConstructor注解：在JavaBean中使用，使用此注解会生成对应的有参构造方法；</span><br><span class="line">@ToString注解：在JavaBean中使用，使用此注解会自动重写对应的toStirng方法；</span><br><span class="line">@EqualsAndHashCode注解：在JavaBean中使用，使用此注解会自动重写对应的equals方法和hashCode方法；</span><br><span class="line"></span><br><span class="line">2、service层：</span><br><span class="line">@Slf4j：在需要打印日志的类中使用，当项目中使用了slf4j打印日志框架时使用该注解，会简化日志的打印流程，只需调用info方法即可；</span><br></pre></td></tr></table></figure><h3 id="lombok配置（子工程）"><a href="#lombok配置（子工程）" class="headerlink" title="lombok配置（子工程）"></a>lombok配置（子工程）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--注解所需的导包--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="整合hutool"><a href="#整合hutool" class="headerlink" title="整合hutool"></a>整合hutool</h2><h3 id="4-1、何为hutool？"><a href="#4-1、何为hutool？" class="headerlink" title="4.1、何为hutool？"></a>4.1、何为hutool？</h3><p>Hutool是一个小而全的国产的Java工具类库。</p><h3 id="4-2、hutool配置"><a href="#4-2、hutool配置" class="headerlink" title="4.2、hutool配置"></a>4.2、hutool配置</h3><h4 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;hutool.version&gt;5.8.20&lt;/hutool.version&gt;</span><br></pre></td></tr></table></figure><h4 id="依赖-1"><a href="#依赖-1" class="headerlink" title="依赖"></a>依赖</h4><p><strong>父工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Hutool-all:小而全的Java工具类库 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;hutool.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>子工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--hutool-all:小而全的Java工具类库--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="后端数据库"><a href="#后端数据库" class="headerlink" title="后端&lt;&#x3D;&#x3D;&#x3D;&gt;数据库"></a>后端&lt;&#x3D;&#x3D;&#x3D;&gt;数据库</h1><h2 id="1、"><a href="#1、" class="headerlink" title="1、&lt;整合Mysql&gt;"></a>1、&lt;整合Mysql&gt;</h2><h3 id="Mysql配置（虚拟机）"><a href="#Mysql配置（虚拟机）" class="headerlink" title="Mysql配置（虚拟机）"></a>Mysql配置（虚拟机）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--mysql驱动包：连接虚拟机--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;8.0.33&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="Mysql配置（windows）"><a href="#Mysql配置（windows）" class="headerlink" title="Mysql配置（windows）"></a>Mysql配置（windows）</h3><h4 id="1-版本号"><a href="#1-版本号" class="headerlink" title="1.版本号"></a>1.版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mysql.version&gt;8.0.31&lt;/mysql.version&gt;</span><br></pre></td></tr></table></figure><h4 id="2-依赖"><a href="#2-依赖" class="headerlink" title="2.依赖"></a>2.依赖</h4><h5 id="2-1父工程"><a href="#2-1父工程" class="headerlink" title="2.1父工程"></a>2.1父工程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- mysql8 驱动包 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;mysql.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h5 id="2-2子工程"><a href="#2-2子工程" class="headerlink" title="2.2子工程"></a>2.2子工程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- mysql8 驱动包 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="3-yml配置"><a href="#3-yml配置" class="headerlink" title="3.yml配置"></a>3.yml配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql://localhost:3306/zhou?useSSL=true&amp;useUnicode=true&amp;characterEncoding=utf-8</span><br><span class="line">    username: root</span><br><span class="line">    password: zhou13306250032</span><br></pre></td></tr></table></figure><h5 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driverClassName: 固定写法</span><br><span class="line">    url: jdbc:mysql://地址/【数据库名】?配置项1&amp;配置项2</span><br><span class="line">    username: 数据库账户名</span><br><span class="line">    password: 数据库账户密码</span><br></pre></td></tr></table></figure><h2 id="2"><a href="#2" class="headerlink" title="2.&lt;整合Mybatis Plus&gt;"></a>2.&lt;整合Mybatis Plus&gt;</h2><h3 id="2-1、何为Mybatis-Plus？"><a href="#2-1、何为Mybatis-Plus？" class="headerlink" title="2.1、何为Mybatis Plus？"></a>2.1、何为Mybatis Plus？</h3><p>MyBatis Plus(简称 MP)是一款 MyBatis 的增强工具。用于【**后端与数据库进行简化交互(连接)**】的一种持久层框架，基于MyBatis，MyBatis内部则封装了jdbc的持久层框架。在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p><h3 id="2-2、Mybatis-Plus配置"><a href="#2-2、Mybatis-Plus配置" class="headerlink" title="2.2、Mybatis Plus配置"></a>2.2、Mybatis Plus配置</h3><h4 id="2-2-1版本号"><a href="#2-2-1版本号" class="headerlink" title="2.2.1版本号"></a>2.2.1版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mybatis.plus.version&gt;3.5.0&lt;/mybatis.plus.version&gt;</span><br></pre></td></tr></table></figure><h4 id="2-2-2依赖"><a href="#2-2-2依赖" class="headerlink" title="2.2.2依赖"></a>2.2.2依赖</h4><h5 id="2-2-2-1父工程"><a href="#2-2-2-1父工程" class="headerlink" title="2.2.2.1父工程"></a>2.2.2.1父工程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- mybatis-plus --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;mybatis.plus.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h5 id="2-2-2-1子工程"><a href="#2-2-2-1子工程" class="headerlink" title="2.2.2.1子工程"></a>2.2.2.1子工程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- mybatis-plus --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="2-2-3yml配置"><a href="#2-2-3yml配置" class="headerlink" title="2.2.3yml配置"></a>2.2.3yml配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  type-aliases-package: org.ybg.FirstWeb.business.entity</span><br><span class="line">  mapper-locations: classpath*:mapping/*Mapper.xml</span><br><span class="line">  configuration:</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br><span class="line">    map-underscore-to-camel-case: true</span><br><span class="line">    use-column-label: true</span><br></pre></td></tr></table></figure><h5 id="解释-1"><a href="#解释-1" class="headerlink" title="解释"></a>解释</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type-aliases-package =&gt; MyBatis Plus 应该扫描的 Java 实体类的包路径,【相当于&quot;@Mapper&quot;】</span><br><span class="line">mapper-locations =&gt; MyBatis Plus 应该扫描的 XML 映射文件的路径（复杂sql）【固定】</span><br><span class="line">log-impl =&gt; MybatisPlus日志(固定写法：将日志输出到控制台)</span><br><span class="line">map-underscore-to-camel-case =&gt;是否开启下划线命名规则和驼峰命名规则之间的映射</span><br><span class="line">use-column-label =&gt; 是否使用列标签作为结果集映射的属性名</span><br></pre></td></tr></table></figure><h3 id="2-3、Mybatis-Plus中的注解-entity层"><a href="#2-3、Mybatis-Plus中的注解-entity层" class="headerlink" title="2.3、Mybatis Plus中的注解(entity层)"></a>2.3、Mybatis Plus中的注解(entity层)</h3><p><strong>具体讲解</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">类名相关：</span><br><span class="line">@TableName(&quot;tb_user&quot;)表名与类名不一致✔</span><br><span class="line"></span><br><span class="line">属性相关：</span><br><span class="line">表现形态：</span><br><span class="line">@TableId()✔</span><br><span class="line">@TableField()✔</span><br><span class="line">具体讲解：</span><br><span class="line">@TableId(type = IdType.AUTO)自增列（标识主键）✔</span><br><span class="line">value=&quot;NAME&quot;字段名不一致【若只是存在驼峰差异，开启驼峰后可或缺】✔</span><br><span class="line">exist=false非表字段，默认为true</span><br><span class="line">select=false不加入查询，默认为true</span><br><span class="line">strategy=&#x27;&#x27;字段验证，默认非空✔</span><br><span class="line">insertStrategy=&quot;FieldStrategy.xxx&quot; 在insert操作时的字段策略，是否进行空值判断，插入空值</span><br><span class="line">updateStrategy=&quot;FieldStrategy.xxx&quot; 在update操作时的字段策略，是否进行空值判断，插入空值</span><br><span class="line">whereStrategy=&quot;FieldStrategy.xxx&quot; 在where条件组装时，是否进行控制判断，将空值作为查询条件</span><br></pre></td></tr></table></figure><h2 id="3"><a href="#3" class="headerlink" title="3.&lt;整合Druid&gt;"></a>3.&lt;整合Druid&gt;</h2><h3 id="3-1、何为Druid？"><a href="#3-1、何为Druid？" class="headerlink" title="3.1、何为Druid？"></a>3.1、何为Druid？</h3><p>Druid 是阿里巴巴开源的一个【<strong>数据库连接池</strong>】实现，用于管理和优化数据库【连接】，以提高性能，稳定性和安全性。</p><p>(连接池：程序初始化时，创建多个数据库连接，将其集中管理，供程序使用确保较快的数据读写速度。)</p><h3 id="3-2、Druid配置"><a href="#3-2、Druid配置" class="headerlink" title="3.2、Druid配置"></a>3.2、Druid配置</h3><h4 id="3-2-1版本号"><a href="#3-2-1版本号" class="headerlink" title="3.2.1版本号"></a>3.2.1版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;druid.starter.version&gt;1.1.24&lt;/druid.starter.version&gt;</span><br></pre></td></tr></table></figure><p><strong>说明</strong>：<strong>druid-spring-boot-starter</strong>【包含】 <strong>Druid</strong> 相关的配置和依赖，无需手动编写配置类并注入到bean中，并加载对应的配置参数。</p><h4 id="3-2-2依赖"><a href="#3-2-2依赖" class="headerlink" title="3.2.2依赖"></a>3.2.2依赖</h4><h5 id="3-2-2-1父工程"><a href="#3-2-2-1父工程" class="headerlink" title="3.2.2.1父工程"></a>3.2.2.1父工程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- alibaba druid数据源 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;druid.starter.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h5 id="3-2-2-2子工程"><a href="#3-2-2-2子工程" class="headerlink" title="3.2.2.2子工程"></a>3.2.2.2子工程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- alibaba druid数据源 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="3-2-3yml配置-无需mysql的yml配置"><a href="#3-2-3yml配置-无需mysql的yml配置" class="headerlink" title="3.2.3yml配置(无需mysql的yml配置)"></a>3.2.3yml配置(无需mysql的yml配置)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    druid:</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">      url: jdbc:mysql://localhost:3306/zhou?useSSL=true&amp;useUnicode=true&amp;characterEncoding=utf-8</span><br><span class="line">      username: root</span><br><span class="line">      password: zhou13306250032</span><br><span class="line">      min-idle: 3</span><br><span class="line">      max-active: 8</span><br><span class="line">      max-wait: 10000</span><br><span class="line">      test-on-borrow: true</span><br><span class="line">      validation-query: select 1=1</span><br></pre></td></tr></table></figure><h3 id="3-3、Druid数据源配置"><a href="#3-3、Druid数据源配置" class="headerlink" title="3.3、Druid数据源配置"></a>3.3、Druid数据源配置</h3><pre><code># 初始连接数initial-size: 5# 最小连接池数量min-idle: 10# 最大连接池数量max-active: 20# 配置获取连接等待超时的时间max-wait: 60000# 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒time-between-eviction-runs-millis: 60000# 配置一个连接在池中最小生存的时间，单位是毫秒min-evictable-idle-time-millis: 300000# 配置检测连接是否有效validation-query: select 1=1# 配置一个连接在池中最大生存的时间，单位是毫秒maxEvictableIdleTimeMillis: 900000#申请连接的时候检测，如果空闲时间大于time-between-eviction-runs-millis，执行validation-query检测连接是否有效。test-while-idle: true#配置从连接池获取连接时，是否检查连接有效性，true每次都检查；false不检查。做了这个配置会降低性能。test-on-borrow: false#配置向连接池归还连接时，是否检查连接有效性，true每次都检查；false不检查。做了这个配置会降低性能。test-on-return: false#用于指定是否缓存预编译的 SQL 语句pool-prepared-statements: true#每个数据库连接上可以缓存的预编译SQL语句的最大数量。若已有缓存的预编译SQL语句且未达最大值，Druid 数据源将直接从缓存中获取并使用，而不需要重新创建，从而提高数据库操作的性能max-pool-prepared-statement-per-connection-size: 20#过滤器：stat是收集连接池的统计信息，实时监控连接池的运行情况，以便及时发现并解决潜在的性能问题; wall是SQL 防火墙过滤器，用于防止 SQL 注入攻击; log4j是将 Druid 数据源的日志信息整合到项目的日志系统中，方便统一管理和查看filters: stat,wall,log4j#合并多个DruidDatasource的监控数据use-global-data-source-stat: true#druid.stat.mergeSql：合并相同的 SQL 语句并统计执行次数，减少重复记录#druid.stat.slowSqlMillis：超过这个值，就会记录到慢SQL记录connect-properties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500;</code></pre><h2 id="4-整合Redis-–在虚拟机当中"><a href="#4-整合Redis-–在虚拟机当中" class="headerlink" title="4.((整合Redis))–在虚拟机当中"></a>4.((整合Redis))–在虚拟机当中</h2><h3 id="4-1、何为Redis？"><a href="#4-1、何为Redis？" class="headerlink" title="4.1、何为Redis？"></a>4.1、何为Redis？</h3><p>Redis是【基于内存的数据库】，其特点便是【快】。</p><h3 id="4-2、Redis配置"><a href="#4-2、Redis配置" class="headerlink" title="4.2、Redis配置"></a>4.2、Redis配置</h3><h4 id="版本号-1"><a href="#版本号-1" class="headerlink" title="版本号"></a>版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jedis.version&gt;3.8.0&lt;/jedis.version&gt;</span><br></pre></td></tr></table></figure><h4 id="依赖-2"><a href="#依赖-2" class="headerlink" title="依赖"></a>依赖</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- jedis : java to redis --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;jedis.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="yml配置"><a href="#yml配置" class="headerlink" title="yml配置"></a>yml配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  redis:</span><br><span class="line">    expiration: 5</span><br><span class="line">    time-unit: m</span><br><span class="line">    database: 0</span><br><span class="line">    host: 192.168.229.130</span><br><span class="line">    port: 6379</span><br><span class="line">    password: zhou13306250032</span><br><span class="line">    jedis:</span><br><span class="line">      pool:</span><br><span class="line">        min-idle: 3</span><br><span class="line">        max-idle: 5</span><br><span class="line">        max-active: 8</span><br><span class="line">        max-wait: 10</span><br></pre></td></tr></table></figure><h5 id="讲解"><a href="#讲解" class="headerlink" title="讲解"></a>讲解</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  redis:</span><br><span class="line">    expiration: 定义 Redis 中存储的数据的默认过期时间</span><br><span class="line">    time-unit: 定义过期时间的单位</span><br><span class="line">    database: redis数据库索引(默认为0)</span><br><span class="line">    host: redis服务器地址（默认为loaclhost）</span><br><span class="line">    port: redis端口（默认为6379）</span><br><span class="line">    password: 密码</span><br><span class="line">    # redis连接池配置</span><br><span class="line">    jedis:</span><br><span class="line">      pool:</span><br><span class="line">      # 最小空闲连接数（默认为0，该值只有为正数才有用）</span><br><span class="line">        min-idle: 3</span><br><span class="line">        # 最大空闲连接数（默认为8，负数表示无限）</span><br><span class="line">        max-idle: 5</span><br><span class="line">        # 最大可用连接数（默认为8，负数表示无限）</span><br><span class="line">        max-active: 8</span><br><span class="line">        # 从连接池中获取连接最大等待时间（默认为-1，单位为毫秒，负数表示无限）</span><br><span class="line">        max-wait: 10</span><br></pre></td></tr></table></figure><p>5.整合</p><h1 id="前端后端"><a href="#前端后端" class="headerlink" title="前端&lt;&#x3D;&#x3D;&#x3D;&gt;后端"></a>前端&lt;&#x3D;&#x3D;&#x3D;&gt;后端</h1><h2 id="1-整合validation"><a href="#1-整合validation" class="headerlink" title="1.整合validation"></a>1.整合validation</h2><h3 id="1-1、何为validation？"><a href="#1-1、何为validation？" class="headerlink" title="1.1、何为validation？"></a>1.1、何为validation？</h3><p>validation主要用于前端传到后端的<strong>数据校验</strong>（长度）。常用于【注册】与【登入】页面处。</p><h3 id="1-2、validation配置"><a href="#1-2、validation配置" class="headerlink" title="1.2、validation配置"></a>1.2、validation配置</h3><h4 id="1-2-1：依赖"><a href="#1-2-1：依赖" class="headerlink" title="1.2.1：依赖"></a>1.2.1：依赖</h4><p><strong>子工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- validation：数据校验 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="1-2-2：使用方式"><a href="#1-2-2：使用方式" class="headerlink" title="1.2.2：使用方式"></a>1.2.2：使用方式</h4><p><strong>一</strong>：参数为【<strong>非对象格式</strong>】，需在controller类上面添加@Validated注解。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/validation%E9%9D%9E%E5%AF%B9%E8%B1%A1.png"></p><p><strong>二</strong>：参数为【<strong>对象</strong>】，在属性前面添加@Valid注解</p><p><strong>entity内部注解</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/validation%E5%AF%B9%E8%B1%A112.0.png"></p><p><strong>controller内注解</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/validation%E5%AF%B9%E8%B1%A122.0.png"></p><p><strong>三</strong>：自定义校验</p><p> 自定义注解State</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import com.backsystem.common.validation.StateValidation;</span><br><span class="line">import javax.validation.Constraint;</span><br><span class="line">import javax.validation.Payload;</span><br><span class="line">import java.lang.annotation.*;</span><br><span class="line">import static java.lang.annotation.ElementType.FIELD;</span><br><span class="line">import static java.lang.annotation.RetentionPolicy.RUNTIME;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 1.自定义注解State</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">@Documented //元注解</span><br><span class="line">@Constraint(</span><br><span class="line">        validatedBy = &#123;StateValidation.class&#125; //指定提供校验规则的类【自定义】</span><br><span class="line">)</span><br><span class="line">@Target(&#123;FIELD&#125;) //元注解：作用于xxx上</span><br><span class="line">@Retention(RUNTIME)//元注解：在何时保留：运行时阶段保留</span><br><span class="line">public @interface State &#123;</span><br><span class="line">    //提供校验失败时的提示信息</span><br><span class="line">    String message() default &quot;state参数的值只能是已发布或者草稿&quot;;</span><br><span class="line"></span><br><span class="line">    //指定分组</span><br><span class="line">    Class&lt;?&gt;[] groups() default &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    //负载，获取到state注解的附加信息</span><br><span class="line">    Class&lt;? extends Payload&gt;[] payload() default &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自定义校验规则的类StateValidation，实现ConstraintValidator接口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import com.backsystem.common.annotate.State;</span><br><span class="line">import javax.validation.ConstraintValidator;</span><br><span class="line">import javax.validation.ConstraintValidatorContext;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 2.自定义校验规则的类StateValidation，实现ConstraintValidator接口</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">//ConstraintValidator&lt;给哪个注解提供校验规则,校验的数据类型&gt;</span><br><span class="line">public class StateValidation implements ConstraintValidator&lt;State,String&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     *</span><br><span class="line">     * @param value 将来要校验的数据</span><br><span class="line">     * @param constraintValidatorContext</span><br><span class="line">     * @return 如果返回false，则校验【不通过】；如果返回true，则校验【通过】</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext) &#123;</span><br><span class="line">        //提供校验规则</span><br><span class="line">        if (value == null)&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        if (value.equals(&quot;已发布&quot;) || value.equals(&quot;草稿&quot;))&#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在需要校验的地方使用自定义注解</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/state%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3.png"></p><h4 id="1-2-3：validation注解表"><a href="#1-2-3：validation注解表" class="headerlink" title="1.2.3：validation注解表"></a>1.2.3：validation注解表</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/validation%E6%B3%A8%E8%A7%A3%E8%A1%A8.png"></p><p><strong>注：message字段为不符合校验规则时抛出的异常信息</strong></p><h4 id="1-2-4：异常处理器GlobalExceptionHandler"><a href="#1-2-4：异常处理器GlobalExceptionHandler" class="headerlink" title="1.2.4：异常处理器GlobalExceptionHandler"></a>1.2.4：异常处理器GlobalExceptionHandler</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.util.StringUtils;</span><br><span class="line">import org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line">import org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"></span><br><span class="line">//全局异常处理器</span><br><span class="line">@RestControllerAdvice</span><br><span class="line">public class GlobalExceptionHandler &#123;</span><br><span class="line">    //validation：参数校验失败异常</span><br><span class="line">    @ExceptionHandler(ValidationException.class)</span><br><span class="line">    public Result handleException(ValidationException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        return Result.error(StringUtils.hasLength(e.getMessage()) ? e.getMessage() : &quot;操作失败&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-整合JWT-ThreadLocal"><a href="#2-整合JWT-ThreadLocal" class="headerlink" title="2.整合JWT+ThreadLocal"></a>2.整合JWT+ThreadLocal</h2><h3 id="2-1：何为JWT？"><a href="#2-1：何为JWT？" class="headerlink" title="2.1：何为JWT？"></a>2.1：何为JWT？</h3><p><strong>Token主要用于身份验证和授权的凭据，通常是一个字符串。通常使用JWT进行表示</strong>。【JWT全称JSON Web Token，以json格式进行数据的传输。】</p><p>其中<strong>JWT主要作用于登入认证的功能</strong>。JWT相当于令牌，当浏览器从登录页面得到令牌后，才可以访问其他的页面，否则无法访问。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%813.0.png"></p><h3 id="2-2：JWT组成部分讲解"><a href="#2-2：JWT组成部分讲解" class="headerlink" title="2.2：JWT组成部分讲解"></a>2.2：JWT组成部分讲解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">第一部分：Header（头）</span><br><span class="line">第二部分：Payload（有效载荷）：不可携带敏感信息,如：密码...</span><br><span class="line">第三部分：Signature（签名）</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/JWT%E7%BB%84%E6%88%90.png"></p><h3 id="2-3：ThreadLocal的讲解"><a href="#2-3：ThreadLocal的讲解" class="headerlink" title="2.3：ThreadLocal的讲解"></a>2.3：ThreadLocal的讲解</h3><p><strong>定义</strong>：ThreadLocal用于多线程环境下存储线程局部变量。它允许每个线程都有自己独立的变量副本，而不会相互影响。</p><p><strong>理解</strong>：去银行排队办理业务，每个人都有自己的服务号码，服务号码只在本人办理业务时有效，不会影响其他人。这就好比 ThreadLocal 给每个线程分配了一个“服务号码”，线程在执行时可以独立使用这个“号码”来存储自己的数据，而不会和其他线程的数据产生冲突。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/threadlocal.png"></p><p><strong>特点</strong>：</p><ol><li><strong>线程隔离：</strong> 每个线程都拥有自己独立的 ThreadLocal 实例，线程之间互不干扰，可以存储各自的数据。</li><li><strong>线程内共享：</strong> 在同一个线程内，多个方法之间可以共享同一个 ThreadLocal 实例中的数据，方便数据在方法之间传递。</li><li><strong>避免线程安全问题：</strong> 使用 ThreadLocal 可以避免多线程环境下的数据共享和竞态条件，因为每个线程都拥有自己独立的数据副本。</li></ol><h3 id="2-4：JWT-ThreadLocal配置"><a href="#2-4：JWT-ThreadLocal配置" class="headerlink" title="2.4：JWT+ThreadLocal配置"></a>2.4：JWT+ThreadLocal配置</h3><h4 id="版本号-2"><a href="#版本号-2" class="headerlink" title="版本号"></a>版本号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jwt.version&gt;4.4.0&lt;/jwt.version&gt;</span><br></pre></td></tr></table></figure><h4 id="依赖-3"><a href="#依赖-3" class="headerlink" title="依赖"></a>依赖</h4><p><strong>父工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- JWT --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;jwt.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>子工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- jwt令牌 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="具体配置项"><a href="#具体配置项" class="headerlink" title="具体配置项"></a>具体配置项</h4><p><strong>登录拦截器</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import com.backsystem.Utils.JwtUtil;</span><br><span class="line">import com.backsystem.Utils.ThreadLocalUtil;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line">import org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">//登入拦截器：传递token</span><br><span class="line">@Component</span><br><span class="line">public class LoginInterceptor implements HandlerInterceptor &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;</span><br><span class="line">        //令牌验证</span><br><span class="line">        String token = request.getHeader(&quot;Authorization&quot;);//获取令牌</span><br><span class="line">        try&#123;</span><br><span class="line">            //解析token,获取数据</span><br><span class="line">            Map&lt;String,Object&gt; claims = JwtUtil.parseToken(token);</span><br><span class="line">            //将数据存储于ThreadLocal中</span><br><span class="line">            ThreadLocalUtil.set(claims);</span><br><span class="line">            //放行</span><br><span class="line">            return true;</span><br><span class="line">        &#125;catch (Exception e)&#123;</span><br><span class="line">            //http为401错误</span><br><span class="line">            response.setStatus(401);</span><br><span class="line">            //不放行</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;</span><br><span class="line">        //清空ThreadLocal中数据</span><br><span class="line">        ThreadLocalUtil.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注入拦截器</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import com.backsystem.config.interceptor.LoginInterceptor;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line">import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class WebConfig implements WebMvcConfigurer &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private LoginInterceptor loginInterceptor;</span><br><span class="line">    //注入拦截器</span><br><span class="line">    @Override</span><br><span class="line">    public void addInterceptors(InterceptorRegistry registry) &#123;</span><br><span class="line">        //登录接口与注册接口不拦截</span><br><span class="line">        registry.addInterceptor(loginInterceptor)</span><br><span class="line">                .excludePathPatterns(&quot;/user/login&quot;,&quot;/user/register&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3、整合Excel"><a href="#3、整合Excel" class="headerlink" title="3、整合Excel"></a>3、整合Excel</h2><h4 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;poi.version&gt;5.2.3&lt;/poi.version&gt;</span><br></pre></td></tr></table></figure><h4 id="依赖-4"><a href="#依赖-4" class="headerlink" title="依赖"></a>依赖</h4><p><strong>父工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- poi : java excel --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;poi.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;poi.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>子工程</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- poi : java excel --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi&lt;/artifactId&gt;</span><br><span class="line">    &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;</span><br><span class="line">    &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 传统开发 </tag>
            
            <tag> 项目搭建 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RDB优化</title>
      <link href="/2024/03/17/RDB%E4%BC%98%E5%8C%96/"/>
      <url>/2024/03/17/RDB%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="架构设计示意图"><a href="#架构设计示意图" class="headerlink" title="架构设计示意图"></a>架构设计示意图</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%BC%A0%E7%BB%9F%E5%BC%80%E5%8F%91.png"></p><h1 id="Mysql优化：表分区，分表，分库，主从复制读写分离，集群"><a href="#Mysql优化：表分区，分表，分库，主从复制读写分离，集群" class="headerlink" title="Mysql优化：表分区，分表，分库，主从复制读写分离，集群"></a>Mysql优化：表分区，分表，分库，主从复制读写分离，集群</h1><h2 id="1-分表"><a href="#1-分表" class="headerlink" title="1.分表"></a>1.分表</h2><h3 id="表的自增列"><a href="#表的自增列" class="headerlink" title="表的自增列"></a>表的自增列</h3><p><strong>原则</strong>：交给mysql自行决定</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Table_A 自增列 start=1，step=2</span><br><span class="line">Table_B 自增列 start=2，step=2</span><br></pre></td></tr></table></figure><h2 id="2-读写分离"><a href="#2-读写分离" class="headerlink" title="2.读写分离"></a>2.读写分离</h2><p><strong>结构</strong>：主从结构</p><p><strong>架构图</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.png" alt="读写分离"></p><p><strong>具体讲解</strong></p><p><strong>1.MyCat</strong>：通过MyCat组件，其自动判定并分流引导。</p><p><strong>2.写操作</strong>：增删改（<strong>主表</strong>）</p><p>&ensp; &ensp; &ensp;特性：<strong>强一致性</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">强一致性：</span><br><span class="line">1、强关系：从表中外键的数据必须在主表中存在</span><br><span class="line">2、sql</span><br></pre></td></tr></table></figure><p>&ensp; &ensp;&ensp; 存储引擎：<strong>InnoDB</strong></p><p><strong>3.读操作</strong>：查（<strong>从表</strong>）</p><p>&ensp; &ensp; &ensp;特性：<strong>弱一致性</strong> </p><p>&ensp; &ensp;&ensp; 存储引擎：<strong>MyIsam</strong></p><p><strong>4.主从表同步</strong>：通过其内部机制【<strong>主从复制</strong>】来完成。可在配置文件中进行<strong>配置</strong></p><p>&ensp; &ensp;&ensp; &ensp;&ensp; &ensp;&ensp; &ensp;  &ensp; &ensp; <strong>bin_log</strong>实现主从复制，实现主从表的数据同步</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">具体流程：当进行写操作时，先写到主表的bin_log日志中去，再存到主表内部。</span><br><span class="line">日志中的数据为二进制，同时走内网，其速度快。即可写到从表中去。</span><br></pre></td></tr></table></figure><h1 id="缓存数据库：哨兵【纵向】，集群【横向】"><a href="#缓存数据库：哨兵【纵向】，集群【横向】" class="headerlink" title="缓存数据库：哨兵【纵向】，集群【横向】"></a>缓存数据库：哨兵【纵向】，集群【横向】</h1><h2 id="1-Redis"><a href="#1-Redis" class="headerlink" title="1.Redis"></a>1.Redis</h2><h3 id="过程讲解："><a href="#过程讲解：" class="headerlink" title="过程讲解："></a>过程讲解：</h3><p><strong>&#x3D;&gt;<strong>【</strong>定期</strong>】将关系型数据库中数据【<strong>同步</strong>】至Redis中，后期查询在Redis中进行操作</p><p><strong>弊端</strong>：实时性（一致性）问题</p><h3 id="组成讲解："><a href="#组成讲解：" class="headerlink" title="组成讲解："></a>组成讲解：</h3><p>横向：Redis集群由多个主从Redis组成</p><p>纵向【哨兵】：主从结构。每个都是由一个主Redis和一从Redis组成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">补充知识：</span><br><span class="line">Redis可以看做为一个大的HashMap</span><br><span class="line">四种基本形式：</span><br><span class="line">1.一个键对应一个值</span><br><span class="line">2.列表：键是字符串，值是List之类的类型</span><br><span class="line">3.键是普通类型，值是Set类型</span><br><span class="line">4.键是普通类型，值是Map类型</span><br></pre></td></tr></table></figure><h2 id="2-HBase"><a href="#2-HBase" class="headerlink" title="2.HBase"></a>2.HBase</h2><p><strong>特点</strong>：吞吐量大，速度快</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">吞：写 =&gt; 增删改</span><br><span class="line">吐：读 =&gt; 查</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传统开发 </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware虚拟机安装Linux(CentOS7)</title>
      <link href="/2024/03/08/VMware%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85Linux(CentOS7)/"/>
      <url>/2024/03/08/VMware%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85Linux(CentOS7)/</url>
      
        <content type="html"><![CDATA[<p>今日，将为个位读者讲解一下虚拟机Linux安装步骤！</p><h1 id="一：虚拟机的创建"><a href="#一：虚拟机的创建" class="headerlink" title="一：虚拟机的创建"></a>一：虚拟机的创建</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA1.png" alt="步骤一"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA2.png" alt="步骤二"></p><p>此处，我们先将Linux装好后再进行系统的配置</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA3.png" alt="步骤三"></p><p>版本的选项，根据自己情况自行安排。此处，我装的是</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA4.png" alt="步骤四"></p><p>此处进行命名操作，存储位置建议选个磁盘大点的盘，建议<strong>不要</strong>选择默认存储的c盘</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA5.png" alt="步骤五"></p><p>处理器配置：选【<strong>处理器数量</strong>】和【<strong>内核数量</strong>】建议根据自身处理器情况来：<strong>一般处理器数量为一半，内核数量固定为2即可</strong>。但保险起见，这里我先选个4，2。若后期需要，可以进行修改。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%84%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE.png" alt="步骤六"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%84%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE%E6%9F%A5%E7%9C%8B.png" alt="步骤六"></p><p>内存配置：<strong>一般选为内存的一半</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%86%85%E5%AD%98%E9%85%8D%E7%BD%AE.png" alt="步骤七"></p><p>网络类型：<strong>选择“NAT”</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B.png" alt="步骤八"></p><p>I&#x2F;O控制器类型：<strong>选择“LSI Logic(L) (推荐)”</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/IO%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E5%9E%8B.png" alt="步骤九"></p><p>磁盘类型：<strong>选择“SCSI(S) (推荐)”</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%A3%81%E7%9B%98%E7%B1%BB%E5%9E%8B.png" alt="步骤十"></p><p>磁盘的选择：<strong>选择“创建新虚拟机”</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%A3%81%E7%9B%98%E7%9A%84%E9%80%89%E6%8B%A9.png" alt="步骤十一"></p><p>磁盘大小：<strong>此处选择20G，对于我个人而言够用</strong>。切记，选择<strong>“拆分成多个文件”选项</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F.png" alt="步骤十二"></p><p>指定磁盘文件：<strong>默认选项即可</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%8C%87%E5%AE%9A%E7%A3%81%E7%9B%98%E6%96%87%E4%BB%B6.png" alt="步骤十三"></p><p>首选：先选择“<strong>自定义硬件</strong>”。</p><p>其次：<strong>移除 “声卡” 与 “打印机”</strong>。</p><p>然后：选中<strong>“新CD&#x2F;DVD(IDE)”</strong> -&gt; 选择<strong>“使用ISO映像文件”</strong> 。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B6.png" alt="步骤十四"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B6%E6%9C%80%E7%BB%88%E5%91%88%E7%8E%B0.png" alt="步骤十四"></p><p>ISO映射文件路径</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B61.png" alt="步骤十四"></p><p>最后：<strong>点击“关闭”，返回页面后选择“完成”即可</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B62.png" alt="步骤十四"></p><h1 id="二：安装操作系统"><a href="#二：安装操作系统" class="headerlink" title="二：安装操作系统"></a>二：安装操作系统</h1><h3 id="1）开启虚拟机"><a href="#1）开启虚拟机" class="headerlink" title="1）开启虚拟机"></a>1）开启虚拟机</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%90%AF%E5%8A%A8%E8%99%9A%E6%8B%9F%E6%9C%BA.png"></p><h3 id="2）使用键盘上下键选择Install-CentOS-7"><a href="#2）使用键盘上下键选择Install-CentOS-7" class="headerlink" title="2）使用键盘上下键选择Install CentOS 7"></a>2）使用键盘上下键选择Install CentOS 7</h3><p><strong>选择“install CentOS 7”</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/installCentOS.png"></p><h3 id="3）-会自动跳转下面的界面"><a href="#3）-会自动跳转下面的界面" class="headerlink" title="3） 会自动跳转下面的界面"></a>3） 会自动跳转下面的界面</h3><p>语言选择：<strong>推荐使用“English（US）”</strong>。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AF%AD%E8%A8%80%E9%80%89%E6%8B%A9.png"></p><h3 id="4）-定制化内容"><a href="#4）-定制化内容" class="headerlink" title="4） 定制化内容"></a>4） 定制化内容</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%9A%E5%88%B6%E5%8C%96%E5%86%85%E5%AE%B9.png"></p><h4 id="1、时间和日期，调整时差"><a href="#1、时间和日期，调整时差" class="headerlink" title="1、时间和日期，调整时差"></a>1、时间和日期，调整时差</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BA%8B%E4%BB%B6%E4%B8%8E%E6%97%A5%E6%9C%9F.png"></p><h4 id="2、软件选择"><a href="#2、软件选择" class="headerlink" title="2、软件选择"></a>2、软件选择</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9C%80%E5%B0%8F%E5%8C%96%E5%AE%89%E8%A3%85.png"></p><h4 id="3、安装位置"><a href="#3、安装位置" class="headerlink" title="3、安装位置"></a>3、安装位置</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%88%86%E5%8C%BA.png"></p><h4 id="5、修改主机名"><a href="#5、修改主机名" class="headerlink" title="5、修改主机名"></a>5、修改主机名</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D.png"></p><h4 id="6、开始安装"><a href="#6、开始安装" class="headerlink" title="6、开始安装"></a>6、开始安装</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85.png"></p><h3 id="5）-root与user创建"><a href="#5）-root与user创建" class="headerlink" title="5） root与user创建"></a>5） root与user创建</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BAroot%E4%B8%8Euser%E5%88%9B%E5%BB%BA.png"></p><h4 id="root创建"><a href="#root创建" class="headerlink" title="root创建"></a>root创建</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BAroot%E5%88%9B%E5%BB%BA.png"></p><h4 id="user创建"><a href="#user创建" class="headerlink" title="user创建"></a>user创建</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BAuser%E5%88%9B%E5%BB%BA.png"></p><h3 id="6）-完成配置并重启后即可使用"><a href="#6）-完成配置并重启后即可使用" class="headerlink" title="6） 完成配置并重启后即可使用"></a>6） 完成配置并重启后即可使用</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%8C%E6%88%90%E9%85%8D%E7%BD%AE.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%87%8D%E5%90%AF.png"></p><h1 id="三：网络设置"><a href="#三：网络设置" class="headerlink" title="三：网络设置"></a>三：网络设置</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1、查看，关闭，并禁用防火墙</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2、查看，关闭，并禁用网络管理服务</span></span><br><span class="line">systemctl status NetworkManager</span><br><span class="line">systemctl stop NetworkManager</span><br><span class="line">systemctl disable NetworkManager</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3、修改网关、IP地址等信息</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换到network-scripts目录下</span></span><br><span class="line">cd /etc/sysconfig/network-scripts/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打开ifcfg-ens33文件进行配置</span></span><br><span class="line">vi ifcfg-ens33</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BF%AE%E6%94%B9ip.png"></p><p><strong>网络IP，子网IP，子网掩码查看</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E7%BC%96%E8%AF%91%E5%99%A8.png"></p><p><strong>具体配置如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">样式展示</span></span><br><span class="line">----------------------------</span><br><span class="line">BOOTPROTO=&quot;static&quot;</span><br><span class="line">.....</span><br><span class="line">IPADDR=192.168.244.128 #子网IP【最后一位数自定义】</span><br><span class="line">NETMASK=255.255.255.0 #子网掩码</span><br><span class="line">GATEWAY=192.168.244.2 #网络IP</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=114.114.114.114</span><br><span class="line">----------------------------</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%B7%E4%BD%93IP%E7%AD%89%E9%85%8D%E7%BD%AE2.0.png"></p><p><strong>最后，重启网络服务，尝试通网络操作</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启网络服务</span></span><br><span class="line">systemctl restart network</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试网络状况</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在虚拟机内ping外网</span></span><br><span class="line">ping www.baidu.com</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在windows DOS窗口下</span></span><br><span class="line">ping 192.168.244.128</span><br></pre></td></tr></table></figure><p>在虚拟机内ping外网</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E9%83%A8ping%E7%BD%91.png"></p><p>在windows DOS窗口下</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A4%96%E7%BD%91ping%E7%BD%91.png"></p><h1 id="四：虚拟机的优化"><a href="#四：虚拟机的优化" class="headerlink" title="四：虚拟机的优化"></a>四：虚拟机的优化</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1、在系统启动时，SELinux 将会被禁用，不再对系统进行强制访问控制</span></span><br><span class="line">vi /etc/selinux/config</span><br><span class="line">------------------------------</span><br><span class="line">SELINUX=disabled</span><br><span class="line">------------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2、 SSH 服务在用户登录时不要进行 DNS 反向解析，以加快用户登录速度</span></span><br><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">------------------------------</span><br><span class="line">UseDNS no</span><br><span class="line">------------------------------</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启ssh服务</span></span><br><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure><h1 id="五：连接moba"><a href="#五：连接moba" class="headerlink" title="五：连接moba"></a>五：连接moba</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%9E%E6%8E%A5moba.png"></p><h1 id="六：本地镜像挂载"><a href="#六：本地镜像挂载" class="headerlink" title="六：本地镜像挂载"></a>六：本地镜像挂载</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地镜像挂载</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1、vmware 虚拟机设置 勾选<span class="built_in">cd</span>/dvd“已连接”</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2、编辑本地仓库配置文件之前，先备份原有的配置文件</span></span><br><span class="line">cd /etc/yum.repos.d/</span><br><span class="line">mkdir bak</span><br><span class="line">mv *.repo bak</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3、挂载光盘</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第一部分：根目录下操作</span></span><br><span class="line">mkdir /mnt/centos</span><br><span class="line">mount /dev/sr0 /mnt/centos</span><br><span class="line">------------------------------------------------------</span><br><span class="line">返回 mount: /dev/sr0 is write-protected, mounting read-only 表示成功</span><br><span class="line">------------------------------------------------------</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第二部分：编辑本地仓库配置文件 在 /etc/yum.repos.d/ 目录下进行</span></span><br><span class="line">        vi base.repo</span><br><span class="line">        ----------------------</span><br><span class="line">        [local]</span><br><span class="line">        name=local</span><br><span class="line">        baseurl=file:///mnt/centos</span><br><span class="line">        gpgcheck=0</span><br><span class="line">        enabled=1</span><br><span class="line">        ----------------------</span><br></pre></td></tr></table></figure><h1 id="七：远程镜像源设置"><a href="#七：远程镜像源设置" class="headerlink" title="七：远程镜像源设置"></a>七：远程镜像源设置</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">远程镜像源设置</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装 wget 命令</span></span><br><span class="line">yum -y install wget</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拉取阿里远程镜像服务地址</span></span><br><span class="line">wget -O CentOs-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新yum</span></span><br><span class="line">yum -y install net-tools</span><br><span class="line">yum clean all</span><br><span class="line">        yum makecache</span><br><span class="line">        yum update -y</span><br></pre></td></tr></table></figure><h1 id="八：安装yum"><a href="#八：安装yum" class="headerlink" title="八：安装yum"></a>八：安装yum</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1、安装yum</span><br><span class="line">命令：yum -y install vim-enhanced.x86_64</span><br><span class="line">2、配置：</span><br><span class="line">vim /etc/vimrc</span><br><span class="line">在最后行书写以下内容：</span><br><span class="line">:set tabstop=4</span><br><span class="line">:set softtabstop=4</span><br><span class="line">:set shiftwidth=4</span><br></pre></td></tr></table></figure><h1 id="九：额外优化配置（可选）"><a href="#九：额外优化配置（可选）" class="headerlink" title="九：额外优化配置（可选）"></a>九：额外优化配置（可选）</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">优化存储策略</span></span><br><span class="line">    vi /etc/sysctl.conf</span><br><span class="line">    ----------------------</span><br><span class="line">    vm.max_map_count=655360</span><br><span class="line">    # 尽量避免使用swap</span><br><span class="line">    vm.swappiness=0</span><br><span class="line">    # 修改内存分配策略</span><br><span class="line">    vm.overcommit_memory=1</span><br><span class="line">    vm.overcommit_ratio=80</span><br><span class="line">    ----------------------</span><br><span class="line">    sysctl -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置安全限制</span></span><br><span class="line">    vi /etc/security/limits.conf</span><br><span class="line">    ---------------------</span><br><span class="line">    * soft nofile 65536</span><br><span class="line">    * hard nofile 65536</span><br><span class="line">    * soft nproc 65536</span><br><span class="line">    * hard nproc 65536</span><br><span class="line">    ---------------------</span><br><span class="line">        </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关闭THP(Transparent Huge Pages : 防止内存锁影响性能)</span></span><br><span class="line">    vim /etc/rc.local</span><br><span class="line">    #-----------------------------------------------------------</span><br><span class="line">    if test -f /sys/kernel/mm/transparent_hugepage/enabled; then</span><br><span class="line">    echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line">    fi</span><br><span class="line">    if test -f /sys/kernel/mm/transparent_hugepage/defrag; then</span><br><span class="line">    echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line">    fi</span><br><span class="line">    #-----------------------------------------------------------</span><br><span class="line">    </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查并安装 psmisc</span></span><br><span class="line">    rpm -qf /sbin/fuser</span><br><span class="line">    # psmisc-22.20-17.el7.x86_64</span><br><span class="line">    # 如果psmisc不存在</span><br><span class="line">    yum install psmisc -y</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 虚拟机VMware </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBase的伸缩性和可用性</title>
      <link href="/2024/03/06/HBase%E4%BC%B8%E7%BC%A9%E6%80%A7%E5%92%8C%E5%8F%AF%E7%94%A8%E6%80%A7/"/>
      <url>/2024/03/06/HBase%E4%BC%B8%E7%BC%A9%E6%80%A7%E5%92%8C%E5%8F%AF%E7%94%A8%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="伸缩性"><a href="#伸缩性" class="headerlink" title="伸缩性"></a>伸缩性</h1><h2 id="1-”伸”的讲解-split"><a href="#1-”伸”的讲解-split" class="headerlink" title="1.”伸”的讲解(split)"></a>1.”伸”的讲解(split)</h2><h3 id="策略一：增长式分裂策略-默认"><a href="#策略一：增长式分裂策略-默认" class="headerlink" title="策略一：增长式分裂策略(默认)"></a>策略一：增长式分裂策略(默认)</h3><h4 id="简化图如下："><a href="#简化图如下：" class="headerlink" title="简化图如下："></a><strong>简化图如下</strong>：</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/increasing3.0.png" alt="增长式(increasing)分裂策略"></p><h4 id="过程讲解："><a href="#过程讲解：" class="headerlink" title="过程讲解："></a><strong>过程讲解</strong>：</h4><p>客户端建表后，会在一台机器上有一个Region，客户端不断put数据进来。随着数据的增加，当Region达到阈值【阈值可以配置】时，会进行**分裂(split)**操作。</p><p>由于两个同样Region无法存在于同一个服务器上，因此需要迁移操作。由<strong>HMaster进行主导</strong>，<strong>HMaster会通知HRegionMaster将分裂出来的Region迁移到到哪台服务器上。</strong></p><p>同时<strong>HMaster会进行元数据的变更</strong>。在HMaster中的元数据记录中<strong>增加一条记录</strong>【标明Region1路径在哪台服务器上，Region2路径在哪台服务器上】</p><h4 id="存在缺陷："><a href="#存在缺陷：" class="headerlink" title="存在缺陷："></a><strong>存在缺陷</strong>：</h4><p>当进行数据迁移的时候，写数据会处于堵塞状态，从而产生一定的延迟。严重时甚至会导致数据的丢失。</p><h3 id="策略二：预分裂策略-改良版"><a href="#策略二：预分裂策略-改良版" class="headerlink" title="策略二：预分裂策略(改良版)"></a>策略二：预分裂策略(改良版)</h3><h4 id="简化图如下：-1"><a href="#简化图如下：-1" class="headerlink" title="简化图如下："></a><strong>简化图如下</strong>：</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%A2%84%E5%88%86%E8%A3%82.png" alt="预分裂策略"></p><h4 id="过程讲解：-1"><a href="#过程讲解：-1" class="headerlink" title="过程讲解："></a>过程讲解：</h4><p>在写入之前，提前预估表的数据量，算出所需分区的数量。提前在RegionServer上面进行分裂操作，即：提前把空间占好。</p><h4 id="效果："><a href="#效果：" class="headerlink" title="效果："></a>效果：</h4><p>写性能大幅度提高，速度快。</p><h4 id="数据分布均匀考虑："><a href="#数据分布均匀考虑：" class="headerlink" title="数据分布均匀考虑："></a>数据分布均匀考虑：</h4><p>可以在每个Region处设定一定的范围【以关系型数据库中表的主键为例，设定主键在1<del>100之间的进入Region1中，主键在101</del>200之间的进入Region2中，主键在201~300之间的进入Region3中】，这样数据进入Region中时会均匀的分配。</p><h4 id="预分区的实际操作："><a href="#预分区的实际操作：" class="headerlink" title="预分区的实际操作："></a>预分区的实际操作：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">7.预分区（hbase优化）</span></span><br><span class="line">7.1、预分区</span><br><span class="line">策略一：【NUMREGIONS：分区数量；SPLITALGO：分裂所采用的算法】</span><br><span class="line">create &quot;test_hbase:test_split&quot;,&quot;t1&quot;,&quot;t2&quot;,&#123;NUMREGIONS=&gt;3,SPLITALGO=&gt;&quot;UniformSplit&quot;&#125;</span><br><span class="line">策略二：【SPLITS：行键取值范围（字母或数字）】</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##取值范围：0~100,101~200,201~300,301以上</span></span></span><br><span class="line">create &quot;test_hbase:test_rowkey_split&quot;,&quot;cf1&quot;,&quot;cf2&quot;,SPLITS=&gt;[&quot;100&quot;,&quot;200&quot;,&quot;300&quot;]</span><br><span class="line"></span><br><span class="line">7.2、查看分区</span><br><span class="line">scan &quot;hbase:meta&quot;,&#123;STARTROW=&gt;&quot;test_hbase:test_rowkey_split&quot;,LIMIT=&gt;10&#125;</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">hdfs存储信息</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B.tabledesc</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B.tmp</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B28c38ce5ff401333122c00c05e521ae3</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B4493f765702cc8979678f14cbcff17ff</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B540c8c1f386356cab11f824e74d33fad</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B867157c4f6ab39ba52ac6b3b58e6cbf4</span></span><br><span class="line">---------------------------</span><br></pre></td></tr></table></figure><h2 id="2-”缩”的讲解-compact"><a href="#2-”缩”的讲解-compact" class="headerlink" title="2.”缩”的讲解(compact)"></a>2.”缩”的讲解(compact)</h2><h3 id="策略一：min-compact"><a href="#策略一：min-compact" class="headerlink" title="策略一：min_compact"></a>策略一：min_compact</h3><p><strong>具体讲解</strong>：2个小文件合并为一个大文件</p><h3 id="策略二：major-compact"><a href="#策略二：major-compact" class="headerlink" title="策略二：major_compact"></a>策略二：major_compact</h3><p><strong>具体讲解</strong>：所有小的文件合并为一个大文件</p><h3 id="必知点："><a href="#必知点：" class="headerlink" title="必知点："></a>必知点：</h3><p>**1.**由于HBase的数据会存储于HDFS中，因此大文件(合并后文件)也是有上限的，即：一个大文件最多为128M。</p><p><strong>2.<strong>合并操作：</strong>将StoreFile进行合并</strong>。</p><h1 id="可用性"><a href="#可用性" class="headerlink" title="可用性"></a>可用性</h1><h2 id="1-容灾性"><a href="#1-容灾性" class="headerlink" title="1.容灾性"></a>1.容灾性</h2><h3 id="HRegionServer容灾"><a href="#HRegionServer容灾" class="headerlink" title="HRegionServer容灾"></a>HRegionServer容灾</h3><p>由于<strong>HLog日志文件</strong>存在,实现了<strong>WAL机制（Write Ahead Log）</strong>，即：在写入具体磁盘上之前会先写到HLog日志中去。当HRegionServer死机，异常等情况出现时，HMaster会将HLog迁移到另一台服务器上，进行恢复。</p><p><strong>补充知识</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WAL机制=&gt;理论体系</span><br><span class="line">HLog=&gt;具体记录理论体系的数据载体</span><br></pre></td></tr></table></figure><h3 id="HMaster容灾"><a href="#HMaster容灾" class="headerlink" title="HMaster容灾"></a>HMaster容灾</h3><p>当ZooKeeper通过心跳察觉到HMaster出现问题时，会启动备用HMaster backup。因为ZooKeeper与HMaster和备用的HMaster backup之间都具有心跳。</p><h2 id="2-统一管理"><a href="#2-统一管理" class="headerlink" title="2.统一管理"></a>2.统一管理</h2><p>HMaster通过心跳统一管理HRegionServer。</p><p>ZooKeeper通过心跳统一管理HMaster及其备用HMaster backup。</p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> 实时数仓 </tag>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>流处理(stream)与批处理(batch)讲解</title>
      <link href="/2024/03/06/%E6%B5%81%E5%A4%84%E7%90%86%E4%B8%8E%E6%89%B9%E5%A4%84%E7%90%86/"/>
      <url>/2024/03/06/%E6%B5%81%E5%A4%84%E7%90%86%E4%B8%8E%E6%89%B9%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在大数据中，我们通常追求的是<strong>最终一致性</strong>。其主要发生于实时数仓当中。在实时数仓中，数据以流的方式一直传过来，而对于数据计算的方面，则具有两种方式——<strong>流处理</strong>和<strong>批处理</strong>。</p><p>而在真正计算时，通常采用<strong>流批一体</strong>的处理方式。流批一体指的是’’对一批数据进行整体处理”，同时结合了批处理和流处理的优点，实现了实时和批量数据处理的统一。</p><h1 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h1><p>在批处理中，通常以<strong>记录(事件)数作为边界</strong>。</p><p><strong>讲解</strong>：从某一个事件开始进行计数，达到指定数量(阈值)时，就会将它们进行计算。</p><p><strong>缺陷</strong>：时效性很难保障。【在实时数仓中，通常不采纳的】</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">无法保证时效性说明：事件与事件之间通常会有一定的延迟。若前一个事件是在1小时前到来的，而后一个事件则是在10小时后才到来，此时就很难保证时效性，无法进行【实时】。</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%89%B9%E5%A4%84%E7%90%86.png" alt="批处理"></p><h1 id="流处理"><a href="#流处理" class="headerlink" title="流处理"></a>流处理</h1><p>在流处理中，通常<strong>以水平线来标记窗口的边界</strong>。</p><h3 id="专有名词"><a href="#专有名词" class="headerlink" title="专有名词"></a><strong>专有名词</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">水位线（watermark）：时间</span><br><span class="line">窗口：固定的时间间隔，通常为3s（3000ms）</span><br></pre></td></tr></table></figure><h3 id="过程讲解"><a href="#过程讲解" class="headerlink" title="过程讲解"></a><strong>过程讲解</strong></h3><p>以第一个事件(<strong>事件本身通常带有时间</strong>)进来作为开始的水平线，当达到窗口边界，即结束的水平线时，就会将窗口内的事件进行计算。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%B5%81%E5%A4%84%E7%90%86.png" alt="流处理"></p><h3 id="常见的问题"><a href="#常见的问题" class="headerlink" title="常见的问题"></a>常见的问题</h3><h4 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h4><p>在流处理过程中，我们通常会遇到这一问题：<strong>一个事件本身就属于窗口A，但来的时候产生了延迟，事件的一部分超出了窗口的范围。</strong>此时，我们通常有两种做法。</p><h4 id="方法一：允许一定的延迟"><a href="#方法一：允许一定的延迟" class="headerlink" title="方法一：允许一定的延迟"></a>方法一：允许一定的延迟</h4><p>当出现上述情况时，我们可以<strong>采用延迟2s左右，来将事件包含在内</strong>。</p><p><strong>注意</strong>：窗口依旧是3s，但计算的周期变为了5s。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%85%81%E8%AE%B8%E4%B8%80%E5%AE%9A%E5%BB%B6%E8%BF%9F.png" alt="一定延迟"></p><h4 id="方法二：侧输出流"><a href="#方法二：侧输出流" class="headerlink" title="方法二：侧输出流"></a>方法二：侧输出流</h4><p>当出现上述情况时，我们可以采用<strong>侧输出流的方式</strong>。</p><p><strong>讲解</strong>：可以另外开一个管道，将数据向下游走，进入分钟窗口，甚至小时窗口。</p><p><strong>注意</strong>：秒级窗口和分钟窗口，小时窗口是互相<strong>分层</strong>，无影响。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%BE%A7%E8%BE%93%E5%87%BA%E6%B5%81.png" alt="侧输出流"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> 实时数仓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java集合——HashMap讲解</title>
      <link href="/2024/03/05/HashMap%E8%AE%B2%E8%A7%A3/"/>
      <url>/2024/03/05/HashMap%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="一、何为HashMap？"><a href="#一、何为HashMap？" class="headerlink" title="一、何为HashMap？"></a>一、何为HashMap？</h1><p>HashMap，又名Hash表或<strong>散列表</strong>。</p>]]></content>
      
      
      <categories>
          
          <category> categories </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java集合——HashMap讲解</title>
      <link href="/2024/03/05/%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E8%AE%B2%E8%A7%A3/"/>
      <url>/2024/03/05/%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="一、何为HashMap？"><a href="#一、何为HashMap？" class="headerlink" title="一、何为HashMap？"></a>一、何为HashMap？</h1><p>HashMap，又名Hash表或<strong>散列表</strong>。</p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据技术之HBase基本知识</title>
      <link href="/2024/03/04/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B9%8BHBase%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
      <url>/2024/03/04/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B9%8BHBase%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="1-NoSQL基础"><a href="#1-NoSQL基础" class="headerlink" title="1.NoSQL基础"></a>1.NoSQL基础</h1><h2 id="1-1、NoSQL全称"><a href="#1-1、NoSQL全称" class="headerlink" title="1.1、NoSQL全称"></a>1.1、NoSQL全称</h2><p><strong>全称</strong>：not only SQL(非关系型数据库)</p><h2 id="1-2、具体讲解"><a href="#1-2、具体讲解" class="headerlink" title="1.2、具体讲解"></a>1.2、具体讲解</h2><h3 id="A-不遵循传统RDBMS模型的数据库"><a href="#A-不遵循传统RDBMS模型的数据库" class="headerlink" title="A.不遵循传统RDBMS模型的数据库"></a>A.不遵循传统RDBMS模型的数据库</h3><p><strong>补充知识</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RDBMS：关系型数据库管理系统。包含mysql，oracle，DB2...</span><br></pre></td></tr></table></figure><h3 id="B-数据是非关系的，且不使用SQL作为主要的查询语言"><a href="#B-数据是非关系的，且不使用SQL作为主要的查询语言" class="headerlink" title="B.数据是非关系的，且不使用SQL作为主要的查询语言"></a>B.数据是非关系的，且不使用SQL作为主要的查询语言</h3><p><strong>补充知识</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;关系&quot;指的是【主外键】。</span><br><span class="line">其中HBase具有一套自己的命令系统，因此不使用SQL为主要查询语句</span><br></pre></td></tr></table></figure><h3 id="C-解决数据库的问题"><a href="#C-解决数据库的问题" class="headerlink" title="C.解决数据库的&lt;伸缩性和可用性&gt;问题"></a>C.解决数据库的&lt;伸缩性和可用性&gt;问题</h3><h3 id="D-不针对一致性问题，但不可完全不一致"><a href="#D-不针对一致性问题，但不可完全不一致" class="headerlink" title="D.不针对一致性问题，但不可完全不一致"></a>D.不针对一致性问题，但不可完全不一致</h3><p><strong>补充知识</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在大数据中，我们追求的是【最终一致性】。</span><br><span class="line">主要发生于实时数仓中。其数据计算通常采用——&lt;流处理和批处理&gt;</span><br></pre></td></tr></table></figure><h2 id="1-3、NoSQL与关系型数据库对比"><a href="#1-3、NoSQL与关系型数据库对比" class="headerlink" title="1.3、NoSQL与关系型数据库对比"></a>1.3、NoSQL与关系型数据库对比</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/NOSQL%E4%B8%8E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E6%AF%94.png" alt="NoSQL与关系型数据库对比"></p><h1 id="2-HBase概述"><a href="#2-HBase概述" class="headerlink" title="2.HBase概述"></a>2.HBase概述</h1><p>HBase是一个<strong>列式存储</strong>的<strong>NoSQL数据库</strong>。同时，Hbase是一个<strong>分布式HashMap</strong>，其<strong>底层数据</strong>是<strong>Key-Value(键值对)<strong>的格式。默认情况下，</strong>HBase会将数据存储于HDFS中</strong>，利用其可靠性。</p><h1 id="3-HBase特点"><a href="#3-HBase特点" class="headerlink" title="3.HBase特点"></a>3.HBase特点</h1><h3 id="最主要的两大特点-优势"><a href="#最主要的两大特点-优势" class="headerlink" title="最主要的两大特点(优势)"></a>最主要的两大特点(优势)</h3><p>**1.**列式存储</p><p>**2.**吞吐量大</p><h3 id="其余特点-优势"><a href="#其余特点-优势" class="headerlink" title="其余特点(优势)"></a>其余特点(优势)</h3><p>**1.**数据响应速度快</p><p>**2.**支持随机读写</p><p>**3.**可扩展性(可扩展20000+节点)</p><p>**4.**高并发</p><h1 id="4-HBase架构"><a href="#4-HBase架构" class="headerlink" title="4.HBase架构"></a>4.HBase架构</h1><h2 id="4-1、物理架构"><a href="#4-1、物理架构" class="headerlink" title="4.1、物理架构"></a>4.1、物理架构</h2><p>HBase采用<strong>主从架构</strong>形式，主要组成：HMaster，HRegionServer，HRegion，ZooKeeper，DFS Client。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hbase%E6%9E%B6%E6%9E%84%E5%9B%BE.png" alt="HBase物理架构"></p><h3 id="4-1-1物理架构各部分讲解"><a href="#4-1-1物理架构各部分讲解" class="headerlink" title="4.1.1物理架构各部分讲解"></a>4.1.1物理架构各部分讲解</h3><p>&ensp; &ensp; &ensp;<strong>HMaster</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.是HBase集群的主节点，可以配置多个(用于备用HMaster backup)，实现HA</span><br><span class="line">2.【存储元数据】，同时处理元数据的变更</span><br><span class="line">3.负责RegionServer监视，负载均衡(分裂split)和故障迁移(容灾性)</span><br><span class="line">4.借助ZooKeeper，将元数据信息(meta)发送给客户端</span><br></pre></td></tr></table></figure><p>&ensp; &ensp; &ensp;<strong>HRegionServer</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.负责管理HBase的实际数据</span><br><span class="line">2.维护HLog</span><br><span class="line">3.刷新缓存至HDFS</span><br><span class="line">4.负责处理HRegion及其切片</span><br><span class="line">5.执行Compact操作【收缩操作】</span><br></pre></td></tr></table></figure><p>&ensp; &ensp; &ensp;<strong>HRegion</strong>：分区。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">补充点：</span><br><span class="line">1.Region是HBase集群分布数据的最小单位</span><br><span class="line">2.多个同样的Region不可存在于同一个RegionServer下</span><br></pre></td></tr></table></figure><p>&ensp; &ensp; &ensp;<strong>HLog</strong>：WAL日志</p><p>&ensp; &ensp; &ensp;<strong>Store</strong>：存储区</p><p>&ensp; &ensp; &ensp;<strong>MemStore</strong>：相当于缓存区</p><p>&ensp; &ensp; &ensp;<strong>StoreFile</strong>：对HDFS上文件(HFile)的<strong>包装</strong>,其存储了<strong>映射信息</strong>【HBase存储位置,DataNode位置…】</p><p>&ensp; &ensp; &ensp;<strong>HFile</strong>：存储于HDFS上的文件，相当于一个block</p><h3 id="4-1-2读取操作："><a href="#4-1-2读取操作：" class="headerlink" title="4.1.2读取操作："></a>4.1.2读取操作：</h3><p>ZooKeeper与HMaster和备用的HMaster backup之间都具有心跳。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hbase%E8%AF%BB%E5%8F%96.png" alt="hbase读取操作"></p><p><strong>具体过程讲解</strong>：</p><p>1.客户端通过zookeeper找到HMaster【定期】通过心跳发送过来的表的元数据信息【hbase:<strong>meta</strong>】。</p><p>2.客户端获取元素信息后，就会得知表在哪台或哪几台HRegionServer上，就可直接去读取HRegionServer上的数据。</p><h3 id="4-1-3写入操作：基于内存-MemStore-写"><a href="#4-1-3写入操作：基于内存-MemStore-写" class="headerlink" title="4.1.3写入操作：基于内存(MemStore)写"></a>4.1.3写入操作：基于内存(MemStore)写</h3><p>ZooKeeper与HMaster和备用的HMaster backup之间都具有心跳。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hbase%E5%86%99%E5%85%A52.0.png" alt="hbase写入操作"></p><p><strong>具体过程讲解</strong>：</p><p>客户端进行建表操作后，表会在一台机器上形成一个Region【Region为基本单位】。客户端会通过put操作先让数据进入HLog中去【容灾性：便于恢复】，然后再进入Region中的MemStore中去，就此写入的操作完成。【<strong>只需写到内存(MemStore)中就算完成操作了</strong>】</p><p><strong>后续过程补充</strong>：可以进行<strong>配置</strong>来控制MemStore的溢写条件【一定时间间隔溢出一次(3s左右)或者一定数量溢出一次】。MemStore溢写一次形成一个StoreFile，StoreFile包装了HFile。Hfile借助DFS Client写入HDFS中的DataNode中的block上面。</p><p><strong>注意：</strong>当一个Region写满后，会进行**&lt;伸缩机制&gt;**，在另一台机器上形成一个Region继续书写。</p><h3 id="4-1-4响应速度快的体现：都是基于内存操作"><a href="#4-1-4响应速度快的体现：都是基于内存操作" class="headerlink" title="4.1.4响应速度快的体现：都是基于内存操作"></a>4.1.4响应速度快的体现：都是基于内存操作</h3><h4 id="A：读取速度快-2个"><a href="#A：读取速度快-2个" class="headerlink" title="A：读取速度快(2个)"></a>A：读取速度快(2个)</h4><h5 id="BlockCache-块缓存-缓存机制——基于内存完成"><a href="#BlockCache-块缓存-缓存机制——基于内存完成" class="headerlink" title="BlockCache(块缓存)缓存机制——基于内存完成"></a><strong>BlockCache(块缓存)缓存机制——基于内存完成</strong></h5><p><strong>解释</strong>：经常被查询的数据会从磁盘中写入BlockCache缓存中来，当再次读取的时候，直接可以在BlockCache缓存中进行读取。</p><p>【注意】：初次读取数据时，依然要读磁盘。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hbase%E8%AF%BB%E8%BF%87%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%9B%BE2.0.png" alt="hbase读过程架构图"></p><h5 id="Bloom-filter布隆过滤器——快速定位功能"><a href="#Bloom-filter布隆过滤器——快速定位功能" class="headerlink" title="Bloom filter布隆过滤器——快速定位功能"></a><strong>Bloom filter布隆过滤器——快速定位功能</strong></h5><p><strong>解释</strong>：Bloom filter相当于索引，判断所需的数据是否存在于此处的BlockCache中。</p><p>Bloom filter底层原理运用的是<strong>二进制向量</strong>，其<strong>效仿</strong>HahMap中的<strong>随机读写功能</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">补充知识：HashMap的随机读写功能讲解</span><br><span class="line">=&gt;通过键的HashCode计算得出这个键值对在HahMap的主结构当中的下标。</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Bloomfilter%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt="Bloom filter原理图"></p><p><strong>原理的详细讲解</strong>：</p><p>在此，我们自定义了三个哈希计算方式【三个Hash函数】&#x3D;&gt;避免哈希碰撞的发生。单一的哈希算法不能保证不同的元素放入不同的位置。因此此处的三个Hash函数大大降低了哈希碰撞的发生。</p><p>二进制向量一开始全为0，当我们将url数据元素(字符串string)存入hbase中的时候，其中url1通过Hahs函数1计算得出三个值，在对这三个值分别进行二进制的算术运算分别将三个位置(1,5,9)标志为1。</p><p>当我们取值的时候，布隆过滤器就会通过三个哈希函数算出三个值，再通过位的方式判断这三个位置上面都为1.若都为1，则表示这个url1数据元素在里面。因此，布隆过滤器能快速确认有没有这条url1的数据。</p><p><strong>补充</strong>：<strong>Hash函数越多，组合越多，组合碰撞的概率就越低。</strong></p><h4 id="B：写入速度快"><a href="#B：写入速度快" class="headerlink" title="B：写入速度快"></a>B：写入速度快</h4><p>基于MemStore(缓存)进行写入操作。只需写到MemStore中即可完成写的操作。</p><h2 id="4-2、逻辑架构-数据层面"><a href="#4-2、逻辑架构-数据层面" class="headerlink" title="4.2、逻辑架构(数据层面)"></a>4.2、逻辑架构(数据层面)</h2><p><strong>HBase表的逻辑结构图</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hbase%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%843.0.png" alt="HBase表的逻辑结构"></p><p><strong>名词解释</strong>：</p><ul><li><p>Column Family（列族）：HBase中的每个列都归属于某个列族，列族不能改变，一行可有多个列族，一个列族可有任意个列。</p></li><li><p>Column（列）：类似于关系型数据库中的列名。一般都是从属于某个列族，跟列族不一样，这些列都可以动态添加。</p></li><li><p>RowKey（行键）：行键是HBase记录条目的主键，物理存储时会按照RowKey的字典序排序存储，HBase基于RowKey实现索引。</p></li></ul><p><strong>补充点</strong>：<strong>行键映射列族，列族映射列</strong></p><h2 id="4-3、HBase元数据"><a href="#4-3、HBase元数据" class="headerlink" title="4.3、HBase元数据"></a>4.3、HBase元数据</h2><h3 id="4-3-1：元数据基本讲解"><a href="#4-3-1：元数据基本讲解" class="headerlink" title="4.3.1：元数据基本讲解"></a>4.3.1：元数据基本讲解</h3><p><strong>1</strong>.HBase中的HMaster负责管理元数据(<strong>meta</strong>)。</p><p><strong>2</strong>.系统目录表<strong>hbase:meta</strong>用于存放<strong>元数据</strong>。</p><p><strong>3</strong>.<strong>ZooKeeper</strong>存储<strong>hbase:meta</strong>表的<strong>位置信息</strong>。</p><h3 id="4-3-2：元数据的映射关系"><a href="#4-3-2：元数据的映射关系" class="headerlink" title="4.3.2：元数据的映射关系"></a>4.3.2：元数据的映射关系</h3><p>逻辑数据(<strong>表</strong>)存储于HBase中</p><p>物理数据(<strong>具体实际数据</strong>)存储于HDFS中</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E5%92%8C%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84%E4%B9%8B%E9%97%B4%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB.png"></p><p>由上图可知，当客户端拿到元数据的时候，就知道了<strong>逻辑数据存储在hbase上的哪个位置</strong>和<strong>物理数据存储在hdfs上的哪个位置</strong>。</p><h1 id="5-HBase主要优势讲解——列式存储与吞吐量大"><a href="#5-HBase主要优势讲解——列式存储与吞吐量大" class="headerlink" title="5.HBase主要优势讲解——列式存储与吞吐量大"></a>5.HBase主要优势讲解——列式存储与吞吐量大</h1><h2 id="优势一：列式存储"><a href="#优势一：列式存储" class="headerlink" title="优势一：列式存储"></a>优势一：列式存储</h2><h3 id="1-适合存储不规则的数据"><a href="#1-适合存储不规则的数据" class="headerlink" title="1.适合存储不规则的数据"></a>1.适合存储不规则的数据</h3><h4 id="与行式存储对比有何优势？"><a href="#与行式存储对比有何优势？" class="headerlink" title="与行式存储对比有何优势？"></a>与行式存储对比有何优势？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=&gt;【列式存储】可以和行式存储一样存储【规则的数据】之外，列式存储最大的优势在于适合存储【不规则的数据】。</span><br></pre></td></tr></table></figure><h4 id="HBase流行的原因分析"><a href="#HBase流行的原因分析" class="headerlink" title="HBase流行的原因分析"></a>HBase流行的原因分析</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=&gt;现如今，不规则的数据急剧增加，差异化的数据同时激增，因此HBase由于列式存储的特点变得越来越流行。</span><br></pre></td></tr></table></figure><h3 id="2-节约空间"><a href="#2-节约空间" class="headerlink" title="2.节约空间"></a>2.节约空间</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">列式存储可以节约因不规则数据所带来的空间上的浪费。</span><br><span class="line">=&gt;若是行式存储，会出现大量的NULL，造成空间上的浪费，而列式存储很好的解决了这一问题。</span><br></pre></td></tr></table></figure><h2 id="优势二：吞吐量大"><a href="#优势二：吞吐量大" class="headerlink" title="优势二：吞吐量大"></a>优势二：吞吐量大</h2><h3 id="1-吞量大"><a href="#1-吞量大" class="headerlink" title="1.吞量大"></a>1.吞量大</h3><h4 id="1-1：基于内存，写的速度快"><a href="#1-1：基于内存，写的速度快" class="headerlink" title="1.1：基于内存，写的速度快"></a>1.1：基于内存，写的速度快</h4><p>每一个列族对应一个存储区，每一个存储区（Store）对应一个memstore。在写操作时，只需负责将数据写入memstore内存中去即可完成写操作。无需等数据刷新至磁盘上。</p><h4 id="1-2：并行写"><a href="#1-2：并行写" class="headerlink" title="1.2：并行写"></a>1.2：并行写</h4><p>不同列族在不同的存储区（Store）中是并行进行写操作的。</p><h4 id="1-3：批量操作"><a href="#1-3：批量操作" class="headerlink" title="1.3：批量操作"></a>1.3：批量操作</h4><p>HBase是支持批量操作的。</p><p><strong>补充知识</strong>：批量的大小一般与【机器性能】有关。</p><h4 id="1-4：WAL机制——保证数据安全"><a href="#1-4：WAL机制——保证数据安全" class="headerlink" title="1.4：WAL机制——保证数据安全"></a>1.4：WAL机制——保证数据安全</h4><p>面对保证内存在写数据时可能会导致数据丢失问题中，我们通过WAL机制，借助于HLog来实现预存储功能。当内存丢失时，可以快速恢复。</p><p><strong>补充知识</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WAL机制=&gt;理论体系</span><br><span class="line">HLog=&gt;具体记录理论体系的数据载体</span><br></pre></td></tr></table></figure><h3 id="2-吐量大"><a href="#2-吐量大" class="headerlink" title="2.吐量大"></a>2.吐量大</h3><h4 id="2-1：MemStore"><a href="#2-1：MemStore" class="headerlink" title="2.1：MemStore"></a>2.1：MemStore</h4><p>数据在内存中，读取时速度快。</p><h4 id="2-2：BlockCache-块缓存-——基于内存完成"><a href="#2-2：BlockCache-块缓存-——基于内存完成" class="headerlink" title="2.2：BlockCache(块缓存)——基于内存完成"></a>2.2：BlockCache(块缓存)——基于内存完成</h4><p>首次读取时，性能并不是很快。【依然要从StoreFile中的数据读取到BlockCache中去】</p><p>之后再次读取同样的数据时，性能很快。【直接从BlockCache中进行读取】</p><h4 id="2-3：Bloom-Filter——快速定位"><a href="#2-3：Bloom-Filter——快速定位" class="headerlink" title="2.3：Bloom Filter——快速定位"></a>2.3：Bloom Filter——快速定位</h4><p>客户端读取内存时，借助于Bloom Filter来检索并定位。</p><p><strong>讲解</strong>：键通过多个哈希函数来快速的判断所要读取的数据是否在此BlockCache中或者MemStore中。因此检索的速度快，能够实现快速定位功能。</p><h4 id="总体概念图"><a href="#总体概念图" class="headerlink" title="总体概念图"></a>总体概念图</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hbase%E8%AF%BB%E8%BF%87%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%9B%BE%E7%AE%80%E5%8C%96%E7%89%882.0.png" alt="hbase读过程架构图简化版"></p><h1 id="6-HBase分布式的理解"><a href="#6-HBase分布式的理解" class="headerlink" title="6.HBase分布式的理解"></a>6.HBase分布式的理解</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hbase%E5%88%86%E5%B8%83%E5%BC%8F2.0.png"></p><p><strong>讲解</strong>：</p><p><strong>1、</strong>HDFS原本是以行存储的。但<strong>在HBase中</strong>，HDFS是以<strong>列</strong>存储。</p><p><strong>2、</strong>一个Table会被分配到大小大致相同的Region中去。在<strong>Region</strong>中存储逻辑数据，在<strong>HDFS</strong>中存储物理数据。</p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> 实时数仓 </tag>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据技术之HBase操作归纳</title>
      <link href="/2024/03/04/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B9%8BHBase%E6%93%8D%E4%BD%9C%E5%BD%92%E7%BA%B3/"/>
      <url>/2024/03/04/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B9%8BHBase%E6%93%8D%E4%BD%9C%E5%BD%92%E7%BA%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="HBase基本命令总结表-实际操作方式"><a href="#HBase基本命令总结表-实际操作方式" class="headerlink" title="HBase基本命令总结表(实际操作方式)"></a>HBase基本命令总结表(实际操作方式)</h1><h2 id="方式一：命令行窗口来操作HBase"><a href="#方式一：命令行窗口来操作HBase" class="headerlink" title="方式一：命令行窗口来操作HBase"></a>方式一：命令行窗口来操作HBase</h2><h3 id="1-通用性命令"><a href="#1-通用性命令" class="headerlink" title="1.通用性命令"></a>1.通用性命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">version版本信息</span><br><span class="line">status查看集群当前状态</span><br><span class="line">whoami查看登入者身份</span><br><span class="line">help帮助</span><br></pre></td></tr></table></figure><h3 id="2-HBase-DDL操作"><a href="#2-HBase-DDL操作" class="headerlink" title="2.HBase DDL操作"></a>2.HBase DDL操作</h3><h4 id="2-1、namespace命名空间-相当于库"><a href="#2-1、namespace命名空间-相当于库" class="headerlink" title="2.1、namespace命名空间(相当于库)"></a>2.1、namespace命名空间(相当于库)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.【查看】已创建的【所有】命名空间列表</span></span><br><span class="line">list_namespace</span><br><span class="line">---------------------------</span><br><span class="line">NAMESPACE</span><br><span class="line">default</span><br><span class="line">hbase</span><br><span class="line">hbase_test</span><br><span class="line">【test_hbase】</span><br><span class="line">4 row(s)</span><br><span class="line">Took 0.0631 seconds</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.【创建】命名空间</span></span><br><span class="line">create_namespace &quot;test_hbase&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3.【查看】【指定】命名空间(库)中的表</span></span><br><span class="line">list_namespace_tables &quot;test_hbase&quot;</span><br><span class="line">---------------------------</span><br><span class="line">TABLE</span><br><span class="line">0 row(s)</span><br><span class="line">Took 0.0301 seconds</span><br><span class="line">=&gt; []</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4.【描述】命名空间的定义</span></span><br><span class="line">describe_namespace &quot;test_hbase&quot;</span><br><span class="line">---------------------------</span><br><span class="line">DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;test_hbase&#x27;&#125;</span><br><span class="line">Quota is disabled</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">5.【删除】命名空间</span></span><br><span class="line">drop_namespace &quot;test_hbase&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-2、Table表"><a href="#2-2、Table表" class="headerlink" title="2.2、Table表"></a>2.2、Table表</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.查看所有表</span></span><br><span class="line">list</span><br><span class="line">---------------------------</span><br><span class="line">TABLE</span><br><span class="line">hbase_test:student_info</span><br><span class="line">1 row(s)</span><br><span class="line">Took 0.0202 seconds</span><br><span class="line">=&gt; [&quot;hbase_test:student_info&quot;]</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.表是否存在</span></span><br><span class="line">exists &quot;test_hbase:test_table&quot;</span><br><span class="line">---------------------------</span><br><span class="line">Table test_hbase:test_table does exist</span><br><span class="line">Took 0.0114 seconds</span><br><span class="line">=&gt; true</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3.创建表</span></span><br><span class="line">1.完整写法：</span><br><span class="line">create &quot;test_hbase:test_table&quot;,&#123;NAME =&gt; &#x27;base&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, IN_MEMORY =&gt; &#x27;false&#x27;, VERSIONS =&gt; &#x27;1&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;TRUE&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;&#125;,&#123;NAME =&gt; &#x27;sources&#x27;, BLOOMFILTER =&gt; &#x27;ROWCOL&#x27;, IN_MEMORY =&gt; &#x27;false&#x27;, VERSIONS =&gt; &#x27;3&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;655360&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;&#125;</span><br><span class="line">说明文字：</span><br><span class="line">BLOOMFILTER布隆过滤器有三个参数=&gt;ROW,ROWCOL,NONE</span><br><span class="line">ROW：只对行键进行BLOOMFILTER检测=&gt; 分裂策略</span><br><span class="line">ROWCOL：行健和列键进行BLOOMFILTER检测</span><br><span class="line">NONE：不使用BLOOMFILTER，默认值为ROW</span><br><span class="line">TTL:TTL的值以秒为单位</span><br><span class="line"></span><br><span class="line">2.简单写法：✔</span><br><span class="line">create &quot;test_hbase:test_table&quot;,&quot;base&quot;,&quot;sources&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4.查看表的定义</span></span><br><span class="line">desc &quot;test_hbase:test_table&quot;</span><br><span class="line">---------------------------</span><br><span class="line">Table test_hbase:test_table is ENABLED</span><br><span class="line">test_hbase:test_table</span><br><span class="line">COLUMN FAMILIES DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;base&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, IN_MEMORY =&gt; &#x27;false&#x27;, VERSIONS =&gt; &#x27;1&#x27;, KEEP_DE</span><br><span class="line">LETED_CELLS =&gt; &#x27;TRUE&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;</span><br><span class="line">FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;, REPLICATIO</span><br><span class="line">N_SCOPE =&gt; &#x27;0&#x27;&#125;</span><br><span class="line">&#123;NAME =&gt; &#x27;sources&#x27;, BLOOMFILTER =&gt; &#x27;ROWCOL&#x27;, IN_MEMORY =&gt; &#x27;false&#x27;, VERSIONS =&gt; &#x27;3&#x27;, K</span><br><span class="line">EEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, T</span><br><span class="line">TL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;655360&#x27;, RE</span><br><span class="line">PLICATION_SCOPE =&gt; &#x27;0&#x27;&#125;</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">5.查看表的状态</span></span><br><span class="line">is_enabled &quot;test_hbase:test_table&quot;# 是否已启用</span><br><span class="line">is_disabled &quot;test_hbase:test_table&quot;# 是否已禁用</span><br><span class="line">enable &quot;test_hbase:test_table&quot;# 启用表</span><br><span class="line">disable &quot;test_hbase:test_table&quot;# 禁用表</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">6.删除表【禁用状态的表才可以删除】</span></span><br><span class="line">disable &quot;test_hbase:test_table&quot;</span><br><span class="line">drop &quot;test_hbase:test_table&quot;</span><br></pre></td></tr></table></figure><h3 id="3-HBase-DML操作"><a href="#3-HBase-DML操作" class="headerlink" title="3.HBase DML操作"></a>3.HBase DML操作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.添加数据=&gt;列插入【一个put只能插入一列】</span></span><br><span class="line">语法：put &quot;表名&quot;,&quot;行键&quot;,&quot;列族:新增的信息&quot;,&quot;内容&quot;</span><br><span class="line">案例：【单】插入</span><br><span class="line">put &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;base:name&quot;,&quot;胡桃&quot;</span><br><span class="line">put &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;base:age&quot;,17</span><br><span class="line">put &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;base:gender&quot;,&quot;女&quot;</span><br><span class="line">put &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;sources:English&quot;,82</span><br><span class="line">put &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;sources:Math&quot;,90</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.查看全表数据【全表扫描】</span></span><br><span class="line">scan &quot;test_hbase:test_table&quot;</span><br><span class="line">---------------------------</span><br><span class="line">ROW                    COLUMN+CELL</span><br><span class="line"> 1                     column=base:age, timestamp=2024-03-07T15:07:10.339, value=17</span><br><span class="line"> 1                     column=base:gender, timestamp=2024-03-07T15:07:14.510, value=\</span><br><span class="line">                       xE5\xA5\xB3</span><br><span class="line"> 1                     column=base:name, timestamp=2024-03-07T15:07:06.009, value=\xE</span><br><span class="line">                       8\x83\xA1\xE6\xA1\x83</span><br><span class="line"> 1                     column=sources:English, timestamp=2024-03-07T15:07:17.987, val</span><br><span class="line">                       ue=86</span><br><span class="line"> 1                     column=sources:Math, timestamp=2024-03-07T15:07:21.874, value=</span><br><span class="line">                       97</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3.查看表中记录数【行数】</span></span><br><span class="line">count &quot;test_hbase:test_table&quot;</span><br><span class="line">---------------------------</span><br><span class="line">1 row(s)</span><br><span class="line">Took 0.0194 seconds</span><br><span class="line">=&gt; 1</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4.查看某列值</span></span><br><span class="line">4.1、查一行</span><br><span class="line">get &quot;test_hbase:test_table&quot;,&quot;1&quot;</span><br><span class="line">---------------------------</span><br><span class="line">COLUMN                 CELL</span><br><span class="line"> base:age              timestamp=2024-03-07T15:36:03.061, value=17</span><br><span class="line"> base:gender           timestamp=2024-03-07T15:36:03.115, value=\xE5\xA5\xB3</span><br><span class="line"> base:name             timestamp=2024-03-07T15:36:03.001, value=\xE8\x83\xA1\xE6\xA1\</span><br><span class="line">                       x83</span><br><span class="line"> sources:English       timestamp=2024-03-07T15:36:03.156, value=82</span><br><span class="line"> sources:Math          timestamp=2024-03-07T15:36:03.192, value=90</span><br><span class="line">---------------------------</span><br><span class="line"></span><br><span class="line">4.2、查一行一个列族</span><br><span class="line">get &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;sources&quot;</span><br><span class="line">---------------------------</span><br><span class="line">COLUMN                 CELL</span><br><span class="line"> sources:English       timestamp=2024-03-07T15:36:03.156, value=82</span><br><span class="line"> sources:Math          timestamp=2024-03-07T15:36:03.192, value=90</span><br><span class="line">---------------------------</span><br><span class="line"></span><br><span class="line">4.3、查一行一个列族某个列</span><br><span class="line">get &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;sources:English&quot;</span><br><span class="line">---------------------------</span><br><span class="line">COLUMN                 CELL</span><br><span class="line"> sources:English       timestamp=2024-03-07T15:36:03.156, value=82</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">5.删除数据</span></span><br><span class="line">5.1、删除【一个单元格】</span><br><span class="line">deleteall | delete &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;base:name&quot;</span><br><span class="line"></span><br><span class="line">5.2、删除【整行】</span><br><span class="line">deleteall &quot;test_hbase:test_table&quot;,&quot;2&quot;</span><br><span class="line"></span><br><span class="line">5.3、ROEPREFIXFILTEB：支持行键前缀批量删除，CACHE：修改批量的值</span><br><span class="line">deleteall &quot;test_hbase:test_table&quot;,&#123;ROEPREFIXFILTEB=&quot;时间戳TS|字符串STR&quot;,CACHE=&gt;100&#125;</span><br><span class="line"></span><br><span class="line">5.4、删除表中【所有数据】</span><br><span class="line">disable &quot;test_hbase:test_table&quot;</span><br><span class="line">truncate &quot;test_hbase:test_table&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">6.自增</span></span><br><span class="line">-- 首次针对不存在的列操作，针对存在的列会报错：Field is not a log，it‘s 10 bytes wide</span><br><span class="line">-- 此后操作可针对【新添列名】进行</span><br><span class="line">6.1、基本语法</span><br><span class="line">自增：incr &quot;[命名空间:]表名&quot;,&quot;行键&quot;,&quot;列族名:新添列名&quot;,增加数N</span><br><span class="line">查询：get_counter &quot;[命名空间:]表名&quot;,&quot;行键&quot;,&quot;列族名:新添列名&quot;</span><br><span class="line">6.2、案例展示</span><br><span class="line">scan &quot;test_hbase:test_table&quot;</span><br><span class="line">---------------------------</span><br><span class="line">ROW                    COLUMN+CELL</span><br><span class="line"> 1                     column=base:age, timestamp=2024-03-07T15:36:03.061, value=17</span><br><span class="line"> 1                     column=base:gender, timestamp=2024-03-07T15:36:03.115, value=\</span><br><span class="line">                       xE5\xA5\xB3</span><br><span class="line"> 1                     column=base:name, timestamp=2024-03-07T15:36:03.001, value=\xE</span><br><span class="line">                       8\x83\xA1\xE6\xA1\x83</span><br><span class="line"> 1                     column=sources:English, timestamp=2024-03-07T15:36:03.156, val</span><br><span class="line">                       ue=82</span><br><span class="line"> 1                     column=sources:Math, timestamp=2024-03-07T15:36:03.192, value=</span><br><span class="line">                       90</span><br><span class="line">---------------------------</span><br><span class="line">incr &quot;test_hbase:test_table&quot;,&quot;1&quot;,&quot;sources:count&quot;,2</span><br><span class="line">---------------------------</span><br><span class="line">ROW                    COLUMN+CELL</span><br><span class="line"> 1                     column=base:age, timestamp=2024-03-07T15:36:03.061, value=17</span><br><span class="line"> 1                     column=base:gender, timestamp=2024-03-07T15:36:03.115, value=\</span><br><span class="line">                       xE5\xA5\xB3</span><br><span class="line"> 1                     column=base:name, timestamp=2024-03-07T15:36:03.001, value=\xE</span><br><span class="line">                       8\x83\xA1\xE6\xA1\x83</span><br><span class="line"> 1                     column=sources:English, timestamp=2024-03-07T15:36:03.156, val</span><br><span class="line">                       ue=82</span><br><span class="line"> 1                     column=sources:Math, timestamp=2024-03-07T15:36:03.192, value=</span><br><span class="line">                       90</span><br><span class="line"> 1                     column=sources:count, timestamp=2024-03-11T20:01:16.651, value</span><br><span class="line">                       =\x00\x00\x00\x00\x00\x00\x00\x02</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">7.预分区（hbase优化）</span></span><br><span class="line">7.1、预分区</span><br><span class="line">策略一：【NUMREGIONS：分区数量；SPLITALGO：分裂所采用的算法】</span><br><span class="line">create &quot;test_hbase:test_split&quot;,&quot;t1&quot;,&quot;t2&quot;,&#123;NUMREGIONS=&gt;3,SPLITALGO=&gt;&quot;UniformSplit&quot;&#125;</span><br><span class="line">策略二：【SPLITS：行键取值范围（字母或数字）】</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##取值范围：0~100,101~200,201~300,301以上</span></span></span><br><span class="line">create &quot;test_hbase:test_rowkey_split&quot;,&quot;cf1&quot;,&quot;cf2&quot;,SPLITS=&gt;[&quot;100&quot;,&quot;200&quot;,&quot;300&quot;]</span><br><span class="line"></span><br><span class="line">7.2、查看分区</span><br><span class="line">scan &quot;hbase:meta&quot;,&#123;STARTROW=&gt;&quot;test_hbase:test_rowkey_split&quot;,LIMIT=&gt;10&#125;</span><br><span class="line">---------------------------</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">hdfs存储信息</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B.tabledesc</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B.tmp</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B28c38ce5ff401333122c00c05e521ae3</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B4493f765702cc8979678f14cbcff17ff</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B540c8c1f386356cab11f824e74d33fad</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">drwxr-xr-xrootsupergroup0 BMar 11 20:3100 B867157c4f6ab39ba52ac6b3b58e6cbf4</span></span><br><span class="line">---------------------------</span><br></pre></td></tr></table></figure><h3 id="4-TOOLS"><a href="#4-TOOLS" class="headerlink" title="4.TOOLS"></a>4.TOOLS</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 2个小文件合并为一个大文件</span></span></span><br><span class="line">1.compact &quot;[命名空间:]表名&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 所有小的文件合并为一个大文件</span></span></span><br><span class="line">2.major_compact &quot;[命名空间:]表名&quot;</span><br></pre></td></tr></table></figure><h2 id="方式二：Hive来操作HBase-HBase数据映射至Hive中进行操作"><a href="#方式二：Hive来操作HBase-HBase数据映射至Hive中进行操作" class="headerlink" title="方式二：Hive来操作HBase(HBase数据映射至Hive中进行操作)"></a>方式二：Hive来操作HBase(HBase数据映射至Hive中进行操作)</h2><h3 id="1-向HBase导入数据"><a href="#1-向HBase导入数据" class="headerlink" title="1.向HBase导入数据"></a>1.向HBase导入数据</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 基本格式</span></span></span><br><span class="line">hbase org.apache.hadoop.hbase.mapreduce.ImportTsv \</span><br><span class="line">-Dimporttsv.separator=&quot;分隔符&quot; \</span><br><span class="line">-Dimporttsv.columns=&quot;HBASE_ROW_KEY,列族:列名...&quot; \</span><br><span class="line">&quot;命名空间:表名&quot; \</span><br><span class="line">文件路径</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 案例（在shell命令窗下进行，不在hbase中进行）</span></span></span><br><span class="line">hbase org.apache.hadoop.hbase.mapreduce.ImportTsv \</span><br><span class="line">-Dimporttsv.separator=&quot;|&quot; \</span><br><span class="line">-Dimporttsv.columns=HBASE_ROW_KEY,base:name,base:age,sources:English,sources:Math \</span><br><span class="line">test_hbase:test_table \</span><br><span class="line">file:///root/file/hbase_file/students_for_import_2.csv</span><br></pre></td></tr></table></figure><h3 id="2-hive-表映射-hbase表（在hive中进行）"><a href="#2-hive-表映射-hbase表（在hive中进行）" class="headerlink" title="2.hive 表映射 hbase表（在hive中进行）"></a>2.hive 表映射 hbase表（在hive中进行）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hive中建表并导入数据【hbase数据映射到hive中】</span></span><br><span class="line">create external table yb12211.student_from_hbase(</span><br><span class="line">stu_id int,</span><br><span class="line">stu_name string,</span><br><span class="line">stu_age int,</span><br><span class="line">score_English int,</span><br><span class="line">score_Math int</span><br><span class="line">)</span><br><span class="line">stored by &#x27;org.apache.hadoop.hive.hbase.HBaseStorageHandler&#x27;</span><br><span class="line">with serdeproperties(&quot;hbase.columns.mapping&quot;=&quot;:key,base:name,base:age,sources:English,sources:Math&quot;)</span><br><span class="line">tblproperties(&quot;hbase.table.name&quot;=&quot;test_hbase:test_table&quot;);</span><br></pre></td></tr></table></figure><h2 id="方式三：Java来操作HBase——数据迁移"><a href="#方式三：Java来操作HBase——数据迁移" class="headerlink" title="方式三：Java来操作HBase——数据迁移"></a>方式三：Java来操作HBase——数据迁移</h2><h3 id="1、应用场景的讲解"><a href="#1、应用场景的讲解" class="headerlink" title="1、应用场景的讲解"></a>1、应用场景的讲解</h3><p>Java借助于HBase的API接口来操作HBase。</p><p>其核心功能主要是<strong>数据迁移</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.借助于原生的HBase的API接口和Java jdbc的API接口，将传统的关系型数据库(mysql)中的数据导入到HBase中。</span><br><span class="line">2.借助于文件流将普通的文件中的数据导入到HBase中。</span><br></pre></td></tr></table></figure><h3 id="2、初步准备工作"><a href="#2、初步准备工作" class="headerlink" title="2、初步准备工作"></a>2、初步准备工作</h3><h4 id="2-1：Maven创建"><a href="#2-1：Maven创建" class="headerlink" title="2.1：Maven创建"></a>2.1：Maven创建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">选择quick start，进行Maven创建</span><br></pre></td></tr></table></figure><h4 id="2-2：初步配置"><a href="#2-2：初步配置" class="headerlink" title="2.2：初步配置"></a>2.2：初步配置</h4><h5 id="一、删除url"><a href="#一、删除url" class="headerlink" title="一、删除url"></a>一、删除url</h5><h5 id="二、properties配置"><a href="#二、properties配置" class="headerlink" title="二、properties配置"></a>二、properties配置</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">  &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">  &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</span><br><span class="line">  &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure><h5 id="三、基本检查，确保版本一致-都为1-8-8版本"><a href="#三、基本检查，确保版本一致-都为1-8-8版本" class="headerlink" title="三、基本检查，确保版本一致&#x3D;&gt;都为1.8|8版本"></a>三、基本检查，确保版本一致&#x3D;&gt;都为1.8|8版本</h5><h5 id="四、依赖-覆盖"><a href="#四、依赖-覆盖" class="headerlink" title="四、依赖(覆盖)"></a>四、依赖(覆盖)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MySql 驱动 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;8.0.29&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- HBase 驱动 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.3.5&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- Hadoop --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.1.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;hadoop-auth&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.1.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- zookeeper --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;zookeeper&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.6.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- log4j 系统日志 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.2.17&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--json tool--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.0.47&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="3、最终的传参操作（验证操作）"><a href="#3、最终的传参操作（验证操作）" class="headerlink" title="3、最终的传参操作（验证操作）"></a>3、最终的传参操作（验证操作）</h3><h5 id="运行配置的设置——传参"><a href="#运行配置的设置——传参" class="headerlink" title="运行配置的设置——传参"></a><strong>运行配置的设置——传参</strong></h5><p>步骤一：先点击绿色的小锤子，然后再点击Edit Configurations的选项</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/rdbtohbase%E6%B5%8B%E8%AF%951.png"></p><p>步骤二：进行信息的配置</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/rdbtohbase%E6%B5%8B%E8%AF%952.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> 实时数仓 </tag>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql数据库学习</title>
      <link href="/2024/02/24/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/"/>
      <url>/2024/02/24/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="1、数据库基本认知"><a href="#1、数据库基本认知" class="headerlink" title="1、数据库基本认知"></a>1、数据库基本认知</h1><h2 id="一：数据库分类"><a href="#一：数据库分类" class="headerlink" title="一：数据库分类"></a>一：数据库分类</h2><h4 id="关系型数据库：SQL"><a href="#关系型数据库：SQL" class="headerlink" title="关系型数据库：SQL"></a>关系型数据库：SQL</h4><p>主要有MySQL,Oracle,Sql Server等，其主要通过表与表之间，行与列之间的关系进行数据的存储。可以通过外键来建立表之间的关联。</p><h4 id="非关系型数据库：NoSQL"><a href="#非关系型数据库：NoSQL" class="headerlink" title="非关系型数据库：NoSQL"></a>非关系型数据库：NoSQL</h4><p>主要有HBase，MongoDB等，其数据是非关系的，且不使用SQL作为主要的查询语言。</p><h4 id="NoSQL与SQL之间的对比"><a href="#NoSQL与SQL之间的对比" class="headerlink" title="NoSQL与SQL之间的对比"></a>NoSQL与SQL之间的对比</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/NOSQL%E4%B8%8E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E6%AF%94.png" alt="NoSQL与关系型数据库对比"></p><h2 id="二：MySQL介绍"><a href="#二：MySQL介绍" class="headerlink" title="二：MySQL介绍"></a>二：MySQL介绍</h2><p>Mysql是一个具体的关系型数据库管理系统（RDBMS），其支持使用SQL来进行数据的增删改查等操作。Mysql具有许多的优势，包括可移植性，安全性，可跨平台等，适用于各个规模的应用和项目。</p><h2 id="三：MySQL基本概念"><a href="#三：MySQL基本概念" class="headerlink" title="三：MySQL基本概念"></a>三：MySQL基本概念</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>此处所展示的是MySQL数据库基本的系统库</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%B3%BB%E7%BB%9F%E5%BA%93%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84.png"></p><p><strong>注意</strong>：当你初次打开MySQL服务时，会看见mysql,performance_schema,sys,information_schema这四个基本的系统库【不可进行删除修改等操作，即：不要动着四个系统库】。</p><h3 id="基本理论"><a href="#基本理论" class="headerlink" title="基本理论"></a>基本理论</h3><p>整个数据库的基本组成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">【库】 =&gt; 表 =&gt; 字段（列） =&gt; (名字+数据类型+约束) =&gt;  数据</span><br></pre></td></tr></table></figure><h4 id="1：数据库（database）"><a href="#1：数据库（database）" class="headerlink" title="1：数据库（database）"></a>1：数据库（database）</h4><p>数据库是按照数据结构来组织，存储和管理结构化数据的仓库，这些数据可以是文本、数字等。在MySQL中，一个数据库由多个表、视图等对象组成。</p><h4 id="2：表（table）"><a href="#2：表（table）" class="headerlink" title="2：表（table）"></a>2：表（table）</h4><p>表是数据库中的基本存储单元，用于存储数据。表由行（记录）和列（字段）组成。</p><h4 id="3：字段（field）"><a href="#3：字段（field）" class="headerlink" title="3：字段（field）"></a>3：字段（field）</h4><p>字段是表中的一列，用于存储某一类型的数据。每个字段都有一个唯一的名称和数据类型，以及可能的其他属性（如默认值、是否允许为空等）。</p><h4 id="4：数据（Data）"><a href="#4：数据（Data）" class="headerlink" title="4：数据（Data）"></a>4：数据（Data）</h4><p>数据是实际存储在表中的内容或记录，是表的实例化的表现。</p><h3 id="权限列表"><a href="#权限列表" class="headerlink" title="权限列表"></a>权限列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">##权限列表：</span><br><span class="line">对象级别(库，表)：</span><br><span class="line">增：create</span><br><span class="line">删：drop</span><br><span class="line">改：alter</span><br><span class="line">查：show</span><br><span class="line">数据级别(表内的数据)：</span><br><span class="line">增：insert</span><br><span class="line">删：delete | truncate</span><br><span class="line">改：update</span><br><span class="line">查：select</span><br></pre></td></tr></table></figure><h1 id="2、数据库的常规操作"><a href="#2、数据库的常规操作" class="headerlink" title="2、数据库的常规操作"></a>2、数据库的常规操作</h1><h2 id="DCL操作"><a href="#DCL操作" class="headerlink" title="DCL操作"></a>DCL操作</h2><h3 id="何为DCL？"><a href="#何为DCL？" class="headerlink" title="何为DCL？"></a>何为DCL？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库控制语言，用于【设置或更改】数据库【用户或角色权限】的语言</span><br></pre></td></tr></table></figure><h3 id="DCL具体操作"><a href="#DCL具体操作" class="headerlink" title="DCL具体操作"></a>DCL具体操作</h3><h4 id="A、-管理用户操作"><a href="#A、-管理用户操作" class="headerlink" title="A、*管理用户操作"></a>A、*管理用户操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">【创建用户】</span><br><span class="line">语法：create user &#x27;用户名&#x27;@&#x27;主机名&#x27; identified BY &#x27;密码&#x27;;</span><br><span class="line">案例：create user &#x27;tang&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">注意点：</span><br><span class="line">连接本地机时，主机名  =&gt;  localhost</span><br><span class="line">远程连接时，主机号   =&gt;  %</span><br><span class="line"></span><br><span class="line">【删除用户】</span><br><span class="line">语法：drop user &#x27;用户名&#x27;@&#x27;主机名&#x27;；</span><br><span class="line">案例：drop user &#x27;tang&#x27;@&#x27;localhost&#x27;;</span><br><span class="line"></span><br><span class="line">【获取当前登录用户者的信息】</span><br><span class="line">语法：select current_user();</span><br></pre></td></tr></table></figure><h4 id="B、-权限操作"><a href="#B、-权限操作" class="headerlink" title="B、*权限操作"></a>B、*权限操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.查看权限：</span><br><span class="line">语法：show grants for &#x27;用户名&#x27;@&#x27;主机名&#x27;</span><br><span class="line">案例：show grants for &#x27;tang&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">2.授予权限：</span><br><span class="line">授予部分权利：</span><br><span class="line">语法：grant 权限列表 on 数据库名.表名 to &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class="line">案例：grant create on yb.yb_score to &#x27;tang&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">授予全部权利：</span><br><span class="line">语法：grant all on 数据库名.表名 to &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class="line">案例：grant all on yb.yb_score to &#x27;tang&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">3.撤销权限：</span><br><span class="line">语法：remove 权限列表 on 数据库名.表名 from &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class="line">案例：revoke create on yb.yb_score from &#x27;tang&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure><h2 id="DDL操作（面向对象级别）"><a href="#DDL操作（面向对象级别）" class="headerlink" title="DDL操作（面向对象级别）"></a>DDL操作（面向对象级别）</h2><h3 id="必备知识"><a href="#必备知识" class="headerlink" title="必备知识"></a>必备知识</h3><h4 id="1-数据类型"><a href="#1-数据类型" class="headerlink" title="1.数据类型"></a>1.数据类型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">文本字符串类型：</span><br><span class="line">char(N) | varchar(N) ✔ | text(N)</span><br><span class="line">整数类型：</span><br><span class="line">tinyint | smallint | int(N)/int ✔ | bigint</span><br><span class="line">浮点类型：</span><br><span class="line">float | double | money | numeric</span><br><span class="line">定点数值类型：</span><br><span class="line">decimal(m,n)【m:整数加小数的长度，即总长;n:精度】 ✔</span><br><span class="line">位类型（boolean值）：</span><br><span class="line">bit【只有0（false）和1（true）】 ✔</span><br><span class="line">日期时间类型：</span><br><span class="line">date【年月日】 ✔ |time【时分秒】 ✔ | datetime ✔ | timestamp【自带默认值】 ✔</span><br></pre></td></tr></table></figure><h4 id="2-约束"><a href="#2-约束" class="headerlink" title="2.约束"></a>2.约束</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">目的：数据的完整性</span><br><span class="line">　　　　1.类型</span><br><span class="line">　　　　2.长度</span><br><span class="line">　　　　3.是否允许为空：可以为空：NULL / 不可为空：not NULL</span><br><span class="line">　　　　4.默认值：default 默认值[VALUE]</span><br><span class="line">　　　　5.唯一键：unique key</span><br><span class="line">　　　　6.主键（唯一且不能为空）：primary key =&gt;没有意义的字段做主键，以不变应万变</span><br><span class="line">　　　　　　　　　　　　单一主键</span><br><span class="line">　　　　　　　　　　　　组合主键</span><br><span class="line">　　　　7.外键(从表中的外键引用主表中的主键,主外键的数据类型与约束必须一致)：foreign key</span><br><span class="line">　　　　8.零填充：zerofill =&gt; 高位自动补零【若为1号，则以00001形式】</span><br><span class="line">　　　　9.自增列（面向数值）：auto_increment【组合使用：auto_increment primary key】</span><br><span class="line">　　　　10.无符号数值：unsigned【正数】</span><br></pre></td></tr></table></figure><h3 id="A、-库的操作："><a href="#A、-库的操作：" class="headerlink" title="A、*库的操作："></a>A、*库的操作：</h3><h4 id="【建】库"><a href="#【建】库" class="headerlink" title="【建】库"></a>【建】库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法：create database if not exists 库名;</span><br><span class="line">案例：create database if not exists test;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/mysql%E5%BB%BA%E8%A1%A8%E6%93%8D%E4%BD%9C.png"></p><h4 id="【查】看所有的库"><a href="#【查】看所有的库" class="headerlink" title="【查】看所有的库"></a>【查】看所有的库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/mysql%E6%9F%A5%E5%BA%93.png"></p><h4 id="【删】库"><a href="#【删】库" class="headerlink" title="【删】库"></a>【删】库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法：drop database if exists 库名;</span><br><span class="line">案例：drop database if exists test;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%A0%E5%BA%93mysql.png"></p><h4 id="【进入】库"><a href="#【进入】库" class="headerlink" title="【进入】库"></a>【进入】库</h4><p><strong>重点</strong>：<strong>完成这步之后才可在库里面进行建表等操作</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法：use 库名;</span><br><span class="line">案例：use test;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%BD%BF%E7%94%A8%E5%BA%93mysql.png"></p><h3 id="B、-表的操作："><a href="#B、-表的操作：" class="headerlink" title="B、*表的操作："></a>B、*表的操作：</h3><h4 id="【建】表"><a href="#【建】表" class="headerlink" title="【建】表"></a>【建】表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">create table TABLE_NAME(</span><br><span class="line">　　　　　FIELD_NAME字段名 DATA_TYPE1数据类型 CONSTRAINT1约束 （comment &#x27;注释&#x27;）,</span><br><span class="line">　　　　　FIELD_NAME字段名 DATA_TYPE2数据类型 CONSTRAINT2约束 （comment &#x27;注释&#x27;）,</span><br><span class="line">　　　　　FIELD_NAME字段名 DATA_TYPE3数据类型 CONSTRAINT3约束 （comment &#x27;注释&#x27;）,</span><br><span class="line">　　　　　...</span><br><span class="line">　　 );</span><br><span class="line">案例：</span><br><span class="line">create table student(</span><br><span class="line">stu_no int(6) zerofill auto_increment primary key,</span><br><span class="line">stu_name varchar(10) not null,</span><br><span class="line">stu_pid varchar(20) not null unique key,</span><br><span class="line">is_party_menber bit not null default 0</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%BB%BA%E8%A1%A8mysql.png"></p><h4 id="【查】表"><a href="#【查】表" class="headerlink" title="【查】表"></a>【查】表</h4><p><strong>1</strong>、<strong>显示当前数据库中所有的表</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基本语法：show tables;</span><br></pre></td></tr></table></figure><p>效果展示:</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9F%A5%E8%A1%A8mysql.png"></p><p><strong>2</strong>、<strong>展示表结构的结构定义</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">基本语法：desc 表名;</span><br><span class="line">案例：</span><br><span class="line">　　desc student;</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%A1%A8%E7%BB%93%E6%9E%84mysql.png"></p><h4 id="【改】表"><a href="#【改】表" class="headerlink" title="【改】表"></a>【改】表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">基本语法：alter table 表名;</span><br><span class="line">　　　　一般在【表外】添加一个外键的约束：</span><br><span class="line">案例：添加stu_age属性，表示学生年龄</span><br><span class="line">alter table student</span><br><span class="line">add column stu_age int; </span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%BF%AE%E6%94%B9%E8%A1%A8mysql.png"></p><h4 id="【删】表"><a href="#【删】表" class="headerlink" title="【删】表"></a>【删】表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法：drop table if exists 库名.表名</span><br><span class="line">案例：drop table if exists test.student;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%A0%E8%A1%A8mysql.png"></p><h2 id="DML操作-面向数据级别【增，删，改】"><a href="#DML操作-面向数据级别【增，删，改】" class="headerlink" title="DML操作(面向数据级别【增，删，改】)"></a>DML操作(面向数据级别【增，删，改】)</h2><h3 id="1-何为DML"><a href="#1-何为DML" class="headerlink" title="1.何为DML"></a>1.何为DML</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对数据进行操作的语言</span><br></pre></td></tr></table></figure><h3 id="2-注意点"><a href="#2-注意点" class="headerlink" title="2.注意点"></a>2.注意点</h3><p><strong>所有修改与删除都是基于主键，主键不可删改</strong></p><h3 id="3-具体操作"><a href="#3-具体操作" class="headerlink" title="3.具体操作"></a>3.具体操作</h3><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="*添加数据"></a>*添加数据</h4><p><strong>基本语法</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into TABLE_NAME(FIELD_NAME_1,...,FIELD_NAME_N) values</span><br><span class="line">(VALUE_1,...,VALUE_N)[,(VALUE_1,...,VALUE_N)]\*N;</span><br></pre></td></tr></table></figure><p><strong>案例讲解</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A.常规操作：</span><br><span class="line">    insert into student(stu_no,stu_name,stu_pid,is_party_menber,stu_age) values</span><br><span class="line">(1,&#x27;henry1&#x27;,&#x27;321234655476578965&#x27;,1,23),</span><br><span class="line">(2,&#x27;henry2&#x27;,&#x27;321234655476578964&#x27;,0,24),</span><br><span class="line">(3,&#x27;henry3&#x27;,&#x27;321234655476578963&#x27;,0,16),</span><br><span class="line">(4,&#x27;henry4&#x27;,&#x27;321234655476578962&#x27;,1,18),</span><br><span class="line">(5,&#x27;henry5&#x27;,&#x27;321234655476578961&#x27;,0,17);</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AEmysql.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">B.在两张表之间进行数据的迁移：</span><br><span class="line">1.建立一个附表：</span><br><span class="line">    create table student_copy(</span><br><span class="line">        stu_no int(6) zerofill auto_increment primary key,</span><br><span class="line">        stu_name varchar(10) not null,</span><br><span class="line">        stu_pid varchar(20) not null unique key,</span><br><span class="line">        is_party_menber bit not null default 0,</span><br><span class="line">        stu_age int</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    2.将数据导进附表</span><br><span class="line">    insert into student_copy(stu_no,stu_name,stu_pid,is_party_menber,stu_age)</span><br><span class="line">select * from student;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%BD%AC%E7%A7%BB%E6%95%B0%E6%8D%AEmysql.png"></p><h4 id="修改数据"><a href="#修改数据" class="headerlink" title="*修改数据"></a>*修改数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">1、简化描述：update 表明 set 字段名=值 [ where 条件子句 ]</span><br><span class="line">2、具体描述：</span><br><span class="line">update TABLE_NAME </span><br><span class="line">set 字段名_1 = 值1,.....,字段名_N = 值N</span><br><span class="line">where 条件【primary_key|unique_key = VALUE;】</span><br><span class="line"></span><br><span class="line">案例：</span><br><span class="line">update student set stu_pid = &#x27;123456&#x27; where stu_no = 3;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AEmysql.png"></p><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="*删除数据"></a>*删除数据</h4><p><strong>A、delete</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">delete from 表名 where 条件【 primary_key|unique_key = VALUE;【最多一次删一条数据】 】</span><br><span class="line">案例：</span><br><span class="line">delete from student_copy where stu_no = 3;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE1.png"></p><p><strong>B、truncate</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">基本语法：truncate table 表名;</span><br><span class="line">案例:</span><br><span class="line">truncate table student_copy;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE2.png"></p><p><strong>区别：</strong></p><p>*　　　　　　delete【可恢复，位置扔占着】<br>*　　　　　　truncate【不可恢复】</p><h2 id="DQL操作-面向数据级别【查】"><a href="#DQL操作-面向数据级别【查】" class="headerlink" title="DQL操作(面向数据级别【查】)"></a>DQL操作(面向数据级别【查】)</h2><h3 id="A、-简单查询"><a href="#A、-简单查询" class="headerlink" title="A、*简单查询"></a>A、*简单查询</h3><h4 id="1、基本语法"><a href="#1、基本语法" class="headerlink" title="1、基本语法"></a>1、基本语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select 字段名1 [as] 别名,字段名2 [as] 别名,...</span><br><span class="line">from 表 | 子查询</span><br><span class="line">where 条件</span><br><span class="line">order by 字段名 asc|desc</span><br><span class="line">limit OFFSET,SIZE</span><br></pre></td></tr></table></figure><p><strong>说明</strong>：limit用于【行区间的裁剪】（分页），不可用于子查询中。其通俗讲解：<strong>跳过前 OFFSET 条记录，然后返回接下来的 SIZE 条记录</strong>。</p><h4 id="2、别名介绍"><a href="#2、别名介绍" class="headerlink" title="2、别名介绍"></a>2、别名介绍</h4><p><strong>2.1</strong>、<strong>解释</strong>：</p><p>别名就是非表的原始部分</p><p><strong>2.2</strong>、<strong>基本语法</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[as] 表达式别名</span><br></pre></td></tr></table></figure><p>【<strong>说明</strong>】：as可添加，也可不添加</p><p><strong>2.3</strong>、<strong>别名的用处</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">表达式字段  =&gt; 表达式别名</span><br><span class="line">多表关联    =&gt; 表别名</span><br></pre></td></tr></table></figure><p><strong>2.4</strong>、<strong>基本案例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select stu_name name from student;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%AB%E5%90%8Dmysql.png"></p><h4 id="3、where条件格式"><a href="#3、where条件格式" class="headerlink" title="3、where条件格式"></a>3、where条件格式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">名词介绍：</span><br><span class="line">EXP:表达式</span><br><span class="line">VALUE:值</span><br><span class="line">VALUE_BIG: 比较大的值</span><br><span class="line">VALUE_SMALL: 比较小的值</span><br><span class="line"></span><br><span class="line">基本格式：</span><br><span class="line">1.等于：EXP【表达式】 = VALUE;</span><br><span class="line"></span><br><span class="line">2.不等于：EXP &lt;&gt; VALUE;</span><br><span class="line"></span><br><span class="line">3.表字段为空值|不为空：EXP is [not] NULL</span><br><span class="line"></span><br><span class="line">4.关系运算符：</span><br><span class="line">EXP &gt;[=] VALUE;</span><br><span class="line">　　　　　EXP &lt;[=] VALUE;</span><br><span class="line">　　　　　EXP between VALUE_SAMLL and VALUE_BIG </span><br><span class="line">　　　　　等同于 EXP &gt;= VALUE_SMALL and EXP &lt;= VALUE_BIG</span><br><span class="line"></span><br><span class="line">5.范围：EXP in (VAL_1,...,VAL_N | SUBQUERY)【in为范围，满足在范围中的一个即可】</span><br><span class="line"></span><br><span class="line">6.逻辑运算符：</span><br><span class="line">与：and</span><br><span class="line">　　　　　或：or</span><br><span class="line">　　　　　非：not</span><br><span class="line"></span><br><span class="line">7.模糊查询：【面向字符串】</span><br><span class="line">　　　　　EXP [not] like &#x27;通配符LIKE_EXP&#x27;【通配符的位置没有硬性要求】</span><br><span class="line">　　　　　通配符：</span><br><span class="line">　　　　　% : 任意个任意内容 【姓张：name like &#x27;张%&#x27;】</span><br><span class="line">　　　　　_ : 一个任意内容 【姓张且名字为两个字：name like &#x27;张_&#x27;】</span><br></pre></td></tr></table></figure><h3 id="B、-分页查询"><a href="#B、-分页查询" class="headerlink" title="B、*分页查询"></a>B、*分页查询</h3><h4 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h4><p>针对student表而言，现有5条数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pageNumber：页码（哪一页）</span><br><span class="line">pageSize：页容（每一页显示多少条数据）</span><br></pre></td></tr></table></figure><h4 id="1、情景一"><a href="#1、情景一" class="headerlink" title="1、情景一"></a>1、情景一</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.基本语法：</span><br><span class="line">select cell(count(1)/pageSize) from 表名;</span><br><span class="line">案例：</span><br><span class="line">条件：每一页放三条数据，查看一共有几页</span><br><span class="line">　　　　　语句：select ceil(count(1)/3) as total_page from student;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%86%E9%A1%B5%E6%9F%A5%E6%89%BE1.png"></p><h4 id="2、情景二"><a href="#2、情景二" class="headerlink" title="2、情景二"></a>2、情景二</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2.基本语法：</span><br><span class="line">select * from 表名 limit (pagenNumber-1)*pageSize,pageSize;</span><br><span class="line">案例：查某一页的数据</span><br><span class="line">条件：查找第一页的数据</span><br><span class="line">语句：select * from student limit 0,3;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A22.png"></p><h3 id="C、-分组聚合查询"><a href="#C、-分组聚合查询" class="headerlink" title="C、*分组聚合查询"></a>C、*分组聚合查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1、基本语法：</span><br><span class="line">select 字段名1 [as] 别名,字段名2 [as] 别名,...</span><br><span class="line">from 表 | 子查询</span><br><span class="line">where 条件  针对表的原始行，进行初步的筛选</span><br><span class="line">group by (字段名 as 别名)*N多字段分组：左为主，右为次【分组，同时结果会去重】</span><br><span class="line">having 条件  针对聚合后的值，进行二次筛选，产生聚合后的新列</span><br><span class="line">order by 字段名 asc|desc</span><br><span class="line">limit OFFSET,SIZE</span><br><span class="line"></span><br><span class="line">2.注意点：</span><br><span class="line">group by分组后,SELECT 子句中只能包含【被 GROUP BY 列出的列】或者【聚合函数】，否则，会报错。</span><br></pre></td></tr></table></figure><h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><table><thead><tr><th align="center">聚合函数</th><th align="center">解释</th></tr></thead><tbody><tr><td align="center">count()</td><td align="center">统计记录个数<br/>【若count(*)，则统计所有记录的个数。若括号内指定列，则不统计含null值的记录个数。】</td></tr><tr><td align="center">sum()</td><td align="center">列中数值总和【忽略null】</td></tr><tr><td align="center">avg()</td><td align="center">列的平均值【忽略null】</td></tr><tr><td align="center">max()</td><td align="center">列中最大值【忽略null】</td></tr><tr><td align="center">min()</td><td align="center">列中最小值【忽略null】</td></tr></tbody></table><h4 id="基本案例"><a href="#基本案例" class="headerlink" title="基本案例"></a>基本案例</h4><p><strong>原表的完整样貌</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/groupby%E5%8E%9F%E6%9D%A5%E8%A1%A8%E6%A0%B7%E8%B2%8C.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select class_name,count(*) as &#x27;cnt&#x27;</span><br><span class="line">from test</span><br><span class="line">group by class_name;</span><br></pre></td></tr></table></figure><p><strong>查询的结果</strong>：分组，同时结果会去重，但数量不变的</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/groupby%E6%9F%A5%E8%AF%A2%E5%90%8E%E7%9A%84%E8%A1%A8.png"></p><h3 id="D、-正则查询"><a href="#D、-正则查询" class="headerlink" title="D、*正则查询"></a>D、*正则查询</h3><table><thead><tr><th align="center">模式</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">^</td><td align="center">匹配输入字符串的开始位置</td></tr><tr><td align="center">&amp;</td><td align="center">匹配输入字符串的结束位置</td></tr><tr><td align="center">.</td><td align="center">匹配任意单个字符【除”\n”外】</td></tr><tr><td align="center">[]</td><td align="center">匹配所包含的任意一个字符，如[abc]可以匹配“apple”中的“a”</td></tr><tr><td align="center">[^]</td><td align="center">匹配未包含的任意字符，如[^abc]可以匹配“work”中的“w”</td></tr><tr><td align="center">p1|p2</td><td align="center">匹配p1或p2。列如：’z|food’能匹配”z”或”food”;’(z|f)ood’能匹配”zood”或”food”</td></tr><tr><td align="center">{n}</td><td align="center">只能匹配n个</td></tr><tr><td align="center">{n,m}</td><td align="center">最少匹配n个且最多匹配m个</td></tr><tr><td align="center">*</td><td align="center">匹配前面子表达式零个或多个。列如：zo*能匹配“z”以及”zooo”。*等价于{0,}</td></tr><tr><td align="center">+</td><td align="center">匹配前面子表达式一个或多个。列如：zo+能匹配“zo”以及”zooo”。+等价于{1,}</td></tr></tbody></table><p><strong>基本形式</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * regexp &#x27;正则表达式&#x27;</span><br></pre></td></tr></table></figure><p><strong>小型案例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select &#x27;abc&#x27; regexp &#x27;.b&#x27;</span><br></pre></td></tr></table></figure><h3 id="E、-子查询"><a href="#E、-子查询" class="headerlink" title="E、*子查询"></a>E、*子查询</h3><h4 id="1-基本语法"><a href="#1-基本语法" class="headerlink" title="1.基本语法"></a>1.基本语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select 字段名1 [as] 别名,(select...) [as] 别名, ...✔</span><br><span class="line">from 表 | 子查询✔</span><br><span class="line">where 条件【如：exists (select ...)|expA in (select expB ...)】✔</span><br><span class="line">group by 字段名</span><br><span class="line">order by 字段名 asc|desc</span><br><span class="line">limit OFFSET,SIZE</span><br></pre></td></tr></table></figure><p>【<strong>说明</strong>】：<br>一：exp 可以表示为  field【字段】,partof(field)【字段的一部分】,concat(fa,fb,….)【拼接后的】,cal(field)【数值】，….<br>二：打✔处，表示可以运用子查询<br>三：【group by】通常与【聚合函数】一起使用</p><h4 id="2-具体讲解"><a href="#2-具体讲解" class="headerlink" title="2.具体讲解"></a>2.具体讲解</h4><p><strong>数据准备</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87mysql.png"></p><p><strong>2.1：对于select的子查询</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">案例(两表联系):</span><br><span class="line">select </span><br><span class="line">        fk_talent_id,</span><br><span class="line">        (select talent_name from talents where talent_id=fk_talent_id) as talent_name,</span><br><span class="line">        subject,</span><br><span class="line">        score</span><br><span class="line">    from score;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/select%E5%AD%90%E6%9F%A5%E8%AF%A2mysql.png"></p><p>**2.2：对于from的子查询 ** </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">案例(数据表可以由子查询代替)：</span><br><span class="line">    select</span><br><span class="line">        fk_talent_id,score</span><br><span class="line">    from (</span><br><span class="line">        select fk_talent_id,score</span><br><span class="line">        from score</span><br><span class="line">        where subject in (&#x27;Java&#x27;,&#x27;JavaScript&#x27;)</span><br><span class="line">    ) as T</span><br><span class="line">    order by score DESC</span><br><span class="line">    limit 0,2;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/from%E5%AD%90%E6%9F%A5%E8%AF%A2mysql.png"></p><p><strong>2.3：对于where的子查询</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">案例：</span><br><span class="line">select fk_talent_id as id,subject,score</span><br><span class="line">    from score</span><br><span class="line">    where score &gt; (</span><br><span class="line">        select min(score)</span><br><span class="line">        from score</span><br><span class="line">        WHERE score &gt;= 90</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/where%E5%AD%90%E6%9F%A5%E8%AF%A2mysql.png"></p><h3 id="F、-连接查询"><a href="#F、-连接查询" class="headerlink" title="F、*连接查询"></a>F、*连接查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">1.原则：即可【子查询】又可【连接查询】，【首选连接查询】</span><br><span class="line">2.解释：</span><br><span class="line">多表联合查询</span><br><span class="line">join：横向拼接表，宽变大</span><br><span class="line">3.操作：</span><br><span class="line">两个主要形式：</span><br><span class="line">1.内连接（交集，两表都有的数据）：</span><br><span class="line">　　　基本语法：</span><br><span class="line">　　　　　　select A.内容,....,B.内容,... =&gt;字段别名：提高筛选的性能</span><br><span class="line">　　　　　　from tablea as A</span><br><span class="line">　　　　　　inner join tableb as B</span><br><span class="line">　　　　　　on A.主键=B.外键 (and A.fa = VALUE;) 多表√ 两表√ =&gt;【连接条件】</span><br><span class="line">　　　　　　where A.fa = VALUE; 两表√ =&gt;合并后进行【条件筛选】</span><br><span class="line"></span><br><span class="line">2.外连接（全集）：</span><br><span class="line">左外连接：【主表全集，主表都展示】</span><br><span class="line">　　　　　　基本语法：</span><br><span class="line">select A.内容,....,B.内容,... =&gt;字段别名：提高筛选的性能</span><br><span class="line">from tablea as M =&gt;左表【主表】</span><br><span class="line">left [outer] join tableb as S =&gt;从表</span><br><span class="line">on M.主键|外键=B.外键|主键 (and A.fa = VALUE;) 多表√ 两表√ =&gt;【连接条件】</span><br><span class="line">where A.fa = VALUE; 两表√ =&gt;合并后进行【条件筛选】</span><br><span class="line"></span><br><span class="line">右外连接：【主表全集，主表都展示】</span><br><span class="line">基本语法：</span><br><span class="line">select A.内容,....,B.内容,... =&gt;字段别名：提高筛选的性能</span><br><span class="line">from tablea as M =&gt;从表</span><br><span class="line">right [outer] join tableb as S =&gt;主表</span><br><span class="line">on M.主键|外键=B.外键|主键 (and A.fa = VALUE;) 多表√ 两表√ =&gt;【连接条件】</span><br><span class="line">where A.fa = VALUE; 两表√ =&gt;合并后进行【条件筛选】</span><br><span class="line"></span><br><span class="line">全外连接：full join【mysql不支持】</span><br><span class="line"></span><br><span class="line">笛卡尔积【典型：比赛时间表】</span><br><span class="line">基本语法：</span><br><span class="line">select A.内容,....,B.内容,... =&gt;字段别名：提高筛选的性能</span><br><span class="line">from tablea as A</span><br><span class="line">cross join tableb as B</span><br><span class="line">on A.主键|外键=B.外键|主键 (and A.fa = VALUE;) 多表√ 两表√ =&gt;【连接条件】</span><br><span class="line">where A.fa = VALUE; 两表√ =&gt;合并后进行【条件筛选】</span><br></pre></td></tr></table></figure><h3 id="G、-联合查询"><a href="#G、-联合查询" class="headerlink" title="G、*联合查询"></a>G、*联合查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">1.解释：</span><br><span class="line">纵向拼接表，高变大</span><br><span class="line">查询字段的数量与类型必须相同，字段名是以第一张表为准。‘</span><br><span class="line">2.union与union all的区分：</span><br><span class="line">联合 UNION:去重，排序，效率低</span><br><span class="line">联合所有 UNION ALL:不去重，不排序，效率高 √</span><br><span class="line">3.相关知识点：行转列与类转行。</span><br><span class="line">案例：</span><br><span class="line">列转行：</span><br><span class="line"> 方法：使用union all 来合并两个或多个select语句</span><br><span class="line"> 如：</span><br><span class="line">select stu_name, JavaEE as score,&#x27;JavaEE&#x27; as subject from temp_wide_score</span><br><span class="line">union all</span><br><span class="line">select stu_name, Hadoop as score,&#x27;Hadoop&#x27; as subject from temp_wide_score</span><br><span class="line">union all</span><br><span class="line">select stu_name, Spark as score,&#x27;Spark&#x27; as subject from temp_wide_score</span><br><span class="line">union all</span><br><span class="line">select stu_name, Python as score,&#x27;Python&#x27; as subject from temp_wide_score</span><br><span class="line">union all</span><br><span class="line">select stu_name, Project as score,&#x27;Project&#x27; as subject from temp_wide_score;</span><br><span class="line">类转行：</span><br><span class="line">注意：</span><br><span class="line">根据实际需求结合【聚合函数】使用</span><br><span class="line">操作：</span><br><span class="line">方法一：使用case..when..then语句</span><br><span class="line">　　　　　　　　　　　　如：</span><br><span class="line">　　　　　　　　　　　　　　select user_id,</span><br><span class="line">　　　　　　　　　　　　　　　　sum(case when subject=&#x27;语文&#x27; then score end) as &#x27;语文&#x27;,</span><br><span class="line">　　　　　　　　　　　　　　　　sum(case when subject=&#x27;数学&#x27; then score end) as &#x27;数学&#x27;,</span><br><span class="line">　　　　　　　　　　　　　　　　sum(case when subject=&#x27;英语&#x27; then score end) as &#x27;英语&#x27;</span><br><span class="line">　　　　　　　　　　　　　　from tb_score　　</span><br><span class="line">　　　　　　　　　　　　    group by user_id;</span><br><span class="line">方法二：使用if()函数</span><br><span class="line">　　　　　　　　　　　　如：</span><br><span class="line">　　　　　　　　　　　　　　select user_id,</span><br><span class="line">　　　　　　　　　　　　　　　　sum(if(subject=&#x27;语文&#x27;,score,0)) as &#x27;语文&#x27;,</span><br><span class="line">　　　　　　　　　　　　　　　　sum(if(subject=&#x27;数学&#x27;,score,0)) as &#x27;数学&#x27;,</span><br><span class="line">　　　　　　　　　　　　　　　　sum(if(subject=&#x27;英语&#x27;,score,0)) as &#x27;英语&#x27;</span><br><span class="line">　　　　　　　　　　　　　　from tb_score</span><br><span class="line">　　　　　　　　　　　　　　group by user_id;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2之ElementUI</title>
      <link href="/2024/02/19/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA7%E4%B9%8BElementUI(Vue2)/"/>
      <url>/2024/02/19/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA7%E4%B9%8BElementUI(Vue2)/</url>
      
        <content type="html"><![CDATA[<h2 id="1、ElementUI安装"><a href="#1、ElementUI安装" class="headerlink" title="1、ElementUI安装"></a>1、ElementUI安装</h2><h4 id="1-1：安装命令"><a href="#1-1：安装命令" class="headerlink" title="1.1：安装命令"></a>1.1：安装命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i element-ui -S</span><br></pre></td></tr></table></figure><p><strong>查看是否安装成功</strong></p><p>在<strong>node_modules目录</strong>下查看<strong>是否存在element-ui</strong>，若存在，则表示安装成功了。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F%E5%AE%89%E8%A3%85elementui2.0.png"></p><h4 id="1-2：main-js引用内容"><a href="#1-2：main-js引用内容" class="headerlink" title="1.2：main.js引用内容"></a>1.2：main.js引用内容</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import ElementUI from &#x27;element-ui&#x27;;</span><br><span class="line">import &#x27;element-ui/lib/theme-chalk/index.css&#x27;;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI,&#123;size: &#x27;small&#x27;&#125;);</span><br></pre></td></tr></table></figure><h2 id="2、ElementUI实际应用"><a href="#2、ElementUI实际应用" class="headerlink" title="2、ElementUI实际应用"></a>2、ElementUI实际应用</h2><h3 id="2-1：Layout布局"><a href="#2-1：Layout布局" class="headerlink" title="2.1：Layout布局"></a>2.1：Layout布局</h3><h4 id="Layout讲解"><a href="#Layout讲解" class="headerlink" title="Layout讲解"></a>Layout讲解</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">作用：将一行划分为【24个】分栏。</span><br><span class="line">各个部件的讲解：</span><br><span class="line">el-row表示一行</span><br><span class="line">:gutter来表示分栏之间的间隔</span><br><span class="line"></span><br><span class="line">el-col表示一行中的一个分栏</span><br><span class="line">:span来控制分栏所占的多少</span><br></pre></td></tr></table></figure><h4 id="Layout代码展示"><a href="#Layout代码展示" class="headerlink" title="Layout代码展示"></a>Layout代码展示</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">            &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">                &lt;div style=&quot;width: 100%; height: 300px; background-color:aqua&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">                &lt;div style=&quot;width: 100%; height: 300px; background-color:red&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/layout%E5%B8%83%E5%B1%801.png"></p><h4 id="Layout应用场景"><a href="#Layout应用场景" class="headerlink" title="Layout应用场景"></a>Layout应用场景</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/layout%E5%B8%83%E5%B1%802.png"></p><h3 id="2-2：Container布局容器"><a href="#2-2：Container布局容器" class="headerlink" title="2.2：Container布局容器"></a>2.2：Container布局容器</h3><p><code>&lt;el-container&gt;</code>：外层容器。【当子元素中包含 <code>&lt;el-header&gt;</code> 或 <code>&lt;el-footer&gt;</code> 时，全部子元素会垂直上下排列，否则会水平左右排列】</p><p><code>&lt;el-header&gt;</code>：顶栏容器。</p><p><code>&lt;el-aside&gt;</code>：侧边栏容器。</p><p><code>&lt;el-main&gt;</code>：主要区域容器。</p><p><code>&lt;el-footer&gt;</code>：底栏容器。</p><p><strong>简单小案列</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-container&gt;</span><br><span class="line">  &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">  Aside</span><br><span class="line">  &lt;/el-aside&gt;</span><br><span class="line">  &lt;el-container&gt;</span><br><span class="line">    &lt;el-header&gt; Header &lt;/el-header&gt;</span><br><span class="line">    &lt;el-main&gt; Main &lt;/el-main&gt;</span><br><span class="line">    &lt;el-footer&gt; Footer &lt;/el-footer&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/el-container&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B8%83%E5%B1%80%E5%AE%B9%E5%99%A8.png"></p><h3 id="2-3：卡片"><a href="#2-3：卡片" class="headerlink" title="2.3：卡片"></a>2.3：卡片</h3><p><strong>应用</strong>：一般用于主页面内部的部分区域搭建。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8D%A1%E7%89%87%E7%9A%84%E5%85%B7%E4%BD%93%E6%90%AD%E5%BB%BA%E5%BA%94%E7%94%A8.png"></p><p>在【<strong>el-card</strong>】处可以设置<strong>卡片阴影shadow</strong>：<strong>always</strong>，<strong>hover</strong>，<strong>never</strong>。</p><p><strong>shadow&#x3D;”always”：总是显示</strong>。</p><p><strong>shadow&#x3D;”hover”：鼠标悬浮时显示</strong>。</p><p><strong>shadow&#x3D;”never”：从不显示</strong>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">      <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">style</span>=<span class="string">&quot;width: 25%;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 卡片头部部分 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>卡片名称<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 按钮组件(可选) --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;float: right; padding: 3px 0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>操作按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 卡片内容部分 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          其他组件(表格,图片,按钮...)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;HomeView&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E4%B9%8B%E5%8D%A1%E7%89%87.png"></p><h3 id="2-4：输入框"><a href="#2-4：输入框" class="headerlink" title="2.4：输入框"></a>2.4：输入框</h3><h4 id="带图标的输入框"><a href="#带图标的输入框" class="headerlink" title="带图标的输入框"></a>带图标的输入框</h4><p><strong>prefix-icon</strong>：input组件【首部】显示图标</p><p><strong>suffix-icon</strong>：input组件【尾部】显示图标</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 图标 --&gt;</span><br><span class="line">&lt;el-input style=&quot;width: 200px;&quot; v-model=&quot;value2&quot; prefix-icon=&quot;el-icon-search&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">&lt;el-input style=&quot;width: 200px;&quot; v-model=&quot;value3&quot; suffix-icon=&quot;el-icon-user&quot;&gt;&lt;/el-input&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      value1: &#x27;&#x27;,</span><br><span class="line">      value2: &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%9B%BE%E6%A0%87%E8%BE%93%E5%85%A5%E6%A1%861.png"></p><h4 id="带输入建议的输入框"><a href="#带输入建议的输入框" class="headerlink" title="带输入建议的输入框"></a>带输入建议的输入框</h4><p>:trigger-on-focus：是否在输入框 focus 时显示建议列表，默认为true【可不写】</p><p>:fetch-suggestions：返回输入建议的方法属性，如 querySearch(queryString, cb)，在该方法中你可以在你的输入建议数据准备好时通过 cb(data) 返回到 autocomplete 组件中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-autocomplete</span><br><span class="line">            style=&quot;width: 300px&quot;</span><br><span class="line">            placeholder=&quot;请输入内容&quot;</span><br><span class="line">            :fetch-suggestions=&quot;querySearch&quot;</span><br><span class="line">            v-model=&quot;value1&quot;</span><br><span class="line">        &gt;&lt;/el-autocomplete&gt;</span><br><span class="line">            </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            value1: &#x27;&#x27;,</span><br><span class="line">            //值必须要带value</span><br><span class="line">            coffees: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        querySearch(query,cb)&#123;</span><br><span class="line">  var results = query ? this.coffees.filter(v =&gt; v.value.includes(query)) : this.coffees;</span><br><span class="line">            console.log(results)</span><br><span class="line">            // 调用 callback 返回建议列表的数据</span><br><span class="line">            cb(results);</span><br><span class="line">        &#125;,</span><br><span class="line">        //值必须要带value</span><br><span class="line">        loadAll() &#123;</span><br><span class="line">            return [</span><br><span class="line">                &#123;value: &#x27;1星巴克咖啡&#x27;&#125;,</span><br><span class="line">                &#123;value: &#x27;1雀巢咖啡&#x27;&#125;,</span><br><span class="line">                &#123;value: &#x27;3瑞幸咖啡&#x27;&#125;,</span><br><span class="line">                &#123;value: &#x27;4库迪咖啡&#x27;&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      this.coffees = this.loadAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%9B%BE%E6%A0%87%E8%BE%93%E5%85%A5%E6%A1%862.png"></p><h3 id="2-5：下拉框-选择器"><a href="#2-5：下拉框-选择器" class="headerlink" title="2.5：下拉框(选择器)"></a>2.5：下拉框(选择器)</h3><p><strong>multiple</strong>：在<strong>el-select</strong>中，表示<strong>可多选</strong>。</p><p><strong>clearable</strong>：在<strong>el-select</strong>中，表示<strong>清空</strong>。</p><p><strong>filterable</strong>：在<strong>el-select</strong>中，表示<strong>搜索</strong>。</p><p><strong>:label&#x3D;”item.name”</strong> 表示在<strong>输入框内【所展示的内容(姓名)】</strong>。</p><p><strong>:value&#x3D;”item.card”</strong>  表示<strong>输入框中展示内容【所绑定的值(身份证号)】</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-select multiple clearable v-model=&quot;select&quot; @change=&quot;changeSelectUser&quot;&gt;</span><br><span class="line">            &lt;el-option </span><br><span class="line">            v-for=&quot;(item,index) in users&quot; </span><br><span class="line">            :key=&quot;item.card&quot; </span><br><span class="line">            :label=&quot;item.name&quot;</span><br><span class="line">            :value=&quot;item.card&quot;</span><br><span class="line">            &gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">            </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            select: &#x27;&#x27;,</span><br><span class="line">            users: [</span><br><span class="line">                &#123;name: &#x27;张三&#x27;, card: &#x27;12345678910&#x27;&#125;,</span><br><span class="line">                &#123;name: &#x27;李四&#x27;, card: &#x27;12345678911&#x27;&#125;,</span><br><span class="line">                &#123;name: &#x27;王五&#x27;, card: &#x27;12345678912&#x27;&#125;,</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        changeSelectUser()&#123;</span><br><span class="line">            console.log(this.select)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%9B%BE%E6%A0%87%E8%BE%93%E5%85%A5%E6%A1%863.png"></p><p><strong>搜索下拉框</strong></p><p>默认情况下，Select 会找出所有<code>label</code>属性包含输入值的选项。因此，<strong>必须含有label选项</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-select filterable v-model=&quot;select&quot; @change=&quot;changeSelectUser&quot;&gt;</span><br><span class="line">            &lt;el-option </span><br><span class="line">            v-for=&quot;(item,index) in users&quot; </span><br><span class="line">            :key=&quot;item.card&quot; </span><br><span class="line">            :label=&quot;item.label&quot;  // 需要label选项</span><br><span class="line">            :value=&quot;item.card&quot;</span><br><span class="line">            &gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">            </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            select: &#x27;&#x27;,</span><br><span class="line">            users: [</span><br><span class="line">            // 需要label选项</span><br><span class="line">                &#123;name: &#x27;张三&#x27;,label: &#x27;张三&#x27;, card: &#x27;12345678910&#x27;&#125;,</span><br><span class="line">                &#123;name: &#x27;李四&#x27;,label: &#x27;李四&#x27;, card: &#x27;12345678911&#x27;&#125;,</span><br><span class="line">                &#123;name: &#x27;王五&#x27;,label: &#x27;王五&#x27;, card: &#x27;12345678912&#x27;&#125;,</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        changeSelectUser()&#123;</span><br><span class="line">            console.log(this.select)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%9B%BE%E6%A0%87%E8%BE%93%E5%85%A5%E6%A1%864.png"></p><h3 id="2-6：下拉菜单"><a href="#2-6：下拉菜单" class="headerlink" title="2.6：下拉菜单"></a>2.6：下拉菜单</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      // 【placement=&quot;bottom&quot; =&gt; 菜单弹出位置：正下方】</span><br><span class="line">      <span class="tag">&lt;<span class="name">el-dropdown</span> <span class="attr">placement</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items: center; cursor:default;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;logo图标&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px; width: 40px;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> &gt;</span>管理员<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        // 下拉菜单内部的信息</span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dropdown-menu</span> <span class="attr">slot</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>个人信息<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>修改密码<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-dropdown-item</span> @<span class="attr">click</span>=<span class="string">&quot;&quot;</span>&gt;</span>退出登录<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dropdown-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;HomeView&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95vue2.png"></p><h3 id="2-7：按钮"><a href="#2-7：按钮" class="headerlink" title="2.7：按钮"></a>2.7：按钮</h3><h4 id="单选按钮"><a href="#单选按钮" class="headerlink" title="单选按钮"></a>单选按钮</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-radio-group v-model=&quot;radio&quot; @change=&quot;selectRadio&quot;&gt;</span><br><span class="line">            &lt;el-radio label=&quot;男&quot;&gt;&lt;/el-radio&gt;</span><br><span class="line">            &lt;el-radio label=&quot;女&quot;&gt;&lt;/el-radio&gt;</span><br><span class="line">        &lt;/el-radio-group&gt;</span><br><span class="line">            </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            radio: &#x27;&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        selectRadio()&#123;</span><br><span class="line">            console.log(this.radio)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8D%95%E9%80%89%E6%8C%89%E9%92%AE2.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8D%95%E9%80%89%E6%8C%89%E9%92%AE1.png"></p><h4 id="多选按钮"><a href="#多选按钮" class="headerlink" title="多选按钮"></a>多选按钮</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-checkbox-group v-model=&quot;checkList&quot; @change=&quot;selectList&quot;&gt;</span><br><span class="line">            &lt;el-checkbox label=&quot;复选框 A&quot;&gt;&lt;/el-checkbox&gt;</span><br><span class="line">            &lt;el-checkbox label=&quot;复选框 B&quot;&gt;&lt;/el-checkbox&gt;</span><br><span class="line">            &lt;el-checkbox label=&quot;复选框 C&quot;&gt;&lt;/el-checkbox&gt;</span><br><span class="line">            &lt;el-checkbox label=&quot;复选框 D&quot;&gt;&lt;/el-checkbox&gt;</span><br><span class="line">        &lt;/el-checkbox-group&gt;</span><br><span class="line">            </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            checkList: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        selectList()&#123;</span><br><span class="line">            console.log(this.checkList)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%9A%E9%80%89%E6%A1%861.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%9A%E9%80%89%E6%A1%862.png"></p><h3 id="2-8：日期选择器"><a href="#2-8：日期选择器" class="headerlink" title="2.8：日期选择器"></a>2.8：日期选择器</h3><p>【<strong>重点</strong>：<strong>一定要设置value-format</strong>】</p><h4 id="日期date"><a href="#日期date" class="headerlink" title="日期date"></a>日期date</h4><p>**type&#x3D;”date”**：日期。</p><p><strong>value-format&#x3D;”yyyy-MM-dd”</strong> 格式化,将日期转化为所熟知的格式：年月日【一定要设置】。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- 日期date --&gt;</span><br><span class="line">        &lt;el-date-picker </span><br><span class="line">        v-model=&quot;date&quot; </span><br><span class="line">        type=&quot;date&quot; </span><br><span class="line">        placeholder=&quot;选择日期&quot; </span><br><span class="line">        value-format=&quot;yyyy-MM-dd&quot; </span><br><span class="line">        @change=&quot;changeDate&quot;</span><br><span class="line">        &gt;&lt;/el-date-picker&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            date: &#x27;&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        changeDate()&#123;</span><br><span class="line">            console.log(this.date)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%97%A5%E6%9C%9F1.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%97%A5%E6%9C%9F2.png"></p><h4 id="日期时间datetime"><a href="#日期时间datetime" class="headerlink" title="日期时间datetime"></a>日期时间datetime</h4><p>**type&#x3D;”datetime”**：日期。</p><p><strong>value-format&#x3D;”yyyy-MM-dd”</strong> 格式化,将日期转化为所熟知的格式：年月日时分秒【一定要设置】。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- 日期时间datetime --&gt;</span><br><span class="line">        &lt;el-date-picker </span><br><span class="line">        v-model=&quot;datetime&quot; </span><br><span class="line">        type=&quot;datetime&quot; </span><br><span class="line">        placeholder=&quot;选择日期时间&quot; </span><br><span class="line">        value-format=&quot;yyyy-MM-dd HH:mm:ss&quot; </span><br><span class="line">        @change=&quot;changeDateTime&quot;</span><br><span class="line">        &gt;&lt;/el-date-picker&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            datetime: &#x27;&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        changeDateTime()&#123;</span><br><span class="line">            console.log(this.datetime)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%97%A5%E6%9C%9F3.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%97%A5%E6%9C%9F4.png"></p><h3 id="2-9：提示信息"><a href="#2-9：提示信息" class="headerlink" title="2.9：提示信息"></a>2.9：提示信息</h3><p>【注意：应用于在script中的methods内某个方法中】</p><h4 id="消息提示message"><a href="#消息提示message" class="headerlink" title="消息提示message"></a>消息提示message</h4><p><strong>1</strong>、this.$message.success(‘成功’)</p><p><strong>2</strong>、this.$message.error(‘失败’)</p><p><strong>3</strong>、this.$message.warning(‘警告’)</p><p><strong>4</strong>、this.$message(‘这是一条消息提示’)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-button @click=&quot;click&quot;&gt;成功&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        click()&#123;</span><br><span class="line">            this.$message.success(&#x27;成功&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%B6%88%E6%81%AF%E6%8F%90%E7%A4%BA.png"></p><h4 id="通知notify"><a href="#通知notify" class="headerlink" title="通知notify"></a>通知notify</h4><p><strong>1</strong>、this.$notify.success(‘成功’)</p><p><strong>2</strong>、this.$notify.error(‘失败’)</p><p><strong>3</strong>、this.$notify.warning(‘警告’)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-button @click=&quot;click&quot;&gt;成功&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        click()&#123;</span><br><span class="line">            this.$notify.success(&#x27;成功&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%80%9A%E7%9F%A5.png"></p><h4 id="弹框confirm"><a href="#弹框confirm" class="headerlink" title="弹框confirm"></a>弹框confirm</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-button @click=&quot;click&quot;&gt;提示&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        click()&#123;</span><br><span class="line">        // 基本格式</span><br><span class="line">            this.$confirm(&#x27;是否要退出?&#x27;,&#x27;提示&#x27;,&#123;</span><br><span class="line">                confirmButtonText: &#x27;确定&#x27;,</span><br><span class="line">                cancelButtonText: &#x27;取消&#x27;,</span><br><span class="line">                type: &#x27;warning&#x27;</span><br><span class="line">            &#125;).then(()=&gt;&#123;</span><br><span class="line">                this.$message.success(&#x27;退出成功&#x27;)</span><br><span class="line">            &#125;).catch(()=&gt;&#123;</span><br><span class="line">                this.$message.warning(&#x27;取消退出&#x27;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%BC%B9%E6%A1%861.png"></p><p>若选择【确定】按钮，则会出现一下效果</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%BC%B9%E6%A1%862.png"></p><h3 id="2-10：表格"><a href="#2-10：表格" class="headerlink" title="2.10：表格"></a>2.10：表格</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">el-table：</span><br><span class="line">:data【绑定数组数据】</span><br><span class="line">border边框</span><br><span class="line">:header-cell-style表头样式的编写</span><br><span class="line"></span><br><span class="line">el-table-column：</span><br><span class="line">label名称</span><br><span class="line">prop【绑定具体数据】</span><br><span class="line">align=&quot;center&quot;表格【内容居中】</span><br><span class="line">v-slot插槽，允许你在子组件中访问父组件中的数据，并对其进行操作。</span><br></pre></td></tr></table></figure><h4 id="表格基本操作"><a href="#表格基本操作" class="headerlink" title="表格基本操作"></a>表格基本操作</h4><p><strong>1</strong>、通过**:data<strong>来</strong>绑定数据数组**。</p><p><strong>2</strong>、<strong>有几个数据就设计几个el-table-column</strong>，<strong>el-table-column</strong>表示的就是<strong>表格的头部</strong>。</p><p><strong>3</strong>、<strong>prop中的属性是后端所返回过来的属性名称</strong>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;width: 500px&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">border</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span>  //<span class="attr">绑定数组数据</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; background: &#x27;aliceblue&#x27;, fontSize: &#x27;16px&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表格绑定的值必须是个数组</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;南京&#x27;</span>,<span class="attr">age</span>: <span class="number">32</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;扬州&#x27;</span>,<span class="attr">age</span>: <span class="number">15</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;苏州&#x27;</span>,<span class="attr">age</span>: <span class="number">23</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">4</span>,<span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;常州&#x27;</span>,<span class="attr">age</span>: <span class="number">27</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%A1%A8%E6%A0%BC1.png"></p><h4 id="表格额外操作"><a href="#表格额外操作" class="headerlink" title="表格额外操作"></a>表格额外操作</h4><p>在el-table-column中，若内容过于长，可以使用<strong>show-overflow-tooltip</strong>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;width: 700px&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">border</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; background: &#x27;aliceblue&#x27;, fontSize: &#x27;16px&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;age&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            // 额外操作</span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;edit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表格绑定的值必须是个数组</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;南京&#x27;</span>,<span class="attr">age</span>: <span class="number">32</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;扬州&#x27;</span>,<span class="attr">age</span>: <span class="number">15</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;苏州&#x27;</span>,<span class="attr">age</span>: <span class="number">23</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>:<span class="number">4</span>,<span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,<span class="attr">address</span>: <span class="string">&#x27;常州&#x27;</span>,<span class="attr">age</span>: <span class="number">27</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">edit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(row.<span class="property">name</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%A1%A8%E6%A0%BC%E9%A2%9D%E5%A4%96%E6%93%8D%E4%BD%9C.png"></p><h3 id="2-11：表单"><a href="#2-11：表单" class="headerlink" title="2.11：表单"></a>2.11：表单</h3><h4 id="表单的基本格式"><a href="#表单的基本格式" class="headerlink" title="表单的基本格式"></a>表单的基本格式</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- style的功能：内容居中显示 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot; display:flex; align-items:center;justify-content:center;&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 表单格式 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">:model</span>=<span class="string">&quot;user&quot;</span>    // <span class="attr">表单对象user</span> 【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                     <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span>        // <span class="attr">表单规则的验证</span>【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                     <span class="attr">ref</span>=<span class="string">&quot;registerRef&quot;</span>     // <span class="attr">register方法</span>：<span class="attr">验证正确性</span>【<span class="attr">el-form</span>】</span></span><br><span class="line"><span class="tag">                     <span class="attr">inline</span>   // <span class="attr">行内表单模式</span>：<span class="attr">将表单内容放置同一行</span>【<span class="attr">此处为false</span>】</span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 标题内容 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px; font-weight: bold; text-align:center; margin-bottom:20px&quot;</span>&gt;</span></span><br><span class="line">                    标题</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">&lt;!-- 输入框 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span> //prop：指定表单中具体的对象【el-form-item】</span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user&quot;</span> // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">v-model</span>=<span class="string">&quot;user.username&quot;</span>  // <span class="attr">表单具体对象user.username</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">&lt;!-- 密码框 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span> //prop：指定表单中具体的对象【el-form-item】</span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span> // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">show-password</span> // <span class="attr">眼睛</span>，<span class="attr">用于显示密码与否的操作</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">v-model</span>=<span class="string">&quot;user.password&quot;</span>  // <span class="attr">表单具体对象user.password</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">&lt;!-- 密码验证框 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;confirmPass&quot;</span>&gt;</span> //prop：指定表单中具体的对象【el-form-item】</span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span> // <span class="attr">前置图标</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">show-password</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">placeholder</span>=<span class="string">&quot;请再次确认密码&quot;</span> </span></span><br><span class="line"><span class="tag">                              <span class="attr">v-model</span>=<span class="string">&quot;user.confirmPass&quot;</span>  // <span class="attr">表单具体对象user.confirmPass</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">&lt;!-- 确认按钮 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span></span><br><span class="line">                        注 册</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 密码再次验证</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">validatePassword</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请确认密码&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value !== <span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">password</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;两次输入密码不一致&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">callback</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">confirmPass</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单规则验证</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入账号&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 密码再次验证</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">confirmPass</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">validator</span>: validatePassword , <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">register</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//验证正确性</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;registerRef&#x27;</span>].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 验证通过</span></span></span><br><span class="line"><span class="language-javascript">                    request.<span class="title function_">post</span>(<span class="string">&#x27;/register&#x27;</span>,<span class="variable language_">this</span>.<span class="property">user</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//200表示成功，页面跳转</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="表单结果展示图"><a href="#表单结果展示图" class="headerlink" title="表单结果展示图"></a>表单结果展示图</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%A1%A8%E5%8D%95%E7%BB%93%E6%9E%9C%E5%B1%95%E7%A4%BA%E5%9B%BE.png"></p><h3 id="2-12：导航菜单"><a href="#2-12：导航菜单" class="headerlink" title="2.12：导航菜单"></a>2.12：导航菜单</h3><h4 id="侧边栏"><a href="#侧边栏" class="headerlink" title="侧边栏"></a>侧边栏</h4><p><strong>1</strong>、<strong>消除页面中没有铺满现象</strong>：在elementUI容器处添加**style&#x3D;”min-height:100vh;”**。</p><p><strong>2</strong>、<strong>当且仅当【el-menu-item】或【el-submenu】时，index才生效并跳转到相应页面</strong>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;width: 200px; </span></span></span><br><span class="line"><span class="string"><span class="tag">    min-height:100vh;  // 消除页面中没有铺满现象</span></span></span><br><span class="line"><span class="string"><span class="tag">    background-color: #001529; </span></span></span><br><span class="line"><span class="string"><span class="tag">         overflow: hidden; // 溢出部分隐藏</span></span></span><br><span class="line"><span class="string"><span class="tag">           &quot;</span> </span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">router</span> // <span class="attr">路由器</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">background-color</span>=<span class="string">&quot;#001529&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">text-color</span>=<span class="string">&quot;rgba(255,255,255,0.65)&quot;</span> // <span class="attr">菜单的文字颜色</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">active-text-color</span>=<span class="string">&quot;#fff&quot;</span>// <span class="attr">当前激活菜单的文字颜色</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">style</span>=<span class="string">&quot;border: none&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">:default-active</span>=<span class="string">&quot;$route.path&quot;</span>  // <span class="attr">默认</span> <span class="attr">当前路径</span>[$<span class="attr">route.path</span>] <span class="attr">为高亮</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 一级菜单: 带图标 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-house&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span>系统首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 一级菜单: 不带图标 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/element&quot;</span>&gt;</span>Element首页<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 二级菜单 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">&quot;/3&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 二级菜单的大目录：带图标 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>信息管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 二级菜单下面内容 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/31&quot;</span>&gt;</span>用户信息<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/32&quot;</span>&gt;</span>管理员信息<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 1、二级目录下面内容背景色变黑 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu--inline</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#000c17</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu--inline</span> <span class="selector-class">.el-menu-item</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#000c17</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding-left</span>: <span class="number">49px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 2、悬停状态提示：鼠标指针悬停在界面的特定元素上时，该元素会发生视觉变化【交互】 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.el-submenu__title</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-submenu__title</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">i</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 3、高亮处背景变蓝 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#1890ff</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>:<span class="number">5px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">8px</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span> <span class="selector-tag">i</span>,<span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span> <span class="selector-class">.el-tooltip</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: -<span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 4、合理分配导航栏中【选中区域】划分 */</span></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 一级菜单选中区域 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-submenu__title</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 二级菜单选中区域 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-submenu</span> <span class="selector-class">.el-menu-item</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-width</span>: <span class="number">0</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu--inline</span> <span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding-left</span>: <span class="number">45px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>效果展示图</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E4%BE%A7%E8%BE%B9%E6%A0%8F.png"></p><h4 id="折叠栏"><a href="#折叠栏" class="headerlink" title="折叠栏"></a>折叠栏</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">:width</span>=<span class="string">&quot;asideWidth&quot;</span>  // 【<span class="attr">动态控制侧边栏宽度</span>】</span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;min-height:100vh;</span></span></span><br><span class="line"><span class="string"><span class="tag">        background-color: #001529&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- logo --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 60px; </span></span></span><br><span class="line"><span class="string"><span class="tag">                    line-height: 60px; </span></span></span><br><span class="line"><span class="string"><span class="tag">                    color:white; </span></span></span><br><span class="line"><span class="string"><span class="tag">                    display:flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">                    align-items:center;</span></span></span><br><span class="line"><span class="string"><span class="tag">                    justify-content:center&quot;</span></span></span><br><span class="line"><span class="tag">         &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;logo标志&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px; width: 40px&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 【v-show=&quot;!isCollapse&quot;：当isCollapse为false[展开],展示；反之，不展示】--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;logo-title&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;!isCollapse&quot;</span>&gt;</span>红鳄023<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 侧栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">:default-openeds</span>=<span class="string">&quot;[&#x27;info&#x27;]&quot;</span>// <span class="attr">默认展开二级菜单</span>（<span class="attr">info</span>）<span class="attr">的内容</span>【<span class="attr">可选</span>,<span class="attr">此处无</span>】</span></span><br><span class="line"><span class="tag">                 <span class="attr">:collapse</span>=<span class="string">&quot;isCollapse&quot;</span>  // <span class="attr">是否水平折叠收起菜单</span>【<span class="attr">boolean</span>】</span></span><br><span class="line"><span class="tag">                 <span class="attr">:collapse-transition</span>=<span class="string">&quot;false&quot;</span> // <span class="attr">是否开启折叠动画</span>【<span class="attr">boolean</span>】</span></span><br><span class="line"><span class="tag">                 <span class="attr">router</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">background-color</span>=<span class="string">&quot;#001529&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">text-color</span>=<span class="string">&quot;rgba(255,255,255,0.65)&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">active-text-color</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">style</span>=<span class="string">&quot;border: none&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">:default-active</span>=<span class="string">&quot;$route.path&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 一级菜单 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-house&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span>系统首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 二级菜单 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">&quot;/3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>信息管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/31&quot;</span>&gt;</span>用户信息<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/32&quot;</span>&gt;</span>管理员信息<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-header</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">:class</span>=<span class="string">&quot;collapseIcon&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">style</span>=<span class="string">&quot;font-size: 26px&quot;</span></span></span><br><span class="line"><span class="tag">             @<span class="attr">click</span>=<span class="string">&quot;handleCollapse&quot;</span> //【<span class="attr">控制是否折叠按钮</span>】</span></span><br><span class="line"><span class="tag">           &gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          头部区域</span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">          主体区域</span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;HomeView&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isCollapse</span>: <span class="literal">false</span>, <span class="comment">// 初始化，【不收缩】</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">asideWidth</span>: <span class="string">&#x27;200px&#x27;</span>, <span class="comment">// 初始化</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">collapseIcon</span>: <span class="string">&#x27;el-icon-s-fold&#x27;</span> <span class="comment">// 【初始化为折叠状态的图标】</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 【控制收缩变化】</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCollapse</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">isCollapse</span> = !<span class="variable language_">this</span>.<span class="property">isCollapse</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 【动态控制侧边栏宽度】</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">asideWidth</span> = <span class="variable language_">this</span>.<span class="property">isCollapse</span> ? <span class="string">&#x27;64px&#x27;</span> : <span class="string">&#x27;200px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 【根据折叠状态切换图标】</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">collapseIcon</span> = <span class="variable language_">this</span>.<span class="property">isCollapse</span> ? <span class="string">&#x27;el-icon-s-unfold&#x27;</span> : <span class="string">&#x27;el-icon-s-fold&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 1、二级目录下面内容背景色变黑 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu--inline</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#000c17</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu--inline</span> <span class="selector-class">.el-menu-item</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#000c17</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding-left</span>: <span class="number">49px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 2、悬停状态提示：鼠标指针悬停在界面的特定元素上时，该元素会发生视觉变化【交互】 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.el-submenu__title</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-submenu__title</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">i</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 3、高亮处背景变蓝 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#1890ff</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>:<span class="number">5px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">8px</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span> <span class="selector-tag">i</span>,<span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span> <span class="selector-class">.el-tooltip</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: -<span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 4、合理分配导航栏中【选中区域】划分 */</span></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 一级菜单选中区域 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu-item</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-submenu__title</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 二级菜单选中区域 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-submenu</span> <span class="selector-class">.el-menu-item</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-width</span>: <span class="number">0</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-menu--inline</span> <span class="selector-class">.el-menu-item</span><span class="selector-class">.is-active</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding-left</span>: <span class="number">45px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 5、动画效果：收缩展开有一定的延迟 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-aside</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: width <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 6、logo收缩前后文字显示消失样式设计 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.logo-title</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">5px</span>; </span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 设置合适的宽度 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 溢出省略：放置汉字过长 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-overflow</span>: ellipsis;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>效果展示</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E4%B9%8B%E6%8A%98%E5%8F%A0%E6%A0%8F1.png"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E4%B9%8B%E6%8A%98%E5%8F%A0%E6%A0%8F2.png"></p><h3 id="2-13：分页器（Pagination）"><a href="#2-13：分页器（Pagination）" class="headerlink" title="2.13：分页器（Pagination）"></a>2.13：分页器（Pagination）</h3><h4 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a><strong>效果展示</strong></h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%86%E9%A1%B5%E5%99%A8.png"></p><h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a><strong>完整代码</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;&quot;</span>&gt;</span>分页器的完整功能展示（可删除）<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span>// <span class="attr">点击当前页面时触发事件:handleCurrentChange</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span>// <span class="attr">当前的页码</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;[10, 15, 20, 25]&quot;</span>// <span class="attr">选择每页查询的个数</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span>// <span class="attr">每页显示的个数</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span> // <span class="attr">各个组件</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;50&quot;</span>// <span class="attr">数据总数</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">10</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`当前页: <span class="subst">$&#123;pageNum&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-14：增删改查页面设计【模版】"><a href="#2-14：增删改查页面设计【模版】" class="headerlink" title="2.14：增删改查页面设计【模版】"></a>2.14：增删改查页面设计【模版】</h3><h4 id="模版一：用户信息页面"><a href="#模版一：用户信息页面" class="headerlink" title="模版一：用户信息页面"></a>模版一：用户信息页面</h4><p><strong>效果图</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%80%BB%E4%BD%93%E6%95%88%E6%9E%9C%E5%9B%BE.png"></p><p><strong>总体代码【具体查看 “MybatisPlus增删改查（前后端）” 文章】</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询用户名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询姓名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 新增+批量删除 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 1、选框 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 2、ID列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;70&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 3、用户名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 4、姓名列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 5、手机号列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 6、邮箱列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 7、地址列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 8、头像列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">v-if</span>=<span class="string">&quot;scope.row.avatar&quot;</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">:src</span>=<span class="string">&quot;scope.row.avatar&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px; border-radius:50%&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.avatar]&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 9、角色列 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 10、操作列：编辑按钮，删除按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 电话 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 邮箱 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 地址 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;form.address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 角色 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;form.role&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;管理员&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">label</span>=<span class="string">&quot;用户&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 上传头像 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">list-type</span>=<span class="string">&quot;picture&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传头像<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">rules</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                username : [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">message</span>:<span class="string">&#x27;请输入账号&#x27;</span>,<span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">username</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            request.<span class="title function_">get</span>(<span class="string">&#x27;/user/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                 &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 把user头像属性装换为上传图片的连接</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">avatar</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">form</span> = &#123; <span class="attr">role</span>: <span class="string">&#x27;用户&#x27;</span> &#125; <span class="comment">// 新增数据时，先清空数据,默认角色是用户</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/user/update&#x27;</span> : <span class="string">&#x27;/user/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">                request.<span class="title function_">delete</span>(<span class="string">&#x27;/user/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="模版二：通用增删改查页面"><a href="#模版二：通用增删改查页面" class="headerlink" title="模版二：通用增删改查页面"></a>模版二：通用增删改查页面</h4><p><strong>效果图</strong>：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%80%9A%E7%94%A8%E5%A2%9E%E5%88%A0%E6%94%B9%E9%A1%B5%E9%9D%A2.png"></p><p><strong>总体代码【具体查看 “MybatisPlus增删改查（前后端）” 文章】</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 查询,重置 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; margin: 0 5px&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;查询商品名称&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;load(1)&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 新增+批量删除 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleAdd&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;delBatch&quot;</span>&gt;</span>批量删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 主体展示内容 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--align=&quot;center&quot; : 内容居中  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- :header-cell-style 头部区域颜色字体大小控制 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">stripe</span> <span class="attr">:header-cell-style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;aliceblue&#x27;,fontWeight: &#x27;bold&#x27;,color: &#x27;#666&#x27; &#125;&quot;</span> @<span class="attr">selection-change</span>=<span class="string">&quot;handleSelectionChange&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> <span class="attr">sortable</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;price&quot;</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">label</span>=<span class="string">&quot;商品描述&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;unit&quot;</span> <span class="attr">label</span>=<span class="string">&quot;单位&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;store&quot;</span> <span class="attr">label</span>=<span class="string">&quot;库存&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;商品图片&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items:center&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">v-if</span>=<span class="string">&quot;scope.row.img&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">:src</span>=<span class="string">&quot;scope.row.img&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">style</span>=<span class="string">&quot;width: 50px;height: 50px;&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">:preview-src-list</span>=<span class="string">&quot;[scope.row.img]&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;上架时间&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;handleEdit(scope.row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span> @<span class="attr">click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span> </span><br><span class="line">      <span class="comment">&lt;!-- 分页器 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px 0&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:current-page</span>=<span class="string">&quot;pageNum&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:page-sizes</span>=<span class="string">&quot;[100, 200, 300, 400]&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 新增：弹窗+表单 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;收货地址&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;formVisible&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品名称&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.price&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;商品描述&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.description&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;单位&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.unit&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;库存&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.store&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 上传物品照片 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;物品图片&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/file/upload&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">:headers</span>=<span class="string">&quot;&#123;token: user.token&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>上传商品照片<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;formVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;save&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Users&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">tableData</span>: [],  <span class="comment">// 所有的数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 分页器</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">total</span>: <span class="number">0</span>,       <span class="comment">// 数据总数，初始化为0</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pageNum</span>: <span class="number">1</span>,     <span class="comment">// 当前的页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pageSize</span>: <span class="number">4</span>,    <span class="comment">// 每页显示的个数</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 新增</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">form</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">formVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">user</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>), <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 批量删除</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">ids</span>: []</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 重置功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">reset</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 分页查询功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">load</span>(<span class="params">pageNum</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 如果传入pageNum，则执行</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(pageNum)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">pageNum</span> = pageNum</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          request.<span class="title function_">get</span>(<span class="string">&#x27;/shopGoods/selectByPage&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">params</span>: &#123; </span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">               &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>?.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>?.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 改变页码时，数据更新</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleCurrentChange</span>(<span class="params">pageNum</span>)&#123; <span class="comment">// 传入当前页码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>(pageNum)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 上传商品图片</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleAvatarSuccess</span>(<span class="params">response,file,fileList</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">img</span> = response.<span class="property">data</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 编辑功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleEdit</span>(<span class="params">row</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row)) <span class="comment">//form对象赋值（深拷贝数据）</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 新增功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleAdd</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">form</span> = &#123;&#125; <span class="comment">// 新增数据时，先清空数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">true</span> <span class="comment">// 打开弹窗</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 保存按钮触发模型（新增功能或更新功能，根据form.id存在与否判断）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">sendSaveRquest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 验证通过,向后台发送请求</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">request</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;/shopGoods/update&#x27;</span> : <span class="string">&#x27;/shopGoods/add&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">method</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">id</span> ? <span class="string">&#x27;PUT&#x27;</span>:<span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">form</span></span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 成功保存</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;保存成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 更新数据</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 关闭弹窗</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">formVisible</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">// 失败</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">save</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 表单验证+发送请求</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">formRef</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(valid)&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="title function_">sendSaveRquest</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 单个删除功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">del</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopGoods/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 批量删除功能</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleSelectionChange</span>(<span class="params">rows</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 选中时，获取当前选中的所有行数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">ids</span> = rows.<span class="title function_">map</span>(<span class="function"><span class="params">v</span>=&gt;</span>v.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">delBatch</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">ids</span>.<span class="property">length</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;请选择数据&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 点击批量删除按钮时，实现删除功能</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认批量删除这些数据吗?&#x27;</span>,<span class="string">&#x27;确认删除&#x27;</span>,&#123;<span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">// 传参注意：需要加个配置对象传数据</span></span></span><br><span class="line"><span class="language-javascript">              request.<span class="title function_">delete</span>(<span class="string">&#x27;/shopGoods/delete/batch/&#x27;</span>,&#123; <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">ids</span> &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="keyword">if</span>(res.<span class="property">code</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">//操作成功</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;操作成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                      <span class="comment">// 刷新表格数据</span></span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="title function_">load</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>) <span class="comment">//弹出错误信息</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-15：面包屑-头部区域"><a href="#2-15：面包屑-头部区域" class="headerlink" title="2.15：面包屑(头部区域)"></a>2.15：面包屑(头部区域)</h3><p><strong>显示当前页面的路径，快速返回之前的任意页面。</strong> </p><p>index.ts中需要添加一下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解决导航栏或者底部导航tobBar中vue-router频繁点击报错问题</span></span><br><span class="line"><span class="keyword">const</span> originalPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>;</span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> <span class="title function_">push</span>(<span class="params">location: any</span>): <span class="title class_">Promise</span>&lt;any&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    originalPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject);</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> err;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要给每个路由添加meta:&#123; name: &#x27;xxx&#x27; &#125;属性</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;登录&#x27;</span> &#125;,</span><br><span class="line"><span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>index.ts完整代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; component &#125; <span class="keyword">from</span> <span class="string">&#x27;vue/types/umd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决导航栏或者底部导航tobBar中vue-router频繁点击报错问题</span></span><br><span class="line"><span class="keyword">const</span> originalPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>;</span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> <span class="title function_">push</span>(<span class="params">location: any</span>): <span class="title class_">Promise</span>&lt;any&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    originalPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject);</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> err;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Manager&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Manager.vue&#x27;</span>),</span><br><span class="line">    <span class="comment">// 重定向主页</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="comment">// 子路由</span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;home&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;系统首页&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Home.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;user&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;用户信息&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/User.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;403&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Auth&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;无权限&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Auth.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;password&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Password&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;修改密码&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Password.vue&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;person&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,<span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;个人信息&#x27;</span> &#125;,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/Person.vue&#x27;</span>) &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;登录&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;注册&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Register.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/test.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 其他未搭建的页面统一跳转至404</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;404&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123; <span class="attr">name</span>: <span class="string">&#x27;无法访问&#x27;</span> &#125;, </span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/404.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">base</span>: process.<span class="property">env</span>.<span class="property">BASE_URL</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// to : 到达的路由信息(去哪里)</span></span><br><span class="line">  <span class="comment">// from : 开源的路由信息(从哪来)</span></span><br><span class="line">  <span class="comment">// next : 帮助我们跳转路由的函数(放行)</span></span><br><span class="line">  <span class="keyword">let</span> adminPaths = [<span class="string">&#x27;/user&#x27;</span>] <span class="comment">//管理员可访问的路径</span></span><br><span class="line">  <span class="comment">// 前端获取用户信息</span></span><br><span class="line">  <span class="keyword">let</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;hony-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span>(user.<span class="property">role</span> !== <span class="string">&#x27;管理员&#x27;</span> &amp;&amp; adminPaths.<span class="title function_">includes</span>(to.<span class="property">path</span>))&#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="string">&#x27;/403&#x27;</span>) <span class="comment">// 普通用户无权访问，跳转至 403 页面</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>主要代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-header</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-breadcrumb</span> </span></span><br><span class="line"><span class="tag">                         <span class="attr">separator-class</span>=<span class="string">&quot;el-icon-arrow-right&quot;</span> </span></span><br><span class="line"><span class="tag">                         <span class="attr">style</span>=<span class="string">&quot;margin-left: 20px;&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; path: &#x27;/&#x27; &#125;&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; path: $route.path &#125;&quot;</span>&gt;</span>&#123;&#123; $route.meta.name &#125;&#125;<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 头部区域 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-header</span>&#123; </span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>:<span class="number">2px</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">21</span>,<span class="number">41</span>,<span class="number">35</span>); // 阴影</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%9D%A2%E5%8C%85%E5%B1%91vue2.png"></p><h3 id="2-16：自定义图标-iconfont"><a href="#2-16：自定义图标-iconfont" class="headerlink" title="2.16：自定义图标(iconfont)"></a>2.16：自定义图标(iconfont)</h3><p><strong>第一步</strong>：选中你需要的图标，点击添加购物车，添加之后再点击上边的购物车，步骤如下图所示</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%9B%BE%E6%A0%871.png"></p><p><strong>第二步</strong>：在第一步点击上边的购物车之后，弹出下面的页面，点击添加至项目</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%9B%BE%E6%A0%872.png"></p><p><strong>第三步</strong>：在“项目设置”中进行修改</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%9B%BE%E6%A0%873.png"></p><p>修改内容如下：</p><p><strong>1</strong>、将<strong>FontClass&#x2F;Symbol 前缀</strong> 中内容修改为 **el-icon-**。</p><p><strong>2</strong>、将<strong>Font Family</strong> 中内容修改为<strong>element-icons。</strong></p><p><strong>3</strong>、<strong>字体格式</strong> 选中 <strong>WOFF2</strong>，<strong>WOFF</strong>，<strong>TTF</strong>三个选项。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%9B%BE%E6%A0%874.png"></p><p><strong>第四步</strong>：点击”本地下载”</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%9B%BE%E6%A0%875.0.png"></p><p><strong>第五步</strong>：将下载后的文件夹中的<strong>四部文件</strong>复制到Visual Studio中<strong>css&#x2F;iconfont</strong>中</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%9B%BE%E6%A0%876.png"></p><p><strong>第六步</strong>：<strong>main.js</strong>中导入如下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;@/assets/css/iconfont/iconfont.css&#x27;</span><br></pre></td></tr></table></figure><p><strong>第七步</strong>：自定义图标的使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-quanping&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 26px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%9B%BE%E6%A0%877.png"></p><h3 id="2-17：全屏"><a href="#2-17：全屏" class="headerlink" title="2.17：全屏"></a>2.17：全屏</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-quanping&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 26px;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleFull&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      放大展示</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;HomeView&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleFull</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">requestFullscreen</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>全屏前展示</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%85%A8%E5%B1%8F2.png"></p><p><strong>全屏后展示</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E5%85%A8%E5%B1%8F.png"></p><h3 id="2-18：图片"><a href="#2-18：图片" class="headerlink" title="2.18：图片"></a>2.18：图片</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-image</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">:src</span>=<span class="string">&quot;url&quot;</span>  // <span class="attr">图片地址</span></span></span><br><span class="line"><span class="tag">     <span class="attr">style</span>=<span class="string">&quot;width: 50%;height: 50%;&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:preview-src-list</span>=<span class="string">&quot;srcList&quot;</span> // <span class="attr">大图预览</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">el-image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">&#x27;http://localhost:8080/file/download/p03.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">srcList</span>: [</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;http://localhost:8080/file/download/p03.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">           ...</span></span><br><span class="line"><span class="language-javascript">        ]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%A7%E5%9B%BE%E9%A2%84%E8%A7%88.png"></p><h3 id="2-19：对话框-弹框"><a href="#2-19：对话框-弹框" class="headerlink" title="2.19：对话框(弹框)"></a>2.19：对话框(弹框)</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%BC%B9%E6%A1%86.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #0f9869; cursor:pointer&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleForgetPass&quot;</span>&gt;</span></span><br><span class="line">          忘记密码</span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">    <span class="comment">&lt;!-- 弹框 el-dialog --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">title</span>=<span class="string">&quot;忘记密码&quot;</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">:visible.sync</span>=<span class="string">&quot;forgetPassDialogVis&quot;</span> // <span class="attr">控制弹窗关闭与否的变量</span></span></span><br><span class="line"><span class="tag">               <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span>// <span class="attr">点击其他地方</span>，<span class="attr">弹窗不会自动关闭</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 框中内容：输入框 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;forgetUserForm&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 20px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.username&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">v-model</span>=<span class="string">&quot;forgetUserForm.phone&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 框中内容：确认按钮，取消按钮 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;forgetPassDialogVis = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;reSetPassword&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">forgetPassDialogVis</span>: <span class="literal">false</span>, <span class="comment">// 开始时，弹框是关闭状态</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">forgetUserForm</span>: &#123;&#125;  <span class="comment">// 表单数据</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//初始化表单数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleForgetPass</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">forgetUserForm</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">forgetPassDialogVis</span> = <span class="literal">true</span> <span class="comment">// 点击后，跳出弹窗</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 点击确认后，重置密码成功，并关闭弹框</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">reSetPassword</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;重置成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">forgetPassDialogVis</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-20：页签"><a href="#2-20：页签" class="headerlink" title="2.20：页签"></a>2.20：页签</h3>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目搭建1之Vue2基本知识</title>
      <link href="/2024/02/06/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA1%E4%B9%8BVue2%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"/>
      <url>/2024/02/06/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA1%E4%B9%8BVue2%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="1、Vue2基础篇"><a href="#1、Vue2基础篇" class="headerlink" title="1、Vue2基础篇"></a>1、Vue2基础篇</h1><h3 id="一：创建Vue2实例【体验】"><a href="#一：创建Vue2实例【体验】" class="headerlink" title="一：创建Vue2实例【体验】"></a>一：创建Vue2实例【体验】</h3><h4 id="1-1-基本准备"><a href="#1-1-基本准备" class="headerlink" title="1.1 基本准备"></a>1.1 基本准备</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.准备容器，如：&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">2.引包：官网--开发版本</span><br><span class="line">3.创建Vue实例 new Vue()</span><br><span class="line">4.指定配置项 el 和 data</span><br><span class="line">el配置容器，指定vue管理的是哪个盒子</span><br><span class="line">data提供数据</span><br></pre></td></tr></table></figure><h4 id="1-2-实际操作"><a href="#1-2-实际操作" class="headerlink" title="1.2 实际操作"></a>1.2 实际操作</h4><pre><code>//准备容器&lt;div id=&quot;app&quot;&gt;    &lt;p&gt;&#123;&#123; name+'先生' &#125;&#125;&lt;/p&gt;    &lt;p&gt;&#123;&#123; friend.name &#125;&#125;&lt;/p&gt;    &lt;p&gt;&#123;&#123; age>=18 ? '成年' : '未成年' &#125;&#125;&lt;/p&gt;    &lt;p&gt;&#123;&#123; age &#125;&#125;&lt;/p&gt;&lt;/div&gt;//引包&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;    &lt;script&gt;    //Vue实例    const app = new Vue(&#123;        el: &#39;#app&#39;,        //data中数据最终会被添加到实例中        data: &#123;            name: &#39;tony&#39;,            age: 10,            friend: &#123;                name: &#39;jack&#39;,                hobby: &#39;热爱学习&#39;            &#125;        &#125;    &#125;)&lt;/script&gt;</code></pre><h4 id="1-3-结果展示"><a href="#1-3-结果展示" class="headerlink" title="1.3 结果展示"></a>1.3 结果展示</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/Vue%E5%AE%9E%E4%BE%8B.png" alt="Vue实例"></p><h3 id="二：插值表达式"><a href="#二：插值表达式" class="headerlink" title="二：插值表达式"></a>二：插值表达式</h3><p><strong>作用</strong>：利用 表达式 进行插<strong>值</strong>渲染<br><strong>语法</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; 表达式 &#125;&#125;</span><br></pre></td></tr></table></figure><p><strong>注意点</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.使用的数据要存在（在Vue实例的data中存在此数据）</span><br><span class="line">2.支持的是表达式，不是语句 if for...</span><br><span class="line">3.不能在标签属性中使用 &#123;&#123; &#125;&#125;</span><br></pre></td></tr></table></figure><p><strong>案例</strong></p><pre><code>&lt;div&gt;&#123;&#123; name+'先生' &#125;&#125;&lt;/div&gt;&lt;p&gt;&#123;&#123; friend.name &#125;&#125;&lt;/p&gt;&lt;p&gt;&#123;&#123; age>=18 ? '成年' : '未成年' &#125;&#125;&lt;/p&gt;&lt;p&gt;&#123;&#123; age &#125;&#125;&lt;/p&gt;</code></pre><h1 id="2、Vu2常用指令篇"><a href="#2、Vu2常用指令篇" class="headerlink" title="2、Vu2常用指令篇"></a>2、Vu2常用指令篇</h1><h3 id="2-1：v-html-表达式渲染"><a href="#2-1：v-html-表达式渲染" class="headerlink" title="2.1：v-html 表达式渲染"></a>2.1：v-html 表达式渲染</h3><p><strong>语法</strong>：v-html&#x3D;”表达式”</p><p><strong>用途</strong>：动态设置元素 innerHTML</p><p><strong>案例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">     &lt;div v-html=&quot;msg&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const app = new Vue(&#123;</span><br><span class="line">       el: &#x27;#app&#x27;,</span><br><span class="line">       data: &#123;</span><br><span class="line">          msg: `</span><br><span class="line">             &lt;a href=&quot;https://www.bilibili.com&quot;&gt;</span><br><span class="line">                 哔哩哔哩</span><br><span class="line">             &lt;/a&gt;</span><br><span class="line">          `</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>结果展示</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/v-html.png"></p><h3 id="2-2：v-show"><a href="#2-2：v-show" class="headerlink" title="2.2：v-show"></a>2.2：v-show</h3><p><strong>语法</strong>：v-show &#x3D; “表达式”&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;表达式值&ensp;true表示显示，false表示隐藏</p><p><strong>作用</strong>：控制元素显示隐藏</p><p><strong>底层原理</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">切换 css 的 display: none 来控制显示隐藏</span><br></pre></td></tr></table></figure><p><strong>应用场景</strong>：频繁进行切换显示隐藏的地方</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/v-show.png"></p><p><strong>案例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div v-show=&quot;msg&quot;&gt;v-show盒子&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const app = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            msg: true //true表示显示</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>结果展示</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/v-show%E5%B1%95%E7%A4%BA1.png" alt="true显示"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/v-show%E5%B1%95%E7%A4%BA2.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div v-show=&quot;msg&quot;&gt;v-show盒子&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">   const app = new Vue(&#123;</span><br><span class="line">       el: &#x27;#app&#x27;,</span><br><span class="line">       data: &#123;</span><br><span class="line">          msg: false//false表示隐藏</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>结果展示</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/v-show%E5%B1%95%E7%A4%BA3.png" alt="false隐藏"></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/v-show%E5%B1%95%E7%A4%BA4.png"></p><h3 id="2-3：v-if-ensp-ensp-v-else-if-ensp-ensp-v-else判断"><a href="#2-3：v-if-ensp-ensp-v-else-if-ensp-ensp-v-else判断" class="headerlink" title="2.3：v-if&ensp;&ensp;v-else-if&ensp;&ensp;v-else判断"></a>2.3：v-if&ensp;&ensp;v-else-if&ensp;&ensp;v-else判断</h3><p><strong>作用</strong>：进行判断渲染的作用</p><p><strong>案例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;gender === 1&quot;&gt;性别：男&lt;/div&gt;</span><br><span class="line">    &lt;div v-else&gt;性别：女&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div v-if=&quot;rank === &#x27;A&#x27; &quot;&gt;名次A&lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;rank === &#x27;B&#x27; &quot;&gt;名次B&lt;/div&gt;</span><br><span class="line">    &lt;div v-else&gt;名次C&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const app = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            gender: 1,</span><br><span class="line">            rank: &#x27;B&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>结果展示</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%A4%E6%96%AD%E5%B1%95%E7%A4%BA.png"></p><h3 id="2-4：v-on【-事件名】"><a href="#2-4：v-on【-事件名】" class="headerlink" title="2.4：v-on【@事件名】"></a>2.4：v-on【@事件名】</h3><p><strong>用途</strong>：事件绑定</p><p><strong>语法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">完整写法：</span><br><span class="line">1.v-on:事件名=&quot;内联语法&quot;</span><br><span class="line">2.v-on:事件名=&quot;methods中的函数名&quot;</span><br><span class="line">简写：✔</span><br><span class="line">1.@事件名=&quot;内联语法&quot;</span><br><span class="line">2.@事件名=&quot;methods中的函数名&quot;</span><br></pre></td></tr></table></figure><p><strong>说明</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.事件名：</span><br><span class="line">点击：click</span><br><span class="line">鼠标经过：mouseenter</span><br><span class="line">获得焦点：focus</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">2.this：指的是当前案例</span><br></pre></td></tr></table></figure><p><strong>数字加减案例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;number--&quot;&gt;-&lt;/button&gt;</span><br><span class="line">    &lt;span&gt;&#123;&#123; number &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;button @click=&quot;number++&quot;&gt;+&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const app = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            number: 100</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="2-5：v-for"><a href="#2-5：v-for" class="headerlink" title="2.5：v-for"></a>2.5：v-for</h3><p><strong>作用</strong>：多次渲染整个元素，可以是数组，对象，数字…..</p><p><strong>语法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-for=&quot;(item,index) in 数组&quot;</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：item是每一项，index是下标</p><p><strong>图书案例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;图书&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123; item.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123; item.author &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;button @click=&quot;del(item.id)&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const app = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            list: [</span><br><span class="line">                &#123;id:1,name:&#x27;《鲁滨逊漂流记》&#x27;,author: &#x27;笛福&#x27;&#125;,</span><br><span class="line">                &#123;id:2,name: &#x27;《红楼梦》&#x27;,author: &#x27;曹雪芹&#x27;&#125;,</span><br><span class="line">                &#123;id:3,name: &#x27;《西游记》&#x27;,author: &#x27;吴承恩&#x27;&#125;,</span><br><span class="line">                &#123;id:4,name: &#x27;《罗密欧与朱丽叶》&#x27;,author: &#x27;莎士比亚&#x27;&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            del(id)&#123;</span><br><span class="line">                this.list = this.list.filter(item =&gt; item.id !== id)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>结果展示</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/v-for.png"></p><p><strong>追加说明：v-for中的key</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">     &lt;span&gt;&#123;&#123; item.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">     &lt;span&gt;&#123;&#123; item.author &#125;&#125;&lt;/span&gt;</span><br><span class="line">     &lt;button @click=&quot;del(index)&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><p><strong>语法：</strong>:key&#x3D;”唯一标识”</p><p><strong>用途：</strong>便于Vue进行列表项的正确排序复用</p><p><strong>注意点</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.key只能是 字符串类型 或 数字类型</span><br><span class="line">2.具有唯一性，通常使用 id 作为 key，不推荐index作为key（会发生变化，无法对应）</span><br></pre></td></tr></table></figure><h3 id="2-6：v-model-数据双向绑定"><a href="#2-6：v-model-数据双向绑定" class="headerlink" title="2.6：v-model 数据双向绑定"></a>2.6：v-model 数据双向绑定</h3><p><strong>语法</strong>：v-model&#x3D;”变量”</p><p><strong>作用</strong>：可以让数据和视图进行<strong>双向数据绑定</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">何为双向数据绑定？</span><br><span class="line">（1）数据改变，视图自动更新</span><br><span class="line">（2）视图改变，数据自动更新</span><br></pre></td></tr></table></figure><p><strong>目的</strong>：可以快速【获取】和【设置】表单元素的内容</p><h3 id="2-7：v-bind【-属性名】"><a href="#2-7：v-bind【-属性名】" class="headerlink" title="2.7：v-bind【:属性名】"></a>2.7：v-bind【:属性名】</h3><p><strong>用途</strong>：动态设置html中的标签属性，如src[来源]，href，title…</p><p><strong>语法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">完整写法：</span><br><span class="line">v-bind:属性名=&quot;表达式&quot;</span><br><span class="line">简写：✔</span><br><span class="line">:属性名=&quot;表达式&quot;</span><br></pre></td></tr></table></figure><p><strong>案例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;button v-show=&quot;index &gt; 0&quot; @click=&quot;index--&quot;&gt;上一页&lt;/button&gt;</span><br><span class="line">    &lt;img :src=&quot;list[index]&quot;&gt;</span><br><span class="line">    &lt;button v-show=&quot;index &lt; list.length-1&quot; @click=&quot;index++&quot;&gt;下一页&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const app = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            index: 0,</span><br><span class="line">            list: [</span><br><span class="line">                &#x27;./imgs/01.png&#x27;,</span><br><span class="line">                &#x27;./imgs/02.png&#x27;,</span><br><span class="line">                &#x27;./imgs/03.jpg&#x27;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="2-8：动态class，style"><a href="#2-8：动态class，style" class="headerlink" title="2.8：动态class，style"></a>2.8：动态class，style</h3><h4 id="动态class讲解"><a href="#动态class讲解" class="headerlink" title="动态class讲解"></a>动态class讲解</h4><p><strong>基本格式</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:class = &quot;&#123;&#x27;样例类&#x27;: 条件判断式|数据属性名称 &#125;&quot;</span><br></pre></td></tr></table></figure><h4 id="动态style讲解"><a href="#动态style讲解" class="headerlink" title="动态style讲解"></a>动态style讲解</h4><p><strong>基本格式</strong></p><p>凡是有-的style属性名都要变成驼峰式，比如font-size要变成fontSize</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:style=&quot;&#123; 样例类: 三元运算|数据属性名称 &#125;&quot;</span><br></pre></td></tr></table></figure><h4 id="具体案例讲解"><a href="#具体案例讲解" class="headerlink" title="具体案例讲解"></a>具体案例讲解</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">    // 样例类</span><br><span class="line">        .active&#123;</span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;div style=&quot;display: flex;&quot;&gt;</span><br><span class="line">            &lt;select v-model=&quot;currentMenu&quot;&gt;</span><br><span class="line">                &lt;option value=&quot;首页&quot;&gt;首页&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;教师信息&quot;&gt;教师信息&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;学生信息&quot;&gt;学生信息&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            &lt;div </span><br><span class="line">            style=&quot;padding: 0 10px;&quot; </span><br><span class="line">            :style=&quot;&#123; fontSize: item === currentMenu ? &#x27;20px&#x27; : &#x27;14px&#x27; &#125;&quot;  //动态style</span><br><span class="line">            :class=&quot;&#123;&#x27;active&#x27;: item === currentMenu &#125;&quot;  // 动态class</span><br><span class="line">            v-for=&quot;item in menus&quot; </span><br><span class="line">            :key=&quot;item&quot;&gt;</span><br><span class="line">            &#123;&#123; item &#125;&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        const app = new Vue(&#123;</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            data: &#123;</span><br><span class="line">            // 数据属性名称</span><br><span class="line">                menus: [&#x27;首页&#x27;,&#x27;教师信息&#x27;,&#x27;学生信息&#x27;],</span><br><span class="line">                currentMenu: &#x27;首页&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%8A%A8%E6%80%81classstyle.png"></p><h1 id="3、Vue2生命周期"><a href="#3、Vue2生命周期" class="headerlink" title="3、Vue2生命周期"></a>3、Vue2生命周期</h1><h3 id="（1）初始化阶段"><a href="#（1）初始化阶段" class="headerlink" title="（1）初始化阶段"></a>（1）初始化阶段</h3><h4 id="beforeCreate（）"><a href="#beforeCreate（）" class="headerlink" title="beforeCreate（）"></a>beforeCreate（）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生命周期中第一个函数，在该函数执行时Vue实例仅仅完成自身事件绑定和生命周期函数的初始化工作，Vue实例中还没有Data，el，methods相关属性。</span><br></pre></td></tr></table></figure><h4 id="created（）✔"><a href="#created（）✔" class="headerlink" title="created（）✔"></a>created（）✔</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">生命周期的第二个函数，在该函数执行时Vue实例已经初始化data属性和methods中相关方法，</span><br><span class="line">可以在此阶段【调取后端数据】</span><br></pre></td></tr></table></figure><h4 id="beforeMount（）"><a href="#beforeMount（）" class="headerlink" title="beforeMount（）"></a>beforeMount（）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生命周期的第三个函数，在该函数进行模板编译，生成虚拟dom</span><br></pre></td></tr></table></figure><h4 id="mounted（）✔"><a href="#mounted（）✔" class="headerlink" title="mounted（）✔"></a>mounted（）✔</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生命周期的第四个函数，在该函数将数据渲染到页面上，生成真实dom</span><br></pre></td></tr></table></figure><h3 id="（2）运行阶段"><a href="#（2）运行阶段" class="headerlink" title="（2）运行阶段"></a>（2）运行阶段</h3><h4 id="beforeUpdate（）"><a href="#beforeUpdate（）" class="headerlink" title="beforeUpdate（）"></a>beforeUpdate（）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生命周期的第五个函数，数据更新时触发该函数，该函数执行时Vue实例中data数据变化，但页面数据仍为旧数据，即data数据与页面数据不同步</span><br></pre></td></tr></table></figure><h4 id="updated（）"><a href="#updated（）" class="headerlink" title="updated（）"></a>updated（）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生命周期的第六个函数，数据更新触发，但时机点位于beforeUpdated后，此时页面数据与Vue实例中data数据能够保持一致。</span><br></pre></td></tr></table></figure><h3 id="（3）销毁阶段"><a href="#（3）销毁阶段" class="headerlink" title="（3）销毁阶段"></a>（3）销毁阶段</h3><h4 id="beforeDestory（）"><a href="#beforeDestory（）" class="headerlink" title="beforeDestory（）"></a>beforeDestory（）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生命周期的第七个函数，该函数执行时，Vue实例中所有数据、methods、component还未销毁</span><br></pre></td></tr></table></figure><h4 id="destoryd（）"><a href="#destoryd（）" class="headerlink" title="destoryd（）"></a>destoryd（）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生命周期的第八个函数，该函数执行时，Vue实例彻底销毁</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git教程(从0到1)</title>
      <link href="/2024/02/05/Git%E6%95%99%E7%A8%8B(%E4%BB%8E0%E5%88%B01)/"/>
      <url>/2024/02/05/Git%E6%95%99%E7%A8%8B(%E4%BB%8E0%E5%88%B01)/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Git仓库搭建"><a href="#1-Git仓库搭建" class="headerlink" title="1.Git仓库搭建"></a>1.Git仓库搭建</h1><h2 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h2><p>记录文件状态内容的地方，存储修改的历史记录</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init本地文件夹转换为Git从仓库</span><br></pre></td></tr></table></figure><h1 id="2-Git-三大区域【顺序不可变】"><a href="#2-Git-三大区域【顺序不可变】" class="headerlink" title="2.Git 三大区域【顺序不可变】"></a>2.Git 三大区域【顺序不可变】</h1><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">工作区：实际开发时操作的文件夹【创建.gitignore文件。忽略某些文件上传】</span><br><span class="line">|</span><br><span class="line">|命令：git add . ✔</span><br><span class="line">|查看暂存区文件：git ls-files✔</span><br><span class="line">|查看状态</span><br><span class="line">↓</span><br><span class="line">暂存区：暂存改动了的文件(.git/index)</span><br><span class="line">|</span><br><span class="line">|命令：git commit -m &quot;注释说明&quot;✔</span><br><span class="line">|</span><br><span class="line">↓</span><br><span class="line">版本库：提交并保存暂存区内容,产生一个版本快照(.git/objects)</span><br></pre></td></tr></table></figure><h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><p>报黄色提示，表明vue文件夹中需要删除旧的仓库文件【.git文件】</p><h2 id="额外操作"><a href="#额外操作" class="headerlink" title="额外操作"></a>额外操作</h2><h3 id="缓存区工作区"><a href="#缓存区工作区" class="headerlink" title="缓存区&lt;&#x3D;&gt;工作区"></a>缓存区&lt;&#x3D;&gt;工作区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">回档：git restore 目标文件✔</span><br><span class="line">【从缓存区重新回到工作区中暂存时状态】</span><br><span class="line"></span><br><span class="line">从暂存区内移除文件：git rm --cached 目标文件✔</span><br></pre></td></tr></table></figure><h3 id="版本区-缓存区-工作区"><a href="#版本区-缓存区-工作区" class="headerlink" title="版本区&#x3D;&gt;缓存区&#x3D;&gt;工作区"></a>版本区&#x3D;&gt;缓存区&#x3D;&gt;工作区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查看版本区提交记录(版本号)：git log --oneline✔</span><br><span class="line">版本回退：git reset --hard 版本号 ✔</span><br><span class="line">【彻底删除缓存区和工作区保留部分】</span><br></pre></td></tr></table></figure><h1 id="3-删除文件"><a href="#3-删除文件" class="headerlink" title="3.删除文件"></a>3.删除文件</h1><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>删除News.html文件，并产生一次版本记录</p><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><pre><code>1.手动删除工作区文件2.暂存变动/手动删除暂存区文件造成变更3.提交保存，产生新的版本，就此删除文件完成</code></pre><h1 id="4-分支与合并"><a href="#4-分支与合并" class="headerlink" title="4.分支与合并"></a>4.分支与合并</h1><h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>在原有的基础上 修复bug&#x2F;添加新功能【不影响主分支的代码】</p><h2 id="操作步骤-1"><a href="#操作步骤-1" class="headerlink" title="操作步骤"></a>操作步骤</h2><h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">创建分支：git branch 分支名</span><br><span class="line">切换分支命令：git checkout 分支名</span><br><span class="line">查看分支：git branch</span><br></pre></td></tr></table></figure><h3 id="合并【主分支master下完成】"><a href="#合并【主分支master下完成】" class="headerlink" title="合并【主分支master下完成】"></a>合并【主分支master下完成】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.合并分支：git merge 分支名</span><br><span class="line">2.删除合并后的分支：git branch -d 分支名</span><br></pre></td></tr></table></figure><h1 id="5-Git远程仓库–Gitee-【重点】"><a href="#5-Git远程仓库–Gitee-【重点】" class="headerlink" title="5.Git远程仓库–Gitee 【重点】"></a>5.Git远程仓库–Gitee 【重点】</h1><h2 id="5-1：本地-远程"><a href="#5-1：本地-远程" class="headerlink" title="5.1：本地 &#x3D;&gt; 远程"></a>5.1：本地 &#x3D;&gt; 远程</h2><h3 id="A：初次提交"><a href="#A：初次提交" class="headerlink" title="A：初次提交"></a>A：初次提交</h3><h4 id="A-1、推送"><a href="#A-1、推送" class="headerlink" title="A.1、推送"></a>A.1、推送</h4><pre><code>基本步骤：    1.新建仓库得到远程仓库 Git地址        2.本地 Git仓库 添加远程仓库原点地址【建立连接】        命令：git remote add 远程仓库别名[随便取] 远程仓库地址        案例：git remote add origin https://gitee.com/LemonWorld/git_study.git        3.查看是否建立成功        命令：git remote -v        4.本地 Git仓库 推送版本记录[版本库]到 远程仓库【推送】        命令：git push -u 远程仓库别名 本地和远程分支名[同名]        例如：git push -u origin master</code></pre><h4 id="A-2、强制覆盖-全部覆盖"><a href="#A-2、强制覆盖-全部覆盖" class="headerlink" title="A.2、强制覆盖(全部覆盖)"></a>A.2、强制覆盖(全部覆盖)</h4><p><strong>场景：</strong>远程仓库中已经有了文件，无法进行【推送】操作,从而进行<strong>强制覆盖远程仓库</strong>操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">基本步骤：</span><br><span class="line">1.新建仓库得到远程仓库 Git地址</span><br><span class="line"></span><br><span class="line">2.本地 Git仓库 添加远程仓库原点地址【建立连接】</span><br><span class="line">命令：git remote add 远程仓库别名[随便取] 远程仓库地址</span><br><span class="line">案例：git remote add origin https://gitee.com/LemonWorld/git_study.git</span><br><span class="line"></span><br><span class="line">3.查看远程仓库(查看是否建立成功)</span><br><span class="line">命令：git remote -v</span><br><span class="line"></span><br><span class="line">4.强行覆盖远程仓库全部内容</span><br><span class="line">命令：git push -f 远程仓库别名 本地和远程分支名[同名]</span><br><span class="line">例如：git push -f origin master</span><br></pre></td></tr></table></figure><h3 id="B：后续提交"><a href="#B：后续提交" class="headerlink" title="B：后续提交"></a>B：后续提交</h3><h4 id="B-1、代码操作"><a href="#B-1、代码操作" class="headerlink" title="B.1、代码操作"></a>B.1、代码操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1：同步远程仓库代码</span><br><span class="line">命令：git pull 远程仓库别名 分支名</span><br><span class="line">案例：git pull origin master</span><br><span class="line"></span><br><span class="line">2：查看当前状态：git status</span><br><span class="line">使用 git status  来查看当前状态，红色的字体显示的就是你修改的文件</span><br><span class="line"></span><br><span class="line">3：提交代码到本地git缓存区</span><br><span class="line">情形一：如果你git status 查看了当前状态发现都是你修改过的文件，都要提交，</span><br><span class="line">   那么你可以直接使用 git add .  就可以把你的内容全部添加到本地git缓存区中</span><br><span class="line">情形二：如果你git status 查看了当前状态发现有部分文件你不想提交，</span><br><span class="line">   那么就使用git add xxx(上图中的红色文字的文件链接)  </span><br><span class="line">   就可以提交部分文件到本地git缓存区。</span><br><span class="line"></span><br><span class="line">4：推送代码到本地git库，推送修改到本地git库中</span><br><span class="line">命令：git commit -m &quot;注释说明&quot;</span><br><span class="line"></span><br><span class="line">5：提交本地代码到远程仓库</span><br><span class="line">命令：git push -u 远程仓库别名 本地和远程分支名[同名]</span><br><span class="line">例如：git push -u origin master</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="B-2、IDEA中操作：提交代码-修改代码并提交"><a href="#B-2、IDEA中操作：提交代码-修改代码并提交" class="headerlink" title="B.2、IDEA中操作：提交代码(修改代码并提交)"></a>B.2、IDEA中操作：提交代码(修改代码并提交)</h4><p><strong>1、</strong>IDEA的右上方，点击Git标识后面绿色“✔”</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/idea%E6%8F%90%E4%BA%A41.png" alt="idea提交1"></p><p><strong>2、</strong>填写注释【可选】，进行提交</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/idea%E6%8F%90%E4%BA%A42.png" alt="idea提交2"></p><p><strong>3、</strong>若选择Commit选项，则需要进行此处操作进入步骤四</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/idea%E6%8F%90%E4%BA%A433.png" alt="idea提交3"></p><p><strong>4、</strong>点击Push，即可提交成功</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/idea%E6%8F%90%E4%BA%A43.png" alt="idea提交4"></p><h2 id="5-2：远程-本地"><a href="#5-2：远程-本地" class="headerlink" title="5.2：远程 &#x3D;&gt; 本地"></a>5.2：远程 &#x3D;&gt; 本地</h2><h3 id="Gitee项目搭建"><a href="#Gitee项目搭建" class="headerlink" title="Gitee项目搭建"></a>Gitee项目搭建</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/gitee%E4%BB%93%E5%BA%93%E6%90%AD%E5%BB%BA.png"></p><h3 id="克隆-从无到有"><a href="#克隆-从无到有" class="headerlink" title="克隆(从无到有)"></a>克隆(从无到有)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令：git clone 远程仓库地址</span><br><span class="line">案例：git clone https://gitee.com/LemonWorld/git_study.git</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/gitee%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80.png"></p><h3 id="拉取-获取最新内容"><a href="#拉取-获取最新内容" class="headerlink" title="拉取(获取最新内容)"></a>拉取(获取最新内容)</h3><h4 id="代码操作"><a href="#代码操作" class="headerlink" title="代码操作"></a>代码操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令：git pull 远程仓库别名 分支名</span><br><span class="line">案例：git pull origin master</span><br></pre></td></tr></table></figure><h4 id="IDEA中操作"><a href="#IDEA中操作" class="headerlink" title="IDEA中操作"></a>IDEA中操作</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/idea%E6%8B%89%E5%8F%96.png" alt="idea中进行拉取操作"></p><h4 id="基本原则：先更新-拉取-，后提交"><a href="#基本原则：先更新-拉取-，后提交" class="headerlink" title="基本原则：先更新(拉取)，后提交"></a>基本原则：先更新(拉取)，后提交</h4>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue脚手架搭建</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA2%E4%B9%8BVue2%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA2%E4%B9%8BVue2%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="1-全局安装node-js（准备）"><a href="#1-全局安装node-js（准备）" class="headerlink" title="1.全局安装node.js（准备）"></a>1.全局安装node.js（准备）</h2><h4 id="在官网进行安装"><a href="#在官网进行安装" class="headerlink" title="在官网进行安装"></a>在官网进行安装</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">官网：https://nodejs.cn/download/</span><br></pre></td></tr></table></figure><h4 id="查看是否安装成功"><a href="#查看是否安装成功" class="headerlink" title="查看是否安装成功"></a>查看是否安装成功</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-09%20150212.png"></p><p>使用管理员身份运行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix &quot;C:\Program Files\nodejs&quot;</span><br></pre></td></tr></table></figure><p>其中，”C:\Program Files\nodejs” 是<strong>NodeJS的安装目录</strong></p><h4 id="镜像的配置"><a href="#镜像的配置" class="headerlink" title="镜像的配置"></a>镜像的配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure><p>淘宝npm镜像源最新地址：<a href="https://registry.npmmirror.com/">https://registry.npmmirror.com/</a></p><p><strong>查看镜像配置</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm get registry</span><br></pre></td></tr></table></figure><h4 id="说明npm"><a href="#说明npm" class="headerlink" title="说明npm"></a>说明npm</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm是NodeJS的软件包管理器。</span><br><span class="line">当需要哪个包的时候，可以通过【以下命令】从远程服务器上下载</span><br><span class="line">命令：npm install xxx</span><br></pre></td></tr></table></figure><h2 id="2、安装vue以及脚手架vue-cli"><a href="#2、安装vue以及脚手架vue-cli" class="headerlink" title="2、安装vue以及脚手架vue-cli"></a>2、安装vue以及脚手架vue-cli</h2><h4 id="2-1：安装vue指令"><a href="#2-1：安装vue指令" class="headerlink" title="2.1：安装vue指令"></a>2.1：安装vue指令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g vue</span><br></pre></td></tr></table></figure><h4 id="2-2：安装脚手架vue-cli"><a href="#2-2：安装脚手架vue-cli" class="headerlink" title="2.2：安装脚手架vue-cli"></a>2.2：安装脚手架vue-cli</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 安装</span><br><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure><h4 id="2-3：安装完成后-，在-cmd-中输入指令查看-vue-版本和脚手架版本"><a href="#2-3：安装完成后-，在-cmd-中输入指令查看-vue-版本和脚手架版本" class="headerlink" title="2.3：安装完成后 ，在 cmd 中输入指令查看 vue 版本和脚手架版本"></a>2.3：安装完成后 ，在 cmd 中输入指令查看 vue 版本和脚手架版本</h4><p><strong>查看vue版本</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm list vue -g</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue%E7%89%88%E6%9C%AC.png" alt="vue版本"></p><p><strong>查看脚手架vue-cli版本</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue --version</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%84%9A%E6%89%8B%E6%9E%B6%E7%89%88%E6%9C%AC.png"></p><h2 id="3、项目的搭建"><a href="#3、项目的搭建" class="headerlink" title="3、项目的搭建"></a>3、项目的搭建</h2><h4 id="3-1：创建项目操作"><a href="#3-1：创建项目操作" class="headerlink" title="3.1：创建项目操作"></a>3.1：创建项目操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create 项目名称</span><br></pre></td></tr></table></figure><p><strong>选择“Manually select features”</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA1.png"></p><p><strong>基本配置，全部如下</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Frimiku/picture_cloud/vue2%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E9%80%89%E6%8B%A9%E9%85%8D%E7%BD%AE.png"></p><p><strong>完成的效果，如下</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA3.png"></p><h4 id="3-2：运行项目操作"><a href="#3-2：运行项目操作" class="headerlink" title="3.2：运行项目操作"></a>3.2：运行项目操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 项目名称</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><p><strong>最终效果</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA4.png"></p><h2 id="4、项目目录介绍"><a href="#4、项目目录介绍" class="headerlink" title="4、项目目录介绍"></a>4、项目目录介绍</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA5.png"></p><p><strong>主要目录介绍</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">src包：</span><br><span class="line">assets包：静态资源（图片，视频...）</span><br><span class="line">components包：组件</span><br><span class="line">router包：路由</span><br><span class="line">views包：页面代码</span><br><span class="line">main.js：全局文件（全局对象的挂载）</span><br><span class="line">package.json：全局依赖</span><br><span class="line">vue.config.js：工程全局配置文件（改变端口...）</span><br></pre></td></tr></table></figure><h2 id="5、准备操作"><a href="#5、准备操作" class="headerlink" title="5、准备操作"></a>5、准备操作</h2><h4 id="5-1：vue-config-js"><a href="#5-1：vue-config-js" class="headerlink" title="5.1：vue.config.js"></a>5.1：vue.config.js</h4><h5 id="修改端口号以及页面标题"><a href="#修改端口号以及页面标题" class="headerlink" title="修改端口号以及页面标题"></a>修改端口号以及页面标题</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const &#123; defineConfig &#125; = require(&#x27;@vue/cli-service&#x27;)</span><br><span class="line">module.exports = defineConfig(&#123;</span><br><span class="line">  transpileDependencies: true,</span><br><span class="line">  // 修改端口号</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    port: 7000</span><br><span class="line">  &#125;,</span><br><span class="line">  // 修改页面标题</span><br><span class="line">  chainWebpack: config =&gt;&#123;</span><br><span class="line">    config.plugin(&#x27;html&#x27;)</span><br><span class="line">        .tap(args =&gt; &#123;</span><br><span class="line">          args[0].title = &quot;Zero6的UI页面&quot;;</span><br><span class="line">          return args;</span><br><span class="line">        &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/vue2%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE6.png"></p><h4 id="5-2：App-vue"><a href="#5-2：App-vue" class="headerlink" title="5.2：App.vue"></a>5.2：App.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="5-3：Manager-vue"><a href="#5-3：Manager-vue" class="headerlink" title="5.3：Manager.vue"></a>5.3：Manager.vue</h4><p><strong>注意</strong>：<strong>在template当中，只能存在一个div</strong>。</p><h5 id="主路由"><a href="#主路由" class="headerlink" title="主路由"></a><strong>主路由</strong></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-aside</span>&gt;</span></span><br><span class="line">        侧边栏</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-header</span>&gt;</span></span><br><span class="line">         头部</span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 主体区域：运用子路由实现 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">router-view</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;HomeView&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="子路由"><a href="#子路由" class="headerlink" title="子路由"></a><strong>子路由</strong></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">       主体区域的内容</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%9B%B4%E6%94%B9%E5%90%8E%E7%9A%84%E7%9B%AE%E5%BD%95.png"></p><h4 id="5-4：router-js【路由】"><a href="#5-4：router-js【路由】" class="headerlink" title="5.4：router.js【路由】"></a>5.4：router.js【路由】</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; component &#125; <span class="keyword">from</span> <span class="string">&#x27;vue/types/umd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Manager&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Manager.vue&#x27;</span>),</span><br><span class="line">    <span class="comment">// 重定向主页为/home</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="comment">// 子路由：其中path部分不可有“/”出现</span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;home&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Home.vue&#x27;</span>) &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  ....</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">base</span>: process.<span class="property">env</span>.<span class="property">BASE_URL</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h4 id="5-5：删除components当中的内容"><a href="#5-5：删除components当中的内容" class="headerlink" title="5.5：删除components当中的内容"></a>5.5：删除components当中的内容</h4><h4 id="5-6：删除src中的AboutVue-vue"><a href="#5-6：删除src中的AboutVue-vue" class="headerlink" title="5.6：删除src中的AboutVue.vue"></a>5.6：删除src中的AboutVue.vue</h4><h4 id="5-7：global-css-全局css配置"><a href="#5-7：global-css-全局css配置" class="headerlink" title="5.7：global.css  全局css配置"></a>5.7：global.css  全局css配置</h4><p>在<strong>assets目录下创建scc目录</strong>，并在<strong>css目录下创建global.css文件</strong>，总体呈现为“<strong>assets&#x2F;css&#x2F;global.css</strong>”。</p><h5 id="global-css文件内容展示"><a href="#global-css文件内容展示" class="headerlink" title="global.css文件内容展示"></a>global.css文件内容展示</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="main-js文件中导入"><a href="#main-js文件中导入" class="headerlink" title="main.js文件中导入"></a>main.js文件中导入</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line"></span><br><span class="line">import &#x27;@/assets/css/global.css&#x27; //导入global.css</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure><h4 id="5-8：页面的初始化（基本格式）"><a href="#5-8：页面的初始化（基本格式）" class="headerlink" title="5.8：页面的初始化（基本格式）"></a>5.8：页面的初始化（基本格式）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        页面</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#x27;Login&#x27;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="6、添加新的菜单和页面"><a href="#6、添加新的菜单和页面" class="headerlink" title="6、添加新的菜单和页面"></a>6、添加新的菜单和页面</h2><h4 id="一：新建一个Vue文件（User-vue）"><a href="#一：新建一个Vue文件（User-vue）" class="headerlink" title="一：新建一个Vue文件（User.vue）"></a>一：新建一个Vue文件（User.vue）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        用户信息</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="二：在router-js【路由】中新添子路由"><a href="#二：在router-js【路由】中新添子路由" class="headerlink" title="二：在router.js【路由】中新添子路由"></a>二：在router.js【路由】中新添子路由</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;user&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/manager/User.vue&#x27;</span>) &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E5%AD%90%E8%B7%AF%E7%94%B1.png"></p><h4 id="三：添加一个新的菜单（Manager-vue）"><a href="#三：添加一个新的菜单（Manager-vue）" class="headerlink" title="三：添加一个新的菜单（Manager.vue）"></a>三：添加一个新的菜单（Manager.vue）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>信息管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/user&quot;</span>&gt;</span>用户信息<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java设计模式之迪米特法则(DP)</title>
      <link href="/2024/01/29/%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99/"/>
      <url>/2024/01/29/%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="何为迪米特法则"><a href="#何为迪米特法则" class="headerlink" title="何为迪米特法则"></a>何为迪米特法则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">总体思想：尽量独立</span><br><span class="line">具体分析：</span><br><span class="line">1.对象之间关系保持越简单越好，避免依赖过多其他对象。</span><br><span class="line">如果其中一个对象需要调用另外一个对象的某个方法时，</span><br><span class="line">可以通过第三者转发这个调用。</span><br><span class="line">2.尽可能的将自己的行为封装在内，而不暴露给外部。</span><br><span class="line">其他对象只能通过对象的接口进行交互，就无需了解对象的内部实现。</span><br></pre></td></tr></table></figure><h1 id="加深迪米特法则印象"><a href="#加深迪米特法则印象" class="headerlink" title="加深迪米特法则印象"></a>加深迪米特法则印象</h1><p><strong>此处，我们将会通过案例的方式来让读者进一步加深对迪米特法则的印象。</strong></p><h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><p>此处我们以“领导要求员工统计金额”这一例子来讲解迪米特法则。</p><p>整体思路：员工通过add方法添加价格，再通过PriceCount方法来进行计算，得出总金额，交给领导，领导就可直接调用PriceCount这一方法获得金额，无需知道其内部计算原理。</p><p>若不按照迪米特法则，则需要领导TeamLeader与员工TeamEmplotyee和Price产生联系，在领导TeamLeader内部计算金额数(领导自己计算金额)，会显得繁琐且显得不合理。而通过运用迪米特法则，领导TeamLeader直接与员工TeamEmployee交接，就可直接获取金额。</p><h2 id="案例代码显示"><a href="#案例代码显示" class="headerlink" title="案例代码显示"></a>案例代码显示</h2><h3 id="Price类：各个金额"><a href="#Price类：各个金额" class="headerlink" title="Price类：各个金额"></a>Price类：各个金额</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Price &#123;</span><br><span class="line">    private double price;</span><br><span class="line"></span><br><span class="line">    public Price(double price) &#123;</span><br><span class="line">        this.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getPrice() &#123;</span><br><span class="line">        return price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TeamEmployee类：员工</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class TeamEmployee &#123;</span><br><span class="line">    List&lt;Price&gt; prices =new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public void add(Price price)&#123;</span><br><span class="line">        prices.add(price);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double PriceCount()&#123;</span><br><span class="line">        double total = 0;</span><br><span class="line">        for (Price price : prices) &#123;</span><br><span class="line">            double prices = price.getPrice();</span><br><span class="line">            total += prices;</span><br><span class="line">        &#125;</span><br><span class="line">        return total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TeamLeader类：领导</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class TeamLeader &#123;</span><br><span class="line">    public void TotalPrice(TeamEmployee employee)&#123;</span><br><span class="line">        double total = employee.PriceCount();</span><br><span class="line">        System.out.println(&quot;总金额：&quot;+total);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码的实现"><a href="#代码的实现" class="headerlink" title="代码的实现"></a>代码的实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //员工</span><br><span class="line">        TeamEmployee employee = new TeamEmployee();</span><br><span class="line">        employee.add(new Price(24.4));</span><br><span class="line">        employee.add(new Price(5.64));</span><br><span class="line"></span><br><span class="line">        //领导</span><br><span class="line">        TeamLeader leader = new TeamLeader();</span><br><span class="line">        leader.TotalPrice(employee);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">总金额：30.04</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Java设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java设计模式之接口隔离原则(ISP)</title>
      <link href="/2024/01/23/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99/"/>
      <url>/2024/01/23/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="何为接口隔离原则"><a href="#何为接口隔离原则" class="headerlink" title="何为接口隔离原则"></a>何为接口隔离原则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">接口功能界限根据共享程度切割边界，鼓励多实现。</span><br><span class="line">通俗来讲，接口应该尽可能的细化，不应强迫用户依赖他不需要的接口。</span><br></pre></td></tr></table></figure><h1 id="加深接口隔离原则印象"><a href="#加深接口隔离原则印象" class="headerlink" title="加深接口隔离原则印象"></a>加深接口隔离原则印象</h1><p><strong>此处，我们将会通过案例的方式来让读者进一步加深对接口隔离原则的印象。</strong></p><h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><p>在此，我们通过机器人的案例为各位小伙伴来讲解接口隔离原则的概念。首先，有三个接口用来表示机器人不同的功能，分别是烹饪，扫地，画画。然后，我们会编写两个机器人分别是机器人A，机器人B用来实现这不同的功能。</p><p>若不用接口隔离原则的话，我们只能将这三个功能写在同一个接口当中，这会导致我们编写机器人的时候会遇到我们所不需要的功能，而又不得不用这一接口。此时，接口隔离原则的好处就会体现出来。</p><h2 id="案例代码显示"><a href="#案例代码显示" class="headerlink" title="案例代码显示"></a>案例代码显示</h2><h3 id="接口：三个不同功能-烹饪，扫地，画画"><a href="#接口：三个不同功能-烹饪，扫地，画画" class="headerlink" title="接口：三个不同功能(烹饪，扫地，画画)"></a>接口：三个不同功能(烹饪，扫地，画画)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//烹饪</span><br><span class="line">public interface RobotCook &#123;</span><br><span class="line">    void cook();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//扫地</span><br><span class="line">public interface RobotSweep &#123;</span><br><span class="line">    void sweep();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//画画</span><br><span class="line">public interface RobotDraw &#123;</span><br><span class="line">    void draw();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现类：实现不同功能"><a href="#实现类：实现不同功能" class="headerlink" title="实现类：实现不同功能"></a>实现类：实现不同功能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//机器人A，具有扫地，烹饪功能</span><br><span class="line">public class RobotA implements RobotSweep,RobotCook &#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public RobotA(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void cook() &#123;</span><br><span class="line">        System.out.println(getName()+&quot;会烹饪...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void sweep() &#123;</span><br><span class="line">        System.out.println(getName()+&quot;会扫地...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//机器人B，具有烹饪，画画的功能</span><br><span class="line">public class RobotB implements RobotCook,RobotDraw&#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public RobotB(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void cook() &#123;</span><br><span class="line">        System.out.println(getName()+&quot;会烹饪...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void draw() &#123;</span><br><span class="line">        System.out.println(getName()+&quot;会画画...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码的实现"><a href="#代码的实现" class="headerlink" title="代码的实现"></a>代码的实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        RobotA robotA = new RobotA(&quot;机器人一号&quot;);</span><br><span class="line">        RobotB robotB = new RobotB(&quot;机器人二号&quot;);</span><br><span class="line"></span><br><span class="line">        robotA.cook();</span><br><span class="line">        robotA.sweep();</span><br><span class="line">        robotB.cook();</span><br><span class="line">        robotB.draw();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">机器人一号会烹饪...</span><br><span class="line">机器人一号会扫地...</span><br><span class="line">机器人二号会烹饪...</span><br><span class="line">机器人二号会画画...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Java设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java设计模式之依赖倒转原则(DIP)</title>
      <link href="/2024/01/22/%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99/"/>
      <url>/2024/01/22/%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="何为依赖倒转原则"><a href="#何为依赖倒转原则" class="headerlink" title="何为依赖倒转原则"></a>何为依赖倒转原则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">依赖抽象(接口)，降低模块之间的耦合度，便于协同开发。</span><br><span class="line">核心思想：面向接口的编程</span><br></pre></td></tr></table></figure><p><strong>在此，可能会有小伙伴表示不理解，但没关系，请往下看。</strong></p><h1 id="加深依赖倒转原则印象"><a href="#加深依赖倒转原则印象" class="headerlink" title="加深依赖倒转原则印象"></a>加深依赖倒转原则印象</h1><p><strong>此处，我们将会通过案例的方式来让读者进一步加深对依赖倒转原则的印象。</strong></p><h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><p>我们在此以计算圆面积这一案例进行讲解。想象一下，A同学负责编写圆面积计算，B同学则需要调用这一计算圆面积的类。此时，B同学不可能会等待A同学写完后，去想他所要。那么，我们将会以接口的方式来统一标准，使得这一计算圆面积的类抽象化，B同学就不会等待A同学写完后再去所要了，同时B同学也无需关心A同学是怎么编写来实现计算的过程，从而达到协同开发的目的，降低了模块之间的耦合度。</p><h2 id="案例代码显示"><a href="#案例代码显示" class="headerlink" title="案例代码显示"></a>案例代码显示</h2><h3 id="接口：定规范的作用"><a href="#接口：定规范的作用" class="headerlink" title="接口：定规范的作用"></a>接口：定规范的作用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface CircleCalculation &#123;</span><br><span class="line">    double pi=3.14;</span><br><span class="line">    Double CircularArea(Double r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="写接口的A同学"><a href="#写接口的A同学" class="headerlink" title="写接口的A同学"></a>写接口的A同学</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Calculation implements CircleCalculation&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Double CircularArea(Double r) &#123;</span><br><span class="line">        return pi*(r*r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="用接口的B同学"><a href="#用接口的B同学" class="headerlink" title="用接口的B同学"></a>用接口的B同学</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Use &#123;</span><br><span class="line">    CircleCalculation user = new Calculation();</span><br><span class="line"></span><br><span class="line">    public Use(CircleCalculation user) &#123;</span><br><span class="line">        this.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void calculate(double r)&#123;</span><br><span class="line">        Double result = user.CircularArea(r);</span><br><span class="line">        System.out.println(&quot;计算的结果：以半径为&quot;+r+&quot;的圆的半径为&quot;+result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码的实现"><a href="#代码的实现" class="headerlink" title="代码的实现"></a>代码的实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Use user = new Use(new Calculation());</span><br><span class="line">        user.calculate(3.0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">计算的结果：以半径为3.0的圆的半径为28.26</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Java设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java设计模式之合成复用原则(CRP)</title>
      <link href="/2024/01/22/%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99/"/>
      <url>/2024/01/22/%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="何为合成复用原则"><a href="#何为合成复用原则" class="headerlink" title="何为合成复用原则"></a>何为合成复用原则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">总体思想：优先选择组合或聚合，尽量不用继承</span><br><span class="line">具体讲解：在一个对象中尽可能的使用一些已有的对象，从而达到复用已有功能的效果</span><br></pre></td></tr></table></figure><p><strong>在此，可能会有小伙伴表示不理解，但没关系，请往下看。</strong></p><h1 id="加深合成复用原则印象"><a href="#加深合成复用原则印象" class="headerlink" title="加深合成复用原则印象"></a>加深合成复用原则印象</h1><p><strong>此处，我们将会通过案例的方式来让读者进一步加深对合成复用原则的印象。</strong></p><h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><p>此处，我们以汽车这一案例来讲解合成复用原则。</p><p>总体思路：汽车类ColoredCar复用了 类型类Type 和 颜色类Color，实现了对汽车类型和颜色的分离，可以轻易的改变汽车类型和颜色，无需改动原有的代码。</p><p>若不使用合成复用原则，则需要汽车类ColoredCar 来继承 类型类Type，在此基础上添加颜色这一属性。这导致了ColoredCar类 与 Type类 存在紧耦合关系，同时在为其他车添加不同颜色的同时需要创建大量的类，显得十分的繁琐而又无意义。</p><h2 id="案例代码显示"><a href="#案例代码显示" class="headerlink" title="案例代码显示"></a>案例代码显示</h2><h3 id="类型类：汽车的类型"><a href="#类型类：汽车的类型" class="headerlink" title="类型类：汽车的类型"></a>类型类：汽车的类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Type &#123;</span><br><span class="line">    private String type;</span><br><span class="line"></span><br><span class="line">    public Type(String type) &#123;</span><br><span class="line">        this.type = type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getType() &#123;</span><br><span class="line">        return type;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="颜色类：汽车的颜色"><a href="#颜色类：汽车的颜色" class="headerlink" title="颜色类：汽车的颜色"></a>颜色类：汽车的颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Color &#123;</span><br><span class="line">    private String color;</span><br><span class="line"></span><br><span class="line">    public Color(String color) &#123;</span><br><span class="line">        this.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getColor() &#123;</span><br><span class="line">        return color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="汽车类"><a href="#汽车类" class="headerlink" title="汽车类"></a>汽车类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Car &#123;</span><br><span class="line">    private Type type;</span><br><span class="line">    private Color color;</span><br><span class="line"></span><br><span class="line">    public Car(Type car, Color color) &#123;</span><br><span class="line">        this.type = car;</span><br><span class="line">        this.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void sayColoredCar()&#123;</span><br><span class="line">        System.out.println(&quot;这是一辆&quot;+color.getColor()+&quot;的&quot;+ type.getType());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码的实现"><a href="#代码的实现" class="headerlink" title="代码的实现"></a>代码的实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Car car = new Car(new Type(&quot;迈凯伦&quot;),new Color(&quot;红色&quot;));</span><br><span class="line">        car.sayColoredCar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是一辆红色的迈凯伦</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Java设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java设计模式之里氏代换原则(LSP)</title>
      <link href="/2024/01/21/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99/"/>
      <url>/2024/01/21/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="何为里氏代换原则"><a href="#何为里氏代换原则" class="headerlink" title="何为里氏代换原则"></a>何为里氏代换原则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过继承的方式，确保子类对象能够完全的替换父类对象，并且要保证程序的正确性。</span><br></pre></td></tr></table></figure><h1 id="加深里氏代换原则印象"><a href="#加深里氏代换原则印象" class="headerlink" title="加深里氏代换原则印象"></a>加深里氏代换原则印象</h1><p><strong>此处，我们将会通过案例的方式来让读者进一步加深对里氏代换原则的印象。</strong></p><h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><p>首先定义一个抽象的父类来描述画这一行为。其次，我们通过继承的方式来具体化画这一行为，如：画圆，画正方形…。接下来，我们可以描述一个人画画的场景，此处由于不知道具体化什么，因此使用父类来统一描述。</p><p>最后，在测试环节，其子类就可以代替其父类，从而输出其具体的结果。</p><h2 id="案例代码显示"><a href="#案例代码显示" class="headerlink" title="案例代码显示"></a>案例代码显示</h2><h3 id="父类：抽象类，描述画这一行为"><a href="#父类：抽象类，描述画这一行为" class="headerlink" title="父类：抽象类，描述画这一行为"></a>父类：抽象类，描述画这一行为</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Graphical &#123;</span><br><span class="line">    abstract void draw();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="子类：使得画这一行为具体化"><a href="#子类：使得画这一行为具体化" class="headerlink" title="子类：使得画这一行为具体化"></a>子类：使得画这一行为具体化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//画圆</span><br><span class="line">public class Circle extends Graphical &#123;</span><br><span class="line">    @Override</span><br><span class="line">    void draw() &#123;</span><br><span class="line">        System.out.println(&quot;正在画圆...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//画正方形</span><br><span class="line">public class Square extends Graphical&#123;</span><br><span class="line">    @Override</span><br><span class="line">    void draw() &#123;</span><br><span class="line">        System.out.println(&quot;正在画正方形...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="人的行为描述"><a href="#人的行为描述" class="headerlink" title="人的行为描述"></a>人的行为描述</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">    void Draw(Graphical g)&#123;</span><br><span class="line">        g.draw();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码的实现"><a href="#代码的实现" class="headerlink" title="代码的实现"></a>代码的实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Person person = new Person();</span><br><span class="line"></span><br><span class="line">        person.Draw(new Circle());</span><br><span class="line">        person.Draw(new Square());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正在画圆...</span><br><span class="line">正在画正方形...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Java设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java设计模式之开闭原则(OCP)</title>
      <link href="/2024/01/20/%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99/"/>
      <url>/2024/01/20/%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="何为开闭原则"><a href="#何为开闭原则" class="headerlink" title="何为开闭原则"></a>何为开闭原则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">开：对外扩展是开放的</span><br><span class="line">闭：对内修改是封闭的</span><br></pre></td></tr></table></figure><p><strong>认知</strong>：在设计一个模块时，应当使得此模块在不被修改源代码情况下来改变这个模块的内容</p><h1 id="加深开闭原则印象"><a href="#加深开闭原则印象" class="headerlink" title="加深开闭原则印象"></a>加深开闭原则印象</h1><p><strong>此处，我们将会通过案例的方式来让读者进一步加深对开闭原则的印象。</strong></p><h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><p>我们以猫咪这一案例进行讲解。首先我们定义了猫咪得统一行为（睡，吃）。由于不同猫咪有不同的行为，因此我们通过继承的方式来对其行为进行扩展，而不是在原来的代码处进行修改。</p><h2 id="案例代码显示"><a href="#案例代码显示" class="headerlink" title="案例代码显示"></a>案例代码显示</h2><h3 id="统一的类：猫咪的统一行为"><a href="#统一的类：猫咪的统一行为" class="headerlink" title="统一的类：猫咪的统一行为"></a>统一的类：猫咪的统一行为</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class Cat &#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public Cat(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //猫咪的统一行为</span><br><span class="line">    public void eat()&#123;</span><br><span class="line">        System.out.println(getName()+&quot;正在吃...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void sleep()&#123;</span><br><span class="line">        System.out.println(getName()+&quot;正在睡...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="具体猫咪类：对其行为进行扩展"><a href="#具体猫咪类：对其行为进行扩展" class="headerlink" title="具体猫咪类：对其行为进行扩展"></a>具体猫咪类：对其行为进行扩展</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//波斯猫</span><br><span class="line">public class PersianCat extends Cat&#123;</span><br><span class="line"></span><br><span class="line">    public PersianCat(String name) &#123;</span><br><span class="line">        super(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void playBall()&#123;</span><br><span class="line">        System.out.println(getName()+&quot;喜欢玩球...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码的实现"><a href="#代码的实现" class="headerlink" title="代码的实现"></a>代码的实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        PersianCat cat = new PersianCat(&quot;波斯猫&quot;);</span><br><span class="line">        cat.sleep();</span><br><span class="line">        cat.eat();</span><br><span class="line">        cat.playBall();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">波斯猫正在睡...</span><br><span class="line">波斯猫正在吃...</span><br><span class="line">波斯猫喜欢玩球...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Java设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduce之Java端操作（词频统计）</title>
      <link href="/2024/01/17/MapReduce%E4%B9%8BJava%E7%AB%AF%E6%93%8D%E4%BD%9C/"/>
      <url>/2024/01/17/MapReduce%E4%B9%8BJava%E7%AB%AF%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="储备知识"><a href="#储备知识" class="headerlink" title="储备知识"></a>储备知识</h1><h2 id="1-常见的继承Writable接口的类型"><a href="#1-常见的继承Writable接口的类型" class="headerlink" title="1.常见的继承Writable接口的类型"></a>1.常见的继承Writable接口的类型</h2><pre><code>LongWritable长整数类型的Writable【将长整数值序列化为字节流】IntWritable整数类型的Writable【将整数值序列化为字节流】Text文本数据的Writable【将文本字符串转换为UTF-8编码的字节流】</code></pre><h2 id="2-Writable接口结构组成"><a href="#2-Writable接口结构组成" class="headerlink" title="2.Writable接口结构组成"></a>2.Writable接口结构组成</h2><pre><code>interface Writable：面向【值】        void write(DataOutput out) 【序列化】        void readFields(DataInput in) 【反序列化】引申：interface WritableComparable&lt;T&gt; extends Writable, Comparable&lt;T&gt;：面向【键】        void write(DataOutput out) 序列化        void readFields(DataInput in) 反序列化        int compareTo(T o);</code></pre><h1 id="MapReduce在Java端的设计"><a href="#MapReduce在Java端的设计" class="headerlink" title="MapReduce在Java端的设计"></a>MapReduce在Java端的设计</h1><h2 id="Map端"><a href="#Map端" class="headerlink" title="Map端"></a>Map端</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">static class StoryMapper extends Mapper&lt;LongWritable,Text,Text,IntWritable&gt; &#123;</span><br><span class="line">    private Text word = new Text();</span><br><span class="line">    private IntWritable count = new IntWritable();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">        //1.将文章进行初步处理</span><br><span class="line">        String line=value.toString()</span><br><span class="line">                .trim()</span><br><span class="line">                .replaceAll(&quot;\\s+&quot;,&quot; &quot;)</span><br><span class="line">                .replaceAll(&quot;[^a-zA-Z ]&quot;,&quot;&quot;);</span><br><span class="line"></span><br><span class="line">        //2.将一个长字符串分割成多个较短的字符串，以便进一步处理或分析</span><br><span class="line">        //自定义分隔符：如果不指定分隔符，它将默认使用【空格】作为分隔符</span><br><span class="line">        StringTokenizer it = new StringTokenizer(line);</span><br><span class="line">        if (it.countTokens()&gt;0) &#123;</span><br><span class="line">            Map&lt;String,Integer&gt; wordCount = new HashMap&lt;&gt;(it.countTokens());</span><br><span class="line">            while (it.hasMoreElements())&#123;</span><br><span class="line">                String word = it.nextToken();</span><br><span class="line">                if (!wordCount.containsKey(word))&#123;</span><br><span class="line">                    wordCount.put(word,0);</span><br><span class="line">                &#125;</span><br><span class="line">                wordCount.put(word,wordCount.get(word)+1);</span><br><span class="line">            &#125;</span><br><span class="line">            wordCount.entrySet().forEach(e-&gt;&#123;</span><br><span class="line">                word.set(e.getKey());</span><br><span class="line">                count.set(e.getValue());</span><br><span class="line">                try &#123;</span><br><span class="line">                    context.write(word,count);</span><br><span class="line">                &#125; catch (IOException ioException) &#123;</span><br><span class="line">                    ioException.printStackTrace();</span><br><span class="line">                &#125; catch (InterruptedException interruptedException) &#123;</span><br><span class="line">                    interruptedException.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Reduce端"><a href="#Reduce端" class="headerlink" title="Reduce端"></a>Reduce端</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">static class StoryReducer extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt;&#123;</span><br><span class="line">    private IntWritable count = new IntWritable();</span><br><span class="line">    @Override</span><br><span class="line">    protected void reduce(Text word, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">        int num = 0;</span><br><span class="line">        Iterator&lt;IntWritable&gt; it = values.iterator();</span><br><span class="line">        while (it.hasNext()) &#123;</span><br><span class="line">            num+=it.next().get();</span><br><span class="line">        &#125;</span><br><span class="line">        count.set(num);</span><br><span class="line">        context.write(word,count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="配置（main函数）"><a href="#配置（main函数）" class="headerlink" title="配置（main函数）"></a>配置（main函数）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">//配置</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    //文件的由来与去处</span><br><span class="line">    String src = &quot;/hadoop/data/TheLittlePrince.txt&quot;;//在HDFS中必须要存在</span><br><span class="line">    String dst = &quot;/hadoop/job/WordCountResult&quot;;//在HDFS中不可存在</span><br><span class="line"></span><br><span class="line">    //HDFS配置</span><br><span class="line">    String url=&quot;hdfs://single:9000&quot;;</span><br><span class="line">    Map&lt;String,String&gt; items = new HashMap&lt;&gt;();</span><br><span class="line">    items.put(&quot;dfs.replication&quot;,&quot;3&quot;);</span><br><span class="line">    items.put(&quot;dfs.blocksize&quot;,&quot;128M&quot;);</span><br><span class="line">    HDFS hdfs=null;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        //HDFS用于验证</span><br><span class="line">        hdfs =new HDFS(url,items);</span><br><span class="line">        if (!hdfs.exists(src))&#123;</span><br><span class="line">            throw new IOException(&quot;Your File is not exists&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        hdfs.deleteIfExist(dst);</span><br><span class="line"></span><br><span class="line">        //MapReduce配置</span><br><span class="line">        //1.创建一个新的 MapReduce 作业实例</span><br><span class="line">        //hdfs.getConfig():获取配置信息</span><br><span class="line">        //&quot;story_word_count&quot;:作业的名称</span><br><span class="line">        Job job = Job.getInstance(hdfs.getConfig(), &quot;story_word_count&quot;);</span><br><span class="line">        job.setJarByClass(StoryWordCount.class);//指定作业主类（指定对象）</span><br><span class="line">        job.setNumReduceTasks(1);//设置Reducer的数量</span><br><span class="line"></span><br><span class="line">        //2.设置map与reduce的出口类型</span><br><span class="line">        //map：</span><br><span class="line">        job.setMapperClass(StoryMapper.class);</span><br><span class="line">        job.setMapOutputKeyClass(Text.class);</span><br><span class="line">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class="line">        //reduce：</span><br><span class="line">        job.setReducerClass(StoryReducer.class);</span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line"></span><br><span class="line">        //3.设置作业的路径(HDFS)</span><br><span class="line">        //设置作业的输入路径，即数据源的路径。</span><br><span class="line">        Path srcPath = new Path(url+src);</span><br><span class="line">        FileInputFormat.setInputPaths(job,srcPath);</span><br><span class="line">        Path destPath = new Path(url+dst);</span><br><span class="line">        FileOutputFormat.setOutputPath(job,destPath);</span><br><span class="line"></span><br><span class="line">        //4.判断作业是否成功完成,</span><br><span class="line">        // job.waitForCompletion(true) 会启动作业并等待其完成。</span><br><span class="line">        //0 表示成功，1 表示失败</span><br><span class="line">        if (job.waitForCompletion(true))&#123;</span><br><span class="line">            System.out.println(0);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            System.out.println(1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        if (Objects.nonNull(hdfs))&#123;</span><br><span class="line">            hdfs.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> Java </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
            <tag> MapReduce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据之Hadoop（MapReduce过程详解）</title>
      <link href="/2024/01/17/MapReduce%E8%BF%87%E7%A8%8B%E8%AE%B2%E8%A7%A3/"/>
      <url>/2024/01/17/MapReduce%E8%BF%87%E7%A8%8B%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="MapReduce过程图"><a href="#MapReduce过程图" class="headerlink" title="MapReduce过程图"></a>MapReduce过程图</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/1-hadoop-mapreduce.png"></p><h1 id="MapReduce过程讲解"><a href="#MapReduce过程讲解" class="headerlink" title="MapReduce过程讲解"></a>MapReduce过程讲解</h1><pre><code>Mapper：    1.RecordReader调用read()来读切片的一行：    2.读到的一行，以LongWritable为键,Text为值；传到Mapper端的map方法中    4.根据业务需求，对Text值进行解析，处理    5.处理完数据后，通过context.write(),将数据送至OutPutCollector中去    6.OutputFormat将数据送到环形缓冲区内    【环形缓冲区默认的大小为100兆】    连续存储，达到【存储总量的80%】时,进行【写盘】操作。    写盘时,会进行两个操作：        先进行【分区】：保证分区为有序的  =&gt;  每个map中分区数量由 job.setNumReduceTasks 决定        再进行【排序】：在同一个分区中，保证键为升序排序  =&gt;  排序方法：快速排序    最后溢出，形成一个小文件，即：写盘操作    ------------------------------------------------------------------------------------    重复过程：        随着RecordReader一行一行的读取,map方法一行一行的处理,环形缓冲区溢出一个一个的小文件        最终：            Mapper端处理结束后，Mapper端会有N个小文件。            【每一个小文件都是分区有序，统一分区内按照键按升序排序的】    ------------------------------------------------------------------------------------    7.将小文件合并为大文件：        合并前：单个小文件分区有序，分区内有序                |                |【归并排序：基于已有序的小文件的同分区合并】                |        合并后：大文件按分区合并。最终分区有序,分区内有序                                    shuffle：    8.每一个Reducer根据自己的分区号，从各个Mapper端中拷贝属于这个分区的数据到Reducer端本地磁盘中。                            Reducer：    9.每个Reducer端,将文件合并起来。        按照【键】进行升序排序  =&gt;  归并排序    10.对文件根据key进行分组,形成一对多的关系:reduce(key,values)    11.根据需求,对其进行聚合操作(例如求和、计数、平均值等),        数据形成了一对一的关系，即每个键对应一个聚合后的值。        通过context.write()，将数据OutPutFormat中去    12.通过OutPutFormat,批量向磁盘中写，形成最终结果：part-r-000000</code></pre>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
            <tag> MapReduce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据之Hadoop（HDFS查看用户行为日志文件）</title>
      <link href="/2024/01/15/HDFS%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6/"/>
      <url>/2024/01/15/HDFS%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="1、储备知识点"><a href="#1、储备知识点" class="headerlink" title="1、储备知识点"></a>1、储备知识点</h1><h2 id="1-1用户行为日志文件路径"><a href="#1-1用户行为日志文件路径" class="headerlink" title="1.1用户行为日志文件路径"></a>1.1用户行为日志文件路径</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd .../hadoop-3.1.3/data/dfs/name/current</span><br></pre></td></tr></table></figure><p><strong>说明：</strong>省略号部分为你存储hadoop的路径</p><h2 id="1-2路径下内容认知"><a href="#1-2路径下内容认知" class="headerlink" title="1.2路径下内容认知"></a>1.2路径下内容认知</h2><h3 id="内容展示"><a href="#内容展示" class="headerlink" title="内容展示"></a>内容展示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ls </span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">edits_0000000000000000001-0000000000000000002  fsimage_0000000000000000006</span><br><span class="line">edits_0000000000000000003-0000000000000000003  fsimage_0000000000000000006.md5</span><br><span class="line">edits_0000000000000000004-0000000000000000005  fsimage_0000000000000000011</span><br><span class="line">edits_0000000000000000006-0000000000000000006  fsimage_0000000000000000011.md5</span><br><span class="line">edits_0000000000000000007-0000000000000000011  seen_txid</span><br><span class="line">edits_inprogress_0000000000000000012           VERSION</span><br><span class="line">------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><p><strong>fsimage:</strong></p><p>&ensp; &ensp; &ensp;&ensp;文件系统镜像，这个文件包含了整个文件系统的元数据信息的快照【看最后数字最大的那个】<br><strong>edits:</strong></p><p>&ensp; &ensp;&ensp; &ensp;这个文件包含了对文件系统的所有变更（如创建、删除、重命名文件或目录）的记录，它是一个持续增长的日志文件【edits_inprogress_000000000000000132为当前记录】</p><h1 id="2、HDFS查看用户行为日志文件的步骤"><a href="#2、HDFS查看用户行为日志文件的步骤" class="headerlink" title="2、HDFS查看用户行为日志文件的步骤"></a>2、HDFS查看用户行为日志文件的步骤</h1><h2 id="2-1shell命令"><a href="#2-1shell命令" class="headerlink" title="2.1shell命令"></a>2.1shell命令</h2><h3 id="用于处理Hadoop文件系统镜像"><a href="#用于处理Hadoop文件系统镜像" class="headerlink" title="用于处理Hadoop文件系统镜像"></a>用于处理Hadoop文件系统镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop oiv -p xml -i fsimage_0000000000000000000 -o ~/hadoop/fsingle10172153</span><br></pre></td></tr></table></figure><h3 id="用于处理Hadoop文件系统的编辑日志"><a href="#用于处理Hadoop文件系统的编辑日志" class="headerlink" title="用于处理Hadoop文件系统的编辑日志"></a>用于处理Hadoop文件系统的编辑日志</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs oev -p xml -i edits_inprogress_0000000000000000012 -o ~/hadoop/edit10172153</span><br></pre></td></tr></table></figure><p><strong>解释</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-p xml: 【指定了你想要将 fsimage 文件转换成的格式】。这里是 XML 格式</span><br><span class="line">-i fsimage_0000000000000000000 【指定要处理的 fsimage 文件的路径】。这表示 fsimage 文件中的元数据将被转换成 XML 格式的输出。</span><br><span class="line">-o ~/hadoop/fsingle10172153    【指定输出文件的路径】。转换后的 XML 数据将被写入~/hadoop/fsingle10172153 文件中。</span><br></pre></td></tr></table></figure><h2 id="2-2手动操作"><a href="#2-2手动操作" class="headerlink" title="2.2手动操作"></a>2.2手动操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在hadoop目录下的fsingle10172153文件拖至桌面，</span><br><span class="line">打开后，复制于xml转换器中，进行转换即可。</span><br></pre></td></tr></table></figure><h1 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h1><p>【第一部分】：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;namespaceId&gt;372189870&lt;/namespaceId&gt;</span><br></pre></td></tr></table></figure><p>解释：【唯一标识】HDFS中的一个命名空间。</p><p>【第二部分】：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;ErasureCodingSection&gt;</span><br><span class="line">&lt;erasureCodingPolicy&gt;</span><br><span class="line">&lt;policyId&gt;1&lt;/policyId&gt;一个特定的纠删码编码策略</span><br><span class="line">&lt;policyName&gt;RS-6-3-1024k&lt;/policyName&gt;策略的名称</span><br><span class="line">&lt;cellSize&gt;1048576&lt;/cellSize&gt;编码单元的大小，通常以字节为单位</span><br><span class="line">&lt;policyState&gt;DISABLED&lt;/policyState&gt;策略的状态</span><br><span class="line">&lt;ecSchema&gt;包含了有关编码方案的信息</span><br><span class="line">&lt;codecName&gt;rs&lt;/codecName&gt;使用的编解码器的名称</span><br><span class="line">&lt;dataUnits&gt;6&lt;/dataUnits&gt;原始数据块的数量</span><br><span class="line">&lt;parityUnits&gt;3&lt;/parityUnits&gt;冗余数据块（校验块）的数量</span><br><span class="line">&lt;/ecSchema&gt;</span><br><span class="line">&lt;/erasureCodingPolicy&gt;</span><br><span class="line">.......</span><br><span class="line">&lt;/ErasureCodingSection&gt;</span><br></pre></td></tr></table></figure><p>【第三部分】：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;INodeDirectorySection&gt;</span><br><span class="line">&lt;directory&gt;</span><br><span class="line">&lt;parent&gt;16385&lt;/parent&gt;根目录：/</span><br><span class="line">&lt;child&gt;16386&lt;/child&gt;一级子目录：/hadoop</span><br><span class="line">&lt;/directory&gt;</span><br><span class="line">&lt;directory&gt;</span><br><span class="line">&lt;parent&gt;16386&lt;/parent&gt;二级子目录的父目录</span><br><span class="line">&lt;child&gt;16387&lt;/child&gt;二级子目录</span><br><span class="line">&lt;child&gt;16388&lt;/child&gt;二级子目录</span><br><span class="line">&lt;child&gt;16389&lt;/child&gt;二级子目录</span><br><span class="line">&lt;child&gt;16390&lt;/child&gt;二级子目录</span><br><span class="line">&lt;/directory&gt;</span><br><span class="line">&lt;/INodeDirectorySection&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> HDFS </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据之Hadoop（HDFS Java客户端操作）</title>
      <link href="/2024/01/14/HDFS%E4%B9%8BJava%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%93%8D%E4%BD%9C/"/>
      <url>/2024/01/14/HDFS%E4%B9%8BJava%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="“HDFS类”的设计"><a href="#“HDFS类”的设计" class="headerlink" title="“HDFS类”的设计"></a>“HDFS类”的设计</h1><h2 id="属性的设计"><a href="#属性的设计" class="headerlink" title="属性的设计"></a>属性的设计</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//属性设计</span><br><span class="line">//属性</span><br><span class="line">private Configuration config;//配置</span><br><span class="line">private FileSystem fileSystem;//用于与HDFS获取交互</span><br><span class="line">//属性初始化</span><br><span class="line">public HDFS(String url, Map&lt;String,String&gt; configItems) throws IOException, InterruptedException &#123;</span><br><span class="line">    //配置</span><br><span class="line">    config = new Configuration();</span><br><span class="line">    //对象不为空【Objects.nonNull(configItems)】及 值不为0【!configItems.isEmpty()】</span><br><span class="line">    if (Objects.nonNull(configItems) &amp;&amp; !configItems.isEmpty())&#123;</span><br><span class="line">        configItems.entrySet().forEach(e-&gt;config.set(e.getKey(),e.getValue()));</span><br><span class="line">    &#125;</span><br><span class="line">    //连接HDFS</span><br><span class="line">    fileSystem = FileSystem.get(URI.create(url),config,&quot;root&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="功能的设置"><a href="#功能的设置" class="headerlink" title="功能的设置"></a>功能的设置</h2><h3 id="1-是否存在"><a href="#1-是否存在" class="headerlink" title="1.是否存在"></a>1.是否存在</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//1.是否存在</span><br><span class="line">public boolean exists(String path) throws IOException &#123;</span><br><span class="line">    return fileSystem.exists(new Path(path));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-类型判断"><a href="#2-类型判断" class="headerlink" title="2.类型判断"></a>2.类型判断</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//类型枚举</span><br><span class="line">public enum TYPE&#123;</span><br><span class="line">    DIRECTORY,FILE,NOT_EXIST</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//2.类型</span><br><span class="line">public TYPE type(String path) throws IOException &#123;</span><br><span class="line">    if (!exists(path))&#123;</span><br><span class="line">        return TYPE.NOT_EXIST;</span><br><span class="line">    &#125;</span><br><span class="line">    Path pt=new Path(path);</span><br><span class="line">    if (fileSystem.getFileStatus(pt).isFile())&#123;</span><br><span class="line">        return TYPE.FILE;</span><br><span class="line">    &#125;</span><br><span class="line">    return TYPE.DIRECTORY;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-删除"><a href="#3-删除" class="headerlink" title="3.删除"></a>3.删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//3.删除</span><br><span class="line">public void deleteIfExist(String path) throws IOException &#123;</span><br><span class="line">    Path ps = new Path(path);</span><br><span class="line">    switch (type(path))&#123;</span><br><span class="line">        case FILE:</span><br><span class="line">            fileSystem.delete(ps,false);//不递归</span><br><span class="line">            break;</span><br><span class="line">        case DIRECTORY:</span><br><span class="line">            fileSystem.delete(ps,true);//递归</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-创建目录"><a href="#4-创建目录" class="headerlink" title="4.创建目录"></a>4.创建目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//4.创建目录</span><br><span class="line">//针对目录，不存在则递归创建</span><br><span class="line">public void mkdirIfNotExist(String path) throws IOException &#123;</span><br><span class="line">    if (!exists(path))&#123;</span><br><span class="line">        fileSystem.mkdirs(new Path(path));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-上传"><a href="#5-上传" class="headerlink" title="5.上传"></a>5.上传</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//5.将本地资源(文件 or 目录)【上传】到 HDFS上</span><br><span class="line">//currDir:当前目录</span><br><span class="line">//destDir:目标目录</span><br><span class="line">public void uploadRecursive(File currDir,Path destDir,int currDepth,int maxDepth) throws IOException &#123;</span><br><span class="line">    if (maxDepth&lt;=0 &amp;&amp; currDepth&gt;maxDepth)&#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    for (File res : currDir.listFiles()) &#123;</span><br><span class="line">        if (res.isDirectory())&#123;</span><br><span class="line">            uploadRecursive(res,destDir,currDepth+1,maxDepth);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            fileSystem.copyFromLocalFile(new Path(res.getPath()),destDir);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void upload(String localPath,String dfsPath,boolean recursive,int...maxDepth) throws IOException &#123;</span><br><span class="line">        //判断</span><br><span class="line">        File res = new File(localPath);//上传对象</span><br><span class="line">        if (!res.exists())&#123;</span><br><span class="line">            throw new IOException(&quot;you can&#x27;t upload the localPath that is not exist&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        if (type(dfsPath)!= TYPE.DIRECTORY)&#123;</span><br><span class="line">            throw new IOException(&quot;you can&#x27;t upload any resource to a file that it is directory&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        Path local=new Path(localPath);</span><br><span class="line">        Path remote=new Path(dfsPath);</span><br><span class="line">        if (res.isFile())&#123;</span><br><span class="line">            fileSystem.copyFromLocalFile(local,remote);</span><br><span class="line">        &#125;else if (recursive)&#123;</span><br><span class="line">            int max = maxDepth[0];</span><br><span class="line">            max = max&lt;0?0:max;</span><br><span class="line">            uploadRecursive(res,remote,1,max);</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            throw new IOException(&quot;you can&#x27;t upload a directory when parameter recursive was set false&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="6-下载"><a href="#6-下载" class="headerlink" title="6.下载"></a>6.下载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//6.从HDFS上【下载】至本地</span><br><span class="line">public void download(String dfsPath,String localDir) throws IOException &#123;</span><br><span class="line">    //判断</span><br><span class="line">    if (exists(dfsPath))&#123;</span><br><span class="line">        File local;</span><br><span class="line">        if ((local=new File(localDir)).exists())&#123;</span><br><span class="line">            Path remote = new Path(dfsPath);</span><br><span class="line">            Path localPath = new Path(localDir);</span><br><span class="line">            fileSystem.copyToLocalFile(remote,localPath);</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            throw new IOException(&quot;you can&#x27;t download a resource to local file&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        throw new IOException(&quot;you can&#x27;t download a remote resource that is not exist&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-关闭"><a href="#7-关闭" class="headerlink" title="7.关闭"></a>7.关闭</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//7.关闭</span><br><span class="line">public void close()&#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        fileSystem.close();</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="“HDFS类”实际操作"><a href="#“HDFS类”实际操作" class="headerlink" title="“HDFS类”实际操作"></a>“HDFS类”实际操作</h1><h2 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class HDFSTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Map&lt;String,String&gt; config = new HashMap&lt;&gt;();</span><br><span class="line">        config.put(&quot;dfs.replication&quot;,&quot;3&quot;);//每个HDFS数据块的副本数量</span><br><span class="line">        config.put(&quot;dfs.blocksize&quot;,&quot;128M&quot;);//HDFS块的大小</span><br><span class="line">        final String URL = &quot;hdfs://single:9000&quot;;</span><br><span class="line"></span><br><span class="line">        HDFS hdfs = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            hdfs = new HDFS(URL,config);</span><br><span class="line"></span><br><span class="line">            //以下内容为操作内容：</span><br><span class="line">            //----------------------------------------------------------------</span><br><span class="line">            //创建目录</span><br><span class="line">            hdfs.mkdirIfNotExist(&quot;/hadoop/data/h&quot;);</span><br><span class="line">            ...</span><br><span class="line">            //----------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            if (Objects.nonNull(hdfs))&#123;</span><br><span class="line">                hdfs.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="效果展示（以创建目录为例）"><a href="#效果展示（以创建目录为例）" class="headerlink" title="效果展示（以创建目录为例）"></a>效果展示（以创建目录为例）</h2><h3 id="创建前示意图"><a href="#创建前示意图" class="headerlink" title="创建前示意图"></a>创建前示意图</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%9B%E5%BB%BA%E5%89%8D.png" alt="创建前示意图"></p><h3 id="创建后示意图"><a href="#创建后示意图" class="headerlink" title="创建后示意图"></a>创建后示意图</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%9B%E5%BB%BA%E5%90%8E.png" alt="创建后示意图"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> HDFS </tag>
            
            <tag> Java </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据之Hadoop（HDFS写文件）</title>
      <link href="/2024/01/11/HDFS%E5%86%99%E6%96%87%E4%BB%B6/"/>
      <url>/2024/01/11/HDFS%E5%86%99%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="HDFS写文件操作原理图"><a href="#HDFS写文件操作原理图" class="headerlink" title="HDFS写文件操作原理图"></a>HDFS写文件操作原理图</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/HDFS%E5%86%99%E6%96%87%E4%BB%B6%E7%89%88%E6%9C%AC2.png" alt="HDFS写文件"></p><h1 id="HDFS写文件过程讲解"><a href="#HDFS写文件过程讲解" class="headerlink" title="HDFS写文件过程讲解"></a>HDFS写文件过程讲解</h1><p>**1.**客户端向NameNode请求上传a.txt文件<br>**2.**NameNode会进行校验【所传的目录是否存在，是否存的下该文件…】<br>**3.**验证成功，会告知客户端可以上传<br>**4.**客户端将要上传的文件切块<br>**5.**客户端会携带block1与其最近的DN建立连接，并验证是否可以上传数据<br>**6.**若可以，会从该DN向其他的DN进行请求是否可存数据<br>**7.**都可以存放，则从最后一个DN向前依次存放数据，并带回反馈(ack确认码)<br>**8.**最后从首个DN处回应客户端，若反馈数(ack确认码数)等于DN总数，则表示完成<br>**9.**重复该过程，将其他block存放<br>**10.**结束后，客户端调用close()方法，结束hdfs写文件的过程</p><h1 id="HDFS写文件的命令呈现"><a href="#HDFS写文件的命令呈现" class="headerlink" title="HDFS写文件的命令呈现"></a>HDFS写文件的命令呈现</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put 文件所在的路径 去处的路径</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> HDFS </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据之Hadoop（HDFS读文件）</title>
      <link href="/2024/01/10/HDFS%E8%AF%BB%E6%96%87%E4%BB%B6/"/>
      <url>/2024/01/10/HDFS%E8%AF%BB%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="HDFS读文件操作原理图"><a href="#HDFS读文件操作原理图" class="headerlink" title="HDFS读文件操作原理图"></a>HDFS读文件操作原理图</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/HDFS%E8%AF%BB%E6%96%87%E4%BB%B6%E7%89%88%E6%9C%AC2.png"></p><h1 id="HDFS读文件过程讲解"><a href="#HDFS读文件过程讲解" class="headerlink" title="HDFS读文件过程讲解"></a>HDFS读文件过程讲解</h1><p>**1.**客户端向NameNode请求下载a.txt文件<br>**2.**NmaeNode会通过逻辑映射关系来找到a.txt所对应的block1与block2所对应的id<br>随后通过物理映射关系来确认每个id所对应的存储在DN的全路径<br>并返还给客户端一个较近较闲置的DN<br>(先返还DN1所对应的全路径，DN1操作完后，再返回DN2所对应的全路径，<br>以此类推，具有先后顺序)<br>**3.**客户端拿到block1在DN1对应的全路径后，读取数据块block1<br>**4.**将数据传回客户端<br>**5.**客户端将block1的数据传入本地文件<br>**6.**重复2~4的过程，客户端获取block2的数据<br>**7.**将读到的block2数据追加到block1的后面<br>**8.**文件a.txt完整后，hdfs读取结束。</p><h1 id="HDFS读文件的命令呈现"><a href="#HDFS读文件的命令呈现" class="headerlink" title="HDFS读文件的命令呈现"></a>HDFS读文件的命令呈现</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -get 文件路径 去处的路径</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> HDFS </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据之Hadoop组成</title>
      <link href="/2024/01/09/hadoop%E7%9A%84%E7%BB%84%E6%88%90/"/>
      <url>/2024/01/09/hadoop%E7%9A%84%E7%BB%84%E6%88%90/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Hadoop组成"><a href="#1-Hadoop组成" class="headerlink" title="1.Hadoop组成"></a>1.Hadoop组成</h1><p>Hadoop主要由<strong>HDFS(分布式文件系统)</strong> , <strong>MapReduce(分布式计算框架)</strong> , <strong>YARN(资源管理器)</strong> 这三个核心组件构成</p><h2 id="1-1-HDFS概述"><a href="#1-1-HDFS概述" class="headerlink" title="1.1 HDFS概述"></a>1.1 HDFS概述</h2><p><strong>HDFS</strong>，全名为Hadoop Distributed File System，是一个hadoop分布式文件系统，用于文件存储。</p><p>HDFS含有三个服务，分别为NameNode，DataNode，Secondary NameNode</p><p>**1.NameNode (NN)**：元数据节点</p><p>&ensp;&ensp;&ensp;&ensp;• NameNode 是HDFS的“大脑”，存储文件的元数据，如<strong>文件名</strong>，<strong>位置</strong>，<strong>大小</strong>，<strong>文件目录结构</strong>，<strong>文件属性</strong>（生成时间、副本数、文件权限），以及每个文件的<strong>块列表</strong>和<strong>块所在的DataNode</strong>等。</p><p>&ensp;&ensp;&ensp;&ensp;• 一个HDFS集群只有一个Active的NameNode</p><p> **2.DataNode (DN)**：数据节点</p><p>&ensp;&ensp;&ensp;&ensp; • 数据存储节点，保存和检索Block</p><p>&ensp; &ensp;&ensp;&ensp;• 一个集群可以有多个数据节点</p><p>**3.Secondary NameNode (SNN)**：从元数据节点</p><p>&ensp;&ensp;&ensp;&ensp;• 定期合并NameNode的edit logs（编辑日志）到fsimage（镜像）文件中，以防止编辑日志文件过大影响性能</p><p>&ensp;&ensp;&ensp;&ensp;• 辅助NameNode将内存中元数据信息持久化</p><p>&ensp;&ensp;&ensp;&ensp;• 协助优化性能（即是SNN失效，整个系统仍然可用）</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/HDFS%E6%9E%B6%E6%9E%84.png" alt="HDFS架构"></p><h2 id="1-2-MapReduce概述"><a href="#1-2-MapReduce概述" class="headerlink" title="1.2 MapReduce概述"></a>1.2 MapReduce概述</h2><p><strong>MapReduce</strong>，是分布式计算框架。</p><p><strong>设计思路：</strong>分而治之</p><p><strong>组成：</strong>每一个job包含 Map 与 Reduce 两个部分，其中shuffle是包含在map与reduce之间的中间过程。</p><h2 id="1-3-YARN概述"><a href="#1-3-YARN概述" class="headerlink" title="1.3 YARN概述"></a>1.3 YARN概述</h2><p><strong>YARN</strong>，全名为Yet Another Resource Negotiator，是Hadoop的集群资源管理器。</p><p>**核心思想:**将资源管理和任务的监控和调度分离.</p><p><strong>由来：</strong>由于Hadoop1.x版本中的问题在于资源问题，主要依靠MapReduce来完成，导致JobTracker压力过大。因此，在Hadoop2.x版本中添加了YARN，用于负责集群资源管理。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/YARN%E6%A6%82%E6%8B%AC.png"></p><h1 id="2-Hadoop整体认知"><a href="#2-Hadoop整体认知" class="headerlink" title="2.Hadoop整体认知"></a>2.Hadoop整体认知</h1><p>1.分布式：<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;存储：HDFS【hadoop分布式文件系统】（Namenode + Datanode）<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;计算：MapReduce ： map + shuffle + reduce &#x3D;&gt; 慢，但稳定</p><p>2.面向于数据（上传|下载文件,创建目录操作）：</p><p>&ensp;&ensp;&ensp;管理数据</p><p>&ensp;&ensp;&ensp;NameNode&ensp;&ensp;&ensp;*2&ensp;&ensp;(Active | Standby *N)【一般为2个左右]&ensp;&ensp;&ensp;&#x3D;&gt; 老大</p><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;DataNode &ensp;&ensp;&ensp;*N【可以有多个】&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&#x3D;&gt;小弟</p><p>3.面向于服务：</p><p>&ensp;&ensp;&ensp;管理资源和任务</p><p>&ensp;&ensp;&ensp;YARN：</p><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;ResourceManager：管资源（CPU,MEM,DISK…）&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&#x3D;&gt;老大</p><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;applicationManager：管任务（计算）&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&#x3D;&gt;老大</p><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;nodemanager&ensp;&ensp;&ensp;*N【可以有多个】&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&#x3D;&gt;小弟</p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据之初识Hadoop</title>
      <link href="/2024/01/06/hadoop%E5%88%9D%E6%AD%A5%E4%BA%86%E8%A7%A3/"/>
      <url>/2024/01/06/hadoop%E5%88%9D%E6%AD%A5%E4%BA%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="何为Hadoop"><a href="#何为Hadoop" class="headerlink" title="何为Hadoop"></a>何为Hadoop</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hadoop是一个开源的【分布式系统架构】</span><br><span class="line">解决海量数据【存储】和海量数据【计算】的问题</span><br></pre></td></tr></table></figure><h1 id="Hadoop-vs-RDBMS"><a href="#Hadoop-vs-RDBMS" class="headerlink" title="Hadoop vs RDBMS"></a>Hadoop vs RDBMS</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hadoop%E4%B8%8ERDBMS%E5%AF%B9%E6%AF%94.png"></p><h1 id="Hadoop特征"><a href="#Hadoop特征" class="headerlink" title="Hadoop特征"></a>Hadoop特征</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">• 高扩展性: 在集群间分配任务数据，可方便的扩展数以千计的节点</span><br><span class="line"></span><br><span class="line">• 高可靠性: Hadoop底层维护多个数据副本</span><br><span class="line"></span><br><span class="line">• 高容错性: Hadoop框架能够自动将失败的任务重新分配</span><br><span class="line"></span><br><span class="line">• 低成本: Hadoop架构允许部署在廉价的机器上</span><br><span class="line"></span><br><span class="line">• 灵活，可存储任意类型数据</span><br><span class="line"></span><br><span class="line">• 开源，社区活跃</span><br></pre></td></tr></table></figure><h1 id="Hadoop核心组件-Hadoop架构"><a href="#Hadoop核心组件-Hadoop架构" class="headerlink" title="Hadoop核心组件(Hadoop架构)"></a>Hadoop核心组件(Hadoop架构)</h1><pre><code>Common：支持所有其他模块的公共工具程序HDFS:分布式文件系统，解决分布式存储MapReduce：分布式计算框架YARN：分布式资源管理系统,在Hadoop 2.x中引入</code></pre><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hadoop%E7%BB%84%E6%88%90.png"></p><h1 id="Hadoop生态圈"><a href="#Hadoop生态圈" class="headerlink" title="Hadoop生态圈"></a>Hadoop生态圈</h1><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/hadoop%E7%94%9F%E6%80%81%E5%9C%88.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">存储: HDFS，分布式文件系统，用于存储大规模数据</span><br><span class="line">查询：</span><br><span class="line">Hive: Hive是Hadoop生态系统的数据仓库工具，它提供了类似SQL的查询语言，允许用户在Hadoop中执行复杂查询。</span><br><span class="line">Pig: Pig是另一个用于数据分析的工具，它使用一种名为Pig Latin的脚本语言来执行数据流操作。</span><br><span class="line">...</span><br><span class="line">计算: MapReduce</span><br><span class="line">监控: Ambari</span><br><span class="line">协调: ZooKeeper</span><br><span class="line">调度: YARN</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> hadoop </tag>
            
            <tag> 离线数仓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>八大经典排序算法</title>
      <link href="/2023/12/30/%E5%85%AB%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95(Java)/"/>
      <url>/2023/12/30/%E5%85%AB%E5%A4%A7%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95(Java)/</url>
      
        <content type="html"><![CDATA[<h1 id="1-冒泡排序"><a href="#1-冒泡排序" class="headerlink" title="1.冒泡排序"></a>1.冒泡排序</h1><h2 id="冒泡排序的思路"><a href="#冒泡排序的思路" class="headerlink" title="冒泡排序的思路"></a>冒泡排序的思路</h2><p>​重复地遍历要排序的列表，一次比较两个元素，并根据大小交换它们的位置，直到整个列表按照升序或降序排列。下面是冒泡排序的基本步骤：</p><ol><li><strong>比较相邻元素</strong>： 从列表的第一个元素开始，比较相邻的两个元素。</li><li><strong>交换位置</strong>： 如果顺序不符合要求（升序或降序），则交换这两个元素的位置。</li><li><strong>移动到下一对相邻元素</strong>： 继续比较和交换列表中的下一对相邻元素，直到达到列表的末尾。</li><li><strong>重复遍历</strong>： 重复以上步骤，每一次遍历都会使列表中最大（或最小）的元素沉到列表的最后。</li><li><strong>减少遍历范围</strong>： 每完成一轮遍历，可以缩小待排序部分的范围，因为最大（或最小）的元素已经确定其位置，不再参与后续的比较。</li></ol><p>这个过程就像是冒泡一样，较大（或较小）的元素会像气泡一样逐渐上浮到正确的位置。</p><h2 id="冒泡排序代码"><a href="#冒泡排序代码" class="headerlink" title="冒泡排序代码"></a>冒泡排序代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sort</span> &#123;</span><br><span class="line">    <span class="comment">//1.冒泡排序</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] bubblingSort(<span class="type">int</span>... ns)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;ns.length-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;ns.length-<span class="number">1</span>-i;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(ns[j]&gt;ns[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="type">int</span> t=ns[j];</span><br><span class="line">                    ns[j]=ns[j+<span class="number">1</span>];</span><br><span class="line">                    ns[j+<span class="number">1</span>]=t;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ns;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a=&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">7</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(bubblingSort(a)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C.png"></p><h1 id="2-选择排序"><a href="#2-选择排序" class="headerlink" title="2.选择排序"></a>2.选择排序</h1><h2 id="选择排序的思路"><a href="#选择排序的思路" class="headerlink" title="选择排序的思路"></a>选择排序的思路</h2><p>基本思路步骤：</p><ol><li><strong>遍历数组：</strong> 从数组的起始位置开始，将第一个元素视为当前最小（或最大）的元素。</li><li><strong>找到最小（或最大）元素：</strong> 遍历未排序的部分，找到比当前最小（或最大）元素更小（或更大）的元素。</li><li><strong>交换位置：</strong> 将找到的最小（或最大）元素与当前位置的元素交换位置。</li><li><strong>移动到下一个位置：</strong> 将当前位置移动到下一个未排序的位置，继续从步骤 1 开始。</li><li><strong>重复直到排序完成：</strong> 重复以上步骤，每次找到未排序部分的最小（或最大）元素并将其放到已排序部分的末尾，直到整个数组都有序。</li></ol><p>选择排序的核心思想是每次从未排序部分选择一个最小（或最大）的元素，然后将其放到已排序部分的末尾。这个过程保证在每一轮中，已排序部分都会增加一个元素，最终达到整个数组的有序状态。</p><h2 id="选择排序代码"><a href="#选择排序代码" class="headerlink" title="选择排序代码"></a>选择排序代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sort</span> &#123;</span><br><span class="line">    <span class="comment">//2.选择排序</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] selectSort(<span class="type">int</span>... array)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,maxPox,maxValuePos;i&lt;array.length;i++)&#123;</span><br><span class="line">            maxPox=array.length-<span class="number">1</span>-i;</span><br><span class="line">            maxValuePos=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= maxPox ; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array[j]&gt;array[maxValuePos])&#123;</span><br><span class="line">                    maxValuePos=j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(maxPox!=maxValuePos)&#123;</span><br><span class="line">                <span class="type">int</span> t=array[maxPox];</span><br><span class="line">                array[maxPox]=array[maxValuePos];</span><br><span class="line">                array[maxValuePos]=t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a=&#123;<span class="number">1</span>,<span class="number">31</span>,<span class="number">42</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">16</span>,<span class="number">17</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(selectSort(a)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示-1"><a href="#结果展示-1" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C1.png"></p><h1 id="3-插入排序"><a href="#3-插入排序" class="headerlink" title="3.插入排序"></a>3.插入排序</h1><h2 id="插入排序的思路"><a href="#插入排序的思路" class="headerlink" title="插入排序的思路"></a>插入排序的思路</h2><p>基本思路步骤：</p><ol><li><strong>初始状态</strong>： 将数组分为已排序部分和未排序部分。初始时，已排序部分只包含第一个元素，而未排序部分包含其余的元素。</li><li><strong>逐步构建有序序列</strong>： 从未排序部分取出第一个元素，将其插入到已排序部分的正确位置，使得已排序部分仍然保持有序。</li><li><strong>比较并移动</strong>： 将取出的元素与已排序部分的元素逐一比较，找到其正确的插入位置。为了插入，可能需要将比它大的元素依次向右移动，为新元素腾出插入的位置。</li><li><strong>重复步骤 2-3</strong>： 重复以上步骤，每次取出未排序部分的一个元素，插入到已排序部分的正确位置。这样，已排序部分逐渐增加，未排序部分逐渐减小。</li><li><strong>直到排序完成</strong>： 重复上述过程，直到未排序部分为空，整个数组就被排序完成了。</li></ol><p>插入排序的核心思想是将元素逐个插入到已经有序的部分中，通过不断地扩大已排序部分的范围，最终完成整个数组的排序。</p><h2 id="插入排序代码"><a href="#插入排序代码" class="headerlink" title="插入排序代码"></a>插入排序代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sort</span> &#123;</span><br><span class="line">    <span class="comment">//3.插入排序</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] inserSort(<span class="type">int</span>... array)&#123;</span><br><span class="line">        <span class="type">int</span> i,j;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt; array.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[i]&gt;=array[i-<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> t=array[i];</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            <span class="keyword">for</span>(j=i-<span class="number">1</span>;j&gt;=<span class="number">0</span>&amp;&amp;array[j]&gt;t;j--)&#123;</span><br><span class="line">                array[j+<span class="number">1</span>]=array[j];</span><br><span class="line">            &#125;</span><br><span class="line">            array[j+<span class="number">1</span>]=t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a=&#123;<span class="number">94</span>,<span class="number">54</span>,<span class="number">52</span>,<span class="number">36</span>,<span class="number">17</span>,<span class="number">4</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(inserSort(a)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示-2"><a href="#结果展示-2" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C2.png"></p><h1 id="4-希尔排序"><a href="#4-希尔排序" class="headerlink" title="4.希尔排序"></a>4.希尔排序</h1><h2 id="希尔排序的思路"><a href="#希尔排序的思路" class="headerlink" title="希尔排序的思路"></a>希尔排序的思路</h2><p>希尔排序是一种改进的插入排序算法，其核心思想是通过间隔逐渐减小的方式，对子序列进行插入排序，最终完成整个数组的排序。下面是希尔排序的基本思路：</p><ol><li><strong>确定间隔</strong>： 选择一个初始的间隔（也称为增量），通常将数组长度除以2，并逐渐减小这个间隔。</li><li><strong>对子序列进行插入排序</strong>： 根据确定的间隔，将数组分成若干个子序列，对每个子序列进行插入排序。这意味着对于每个子序列，相隔间隔的元素会被比较和交换位置。</li><li><strong>减小间隔</strong>： 缩小间隔，重复步骤 2。持续缩小间隔并对子序列进行插入排序，直到间隔为1。</li><li><strong>最后一次插入排序</strong>： 当间隔为1时，希尔排序变为普通的插入排序，但此时数组已经相对有序，插入排序的效率会比较高。</li></ol><h2 id="希尔排序代码"><a href="#希尔排序代码" class="headerlink" title="希尔排序代码"></a>希尔排序代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">public class Sort &#123;</span><br><span class="line">    //4.希尔排序</span><br><span class="line">    public static int[] shellSort(int... array)&#123;</span><br><span class="line">        int step = array.length,t,i;</span><br><span class="line">        while(step&gt;1)&#123;</span><br><span class="line">            step/=2;</span><br><span class="line">            for(i=0 ; i+step &lt; array.length ; i++)&#123;</span><br><span class="line">                if(array[i]&gt;array[i+step])&#123;</span><br><span class="line">                    t=array[i];</span><br><span class="line">                    array[i]=array[i+step];</span><br><span class="line">                    array[i+step]=t;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for(i=1;i&lt;array.length;i++)&#123;</span><br><span class="line">            if(array[i]&gt;=array[i-1])&#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            int low=0;</span><br><span class="line">            int high=i-1,mid;</span><br><span class="line">            while(low&lt;high)&#123;</span><br><span class="line">                mid=low+(high-low)/2;</span><br><span class="line">                if(array[i]&lt;=array[mid])&#123;</span><br><span class="line">                    high=mid;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    low=mid+1;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            int v=array[i];</span><br><span class="line">            System.arraycopy(array,low,array,low+1,i-low);</span><br><span class="line">            array[low]=v;</span><br><span class="line">        &#125;</span><br><span class="line">        return array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int[] a=&#123;53,51,52,54,82,7,9&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(shellSort(a)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示-3"><a href="#结果展示-3" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C3.png"></p><h1 id="5-计数排序"><a href="#5-计数排序" class="headerlink" title="5.计数排序"></a>5.计数排序</h1><h2 id="计数排序的思路"><a href="#计数排序的思路" class="headerlink" title="计数排序的思路"></a>计数排序的思路</h2><p>计数排序的基本思路：</p><ol><li><strong>确定取值范围：</strong> 遍历整个待排序的数组，确定数组中元素的取值范围，找到最小值和最大值。</li><li><strong>创建计数数组：</strong> 创建一个计数数组，其长度为取值范围的大小，用于统计原始数组中每个元素出现的次数。</li><li><strong>统计元素个数：</strong> 遍历原始数组，将每个元素出现的次数记录到计数数组中，计数数组的索引对应于元素的值。</li><li><strong>累加计数数组：</strong> 对计数数组进行累加操作，每个位置的值等于其前面所有位置值之和。这一步的目的是确定每个元素在排序后的数组中的位置。</li><li><strong>构建有序数组：</strong> 创建一个与原始数组等长的临时数组，遍历原始数组，根据累加计数数组确定每个元素在有序数组中的位置，同时更新计数数组中对应元素的计数。</li><li><strong>得到排序结果：</strong> 此时，临时数组就是排序完成的结果。</li></ol><h2 id="计数排序的代码"><a href="#计数排序的代码" class="headerlink" title="计数排序的代码"></a>计数排序的代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public class Sort &#123;</span><br><span class="line">    //5.计数排序</span><br><span class="line">    public static int[] countingSort(int... array)&#123;</span><br><span class="line">        int max=array[0],i,j;</span><br><span class="line">        for(i=1;i&lt;array.length;i++)&#123;</span><br><span class="line">            if(array[i]&gt;max)&#123;</span><br><span class="line">                max=array[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //新建max+1的整数数组</span><br><span class="line">        int[] tempArray = new int[max+1];</span><br><span class="line">        for (i = 0; i &lt; array.length; i++) &#123;</span><br><span class="line">            tempArray[array[i]]++;</span><br><span class="line">        &#125;</span><br><span class="line">        for (i = 0,j=0; i &lt; tempArray.length; i++) &#123;</span><br><span class="line">            for (int k = 0; k &lt; tempArray[i]; k++) &#123;</span><br><span class="line">                array[j++]=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int[] a=&#123;52,1,0,49,70,62,81,17&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(countingSort(a)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示-4"><a href="#结果展示-4" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C4.png"></p><h1 id="6-基数排序"><a href="#6-基数排序" class="headerlink" title="6.基数排序"></a>6.基数排序</h1><h2 id="基数排序的思路"><a href="#基数排序的思路" class="headerlink" title="基数排序的思路"></a>基数排序的思路</h2><p>基数排序的基本思路：</p><ol><li><strong>按位排序：</strong> 基数排序将待排序的数字按照位数拆分为个位、十位、百位等各个数字位。它从最低位（个位）开始，依次向更高位进行排序。</li><li><strong>按位分组：</strong> 将所有待排序的数字按照当前位的数值进行分组，比如根据个位数值将数字分成 0 到 9 这十个桶（或队列）。</li><li><strong>依次收集：</strong> 从 0 到 9 的顺序，依次收集各个桶中的数字。首先收集个位为 0 的所有数字，然后是个位为 1 的，依此类推。这样就完成了一轮按个位数的排序。</li><li><strong>重复步骤：</strong> 对十位、百位等其他位数重复上述过程，直到所有位数都被遍历完毕。每一轮按位分组和收集都会逐步使得数字序列变得更加有序。</li><li><strong>得到排序结果：</strong> 当所有位数都经过排序后，整个数组就被排序完成了。</li></ol><h2 id="计数排序代码"><a href="#计数排序代码" class="headerlink" title="计数排序代码"></a>计数排序代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public class Sort &#123;</span><br><span class="line">    //6.基数排序</span><br><span class="line">    public static int[] radixSort(int... array)&#123;</span><br><span class="line">        int i,j;</span><br><span class="line">        int max1=array[0];</span><br><span class="line">        for(i=1;i&lt;array.length;i++)&#123;</span><br><span class="line">            if(array[i]&gt;max1)&#123;</span><br><span class="line">                max1=array[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        int size=0;</span><br><span class="line">        while(max1&gt;=1)&#123;</span><br><span class="line">            max1/=10;</span><br><span class="line">            size++;</span><br><span class="line">        &#125;</span><br><span class="line">        int[][] buckets = new int[10][array.length];</span><br><span class="line">        int[] ixs=new int[10];//计数器</span><br><span class="line"></span><br><span class="line">        int u;</span><br><span class="line">        int sw;</span><br><span class="line">        for (i = 0; i &lt; size; i++) &#123;</span><br><span class="line">            u=(int)Math.pow(10,i);</span><br><span class="line">            for(j=0;j&lt;array.length;j++)&#123;</span><br><span class="line">                sw=(array[j]/u)%10;</span><br><span class="line">                buckets[sw][ixs[sw]++]=array[j];</span><br><span class="line">            &#125;</span><br><span class="line">            int m=0;</span><br><span class="line">            for(j=0;j&lt;ixs.length;j++)&#123;</span><br><span class="line">                for(int k=0;k&lt;ixs[j];k++)&#123;</span><br><span class="line">                    array[m++]=buckets[j][k];</span><br><span class="line">                &#125;</span><br><span class="line">                ixs[j]=0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int[] a=&#123;81,12,16,42,92,86,71,1&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(radixSort(a)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示-5"><a href="#结果展示-5" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C5.png"></p><h1 id="7-快速排序"><a href="#7-快速排序" class="headerlink" title="7.快速排序"></a>7.快速排序</h1><h2 id="快速排序的思路"><a href="#快速排序的思路" class="headerlink" title="快速排序的思路"></a>快速排序的思路</h2><p>快速排序的基本思路：</p><ol><li><strong>选择基准元素：</strong> 从数组中选择一个基准元素（pivot）。通常可以选择数组的第一个元素、最后一个元素或者随机选择。</li><li><strong>分割操作：</strong> 将数组中小于基准元素的元素移到基准元素的左边，大于基准元素的元素移到右边。这个过程称为分割操作。</li><li><strong>递归排序：</strong> 对基准元素左右两侧的子数组分别递归地进行快速排序。即，对左侧子数组重复步骤 1 和步骤 2，然后对右侧子数组也进行相同的操作，直到子数组的长度为 1 或 0。</li><li><strong>合并结果：</strong> 当所有子数组都有序时，整个数组就被排序完成了。</li></ol><p>快速排序的关键在于分割操作，它通过不断地将元素分离到基准元素的左右两侧，使得基准元素最终找到了自己在排序后数组中的正确位置。在递归排序的过程中，整个数组逐渐变得有序。</p><h2 id="快速排序代码"><a href="#快速排序代码" class="headerlink" title="快速排序代码"></a>快速排序代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class Sort &#123;</span><br><span class="line">    //7.快速排序</span><br><span class="line">    public static int mid(int[] array, int begin, int end)&#123;</span><br><span class="line">        int base=array[begin],mid=begin;</span><br><span class="line">        while(begin&lt;end)&#123;</span><br><span class="line">            while(begin&lt;end &amp;&amp; array[end]&gt;=base)&#123;</span><br><span class="line">                end--;</span><br><span class="line">            &#125;</span><br><span class="line">            while(begin&lt;end &amp;&amp; array[begin]&lt;=base)&#123;</span><br><span class="line">                begin++;</span><br><span class="line">            &#125;</span><br><span class="line">            if(begin&lt;end)&#123;</span><br><span class="line">                int t=array[begin];</span><br><span class="line">                array[begin]=array[end];</span><br><span class="line">                array[end]=t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(begin!=mid) &#123;</span><br><span class="line">            int t = array[begin];</span><br><span class="line">            array[begin] = array[mid];</span><br><span class="line">            array[mid] = t;</span><br><span class="line">        &#125;</span><br><span class="line">        return begin;</span><br><span class="line">    &#125;</span><br><span class="line">    public static int[] quickSort(int[] array,int begin,int end)&#123;</span><br><span class="line">        if(begin&gt;=end)&#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        final int mid=mid(array,begin,end);</span><br><span class="line">        quickSort(array, begin, mid-1);</span><br><span class="line">        quickSort(array, mid+1, end);</span><br><span class="line">        return array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int[] a=&#123;81,12,16,42,92,86,71,1&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(quickSort(a,0,a.length-1)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示-6"><a href="#结果展示-6" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C7.png"></p><h1 id="8-归并排序"><a href="#8-归并排序" class="headerlink" title="8.归并排序"></a>8.归并排序</h1><h2 id="归并排序的思路"><a href="#归并排序的思路" class="headerlink" title="归并排序的思路"></a>归并排序的思路</h2><p>归并排序的基本思路：</p><ol><li><strong>分解数组：</strong> 将待排序的数组分成两个大致相等的子数组，这是通过找到数组的中间位置来完成的。</li><li><strong>递归排序：</strong> 递归地对这两个子数组进行归并排序。这一步骤会将每个子数组继续分解成更小的子数组，并对其进行排序。</li><li><strong>合并子数组：</strong> 将排好序的两个子数组合并成一个有序的数组。这是通过比较两个子数组的首个元素，并将较小（或较大）的元素依次放入新的数组中完成的。</li><li><strong>递归返回：</strong> 重复上述过程，直到所有子数组都被合并成一个完整的有序数组。</li></ol><p>归并排序的关键在于合并操作，它确保了每次合并的两个子数组都是有序的。这样，当两个有序的子数组合并时，新的大数组也是有序的。</p><h2 id="归并排序代码"><a href="#归并排序代码" class="headerlink" title="归并排序代码"></a>归并排序代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public class Sort &#123;</span><br><span class="line">    //8.归并排序</span><br><span class="line">    public static int[] mergeSort(int[] array, int begin, int end)&#123;</span><br><span class="line">        //相遇(拆)</span><br><span class="line">        if(begin==end)&#123;</span><br><span class="line">            return new int[]&#123;array[end]&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        int mid=begin+(end-begin)/2;</span><br><span class="line">        int[] left=mergeSort(array,begin,mid);</span><br><span class="line">        int[] right=mergeSort(array,mid+1,end);</span><br><span class="line">        //并</span><br><span class="line">        int[] mix=new int[left.length+right.length];</span><br><span class="line">        int i=0,j=0,m=0;//m为新数组下标</span><br><span class="line">        while(i&lt;left.length&amp;&amp;j&lt;right.length)&#123;</span><br><span class="line">            mix[m++]=left[i]&lt;=right[j]?left[i++]:right[j++];</span><br><span class="line">        &#125;</span><br><span class="line">        //剩余</span><br><span class="line">        while(i&lt;left.length)&#123;</span><br><span class="line">            mix[m++]=left[i++];</span><br><span class="line">        &#125;</span><br><span class="line">        while(j&lt;right.length)&#123;</span><br><span class="line">            mix[m++]=right[j++];</span><br><span class="line">        &#125;</span><br><span class="line">        return mix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int[] a=&#123;6,59,81,75,84,17,71,1,54,36&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(mergeSort(a,0,a.length-1)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果展示-7"><a href="#结果展示-7" class="headerlink" title="结果展示"></a>结果展示</h2><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%BB%93%E6%9E%9C8.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习主线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图床搭建（gitee+PicGo）</title>
      <link href="/2023/12/29/gitee+%E5%9B%BE%E5%BA%8A/"/>
      <url>/2023/12/29/gitee+%E5%9B%BE%E5%BA%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="gitee操作"><a href="#gitee操作" class="headerlink" title="gitee操作"></a>gitee操作</h1><h2 id="新建一个gitee仓库"><a href="#新建一个gitee仓库" class="headerlink" title="新建一个gitee仓库"></a>新建一个gitee仓库</h2><p><strong>在gitee中新建一个仓库</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/image-20231229114138866.png"></p><p><strong>新建的仓库配置</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%96%B0%E5%BB%BA.png"></p><h2 id="私人令牌的设置"><a href="#私人令牌的设置" class="headerlink" title="私人令牌的设置"></a>私人令牌的设置</h2><p><strong>点击图像，选择“设置”选项</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/image-20231229115340444.png"></p><p><strong>选择左栏中的“私人令牌”选项</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%A7%81%E4%BA%BA.png"></p><p><strong>选择“生成新令牌”，进行配置</strong></p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%80%89%E6%8B%A9.png"></p><h3 id="一定要复制密钥"><a href="#一定要复制密钥" class="headerlink" title="一定要复制密钥"></a><strong>一定要复制密钥</strong></h3><h3 id="新建img文件夹"><a href="#新建img文件夹" class="headerlink" title="新建img文件夹"></a>新建img文件夹</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/img.png"></p><h2 id="PicGo操作"><a href="#PicGo操作" class="headerlink" title="PicGo操作"></a>PicGo操作</h2><h3 id="安装PicGo软件"><a href="#安装PicGo软件" class="headerlink" title="安装PicGo软件"></a>安装PicGo软件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://soft.3dmgame.com/down/263292.html</span><br></pre></td></tr></table></figure><h3 id="PicGo内部配置"><a href="#PicGo内部配置" class="headerlink" title="PicGo内部配置"></a>PicGo内部配置</h3><h4 id="选择“插件设置”进行配置"><a href="#选择“插件设置”进行配置" class="headerlink" title="选择“插件设置”进行配置"></a>选择“插件设置”进行配置</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/gitee%E5%86%85%E9%83%A8%E9%85%8D%E7%BD%AE.png"></p><h4 id="在“图床设置”中的”gitee“进行配置"><a href="#在“图床设置”中的”gitee“进行配置" class="headerlink" title="在“图床设置”中的”gitee“进行配置"></a>在“图床设置”中的”gitee“进行配置</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%9B%BE%E5%BA%8A.png"></p><h4 id="修改”上传区“中的方式"><a href="#修改”上传区“中的方式" class="headerlink" title="修改”上传区“中的方式"></a>修改”上传区“中的方式</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%B8%8A%E4%BC%A0.png"></p><h1 id="恭喜你，搭建完成了！"><a href="#恭喜你，搭建完成了！" class="headerlink" title="恭喜你，搭建完成了！"></a>恭喜你，搭建完成了！</h1>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客相关 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo常用命令</title>
      <link href="/2023/12/29/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2023/12/29/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo的安装"><a href="#hexo的安装" class="headerlink" title="hexo的安装"></a>hexo的安装</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g </span><br></pre></td></tr></table></figure><h1 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init BlogName</span><br></pre></td></tr></table></figure><h1 id="清空已经存在的hexo网站文件"><a href="#清空已经存在的hexo网站文件" class="headerlink" title="清空已经存在的hexo网站文件"></a>清空已经存在的hexo网站文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl</span><br></pre></td></tr></table></figure><h1 id="依据网页文件和新的css样式生成新的网站文件"><a href="#依据网页文件和新的css样式生成新的网站文件" class="headerlink" title="依据网页文件和新的css样式生成新的网站文件"></a>依据网页文件和新的css样式生成新的网站文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><h1 id="启动本地服务器查看效果"><a href="#启动本地服务器查看效果" class="headerlink" title="启动本地服务器查看效果"></a>启动本地服务器查看效果</h1><p><strong>可以在localhost：4000查看网站修改效果</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><h1 id="创建一篇文章"><a href="#创建一篇文章" class="headerlink" title="创建一篇文章"></a>创建一篇文章</h1><p>根目录的source里面的md文件可以修改文章内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;第一篇文章&quot; </span><br></pre></td></tr></table></figure><h1 id="安装上传到仓库的插件"><a href="#安装上传到仓库的插件" class="headerlink" title="安装上传到仓库的插件"></a>安装上传到仓库的插件</h1><p>只有这样，才可上传文章</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h1 id="发布文章"><a href="#发布文章" class="headerlink" title="发布文章"></a>发布文章</h1><p>一键部署并推送到gitee仓库上</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g --d</span><br></pre></td></tr></table></figure><p>分步骤上传至gitee仓库上</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">清除缓存文件(db.json)和已生成的静态文件(public)</span></span><br><span class="line">hexo cl</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成静态页面</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">上传至gitee仓库</span></span><br><span class="line">hexo d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">有了豆瓣电影模块后，命令变为：</span></span><br><span class="line">hexo clean &amp;&amp; hexo douban -m &amp;&amp; hexo g &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客相关 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitee(码云)部署</title>
      <link href="/2023/12/28/hexo+gitee(%E7%A0%81%E4%BA%91)%E4%B8%8A%E6%90%AD%E5%BB%BA/"/>
      <url>/2023/12/28/hexo+gitee(%E7%A0%81%E4%BA%91)%E4%B8%8A%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="1-仓库的创建"><a href="#1-仓库的创建" class="headerlink" title="1.仓库的创建"></a>1.仓库的创建</h1><ol><li><p>首先需要注册gitee（码云）的账号，然后在创建一个仓库。</p></li><li><p>注册账号我们可以直接进入码云官网：<a href="https://gitee.com/">https://gitee.com/</a></p><p>创建仓库</p><p>步骤一：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%BB%93%E5%BA%93%E5%88%9B%E5%BB%BA.png"></p><p>步骤二：</p></li></ol><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%88%9B%E5%BB%BA.png"></p><p>​步骤三：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%AE%A1%E7%90%862.png"></p><p>​步骤四：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%AF%AD%E8%A8%80.png"></p><h1 id="2-获取仓库地址"><a href="#2-获取仓库地址" class="headerlink" title="2.获取仓库地址"></a>2.获取仓库地址</h1><p>复制地址</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%A4%8D%E5%88%B6.png"></p><h1 id="3-修改配置文件"><a href="#3-修改配置文件" class="headerlink" title="3.修改配置文件"></a>3.修改配置文件</h1><p>在Blog主目录下找到 _config.yml 打开进行配置，在代码的最底下找到此处</p><p>修改为以下内容</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E9%85%8D%E7%BD%AE.png"></p><p>其中 repo 为刚复制的仓库地址</p><h1 id="4-开始部署"><a href="#4-开始部署" class="headerlink" title="4.开始部署"></a>4.开始部署</h1><h2 id="执行命令"><a href="#执行命令" class="headerlink" title="执行命令"></a>执行命令</h2><h3 id="生成密钥"><a href="#生成密钥" class="headerlink" title="生成密钥"></a>生成密钥</h3><p>在终端执行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;名字&quot;# 名字是任取的</span><br><span class="line"></span><br><span class="line">git config --global user.email &quot;邮箱&quot;     # 邮箱是你创建gitee用的邮箱</span><br><span class="line"></span><br><span class="line">ssh-keygen -t rsa -C &quot;邮箱&quot;# 邮箱是你创建gitee用的邮箱</span><br></pre></td></tr></table></figure><p><strong>注意：最后以个命令输入时，无需填写内容，一致按enter键即可</strong></p><p>密钥在 C:\Users\【你电脑的用户名】\ .ssh \ id_rsa.pub中</p><p>用 记事本 形式打开</p><p>复制里面的密钥（ctrl+A，ctrl+C）</p><p>在gitee中，进入“设置”选项</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E8%AE%BE%E7%BD%AE.png"></p><h3 id="填写密钥"><a href="#填写密钥" class="headerlink" title="填写密钥"></a>填写密钥</h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%AF%86%E9%92%A5.png"></p><h3 id="在创建博客的根目录下执行以下命令"><a href="#在创建博客的根目录下执行以下命令" class="headerlink" title="在创建博客的根目录下执行以下命令"></a>在创建博客的根目录下执行以下命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save </span><br><span class="line"></span><br><span class="line">hexo g  //生成网站文件</span><br><span class="line"></span><br><span class="line">hexo d  //上传到远程在码云上新建的仓库</span><br></pre></td></tr></table></figure><h1 id="5-开启pages功能"><a href="#5-开启pages功能" class="headerlink" title="5.开启pages功能"></a>5.开启pages功能</h1><h3 id="点击“服务”中“Gitee-Pages”"><a href="#点击“服务”中“Gitee-Pages”" class="headerlink" title="点击“服务”中“Gitee Pages”"></a><strong>点击“服务”中“Gitee Pages”</strong></h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/page.png"></p><h3 id="填写如下，进行更新，即可"><a href="#填写如下，进行更新，即可" class="headerlink" title="填写如下，进行更新，即可"></a><strong>填写如下，进行更新，即可</strong></h3><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E7%94%9F%E6%88%90.png"></p><h4 id="点击网页地址，这样我们就可以看到我们搭建的效果了"><a href="#点击网页地址，这样我们就可以看到我们搭建的效果了" class="headerlink" title="点击网页地址，这样我们就可以看到我们搭建的效果了"></a><strong>点击网页地址，这样我们就可以看到我们搭建的效果了</strong></h4>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客相关 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客的快速搭建</title>
      <link href="/2023/12/27/%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%90%AD%E5%BB%BA/"/>
      <url>/2023/12/27/%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h4 id="在搭建博客前，我们需要配置环境和安装一些工具"><a href="#在搭建博客前，我们需要配置环境和安装一些工具" class="headerlink" title="在搭建博客前，我们需要配置环境和安装一些工具"></a><strong>在搭建博客前，我们需要配置环境和安装一些工具</strong></h4><h1 id="1-基本环境与工具安装"><a href="#1-基本环境与工具安装" class="headerlink" title="1.基本环境与工具安装"></a>1.基本环境与工具安装</h1><h3 id="1、nodejs的安装"><a href="#1、nodejs的安装" class="headerlink" title="1、nodejs的安装"></a><strong>1、nodejs的安装</strong></h3><p>在以下官网处下载并安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://nodejs.org/zh-cn</span><br></pre></td></tr></table></figure><p>查看安装成功与否，在终端输入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p>呈现出类似以下效果，表示安装成功</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-12-27%20202149.png"></p><h3 id="2、git的安装"><a href="#2、git的安装" class="headerlink" title="2、git的安装"></a>2、git的安装</h3><p>在以下官网处下载并安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://git-scm.com/downloads</span><br></pre></td></tr></table></figure><p>查看安装成功与否，在终端输入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><p>呈现出类似以下效果，表示安装成功</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-12-27%20203103.png"></p><h3 id="3、hexo的安装"><a href="#3、hexo的安装" class="headerlink" title="3、hexo的安装"></a>3、hexo的安装</h3><p>在终端输入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>查看安装成功与否，在终端输入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo</span><br></pre></td></tr></table></figure><p>呈现出类似以下效果，表示安装成功</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-12-27%20203401.png"></p><h1 id="2-创建本地博客目录"><a href="#2-创建本地博客目录" class="headerlink" title="2.创建本地博客目录"></a>2.创建本地博客目录</h1><h3 id="首先，在目录下新建一个文件夹，名为Blog"><a href="#首先，在目录下新建一个文件夹，名为Blog" class="headerlink" title="首先，在目录下新建一个文件夹，名为Blog"></a>首先，在目录下新建一个文件夹，名为Blog</h3><p>如图：</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-12-27%20204114.png"></p><h3 id="其次，进入Blog文件夹内"><a href="#其次，进入Blog文件夹内" class="headerlink" title="其次，进入Blog文件夹内"></a>其次，进入Blog文件夹内</h3><h4 id="在Blog文件夹内右击点击“Git-Bash-Here”，进入编译状态"><a href="#在Blog文件夹内右击点击“Git-Bash-Here”，进入编译状态" class="headerlink" title="在Blog文件夹内右击点击“Git Bash Here”，进入编译状态"></a>在Blog文件夹内右击点击<strong>“Git Bash Here”</strong>，进入编译状态</h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-12-27%20203824.png"></p><h3 id="然后，输入以下内容"><a href="#然后，输入以下内容" class="headerlink" title="然后，输入以下内容"></a>然后，输入以下内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 初始化hexo环境,这时会在目录下自动生成hexo的文件</span><br><span class="line">hexo init</span><br><span class="line"></span><br><span class="line"># 清除缓存文件(db.json)和已生成的静态文件(public)</span><br><span class="line">hexo cl</span><br><span class="line"></span><br><span class="line"># 生成静态页面</span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line"># 生成本地服务</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><h4 id="实操展示"><a href="#实操展示" class="headerlink" title="实操展示"></a><strong>实操展示</strong></h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E6%98%BE%E7%A4%BA.png"></p><h4 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a><strong>效果展示</strong></h4><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-12-27%20210119.png"></p><p>就此，基于hexo的博客就完成了</p><h1 id="3、更换主题配置"><a href="#3、更换主题配置" class="headerlink" title="3、更换主题配置"></a>3、更换主题配置</h1><h3 id="挑选心仪的主题网址"><a href="#挑选心仪的主题网址" class="headerlink" title="挑选心仪的主题网址"></a>挑选心仪的主题网址</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hexo.io/themes/</span><br></pre></td></tr></table></figure><h3 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h3><h4 id="以butterfly主题为例"><a href="#以butterfly主题为例" class="headerlink" title="以butterfly主题为例"></a>以butterfly主题为例</h4><p>打开根目录中的 <code>_config.yml</code> 文件，找到 <code>theme</code> 将其修改为 <code>Butterfly</code> ，以后配置更改就在这里面。</p><p><img src="https://gitee.com/LemonWorld/picture/raw/master/img/%E4%B8%BB%E9%A2%98.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习支线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客相关 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>关于我</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<h2 id="作者介绍"><a href="#作者介绍" class="headerlink" title="作者介绍"></a>作者介绍</h2><p>大家好，我是Frimiku,主要的研究方向是大数据领域,建立个人网站的初衷是希望拥有一个能够有一个随时展示自己,同时记录各种技术文章,总结学习的内容和分享个人经历的个人小笔记;网站主内容覆盖关于<strong>大数据</strong>,<strong>前端</strong>,<strong>后端</strong>,<strong>人工智能</strong>等相关技术文章,同时也会分享一些电影,音乐,图片等偏个人兴趣爱好的内容。</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>我的图库</title>
      <link href="/gallery/index.html"/>
      <url>/gallery/index.html</url>
      
        <content type="html"><![CDATA[<div class="gallery-group-main"><figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">动漫</div>  <p>收藏的一些动漫壁紙</p>  <a href='/gallery/anime'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">电影</div>  <p>喜爱的电影圖片</p>  <a href='/gallery/films'></a>  </figcaption>  </figure>  </div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>目录</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐欣赏</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[<h2 id="我的歌单"><a href="#我的歌单" class="headerlink" title="我的歌单"></a>我的歌单</h2><div class="aplayer" data-id="7598312909" data-server="netease" data-type="playlist" data-mutex="true" data-preload="auto" data-theme="#3F51B5"></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>相关链接</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[:root {  --trans-light: rgba(255, 255, 255, 0.75);  --trans-dark: rgba(25, 25, 25, 0.6);  --border-style: 1px solid rgb(169, 169, 169);  --backdrop-filter: blur(5px) saturate(150%);}/* 翻页按钮居中 */#pagination {    width: 100%;    margin: auto;  }/* 一级菜单居中 */#nav .menus_items {  position: absolute !important;  width: fit-content !important;  left: 50% !important;  transform: translateX(-50%) !important;}/* 子菜单横向展示 */#nav .menus_items .menus_item:hover .menus_item_child {  display: flex !important;}/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */.menus_items .menus_item:nth-child(8) .menus_item_child {  left: -38px;}/* 黑夜霓虹灯 *//* 日间模式不生效 */[data-theme="light"] #site-name,[data-theme="light"] #site-title,[data-theme="light"] #site-subtitle,[data-theme="light"] #post-info {  animation: none;}/* 夜间模式生效 */[data-theme="dark"] #site-name,[data-theme="dark"] #site-title {  animation: light_15px 10s linear infinite;}[data-theme="dark"] #site-subtitle {  animation: light_10px 10s linear infinite;}[data-theme="dark"] #post-info {  animation: light_5px 10s linear infinite;}/* 关键帧描述 */@keyframes light_15px {  0% {    text-shadow: #5636ed 0 0 15px;  }  12.5% {    text-shadow: #11ee5e 0 0 15px;  }  25% {    text-shadow: #f14747 0 0 15px;  }  37.5% {    text-shadow: #f1a247 0 0 15px;  }  50% {    text-shadow: #f1ee47 0 0 15px;  }  50% {    text-shadow: #b347f1 0 0 15px;  }  62.5% {    text-shadow: #002afa 0 0 15px;  }  75% {    text-shadow: #ed709b 0 0 15px;  }  87.5% {    text-shadow: #39c5bb 0 0 15px;  }  100% {    text-shadow: #5636ed 0 0 15px;  }}@keyframes light_10px {  0% {    text-shadow: #5636ed 0 0 10px;  }  12.5% {    text-shadow: #11ee5e 0 0 10px;  }  25% {    text-shadow: #f14747 0 0 10px;  }  37.5% {    text-shadow: #f1a247 0 0 10px;  }  50% {    text-shadow: #f1ee47 0 0 10px;  }  50% {    text-shadow: #b347f1 0 0 10px;  }  62.5% {    text-shadow: #002afa 0 0 10px;  }  75% {    text-shadow: #ed709b 0 0 10px;  }  87.5% {    text-shadow: #39c5bb 0 0 10px;  }  100% {    text-shadow: #5636ed 0 0 10px;  }}@keyframes light_5px {  0% {    text-shadow: #5636ed 0 0 5px;  }  12.5% {    text-shadow: #11ee5e 0 0 5px;  }  25% {    text-shadow: #f14747 0 0 5px;  }  37.5% {    text-shadow: #f1a247 0 0 15px;  }  50% {    text-shadow: #f1ee47 0 0 5px;  }  50% {    text-shadow: #b347f1 0 0 5px;  }  62.5% {    text-shadow: #002afa 0 0 5px;  }  75% {    text-shadow: #ed709b 0 0 5px;  }  87.5% {    text-shadow: #39c5bb 0 0 5px;  }  100% {    text-shadow: #5636ed 0 0 5px;  }}/* 背景宇宙星光  */#universe{  display: block;  position: fixed;  margin: 0;  padding: 0;  border: 0;  outline: 0;  left: 0;  top: 0;  width: 100%;  height: 100%;  pointer-events: none;  /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */  z-index: -1;}/* 侧边栏个人信息卡片动态渐变色 */#aside-content > .card-widget.card-info {  background: linear-gradient(    -45deg,    #e8d8b9,    #eccec5,    #a3e9eb,    #bdbdf0,    #eec1ea  );  box-shadow: 0 0 5px rgb(66, 68, 68);  position: relative;  background-size: 400% 400%;  -webkit-animation: Gradient 10s ease infinite;  -moz-animation: Gradient 10s ease infinite;  animation: Gradient 10s ease infinite !important;}@-webkit-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@-moz-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}/* 黑夜模式适配 */[data-theme="dark"] #aside-content > .card-widget.card-info {  background: #191919ee;}/* 个人信息Follow me按钮 */#aside-content > .card-widget.card-info > #card-info-btn {  background-color: #3eb8be;  border-radius: 8px;}/* 首页文章卡片 */#recent-posts > .recent-post-item {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 25px;  border: var(--border-style);}/* 首页侧栏卡片 */#aside-content .card-widget {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 18px;  border: var(--border-style);}/* 文章页、归档页、普通页面 */div#post,div#page,div#archive {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border: var(--border-style);  border-radius: 20px;}/* 导航栏 */#page-header.nav-fixed #nav {  background: rgba(255, 255, 255, 0.75);  backdrop-filter: var(--backdrop-filter);}[data-theme="dark"] #page-header.nav-fixed #nav {  background: rgba(0, 0, 0, 0.7) !important;}/* 夜间模式遮罩 */[data-theme="dark"] #recent-posts > .recent-post-item,[data-theme="dark"] #aside-content .card-widget,[data-theme="dark"] div#post,[data-theme="dark"] div#archive,[data-theme="dark"] div#page {  background: var(--trans-dark);}/* 夜间模式页脚页头遮罩透明 */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* 阅读模式 */.read-mode #aside-content .card-widget {  background: rgba(158, 204, 171, 0.5) !important;}.read-mode div#post {  background: rgba(158, 204, 171, 0.5) !important;}/* 夜间模式下的阅读模式 */[data-theme="dark"] .read-mode #aside-content .card-widget {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}[data-theme="dark"] .read-mode div#post {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/universe.js"/>
      <url>/js/universe.js</url>
      
        <content type="html"><![CDATA[function dark() {window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var n,e,i,h,t=.05,s=document.getElementById("universe"),o=!0,a="180,184,240",r="226,225,142",d="226,225,224",c=[];function f(){n=window.innerWidth,e=window.innerHeight,i=.216*n,s.setAttribute("width",n),s.setAttribute("height",e)}function u(){h.clearRect(0,0,n,e);for(var t=c.length,i=0;i<t;i++){var s=c[i];s.move(),s.fadeIn(),s.fadeOut(),s.draw()}}function y(){this.reset=function(){this.giant=m(3),this.comet=!this.giant&&!o&&m(10),this.x=l(0,n-10),this.y=l(0,e),this.r=l(1.1,2.6),this.dx=l(t,6*t)+(this.comet+1-1)*t*l(50,120)+2*t,this.dy=-l(t,6*t)-(this.comet+1-1)*t*l(50,120),this.fadingOut=null,this.fadingIn=!0,this.opacity=0,this.opacityTresh=l(.2,1-.4*(this.comet+1-1)),this.do=l(5e-4,.002)+.001*(this.comet+1-1)},this.fadeIn=function(){this.fadingIn&&(this.fadingIn=!(this.opacity>this.opacityTresh),this.opacity+=this.do)},this.fadeOut=function(){this.fadingOut&&(this.fadingOut=!(this.opacity<0),this.opacity-=this.do/2,(this.x>n||this.y<0)&&(this.fadingOut=!1,this.reset()))},this.draw=function(){if(h.beginPath(),this.giant)h.fillStyle="rgba("+a+","+this.opacity+")",h.arc(this.x,this.y,2,0,2*Math.PI,!1);else if(this.comet){h.fillStyle="rgba("+d+","+this.opacity+")",h.arc(this.x,this.y,1.5,0,2*Math.PI,!1);for(var t=0;t<30;t++)h.fillStyle="rgba("+d+","+(this.opacity-this.opacity/20*t)+")",h.rect(this.x-this.dx/4*t,this.y-this.dy/4*t-2,2,2),h.fill()}else h.fillStyle="rgba("+r+","+this.opacity+")",h.rect(this.x,this.y,this.r,this.r);h.closePath(),h.fill()},this.move=function(){this.x+=this.dx,this.y+=this.dy,!1===this.fadingOut&&this.reset(),(this.x>n-n/4||this.y<0)&&(this.fadingOut=!0)},setTimeout(function(){o=!1},50)}function m(t){return Math.floor(1e3*Math.random())+1<10*t}function l(t,i){return Math.random()*(i-t)+t}f(),window.addEventListener("resize",f,!1),function(){h=s.getContext("2d");for(var t=0;t<i;t++)c[t]=new y,c[t].reset();u()}(),function t(){document.getElementsByTagName('html')[0].getAttribute('data-theme')=='dark'&&u(),window.requestAnimationFrame(t)}()};dark()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime.js"/>
      <url>/js/runtime.js</url>
      
        <content type="html"><![CDATA[var now=new Date;function createtime(){now.setTime(now.getTime()+1e3);var e=new Date("08/01/2022 00:00:00"),t=Math.trunc(234e8+(now-e)/1e3*17),a=(t/1496e5).toFixed(6),o=new Date("08/09/2022 00:00:00"),n=(now-o)/1e3/60/60/24,r=Math.floor(n),i=(now-o)/1e3/60/60-24*r,s=Math.floor(i);1==String(s).length&&(s="0"+s);var d=(now-o)/1e3/60-1440*r-60*s,l=Math.floor(d);1==String(l).length&&(l="0"+l);var g=(now-o)/1e3-86400*r-3600*s-60*l,b=Math.round(g);1==String(b).length&&(b="0"+b);let c="";c=s<18&&s>=9?`<img class='boardsign' src='https://sourcebucket.s3.ladydaily.com/badge/F小屋-科研摸鱼中.svg' title='什么时候能够实现财富自由呀~'><br> <div style="font-size:13px;font-weight:bold">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`:`<img class='boardsign' src='https://sourcebucket.s3.ladydaily.com/badge/F小屋-下班休息啦.svg' title='下班了就该开开心心地玩耍~'><br> <div style="font-size:13px;font-weight:bold">本站居然运行了 ${r} 天 ${s} 小时 ${l} 分 ${b} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${t} 千米，约为 ${a} 个天文单位 🚀</div>`,document.getElementById("workboard")&&(document.getElementById("workboard").innerHTML=c)}setInterval((()=>{createtime()}),1e3);]]></content>
      
    </entry>
    
    
  
</search>
